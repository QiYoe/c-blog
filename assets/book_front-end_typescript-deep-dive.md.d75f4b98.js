import{_ as s,o as n,c as a,a as l}from"./app.ca2e29f0.js";const i=JSON.parse('{"title":"\u6DF1\u5165\u7406\u89E3 TypeScript","description":"TypeScript \u6DF1\u5165\u7406\u89E3 TS","frontmatter":{"head":[["meta",{"name":"description","content":"TypeScript \u6DF1\u5165\u7406\u89E3 TS"}],["meta",{"name":"keywords","content":"TypeScript \u6DF1\u5165\u7406\u89E3 TS"}]]},"headers":[{"level":2,"title":"TypeScript \u9879\u76EE","slug":"typescript-\u9879\u76EE","link":"#typescript-\u9879\u76EE","children":[{"level":3,"title":"\u7F16\u8BD1\u4E0A\u4E0B\u6587","slug":"\u7F16\u8BD1\u4E0A\u4E0B\u6587","link":"#\u7F16\u8BD1\u4E0A\u4E0B\u6587","children":[]},{"level":3,"title":"\u58F0\u660E\u7A7A\u95F4","slug":"\u58F0\u660E\u7A7A\u95F4","link":"#\u58F0\u660E\u7A7A\u95F4","children":[]},{"level":3,"title":"\u6A21\u5757","slug":"\u6A21\u5757","link":"#\u6A21\u5757","children":[]},{"level":3,"title":"\u547D\u540D\u7A7A\u95F4","slug":"\u547D\u540D\u7A7A\u95F4","link":"#\u547D\u540D\u7A7A\u95F4","children":[]},{"level":3,"title":"\u52A8\u6001\u5BFC\u5165\u8868\u8FBE\u5F0F","slug":"\u52A8\u6001\u5BFC\u5165\u8868\u8FBE\u5F0F","link":"#\u52A8\u6001\u5BFC\u5165\u8868\u8FBE\u5F0F","children":[]}]},{"level":2,"title":"TypeScript \u7C7B\u578B\u7CFB\u7EDF","slug":"typescript-\u7C7B\u578B\u7CFB\u7EDF","link":"#typescript-\u7C7B\u578B\u7CFB\u7EDF","children":[{"level":3,"title":"\u6982\u89C8","slug":"\u6982\u89C8","link":"#\u6982\u89C8","children":[]},{"level":3,"title":"\u4ECEJavaScript \u8FC1\u79FB","slug":"\u4ECEjavascript-\u8FC1\u79FB","link":"#\u4ECEjavascript-\u8FC1\u79FB","children":[]},{"level":3,"title":"@types","slug":"types","link":"#types","children":[]},{"level":3,"title":"\u73AF\u5883\u58F0\u660E","slug":"\u73AF\u5883\u58F0\u660E","link":"#\u73AF\u5883\u58F0\u660E","children":[]},{"level":3,"title":"\u63A5\u53E3","slug":"\u63A5\u53E3-1","link":"#\u63A5\u53E3-1","children":[]},{"level":3,"title":"\u679A\u4E3E","slug":"\u679A\u4E3E","link":"#\u679A\u4E3E","children":[]},{"level":3,"title":"lib.d.ts","slug":"lib-d-ts","link":"#lib-d-ts","children":[]},{"level":3,"title":"\u51FD\u6570","slug":"\u51FD\u6570","link":"#\u51FD\u6570","children":[]},{"level":3,"title":"\u53EF\u8C03\u7528\u7684","slug":"\u53EF\u8C03\u7528\u7684","link":"#\u53EF\u8C03\u7528\u7684","children":[]},{"level":3,"title":"\u7C7B\u578B\u65AD\u8A00","slug":"\u7C7B\u578B\u65AD\u8A00","link":"#\u7C7B\u578B\u65AD\u8A00","children":[]},{"level":3,"title":"Freshness","slug":"freshness","link":"#freshness","children":[]},{"level":3,"title":"\u7C7B\u578B\u4FDD\u62A4","slug":"\u7C7B\u578B\u4FDD\u62A4","link":"#\u7C7B\u578B\u4FDD\u62A4","children":[]},{"level":3,"title":"\u5B57\u9762\u91CF\u7C7B\u578B","slug":"\u5B57\u9762\u91CF\u7C7B\u578B","link":"#\u5B57\u9762\u91CF\u7C7B\u578B","children":[]},{"level":3,"title":"readonly","slug":"readonly","link":"#readonly","children":[]},{"level":3,"title":"\u8303\u578B","slug":"\u8303\u578B-1","link":"#\u8303\u578B-1","children":[]},{"level":3,"title":"\u7C7B\u578B\u63A8\u65AD","slug":"\u7C7B\u578B\u63A8\u65AD","link":"#\u7C7B\u578B\u63A8\u65AD","children":[]},{"level":3,"title":"\u7C7B\u578B\u517C\u5BB9\u6027","slug":"\u7C7B\u578B\u517C\u5BB9\u6027","link":"#\u7C7B\u578B\u517C\u5BB9\u6027","children":[]},{"level":3,"title":"Never","slug":"never","link":"#never","children":[]},{"level":3,"title":"\u8FA8\u6790\u8054\u5408\u7C7B\u578B","slug":"\u8FA8\u6790\u8054\u5408\u7C7B\u578B-1","link":"#\u8FA8\u6790\u8054\u5408\u7C7B\u578B-1","children":[]},{"level":3,"title":"\u7D22\u5F15\u7B7E\u540D","slug":"\u7D22\u5F15\u7B7E\u540D","link":"#\u7D22\u5F15\u7B7E\u540D","children":[]},{"level":3,"title":"\u6D41\u52A8\u7684\u7C7B\u578B","slug":"\u6D41\u52A8\u7684\u7C7B\u578B","link":"#\u6D41\u52A8\u7684\u7C7B\u578B","children":[]},{"level":3,"title":"\u5F02\u5E38\u5904\u7406","slug":"\u5F02\u5E38\u5904\u7406","link":"#\u5F02\u5E38\u5904\u7406","children":[]},{"level":3,"title":"\u6DF7\u5408","slug":"\u6DF7\u5408","link":"#\u6DF7\u5408","children":[]},{"level":3,"title":"ThisType","slug":"thistype","link":"#thistype","children":[]}]},{"level":2,"title":"TypeScript \u7F16\u8BD1\u539F\u7406","slug":"typescript-\u7F16\u8BD1\u539F\u7406","link":"#typescript-\u7F16\u8BD1\u539F\u7406","children":[{"level":3,"title":"\u6982\u89C8","slug":"\u6982\u89C8-1","link":"#\u6982\u89C8-1","children":[]},{"level":3,"title":"\u7A0B\u5E8F","slug":"\u7A0B\u5E8F","link":"#\u7A0B\u5E8F","children":[]},{"level":3,"title":"\u62BD\u8C61\u8BED\u6CD5\u6811","slug":"\u62BD\u8C61\u8BED\u6CD5\u6811","link":"#\u62BD\u8C61\u8BED\u6CD5\u6811","children":[]},{"level":3,"title":"\u626B\u63CF\u5668","slug":"\u626B\u63CF\u5668","link":"#\u626B\u63CF\u5668","children":[]},{"level":3,"title":"\u89E3\u6790\u5668","slug":"\u89E3\u6790\u5668","link":"#\u89E3\u6790\u5668","children":[]},{"level":3,"title":"\u7ED1\u5B9A\u5668","slug":"\u7ED1\u5B9A\u5668","link":"#\u7ED1\u5B9A\u5668","children":[]},{"level":3,"title":"\u68C0\u67E5\u5668","slug":"\u68C0\u67E5\u5668","link":"#\u68C0\u67E5\u5668","children":[]},{"level":3,"title":"\u53D1\u5C04\u5668","slug":"\u53D1\u5C04\u5668","link":"#\u53D1\u5C04\u5668","children":[]}]}],"relativePath":"book/front-end/typescript-deep-dive.md","lastUpdated":1662170271000}'),p={name:"book/front-end/typescript-deep-dive.md"},o=l(`<h1 id="\u6DF1\u5165\u7406\u89E3-typescript" tabindex="-1">\u6DF1\u5165\u7406\u89E3 TypeScript <a class="header-anchor" href="#\u6DF1\u5165\u7406\u89E3-typescript" aria-hidden="true">#</a></h1><h2 id="typescript-\u9879\u76EE" tabindex="-1">TypeScript \u9879\u76EE <a class="header-anchor" href="#typescript-\u9879\u76EE" aria-hidden="true">#</a></h2><h3 id="\u7F16\u8BD1\u4E0A\u4E0B\u6587" tabindex="-1">\u7F16\u8BD1\u4E0A\u4E0B\u6587 <a class="header-anchor" href="#\u7F16\u8BD1\u4E0A\u4E0B\u6587" aria-hidden="true">#</a></h3><p>\u7F16\u8BD1\u4E0A\u4E0B\u6587\u7B97\u662F\u4E00\u4E2A\u6BD4\u8F83\u82B1\u54E8\u7684\u672F\u8BED\uFF0C\u53EF\u4EE5\u7528\u5B83\u6765\u7ED9\u6587\u4EF6\u5206\u7EC4\uFF0C\u544A\u8BC9 TypeScript \u54EA\u4E9B\u6587\u4EF6\u662F\u6709\u6548\u7684\uFF0C\u54EA\u4E9B\u662F\u65E0\u6548\u7684\u3002\u9664\u4E86\u6709\u6548\u6587\u4EF6\u6240\u643A\u5E26\u4FE1\u606F\u5916\uFF0C\u7F16\u8BD1\u4E0A\u4E0B\u6587\u8FD8\u5305\u542B\u6709\u6B63\u5728\u88AB\u4F7F\u7528\u7684\u7F16\u8BD1\u9009\u9879\u7684\u4FE1\u606F\u3002\u5B9A\u4E49\u8FD9\u79CD\u903B\u8F91\u5206\u7EC4\uFF0C\u4E00\u4E2A\u6BD4\u8F83\u597D\u7684\u65B9\u5F0F\u662F\u4F7F\u7528 <code>tsconfig.json</code> \u6587\u4EF6\u3002</p><h4 id="tsconfig-json" tabindex="-1">tsconfig.json <a class="header-anchor" href="#tsconfig-json" aria-hidden="true">#</a></h4><h5 id="\u57FA\u7840" tabindex="-1">\u57FA\u7840 <a class="header-anchor" href="#\u57FA\u7840" aria-hidden="true">#</a></h5><p>\u5F00\u59CB\u4F7F\u7528 <code>tsconfig.json</code> \u662F\u4E00\u4EF6\u6BD4\u8F83\u5BB9\u6613\u7684\u4E8B\uFF0C\u4F60\u4EC5\u4EC5\u9700\u8981\u5199\u4E0B\uFF1A</p><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><p>\u4F8B\u5982\uFF0C\u5728\u9879\u76EE\u7684\u6839\u76EE\u5F55\u4E0B\u521B\u5EFA\u4E00\u4E2A\u7A7A JSON \u6587\u4EF6\u3002\u901A\u8FC7\u8FD9\u79CD\u65B9\u5F0F\uFF0CTypeScript \u5C06 \u4F1A\u628A\u6B64\u76EE\u5F55\u548C\u5B50\u76EE\u5F55\u4E0B\u7684\u6240\u6709 .ts \u6587\u4EF6\u4F5C\u4E3A\u7F16\u8BD1\u4E0A\u4E0B\u6587\u7684\u4E00\u90E8\u5206\uFF0C\u5B83\u8FD8\u4F1A\u5305\u542B\u4E00\u90E8\u5206\u9ED8\u8BA4\u7684\u7F16\u8BD1\u9009\u9879\u3002</p><h5 id="\u7F16\u8BD1\u9009\u9879" tabindex="-1">\u7F16\u8BD1\u9009\u9879 <a class="header-anchor" href="#\u7F16\u8BD1\u9009\u9879" aria-hidden="true">#</a></h5><p>\u4F60\u53EF\u4EE5\u901A\u8FC7 <code>compilerOptions</code> \u6765\u5B9A\u5236\u4F60\u7684\u7F16\u8BD1\u9009\u9879\uFF1A</p><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">compilerOptions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">/* \u57FA\u672C\u9009\u9879 */</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">target</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">es5</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">                       </span><span style="color:#676E95;">// \u6307\u5B9A ECMAScript \u76EE\u6807\u7248\u672C: &#39;ES3&#39; (default), &#39;ES5&#39;, &#39;ES6&#39;/&#39;ES2015&#39;, &#39;ES2016&#39;, &#39;ES2017&#39;, or &#39;ESNEXT&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">commonjs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">                  </span><span style="color:#676E95;">// \u6307\u5B9A\u4F7F\u7528\u6A21\u5757: &#39;commonjs&#39;, &#39;amd&#39;, &#39;system&#39;, &#39;umd&#39; or &#39;es2015&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">lib</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[],</span><span style="color:#A6ACCD;">                             </span><span style="color:#676E95;">// \u6307\u5B9A\u8981\u5305\u542B\u5728\u7F16\u8BD1\u4E2D\u7684\u5E93\u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">allowJs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">                       </span><span style="color:#676E95;">// \u5141\u8BB8\u7F16\u8BD1 javascript \u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">checkJs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">                       </span><span style="color:#676E95;">// \u62A5\u544A javascript \u6587\u4EF6\u4E2D\u7684\u9519\u8BEF</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">jsx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">preserve</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">                     </span><span style="color:#676E95;">// \u6307\u5B9A jsx \u4EE3\u7801\u7684\u751F\u6210: &#39;preserve&#39;, &#39;react-native&#39;, or &#39;react&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">declaration</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">                   </span><span style="color:#676E95;">// \u751F\u6210\u76F8\u5E94\u7684 &#39;.d.ts&#39; \u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">sourceMap</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">                     </span><span style="color:#676E95;">// \u751F\u6210\u76F8\u5E94\u7684 &#39;.map&#39; \u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">outFile</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">                       </span><span style="color:#676E95;">// \u5C06\u8F93\u51FA\u6587\u4EF6\u5408\u5E76\u4E3A\u4E00\u4E2A\u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">outDir</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">                        </span><span style="color:#676E95;">// \u6307\u5B9A\u8F93\u51FA\u76EE\u5F55</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">rootDir</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">                       </span><span style="color:#676E95;">// \u7528\u6765\u63A7\u5236\u8F93\u51FA\u76EE\u5F55\u7ED3\u6784 --outDir.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">removeComments</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">                </span><span style="color:#676E95;">// \u5220\u9664\u7F16\u8BD1\u540E\u7684\u6240\u6709\u7684\u6CE8\u91CA</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">noEmit</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">                        </span><span style="color:#676E95;">// \u4E0D\u751F\u6210\u8F93\u51FA\u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">importHelpers</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">                 </span><span style="color:#676E95;">// \u4ECE tslib \u5BFC\u5165\u8F85\u52A9\u5DE5\u5177\u51FD\u6570</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">isolatedModules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">               </span><span style="color:#676E95;">// \u5C06\u6BCF\u4E2A\u6587\u4EF6\u4F5C\u4E3A\u5355\u72EC\u7684\u6A21\u5757 \uFF08\u4E0E &#39;ts.transpileModule&#39; \u7C7B\u4F3C\uFF09.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">/* \u4E25\u683C\u7684\u7C7B\u578B\u68C0\u67E5\u9009\u9879 */</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">strict</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">                        </span><span style="color:#676E95;">// \u542F\u7528\u6240\u6709\u4E25\u683C\u7C7B\u578B\u68C0\u67E5\u9009\u9879</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">noImplicitAny</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">                 </span><span style="color:#676E95;">// \u5728\u8868\u8FBE\u5F0F\u548C\u58F0\u660E\u4E0A\u6709\u9690\u542B\u7684 any\u7C7B\u578B\u65F6\u62A5\u9519</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">strictNullChecks</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">              </span><span style="color:#676E95;">// \u542F\u7528\u4E25\u683C\u7684 null \u68C0\u67E5</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">noImplicitThis</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">                </span><span style="color:#676E95;">// \u5F53 this \u8868\u8FBE\u5F0F\u503C\u4E3A any \u7C7B\u578B\u7684\u65F6\u5019\uFF0C\u751F\u6210\u4E00\u4E2A\u9519\u8BEF</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">alwaysStrict</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">                  </span><span style="color:#676E95;">// \u4EE5\u4E25\u683C\u6A21\u5F0F\u68C0\u67E5\u6BCF\u4E2A\u6A21\u5757\uFF0C\u5E76\u5728\u6BCF\u4E2A\u6587\u4EF6\u91CC\u52A0\u5165 &#39;use strict&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">/* \u989D\u5916\u7684\u68C0\u67E5 */</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">noUnusedLocals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">                </span><span style="color:#676E95;">// \u6709\u672A\u4F7F\u7528\u7684\u53D8\u91CF\u65F6\uFF0C\u629B\u51FA\u9519\u8BEF</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">noUnusedParameters</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">// \u6709\u672A\u4F7F\u7528\u7684\u53C2\u6570\u65F6\uFF0C\u629B\u51FA\u9519\u8BEF</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">noImplicitReturns</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">             </span><span style="color:#676E95;">// \u5E76\u4E0D\u662F\u6240\u6709\u51FD\u6570\u91CC\u7684\u4EE3\u7801\u90FD\u6709\u8FD4\u56DE\u503C\u65F6\uFF0C\u629B\u51FA\u9519\u8BEF</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">noFallthroughCasesInSwitch</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">// \u62A5\u544A switch \u8BED\u53E5\u7684 fallthrough \u9519\u8BEF\u3002\uFF08\u5373\uFF0C\u4E0D\u5141\u8BB8 switch \u7684 case \u8BED\u53E5\u8D2F\u7A7F\uFF09</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">/* \u6A21\u5757\u89E3\u6790\u9009\u9879 */</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">moduleResolution</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">node</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">// \u9009\u62E9\u6A21\u5757\u89E3\u6790\u7B56\u7565\uFF1A &#39;node&#39; (Node.js) or &#39;classic&#39; (TypeScript pre-1.6)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">baseUrl</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">                       </span><span style="color:#676E95;">// \u7528\u4E8E\u89E3\u6790\u975E\u76F8\u5BF9\u6A21\u5757\u540D\u79F0\u7684\u57FA\u76EE\u5F55</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">paths</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{},</span><span style="color:#A6ACCD;">                           </span><span style="color:#676E95;">// \u6A21\u5757\u540D\u5230\u57FA\u4E8E baseUrl \u7684\u8DEF\u5F84\u6620\u5C04\u7684\u5217\u8868</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">rootDirs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[],</span><span style="color:#A6ACCD;">                        </span><span style="color:#676E95;">// \u6839\u6587\u4EF6\u5939\u5217\u8868\uFF0C\u5176\u7EC4\u5408\u5185\u5BB9\u8868\u793A\u9879\u76EE\u8FD0\u884C\u65F6\u7684\u7ED3\u6784\u5185\u5BB9</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">typeRoots</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[],</span><span style="color:#A6ACCD;">                       </span><span style="color:#676E95;">// \u5305\u542B\u7C7B\u578B\u58F0\u660E\u7684\u6587\u4EF6\u5217\u8868</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">types</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[],</span><span style="color:#A6ACCD;">                           </span><span style="color:#676E95;">// \u9700\u8981\u5305\u542B\u7684\u7C7B\u578B\u58F0\u660E\u6587\u4EF6\u540D\u5217\u8868</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">allowSyntheticDefaultImports</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">// \u5141\u8BB8\u4ECE\u6CA1\u6709\u8BBE\u7F6E\u9ED8\u8BA4\u5BFC\u51FA\u7684\u6A21\u5757\u4E2D\u9ED8\u8BA4\u5BFC\u5165\u3002</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">/* Source Map Options */</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">sourceRoot</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">                    </span><span style="color:#676E95;">// \u6307\u5B9A\u8C03\u8BD5\u5668\u5E94\u8BE5\u627E\u5230 TypeScript \u6587\u4EF6\u800C\u4E0D\u662F\u6E90\u6587\u4EF6\u7684\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">mapRoot</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">                       </span><span style="color:#676E95;">// \u6307\u5B9A\u8C03\u8BD5\u5668\u5E94\u8BE5\u627E\u5230\u6620\u5C04\u6587\u4EF6\u800C\u4E0D\u662F\u751F\u6210\u6587\u4EF6\u7684\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">inlineSourceMap</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">               </span><span style="color:#676E95;">// \u751F\u6210\u5355\u4E2A soucemaps \u6587\u4EF6\uFF0C\u800C\u4E0D\u662F\u5C06 sourcemaps \u751F\u6210\u4E0D\u540C\u7684\u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">inlineSources</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">                 </span><span style="color:#676E95;">// \u5C06\u4EE3\u7801\u4E0E sourcemaps \u751F\u6210\u5230\u4E00\u4E2A\u6587\u4EF6\u4E2D\uFF0C\u8981\u6C42\u540C\u65F6\u8BBE\u7F6E\u4E86 --inlineSourceMap \u6216 --sourceMap \u5C5E\u6027</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">/* \u5176\u4ED6\u9009\u9879 */</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">experimentalDecorators</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">// \u542F\u7528\u88C5\u9970\u5668</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">emitDecoratorMetadata</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span><span style="color:#A6ACCD;">          </span><span style="color:#676E95;">// \u4E3A\u88C5\u9970\u5668\u63D0\u4F9B\u5143\u6570\u636E\u7684\u652F\u6301</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5173\u4E8E\u8FD9\u4E9B\uFF08\u6216\u8005\u66F4\u591A\uFF09\u7F16\u8BD1\u9009\u9879\uFF0C\u7A0D\u540E\u5C06\u4F1A\u8BA8\u8BBA\u3002</p><h5 id="typescript-\u7F16\u8BD1" tabindex="-1">TypeScript \u7F16\u8BD1 <a class="header-anchor" href="#typescript-\u7F16\u8BD1" aria-hidden="true">#</a></h5><p>\u597D\u7684 IDE \u652F\u6301\u5BF9 TypeScript \u7684\u5373\u65F6\u7F16\u8BD1\u3002\u4F46\u662F\uFF0C\u5982\u679C\u4F60\u60F3\u5728\u4F7F\u7528 <code>tsconfig.json</code> \u65F6\u4ECE\u547D\u4EE4\u884C\u624B\u52A8\u8FD0\u884C TypeScript \u7F16\u8BD1\u5668\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\uFF1A</p><p>\u8FD0\u884C tsc\uFF0C\u5B83\u4F1A\u5728\u5F53\u524D\u76EE\u5F55\u6216\u8005\u662F\u7236\u7EA7\u76EE\u5F55\u5BFB\u627E <code>tsconfig.json</code> \u6587\u4EF6\u3002 \u8FD0\u884C <code>tsc -p ./path-to-project-directory</code> \u3002\u5F53\u7136\uFF0C\u8FD9\u4E2A\u8DEF\u5F84\u53EF\u4EE5\u662F\u7EDD\u5BF9\u8DEF\u5F84\uFF0C\u4E5F\u53EF\u4EE5\u662F\u76F8\u5BF9\u4E8E\u5F53\u524D\u76EE\u5F55\u7684\u76F8\u5BF9\u8DEF\u5F84\u3002 \u4F60\u751A\u81F3\u53EF\u4EE5\u4F7F\u7528 <code>tsc -w</code> \u6765\u542F\u7528 TypeScript \u7F16\u8BD1\u5668\u7684\u89C2\u6D4B\u6A21\u5F0F\uFF0C\u5728\u68C0\u6D4B\u5230\u6587\u4EF6\u6539\u52A8\u4E4B\u540E\uFF0C\u5B83\u5C06\u91CD\u65B0\u7F16\u8BD1\u3002</p><h4 id="\u5236\u5B9A\u6587\u4EF6" tabindex="-1">\u5236\u5B9A\u6587\u4EF6 <a class="header-anchor" href="#\u5236\u5B9A\u6587\u4EF6" aria-hidden="true">#</a></h4><p>\u4F60\u4E5F\u53EF\u4EE5\u663E\u5F0F\u6307\u5B9A\u9700\u8981\u7F16\u8BD1\u7684\u6587\u4EF6\uFF1A</p><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">files</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./some/file.ts</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4F60\u8FD8\u53EF\u4EE5\u4F7F\u7528 <code>include</code> \u548C <code>exclude</code> \u9009\u9879\u6765\u6307\u5B9A\u9700\u8981\u5305\u542B\u7684\u6587\u4EF6\u548C\u6392\u9664\u7684\u6587\u4EF6\uFF1A</p><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">include</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./folder</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">exclude</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./folder/**/*.spec.ts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./folder/someSubFolder</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u4F7F\u7528 <code>globs</code>\uFF1A<code>**/*</code> \uFF08\u4E00\u4E2A\u793A\u4F8B\u7528\u6CD5\uFF1A<code>some/folder/**/*</code>\uFF09\u610F\u5473\u7740\u5339\u914D\u6240\u6709\u7684\u6587\u4EF6\u5939\u548C\u6240\u6709\u6587\u4EF6\uFF08\u6269\u5C55\u540D\u4E3A <code>.ts/.tsx</code>\uFF0C\u5F53\u5F00\u542F\u4E86 <code>allowJs: true</code> \u9009\u9879\u65F6\uFF0C\u6269\u5C55\u540D\u53EF\u4EE5\u662F <code>.js/.jsx</code>\uFF09\u3002</p></div><h3 id="\u58F0\u660E\u7A7A\u95F4" tabindex="-1">\u58F0\u660E\u7A7A\u95F4 <a class="header-anchor" href="#\u58F0\u660E\u7A7A\u95F4" aria-hidden="true">#</a></h3><p>\u5728 TypeScript \u91CC\u5B58\u5728\u4E24\u79CD\u58F0\u660E\u7A7A\u95F4\uFF1A\u7C7B\u578B\u58F0\u660E\u7A7A\u95F4\u4E0E\u53D8\u91CF\u58F0\u660E\u7A7A\u95F4\u3002\u4E0B\u6587\u5C06\u5206\u522B\u8BA8\u8BBA\u8FD9\u4E24\u4E2A\u6982\u5FF5\u3002</p><h4 id="\u7C7B\u578B\u58F0\u660E\u7A7A\u95F4" tabindex="-1">\u7C7B\u578B\u58F0\u660E\u7A7A\u95F4 <a class="header-anchor" href="#\u7C7B\u578B\u58F0\u660E\u7A7A\u95F4" aria-hidden="true">#</a></h4><p>\u7C7B\u578B\u58F0\u660E\u7A7A\u95F4\u5305\u542B\u7528\u6765\u5F53\u505A\u7C7B\u578B\u6CE8\u89E3\u7684\u5185\u5BB9\uFF0C\u4F8B\u5982\u4E0B\u9762\u7684\u7C7B\u578B\u58F0\u660E\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bas</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"></span></code></pre></div><p>\u4F60\u53EF\u4EE5\u5C06 <code>Foo</code>, <code>Bar</code>, <code>Bas</code> \u4F5C\u4E3A\u7C7B\u578B\u6CE8\u89E3\u4F7F\u7528\uFF0C\u793A\u4F8B\u5982\u4E0B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bas</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"></span></code></pre></div><p>\u6CE8\u610F\uFF0C\u5C3D\u7BA1\u4F60\u5B9A\u4E49\u4E86 interface Bar\uFF0C\u5374\u5E76\u4E0D\u80FD\u591F\u628A\u5B83\u4F5C\u4E3A\u4E00\u4E2A\u53D8\u91CF\u6765\u4F7F\u7528\uFF0C\u56E0\u4E3A\u5B83\u6CA1\u6709\u5B9A\u4E49\u5728\u53D8\u91CF\u58F0\u660E\u7A7A\u95F4\u4E2D\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Bar</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: &quot;cannot find name &#39;Bar&#39;&quot;</span></span>
<span class="line"></span></code></pre></div><p>\u51FA\u73B0\u9519\u8BEF\u63D0\u793A\uFF1A <code>cannot find name &#39;Bar&#39;</code> \u7684\u539F\u56E0\u662F\u540D\u79F0 <code>Bar</code> \u5E76\u672A\u5B9A\u4E49\u5728\u53D8\u91CF\u58F0\u660E\u7A7A\u95F4\u3002\u8FD9\u5C06\u5E26\u9886\u6211\u4EEC\u8FDB\u5165\u4E0B\u4E00\u4E2A\u4E3B\u9898 -- \u53D8\u91CF\u58F0\u660E\u7A7A\u95F4\u3002</p><h4 id="\u53D8\u91CF\u58F0\u660E\u7A7A\u95F4" tabindex="-1">\u53D8\u91CF\u58F0\u660E\u7A7A\u95F4 <a class="header-anchor" href="#\u53D8\u91CF\u58F0\u660E\u7A7A\u95F4" aria-hidden="true">#</a></h4><p>\u53D8\u91CF\u58F0\u660E\u7A7A\u95F4\u5305\u542B\u53EF\u7528\u4F5C\u53D8\u91CF\u7684\u5185\u5BB9\uFF0C\u5728\u4E0A\u6587\u4E2D <code>Class Foo</code> \u63D0\u4F9B\u4E86\u4E00\u4E2A\u7C7B\u578B <code>Foo</code> \u5230\u7C7B\u578B\u58F0\u660E\u7A7A\u95F4\uFF0C\u6B64\u5916\u5B83\u540C\u6837\u63D0\u4F9B\u4E86\u4E00\u4E2A\u53D8\u91CF Foo \u5230\u53D8\u91CF\u58F0\u660E\u7A7A\u95F4\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> someVar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Foo</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> someOtherVar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u5F88\u68D2\uFF0C\u5C24\u5176\u662F\u5F53\u4F60\u60F3\u628A\u4E00\u4E2A\u7C7B\u6765\u5F53\u505A\u53D8\u91CF\u4F20\u9012\u65F6\u3002</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>\u6211\u4EEC\u5E76\u4E0D\u80FD\u628A\u4E00\u4E9B\u5982 <code>interface</code> \u5B9A\u4E49\u7684\u5185\u5BB9\u5F53\u4F5C\u53D8\u91CF\u4F7F\u7528\u3002</p></div><p>\u4E0E\u6B64\u76F8\u4F3C\uFF0C\u4E00\u4E9B\u7528 <code>var</code> \u58F0\u660E\u7684\u53D8\u91CF\uFF0C\u4E5F\u53EA\u80FD\u5728\u53D8\u91CF\u58F0\u660E\u7A7A\u95F4\u4F7F\u7528\uFF0C\u4E0D\u80FD\u7528\u4F5C\u7C7B\u578B\u6CE8\u89E3\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">foo</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ERROR: &quot;cannot find name &#39;foo&#39;&quot;</span></span>
<span class="line"></span></code></pre></div><p>\u63D0\u793A <code>ERROR: &quot;cannot find name &#39;foo&#39;&quot;</code> \u539F\u56E0\u662F\uFF0C\u540D\u79F0 foo \u6CA1\u6709\u5B9A\u4E49\u5728\u7C7B\u578B\u58F0\u660E\u7A7A\u95F4\u91CC\u3002</p><h3 id="\u6A21\u5757" tabindex="-1">\u6A21\u5757 <a class="header-anchor" href="#\u6A21\u5757" aria-hidden="true">#</a></h3><h4 id="\u5168\u5C40\u6A21\u5757" tabindex="-1">\u5168\u5C40\u6A21\u5757 <a class="header-anchor" href="#\u5168\u5C40\u6A21\u5757" aria-hidden="true">#</a></h4><p>\u5728\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5F53\u4F60\u5F00\u59CB\u5728\u4E00\u4E2A\u65B0\u7684 TypeScript \u6587\u4EF6\u4E2D\u5199\u4E0B\u4EE3\u7801\u65F6\uFF0C\u5B83\u5904\u4E8E\u5168\u5C40\u547D\u540D\u7A7A\u95F4\u4E2D\u3002\u5982\u5728 foo.ts \u91CC\u7684\u4EE5\u4E0B\u4EE3\u7801\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u4F60\u5728\u76F8\u540C\u7684\u9879\u76EE\u91CC\u521B\u5EFA\u4E86\u4E00\u4E2A\u65B0\u7684\u6587\u4EF6 bar.ts\uFF0CTypeScript \u7C7B\u578B\u7CFB\u7EDF\u5C06\u4F1A\u5141\u8BB8\u4F60\u4F7F\u7528\u53D8\u91CF foo\uFF0C\u5C31\u597D\u50CF\u5B83\u5728\u5168\u5C40\u53EF\u7528\u4E00\u6837\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// allowed</span></span>
<span class="line"></span></code></pre></div><p>\u6BCB\u5EB8\u7F6E\u7591\uFF0C\u4F7F\u7528\u5168\u5C40\u53D8\u91CF\u7A7A\u95F4\u662F\u5371\u9669\u7684\uFF0C\u56E0\u4E3A\u5B83\u4F1A\u4E0E\u6587\u4EF6\u5185\u7684\u4EE3\u7801\u547D\u540D\u51B2\u7A81\u3002\u6211\u4EEC\u63A8\u8350\u4F7F\u7528\u4E0B\u6587\u4E2D\u5C06\u8981\u63D0\u5230\u7684\u6587\u4EF6\u6A21\u5757\u3002</p><h4 id="\u6587\u4EF6\u6A21\u5757" tabindex="-1">\u6587\u4EF6\u6A21\u5757 <a class="header-anchor" href="#\u6587\u4EF6\u6A21\u5757" aria-hidden="true">#</a></h4><p>\u6587\u4EF6\u6A21\u5757\u4E5F\u88AB\u79F0\u4E3A\u5916\u90E8\u6A21\u5757\u3002\u5982\u679C\u5728\u4F60\u7684 TypeScript \u6587\u4EF6\u7684\u6839\u7EA7\u522B\u4F4D\u7F6E\u542B\u6709 <code>import</code> \u6216\u8005 <code>export</code>\uFF0C\u90A3\u4E48\u5B83\u4F1A\u5728\u8FD9\u4E2A\u6587\u4EF6\u4E2D\u521B\u5EFA\u4E00\u4E2A\u672C\u5730\u7684\u4F5C\u7528\u57DF\u3002\u56E0\u6B64\uFF0C\u6211\u4EEC\u9700\u8981\u628A\u4E0A\u6587 <code>foo.ts</code> \u6539\u6210\u5982\u4E0B\u65B9\u5F0F\uFF08\u6CE8\u610F <code>export</code> \u7528\u6CD5\uFF09\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u5168\u5C40\u547D\u540D\u7A7A\u95F4\u91CC\uFF0C\u6211\u4EEC\u4E0D\u518D\u6709 <code>foo</code>\uFF0C\u8FD9\u53EF\u4EE5\u901A\u8FC7\u521B\u5EFA\u4E00\u4E2A\u65B0\u6587\u4EF6 <code>bar.ts</code> \u6765\u8BC1\u660E\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ERROR: &quot;cannot find name &#39;foo&#39;&quot;</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u4F60\u60F3\u5728 <code>bar.ts</code> \u91CC\u4F7F\u7528\u6765\u81EA <code>foo.ts</code> \u7684\u5185\u5BB9\uFF0C\u4F60\u5FC5\u987B\u663E\u5F0F\u5730\u5BFC\u5165\u5B83\uFF0C\u66F4\u65B0\u540E\u7684 <code>bar.ts</code> \u5982\u4E0B\u6240\u793A\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// allow</span></span>
<span class="line"></span></code></pre></div><p>\u5728 <code>bar.ts</code> \u6587\u4EF6\u91CC\u4F7F\u7528 <code>import</code> \u65F6\uFF0C\u5B83\u4E0D\u4EC5\u5141\u8BB8\u4F60\u4F7F\u7528\u4ECE\u5176\u4ED6\u6587\u4EF6\u5BFC\u5165\u7684\u5185\u5BB9\uFF0C\u8FD8\u4F1A\u5C06\u6B64\u6587\u4EF6 <code>bar.ts</code> \u6807\u8BB0\u4E3A\u4E00\u4E2A\u6A21\u5757\uFF0C\u6587\u4EF6\u5185\u5B9A\u4E49\u7684\u58F0\u660E\u4E5F\u4E0D\u4F1A\u201C\u6C61\u67D3\u201D\u5168\u5C40\u547D\u540D\u7A7A\u95F4</p><h4 id="\u6587\u4EF6\u6A21\u5757\u8BE6\u60C5" tabindex="-1">\u6587\u4EF6\u6A21\u5757\u8BE6\u60C5 <a class="header-anchor" href="#\u6587\u4EF6\u6A21\u5757\u8BE6\u60C5" aria-hidden="true">#</a></h4><p>\u6587\u4EF6\u6A21\u5757\u62E5\u6709\u5F3A\u5927\u7684\u529F\u80FD\u548C\u8F83\u5F3A\u7684\u53EF\u7528\u6027\u3002\u4E0B\u9762\u6211\u4EEC\u6765\u8BA8\u8BBA\u5B83\u7684\u529F\u80FD\u53CA\u4E00\u4E9B\u7528\u6CD5\u3002</p><h5 id="\u6F84\u6E05-commonjs-amd-esmodules-others" tabindex="-1">\u6F84\u6E05: commonjs, amd, esmodules, others <a class="header-anchor" href="#\u6F84\u6E05-commonjs-amd-esmodules-others" aria-hidden="true">#</a></h5><p>\u9996\u5148\uFF0C\u6211\u4EEC\u9700\u8981\u6F84\u6E05\u8FD9\u4E9B\u6A21\u5757\u7CFB\u7EDF\u7684\u4E0D\u4E00\u81F4\u6027\u3002\u6211\u5C06\u4F1A\u63D0\u4F9B\u7ED9\u4F60\u6211\u5F53\u524D\u7684\u5EFA\u8BAE\uFF0C\u4EE5\u53CA\u6D88\u9664\u4E00\u4E9B\u4F60\u7684\u987E\u8651\u3002</p><p>\u4F60\u53EF\u4EE5\u6839\u636E\u4E0D\u540C\u7684 <code>module</code> \u9009\u9879\u6765\u628A TypeScript \u7F16\u8BD1\u6210\u4E0D\u540C\u7684 JavaScript \u6A21\u5757\u7C7B\u578B\uFF0C\u8FD9\u6709\u4E00\u4E9B\u4F60\u53EF\u4EE5\u5FFD\u7565\u7684\u4E1C\u897F\uFF1A</p><ul><li>AMD\uFF1A\u4E0D\u8981\u4F7F\u7528\u5B83\uFF0C\u5B83\u4EC5\u80FD\u5728\u6D4F\u89C8\u5668\u5DE5\u4F5C\uFF1B</li><li>SystemJS\uFF1A\u8FD9\u662F\u4E00\u4E2A\u597D\u7684\u5B9E\u9A8C\uFF0C\u5DF2\u7ECF\u88AB ES \u6A21\u5757\u66FF\u4EE3\uFF1B</li><li>ES \u6A21\u5757\uFF1A\u5B83\u5E76\u6CA1\u6709\u51C6\u5907\u597D\u3002</li></ul><p>\u4F7F\u7528 <code>module: commonjs</code> \u9009\u9879\u6765\u66FF\u4EE3\u8FD9\u4E9B\u6A21\u5F0F\uFF0C\u5C06\u4F1A\u662F\u4E00\u4E2A\u597D\u7684\u4E3B\u610F\u3002</p><p>\u600E\u4E48\u4E66\u5199 TypeScript \u6A21\u5757\u5462\uFF1F\uFF0C\u8FD9\u4E5F\u662F\u4E00\u4EF6\u8BA9\u4EBA\u56F0\u60D1\u7684\u4E8B\u3002\u5728\u4ECA\u5929\u6211\u4EEC\u5E94\u8BE5\u8FD9\u4E48\u505A\uFF1A</p><ul><li>\u653E\u5F03\u4F7F\u7528 <code>import/require</code> \u8BED\u6CD5\u5373 <code>import foo = require(&#39;foo&#39;)</code> \u5199\u6CD5</li><li>\u63A8\u8350\u4F7F\u7528 ES \u6A21\u5757\u8BED\u6CD5</li></ul><p>\u8FD9\u5F88\u9177\uFF0C\u63A5\u4E0B\u6765\uFF0C\u8BA9\u6211\u4EEC\u770B\u770B ES \u6A21\u5757\u8BED\u6CD5\u3002</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u4F7F\u7528 <code>module: commonjs</code> \u9009\u9879\u4EE5\u53CA\u4F7F\u7528 ES \u6A21\u5757\u8BED\u6CD5\u5BFC\u5165\u3001\u5BFC\u51FA\u3001\u7F16\u5199\u6A21\u5757\u3002</p></div><h5 id="es-\u6A21\u5757\u8BED\u6CD5" tabindex="-1">ES \u6A21\u5757\u8BED\u6CD5 <a class="header-anchor" href="#es-\u6A21\u5757\u8BED\u6CD5" aria-hidden="true">#</a></h5><ul><li>\u4F7F\u7528 <code>export</code> \u5173\u952E\u5B57\u5BFC\u51FA\u4E00\u4E2A\u53D8\u91CF\u6216\u7C7B\u578B</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// foo.ts</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> someVar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">someType</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><ul><li><code>export</code> \u7684\u5199\u6CD5\u9664\u4E86\u4E0A\u9762\u8FD9\u79CD\uFF0C\u8FD8\u6709\u53E6\u5916\u4E00\u79CD\uFF1A</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// foo.ts</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> someVar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">someType</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">someVar</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">someType</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><ul><li>\u4F60\u4E5F\u53EF\u4EE5\u7528\u91CD\u547D\u540D\u53D8\u91CF\u7684\u65B9\u5F0F\u5BFC\u51FA\uFF1A</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// foo.ts</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> someVar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">someVar</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">as</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">aDifferentName</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><ul><li>\u4F7F\u7528 <code>import</code> \u5173\u952E\u5B57\u5BFC\u5165\u4E00\u4E2A\u53D8\u91CF\u6216\u8005\u662F\u4E00\u4E2A\u7C7B\u578B\uFF1A</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// bar.ts</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">someVar</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">someType</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><ul><li>\u901A\u8FC7\u91CD\u547D\u540D\u7684\u65B9\u5F0F\u5BFC\u5165\u53D8\u91CF\u6216\u8005\u7C7B\u578B\uFF1A</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// bar.ts</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">someVar</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">as</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">aDifferentName</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><ul><li>\u9664\u4E86\u6307\u5B9A\u52A0\u8F7D\u67D0\u4E2A\u8F93\u51FA\u503C\uFF0C\u8FD8\u53EF\u4EE5\u4F7F\u7528\u6574\u4F53\u52A0\u8F7D\uFF0C\u5373\u7528\u661F\u53F7\uFF08*\uFF09\u6307\u5B9A\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u6240\u6709\u8F93\u51FA\u503C\u90FD\u52A0\u8F7D\u5728\u8FD9\u4E2A\u5BF9\u8C61\u4E0A\u9762\uFF1A</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// bar.ts</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">// \u4F60\u53EF\u4EE5\u4F7F\u7528 \`foo.someVar\` \u548C \`foo.someType\` \u4EE5\u53CA\u5176\u4ED6\u4EFB\u4F55\u4ECE \`foo\` \u5BFC\u51FA\u7684\u53D8\u91CF\u6216\u8005\u7C7B\u578B</span></span>
<span class="line"></span></code></pre></div><ul><li>\u53EA\u5BFC\u5165\u6A21\u5757\uFF1A</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">core-js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u4E00\u4E2A\u666E\u901A\u7684 polyfill \u5E93</span></span>
<span class="line"></span></code></pre></div><ul><li>\u4ECE\u5176\u4ED6\u6A21\u5757\u5BFC\u5165\u540E\u6574\u4F53\u5BFC\u51FA\uFF1A</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><ul><li>\u4ECE\u5176\u4ED6\u6A21\u5757\u5BFC\u5165\u540E\uFF0C\u90E8\u5206\u5BFC\u51FA\uFF1A</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">someVar</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><ul><li>\u901A\u8FC7\u91CD\u547D\u540D\uFF0C\u90E8\u5206\u5BFC\u51FA\u4ECE\u53E6\u4E00\u4E2A\u6A21\u5757\u5BFC\u5165\u7684\u9879\u76EE\uFF1A</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">someVar</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">as</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">aDifferentName</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h6 id="\u9ED8\u8BA4\u5BFC\u5165\uFF0F\u5BFC\u51FA" tabindex="-1">\u9ED8\u8BA4\u5BFC\u5165\uFF0F\u5BFC\u51FA <a class="header-anchor" href="#\u9ED8\u8BA4\u5BFC\u5165\uFF0F\u5BFC\u51FA" aria-hidden="true">#</a></h6><p>\u6211\u5E76\u4E0D\u559C\u6B22\u7528\u9ED8\u8BA4\u5BFC\u51FA\uFF0C\u867D\u7136\u6709\u9ED8\u8BA4\u5BFC\u51FA\u7684\u8BED\u6CD5\uFF1A</p><ul><li>\u4F7F\u7528 export default <ul><li>\u5728\u4E00\u4E2A\u53D8\u91CF\u4E4B\u524D\uFF08\u4E0D\u9700\u8981\u4F7F\u7528 let/const/var\uFF09\uFF1B</li><li>\u5728\u4E00\u4E2A\u51FD\u6570\u4E4B\u524D\uFF1B</li><li>\u5728\u4E00\u4E2A\u7C7B\u4E4B\u524D\u3002</li></ul></li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// some var</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> (someVar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// some function</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">someFunction</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// some class</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">someClass</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><ul><li>\u5BFC\u5165\u4F7F\u7528 <code>import someName from &#39;someModule&#39;</code> \u8BED\u6CD5\uFF08\u4F60\u53EF\u4EE5\u6839\u636E\u9700\u8981\u4E3A\u5BFC\u5165\u547D\u540D\uFF09\uFF1A</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> someLocalNameForThisFile </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h5 id="\u6A21\u5757\u8DEF\u5F84" tabindex="-1">\u6A21\u5757\u8DEF\u5F84 <a class="header-anchor" href="#\u6A21\u5757\u8DEF\u5F84" aria-hidden="true">#</a></h5><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u5982\u679C\u4F60\u9700\u8981\u4F7F\u7528 <code>moduleResolution: node</code> \u9009\u9879\uFF0C\u4F60\u5E94\u8BE5\u5C06\u6B64\u9009\u9879\u653E\u5165\u4F60\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u3002\u5982\u679C\u4F60\u4F7F\u7528\u4E86 <code>module: commonjs</code> \u9009\u9879\uFF0C <code>moduleResolution: node</code> \u5C06\u4F1A\u9ED8\u8BA4\u5F00\u542F\u3002</p></div><p>\u8FD9\u91CC\u5B58\u5728\u4E24\u79CD\u622A\u7136\u4E0D\u540C\u7684\u6A21\u5757\uFF1A</p><ul><li>\u76F8\u5BF9\u6A21\u5757\u8DEF\u5F84\uFF08\u8DEF\u5F84\u4EE5 <code>.</code> \u5F00\u5934\uFF0C\u4F8B\u5982\uFF1A<code>./someFile</code> \u6216\u8005 <code>../../someFolder/someFile</code> \u7B49\uFF09\uFF1B</li><li>\u5176\u4ED6\u52A8\u6001\u67E5\u627E\u6A21\u5757\uFF08\u5982\uFF1A<code>core-js</code>\uFF0C<code>typestyle</code>\uFF0C<code>react</code> \u6216\u8005\u751A\u81F3\u662F <code>react/core</code> \u7B49\uFF09\u3002</li></ul><p>\u5B83\u4EEC\u7684\u4E3B\u8981\u533A\u522B\u5728\u4E8E\u7CFB\u7EDF\u5982\u4F55\u89E3\u6790\u6A21\u5757\u3002</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u6211\u5C06\u4F1A\u4F7F\u7528\u4E00\u4E2A\u6982\u5FF5\u6027\u672F\u8BED\uFF0C<code>place</code> -- \u5C06\u5728\u63D0\u53CA\u67E5\u627E\u6A21\u5F0F\u540E\u89E3\u91CA\u5B83\u3002</p></div><h6 id="\u76F8\u5BF9\u6A21\u5757\u8DEF\u5F84" tabindex="-1">\u76F8\u5BF9\u6A21\u5757\u8DEF\u5F84 <a class="header-anchor" href="#\u76F8\u5BF9\u6A21\u5757\u8DEF\u5F84" aria-hidden="true">#</a></h6><p>\u8FD9\u5F88\u7B80\u5355\uFF0C\u4EC5\u4EC5\u662F\u6309\u7167\u76F8\u5BF9\u8DEF\u5F84\u6765\u5C31\u53EF\u4EE5\u4E86\uFF1A</p><ul><li>\u5982\u679C\u6587\u4EF6 <code>bar.ts</code> \u4E2D\u542B\u6709 <code>import * as foo from &#39;./foo&#39;</code>\uFF0C\u90A3\u4E48 <code>foo</code> \u6587\u4EF6\u5FC5\u987B\u4E0E <code>bar.ts</code> \u6587\u4EF6\u5B58\u5728\u4E8E\u76F8\u540C\u7684\u6587\u4EF6\u5939\u4E0B</li><li>\u5982\u679C\u6587\u4EF6 <code>bar.ts</code> \u4E2D\u542B\u6709 <code>import * as foo from &#39;../foo&#39;</code>\uFF0C\u90A3\u4E48 <code>foo</code> \u6587\u4EF6\u6240\u5B58\u5728\u7684\u5730\u65B9\u5FC5\u987B\u662F <code>bar.ts</code> \u7684\u4E0A\u4E00\u7EA7\u76EE\u5F55\uFF1B</li><li>\u5982\u679C\u6587\u4EF6 <code>bar.ts</code> \u4E2D\u542B\u6709 <code>import * as foo from &#39;../someFolder/foo&#39;</code>\uFF0C\u90A3\u4E48 <code>foo</code> \u6587\u4EF6\u6240\u5728\u7684\u6587\u4EF6\u5939 someFolder \u5FC5\u987B\u4E0E <code>bar.ts</code> \u6587\u4EF6\u6240\u5728\u6587\u4EF6\u5939\u5728\u76F8\u540C\u7684\u76EE\u5F55\u4E0B\u3002</li></ul><p>\u4F60\u8FD8\u53EF\u4EE5\u601D\u8003\u4E00\u4E0B\u5176\u4ED6\u76F8\u5BF9\u8DEF\u5F84\u5BFC\u5165\u7684\u573A\u666F\u3002\u{1F603}</p><h6 id="\u52A8\u6001\u67E5\u627E" tabindex="-1">\u52A8\u6001\u67E5\u627E <a class="header-anchor" href="#\u52A8\u6001\u67E5\u627E" aria-hidden="true">#</a></h6><p>\u5F53\u5BFC\u5165\u8DEF\u5F84\u4E0D\u662F\u76F8\u5BF9\u8DEF\u5F84\u65F6\uFF0C\u6A21\u5757\u89E3\u6790\u5C06\u4F1A\u6A21\u4EFF <a href="https://nodejs.org/api/modules.html#modules_all_together" target="_blank" rel="noreferrer">Node \u6A21\u5757\u89E3\u6790\u7B56\u7565</a>\uFF0C\u4E0B\u9762\u6211\u5C06\u7ED9\u51FA\u4E00\u4E2A\u7B80\u5355\u4F8B\u5B50\uFF1A</p><ul><li>\u5F53\u4F60\u4F7F\u7528 <code>import * as foo from &#39;foo&#39;</code>\uFF0C\u5C06\u4F1A\u6309\u5982\u4E0B\u987A\u5E8F\u67E5\u627E\u6A21\u5757\uFF1A <ul><li><code>./node_modules/foo</code></li><li><code>../node_modules/foo</code></li><li><code>../../node_modules/foo</code></li><li>\u76F4\u5230\u7CFB\u7EDF\u7684\u6839\u76EE\u5F55</li></ul></li><li>\u5F53\u4F60\u4F7F\u7528 <code>import * as foo from &#39;something/foo&#39;</code>\uFF0C\u5C06\u4F1A\u6309\u7167\u5982\u4E0B\u987A\u5E8F\u67E5\u627E\u5185\u5BB9 <ul><li><code>./node_modules/something/foo</code></li><li><code>../node_modules/something/foo</code></li><li><code>../../node_modules/something/foo</code></li><li>\u76F4\u5230\u7CFB\u7EDF\u7684\u6839\u76EE\u5F55</li></ul></li></ul><h5 id="\u4EC0\u4E48\u662F-place" tabindex="-1">\u4EC0\u4E48\u662F <code>place</code> <a class="header-anchor" href="#\u4EC0\u4E48\u662F-place" aria-hidden="true">#</a></h5><p>\u5F53\u6211\u63D0\u53CA\u88AB\u68C0\u67E5\u7684 <code>place</code> \u65F6\uFF0C\u6211\u60F3\u8868\u8FBE\u7684\u662F\u5728\u8FD9\u4E2A <code>place</code> \u4E0A\uFF0CTypeScript \u5C06\u4F1A\u68C0\u67E5\u4EE5\u4E0B\u5185\u5BB9\uFF08\u4F8B\u5982\u4E00\u4E2A <code>foo</code> \u7684 <code>place</code>\uFF09\uFF1A</p><ul><li>\u5982\u679C\u8FD9\u4E2A <code>place</code> \u8868\u793A\u4E00\u4E2A\u6587\u4EF6\uFF0C\u5982\uFF1A<code>foo.ts</code>\uFF0C\u6B22\u547C\uFF01</li><li>\u5426\u5219\uFF0C\u5982\u679C\u8FD9\u4E2A <code>place</code> \u662F\u4E00\u4E2A\u6587\u4EF6\u5939\uFF0C\u5E76\u4E14\u5B58\u5728\u4E00\u4E2A\u6587\u4EF6 <code>foo/index.ts</code>\uFF0C\u6B22\u547C\uFF01</li><li>\u5426\u5219\uFF0C\u5982\u679C\u8FD9\u4E2A <code>place</code> \u662F\u4E00\u4E2A\u6587\u4EF6\u5939\uFF0C\u5E76\u4E14\u5B58\u5728\u4E00\u4E2A <code>foo/package.json</code> \u6587\u4EF6\uFF0C\u5728\u8BE5\u6587\u4EF6\u4E2D\u6307\u5B9A <code>types</code> \u7684\u6587\u4EF6\u5B58\u5728\uFF0C\u90A3\u4E48\u5C31\u6B22\u547C\uFF01</li><li>\u5426\u5219\uFF0C\u5982\u679C\u8FD9\u4E2A <code>place</code> \u662F\u4E00\u4E2A\u6587\u4EF6\u5939\uFF0C\u5E76\u4E14\u5B58\u5728\u4E00\u4E2A <code>package.json</code> \u6587\u4EF6\uFF0C\u5728\u8BE5\u6587\u4EF6\u4E2D\u6307\u5B9A <code>main</code> \u7684\u6587\u4EF6\u5B58\u5728\uFF0C\u90A3\u4E48\u5C31\u6B22\u547C\uFF01</li></ul><p>\u4ECE\u6587\u4EF6\u7C7B\u578B\u4E0A\u6765\u8BF4\uFF0C\u6211\u5B9E\u9645\u4E0A\u662F\u6307 <code>.ts</code>\uFF0C <code>.d.ts</code> \u6216\u8005 <code>.js</code></p><p>\u5C31\u662F\u8FD9\u6837\uFF0C\u73B0\u5728\u4F60\u5DF2\u7ECF\u662F\u4E00\u4E2A\u6A21\u5757\u67E5\u627E\u4E13\u5BB6\uFF08\u8FD9\u5E76\u4E0D\u662F\u4E00\u4E2A\u5C0F\u5C0F\u7684\u6210\u529F\uFF09\u3002</p><h5 id="\u91CD\u5199\u7C7B\u578B\u7684\u52A8\u6001\u67E5\u627E" tabindex="-1">\u91CD\u5199\u7C7B\u578B\u7684\u52A8\u6001\u67E5\u627E <a class="header-anchor" href="#\u91CD\u5199\u7C7B\u578B\u7684\u52A8\u6001\u67E5\u627E" aria-hidden="true">#</a></h5><p>\u5728\u4F60\u7684\u9879\u76EE\u91CC\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7 <code>declare module &#39;somePath&#39;</code> \u58F0\u660E\u4E00\u4E2A\u5168\u5C40\u6A21\u5757\u7684\u65B9\u5F0F\uFF0C\u6765\u89E3\u51B3\u67E5\u627E\u6A21\u5757\u8DEF\u5F84\u7684\u95EE\u9898\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// global.d.ts</span></span>
<span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">module</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// some variable declarations</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">export</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740 \uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// anyOtherTsFileInYourProject.ts</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">// TypeScript \u5C06\u5047\u8BBE\uFF08\u5728\u6CA1\u6709\u505A\u5176\u4ED6\u67E5\u627E\u7684\u60C5\u51B5\u4E0B\uFF09</span></span>
<span class="line"><span style="color:#676E95;">// foo \u662F { bar: number }</span></span>
<span class="line"></span></code></pre></div><h5 id="import-require-\u4EC5\u4EC5\u662F\u5BFC\u5165\u7C7B\u578B" tabindex="-1">import/require \u4EC5\u4EC5\u662F\u5BFC\u5165\u7C7B\u578B <a class="header-anchor" href="#import-require-\u4EC5\u4EC5\u662F\u5BFC\u5165\u7C7B\u578B" aria-hidden="true">#</a></h5><p>\u4EE5\u4E0B\u5BFC\u5165\u8BED\u6CD5\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5B83\u5B9E\u9645\u4E0A\u53EA\u505A\u4E86\u4E24\u4EF6\u4E8B\uFF1A</p><ul><li>\u5BFC\u5165 foo \u6A21\u5757\u7684\u6240\u6709\u7C7B\u578B\u4FE1\u606F\uFF1B</li><li>\u786E\u5B9A foo \u6A21\u5757\u8FD0\u884C\u65F6\u7684\u4F9D\u8D56\u5173\u7CFB\u3002</li></ul><p>\u4F60\u53EF\u4EE5\u9009\u62E9\u4EC5\u52A0\u8F7D\u7C7B\u578B\u4FE1\u606F\uFF0C\u800C\u6CA1\u6709\u8FD0\u884C\u65F6\u7684\u4F9D\u8D56\u5173\u7CFB\u3002\u5728\u7EE7\u7EED\u4E4B\u524D\uFF0C\u4F60\u53EF\u80FD\u9700\u8981\u91CD\u65B0\u9605\u8BFB\u672C\u4E66 <a href="#%E5%A3%B0%E6%98%8E%E7%A9%BA%E9%97%B4">\u58F0\u660E\u7A7A\u95F4\u90E8\u5206</a>\u3002</p><p>\u5982\u679C\u4F60\u6CA1\u6709\u628A\u5BFC\u5165\u7684\u540D\u79F0\u5F53\u505A\u53D8\u91CF\u58F0\u660E\u7A7A\u95F4\u6765\u7528\uFF0C\u5728\u7F16\u8BD1\u6210 JavaScript \u65F6\uFF0C\u5BFC\u5165\u7684\u6A21\u5757\u5C06\u4F1A\u88AB\u5B8C\u5168\u79FB\u9664\u3002\u8FD9\u6700\u597D\u7528\u4F8B\u5B50\u6765\u89E3\u91CA\uFF0C\u4E0B\u9762\u6211\u4EEC\u5C06\u4F1A\u7ED9\u51FA\u4E00\u4E9B\u793A\u4F8B\u3002</p><h6 id="\u4F8B\u5B50-1" tabindex="-1">\u4F8B\u5B50 1 <a class="header-anchor" href="#\u4F8B\u5B50-1" aria-hidden="true">#</a></h6><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5C06\u4F1A\u7F16\u8BD1\u6210 JavaScript\uFF1A</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"></span></code></pre></div><p>\u8FD9\u662F\u6B63\u786E\u7684\uFF0C\u4E00\u4E2A\u6CA1\u6709\u88AB\u4F7F\u7528\u7684\u7A7A\u6587\u4EF6\u3002</p><h6 id="\u4F8B\u5B50-2" tabindex="-1">\u4F8B\u5B50 2 <a class="header-anchor" href="#\u4F8B\u5B50-2" aria-hidden="true">#</a></h6><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">foo</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5C06\u4F1A\u88AB\u7F16\u8BD1\u6210\uFF1A</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u662F\u56E0\u4E3A foo \uFF08\u6216\u8005\u5176\u4ED6\u4EFB\u4F55\u5C5E\u6027\u5982\uFF1A<code>foo.bas</code>\uFF09\u6CA1\u6709\u88AB\u5F53\u505A\u4E00\u4E2A\u53D8\u91CF\u4F7F\u7528\u3002</p><h6 id="\u4F8B\u5B50-3" tabindex="-1">\u4F8B\u5B50 3 <a class="header-anchor" href="#\u4F8B\u5B50-3" aria-hidden="true">#</a></h6><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5C06\u4F1A\u88AB\u7F16\u8BD1\u6210\uFF08\u5047\u8BBE\u662F commonjs\uFF09\uFF1A</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u662F\u56E0\u4E3A <code>foo</code> \u88AB\u5F53\u505A\u53D8\u91CF\u4F7F\u7528\u4E86\u3002</p><h6 id="\u4F7F\u7528\u4F8B\u5B50\uFF1A\u61D2\u52A0\u8F7D" tabindex="-1">\u4F7F\u7528\u4F8B\u5B50\uFF1A\u61D2\u52A0\u8F7D <a class="header-anchor" href="#\u4F7F\u7528\u4F8B\u5B50\uFF1A\u61D2\u52A0\u8F7D" aria-hidden="true">#</a></h6><p>\u7C7B\u578B\u63A8\u65AD\u9700\u8981\u63D0\u524D\u5B8C\u6210\uFF0C\u8FD9\u610F\u5473\u7740\uFF0C\u5982\u679C\u4F60\u60F3\u5728 <code>bar</code> \u6587\u4EF6\u91CC\uFF0C\u4F7F\u7528\u4ECE\u5176\u4ED6\u6587\u4EF6 <code>foo</code> \u5BFC\u51FA\u7684\u7C7B\u578B\uFF0C\u4F60\u5C06\u4E0D\u5F97\u4E0D\u8FD9\u4E48\u505A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">foo</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">SomeType</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u800C\uFF0C\u5728\u67D0\u4E9B\u60C5\u666F\u4E0B\uFF0C\u4F60\u53EA\u60F3\u5728\u9700\u8981\u65F6\u52A0\u8F7D\u6A21\u5757 <code>foo</code>\uFF0C\u6B64\u65F6\u4F60\u9700\u8981\u4EC5\u5728\u7C7B\u578B\u6CE8\u89E3\u4E2D\u4F7F\u7528\u5BFC\u5165\u7684\u6A21\u5757\u540D\u79F0\uFF0C\u800C<strong>\u4E0D</strong>\u662F\u5728\u53D8\u91CF\u4E2D\u4F7F\u7528\u3002\u5728\u7F16\u8BD1\u6210 JavaScript \u65F6\uFF0C\u8FD9\u4E9B\u5C06\u4F1A\u88AB\u79FB\u9664\u3002\u63A5\u7740\uFF0C\u4F60\u53EF\u4EE5\u624B\u52A8\u5BFC\u5165\u4F60\u9700\u8981\u7684\u6A21\u5757\u3002</p><p>\u4F5C\u4E3A\u4E00\u4E2A\u4F8B\u5B50\uFF0C\u8003\u8651\u4EE5\u4E0B\u57FA\u4E8E <code>commonjs</code> \u7684\u4EE3\u7801\uFF0C\u6211\u4EEC\u4EC5\u5728\u4E00\u4E2A\u51FD\u6570\u5185\u5BFC\u5165 <code>foo</code> \u6A21\u5757\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">loadFoo</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u8FD9\u662F\u61D2\u52A0\u8F7D foo\uFF0C\u539F\u59CB\u7684\u52A0\u8F7D\u4EC5\u4EC5\u7528\u6765\u505A\u7C7B\u578B\u6CE8\u89E3</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_foo</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">require</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u73B0\u5728\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528 \`_foo\` \u66FF\u4EE3 \`foo\` \u6765\u4F5C\u4E3A\u4E00\u4E2A\u53D8\u91CF\u4F7F\u7528</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4E00\u4E2A\u540C\u6837\u7B80\u5355\u7684 <code>amd</code> \u6A21\u5757\uFF08\u4F7F\u7528 requirejs\uFF09\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">loadFoo</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u8FD9\u662F\u61D2\u52A0\u8F7D foo\uFF0C\u539F\u59CB\u7684\u52A0\u8F7D\u4EC5\u4EC5\u7528\u6765\u505A\u7C7B\u578B\u6CE8\u89E3</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">require</span><span style="color:#F07178;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">_foo</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u73B0\u5728\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528 \`_foo\` \u66FF\u4EE3 \`foo\` \u6765\u4F5C\u4E3A\u4E00\u4E2A\u53D8\u91CF\u4F7F\u7528</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E9B\u901A\u5E38\u5728\u4EE5\u4E0B\u60C5\u666F\u4F7F\u7528\uFF1A</p><ul><li>\u5728 web app \u91CC\uFF0C \u5F53\u4F60\u5728\u7279\u5B9A\u8DEF\u7531\u4E0A\u52A0\u8F7D JavaScript \u65F6\uFF1B</li><li>\u5728 node \u5E94\u7528\u91CC\uFF0C\u5F53\u4F60\u53EA\u60F3\u52A0\u8F7D\u7279\u5B9A\u6A21\u5757\uFF0C\u7528\u6765\u52A0\u5FEB\u542F\u52A8\u901F\u5EA6\u65F6\u3002</li></ul><h6 id="\u4F7F\u7528\u4F8B\u5B50\uFF1A\u6253\u7834\u5FAA\u73AF\u4F9D\u8D56" tabindex="-1">\u4F7F\u7528\u4F8B\u5B50\uFF1A\u6253\u7834\u5FAA\u73AF\u4F9D\u8D56 <a class="header-anchor" href="#\u4F7F\u7528\u4F8B\u5B50\uFF1A\u6253\u7834\u5FAA\u73AF\u4F9D\u8D56" aria-hidden="true">#</a></h6><p>\u7C7B\u4F3C\u4E8E\u61D2\u52A0\u8F7D\u7684\u4F7F\u7528\u7528\u4F8B\uFF0C\u67D0\u4E9B\u6A21\u5757\u52A0\u8F7D\u5668\uFF08commonjs/node \u548C amd/requirejs\uFF09\u4E0D\u80FD\u5F88\u597D\u7684\u5904\u7406\u5FAA\u73AF\u4F9D\u8D56\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u4E00\u65B9\u9762\u6211\u4EEC\u4F7F\u7528\u5EF6\u8FDF\u52A0\u8F7D\u4EE3\u7801\uFF0C\u5E76\u5728\u53E6\u4E00\u65B9\u9762\u9884\u5148\u52A0\u8F7D\u6A21\u5757\u662F\u5F88\u5B9E\u7528\u7684\u3002</p><h6 id="\u4F7F\u7528\u4F8B\u5B50\uFF1A\u786E\u4FDD\u5BFC\u5165" tabindex="-1">\u4F7F\u7528\u4F8B\u5B50\uFF1A\u786E\u4FDD\u5BFC\u5165 <a class="header-anchor" href="#\u4F7F\u7528\u4F8B\u5B50\uFF1A\u786E\u4FDD\u5BFC\u5165" aria-hidden="true">#</a></h6><p>\u5F53\u4F60\u52A0\u8F7D\u4E00\u4E2A\u6A21\u5757\uFF0C\u53EA\u662F\u60F3\u5F15\u5165\u5176\u9644\u52A0\u7684\u4F5C\u7528\uFF08\u5982\uFF1A\u6A21\u5757\u53EF\u80FD\u4F1A\u6CE8\u518C\u4E00\u4E9B\u50CF <a href="https://codemirror.net/doc/manual.html#addons" target="_blank" rel="noreferrer">CodeMirror addons</a>\uFF09\u65F6\uFF0C\u7136\u800C\uFF0C\u5982\u679C\u4F60\u4EC5\u4EC5\u662F <code>import/require</code> \uFF08\u5BFC\u5165\uFF09\u4E00\u4E9B\u5E76\u6CA1\u6709\u4E0E\u4F60\u7684\u6A21\u5757\u6216\u8005\u6A21\u5757\u52A0\u8F7D\u5668\u6709\u4EFB\u4F55\u4F9D\u8D56\u7684 JavaScript \u4EE3\u7801\uFF0C\uFF08\u5982\uFF1Awebpack\uFF09\uFF0C\u7ECF\u8FC7 TypeScript \u7F16\u8BD1\u540E\uFF0C\u8FD9\u4E9B\u5C06\u4F1A\u88AB\u5B8C\u5168\u5FFD\u89C6\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528\u4E00\u4E2A <code>ensureImport</code> \u53D8\u91CF\uFF0C\u6765\u786E\u4FDD\u7F16\u8BD1\u7684 JavaScript \u4F9D\u8D56\u4E0E\u6A21\u5757\u3002\u5982\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./bar</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> bas </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./bas</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> ensureImport</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> bas</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="global-d-ts" tabindex="-1">global.d.ts <a class="header-anchor" href="#global-d-ts" aria-hidden="true">#</a></h4><p>\u5728\u4E0A\u6587\u4E2D\uFF0C\u5F53\u6211\u4EEC\u8BA8\u8BBA\u6587\u4EF6\u6A21\u5757\u65F6\uFF0C\u6BD4\u8F83\u4E86\u5168\u5C40\u53D8\u91CF\u4E0E\u6587\u4EF6\u6A21\u5757\uFF0C\u5E76\u4E14\u6211\u4EEC\u63A8\u8350\u4F7F\u7528\u57FA\u4E8E\u6587\u4EF6\u7684\u6A21\u5757\uFF0C\u800C\u4E0D\u662F\u9009\u62E9\u6C61\u67D3\u5168\u5C40\u547D\u540D\u7A7A\u95F4\u3002</p><p>\u7136\u800C\uFF0C\u5982\u679C\u4F60\u7684\u56E2\u961F\u91CC\u6709 TypeScript \u521D\u5B66\u8005\uFF0C\u4F60\u53EF\u4EE5\u63D0\u4F9B\u4ED6\u4EEC\u4E00\u4E2A <code>global.d.ts</code> \u6587\u4EF6\uFF0C\u7528\u6765\u5C06\u4E00\u4E9B\u63A5\u53E3\u6216\u8005\u7C7B\u578B\u653E\u5165\u5168\u5C40\u547D\u540D\u7A7A\u95F4\u91CC\uFF0C\u8FD9\u4E9B\u5B9A\u4E49\u7684\u63A5\u53E3\u548C\u7C7B\u578B\u80FD\u5728\u4F60\u7684\u6240\u6709 TypeScript \u4EE3\u7801\u91CC\u4F7F\u7528\u3002</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u5BF9\u4E8E\u4EFB\u4F55\u9700\u8981\u7F16\u8BD1\u6210 <code>JavaScript</code> \u7684\u4EE3\u7801\uFF0C\u6211\u4EEC\u5F3A\u70C8\u5EFA\u8BAE\u4F60\u653E\u5165\u6587\u4EF6\u6A21\u5757\u91CC\u3002</p></div><ul><li><code>global.d.ts</code> \u662F\u4E00\u79CD\u6269\u5145 <code>lib.d.ts</code> \u5F88\u597D\u7684\u65B9\u5F0F\uFF0C\u5982\u679C\u4F60\u9700\u8981\u7684\u8BDD\u3002</li><li>\u5F53\u4F60\u4ECE <code>JS</code> \u8FC1\u79FB\u5230 <code>TS</code> \u65F6\uFF0C\u5B9A\u4E49 <code>declare module &quot;some-library-you-dont-care-to-get-defs-for&quot;</code> \u80FD\u8BA9\u4F60\u5FEB\u901F\u5F00\u59CB\u3002</li></ul><h3 id="\u547D\u540D\u7A7A\u95F4" tabindex="-1">\u547D\u540D\u7A7A\u95F4 <a class="header-anchor" href="#\u547D\u540D\u7A7A\u95F4" aria-hidden="true">#</a></h3><p>\u5728 JavaScript \u4F7F\u7528\u547D\u540D\u7A7A\u95F4\u65F6\uFF0C \u8FD9\u6709\u4E00\u4E2A\u5E38\u7528\u7684\u3001\u65B9\u4FBF\u7684\u8BED\u6CD5\uFF1A</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">something</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">something</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)(something </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> (something </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p><code>something || (something = {})</code> \u5141\u8BB8\u533F\u540D\u51FD\u6570 <code>function (something) {}</code> \u5411\u73B0\u6709\u5BF9\u8C61\u6DFB\u52A0\u5185\u5BB9\uFF0C\u6216\u8005\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u7136\u540E\u5411\u8BE5\u5BF9\u8C61\u6DFB\u52A0\u5185\u5BB9\u3002\u8FD9\u610F\u5473\u7740\u4F60\u53EF\u4EE5\u62E5\u6709\u4E24\u4E2A\u7531\u67D0\u4E9B\u8FB9\u754C\u62C6\u6210\u7684\u5757\u3002</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">something</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">something</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)(something </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> (something </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(something)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">// { foo: 123 }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">something</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">something</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">456</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)(something </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> (something </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(something)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// { foo: 123, bar: 456 }</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u786E\u4FDD\u521B\u5EFA\u7684\u53D8\u91CF\u4E0D\u4F1A\u6CC4\u6F0F\u81F3\u5168\u5C40\u547D\u540D\u7A7A\u95F4\u65F6\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u5728 JavaScript \u4E2D\u5F88\u5E38\u89C1\u3002\u5F53\u57FA\u4E8E\u6587\u4EF6\u6A21\u5757\u4F7F\u7528\u65F6\uFF0C\u4F60\u65E0\u987B\u62C5\u5FC3\u8FD9\u70B9\uFF0C\u4F46\u662F\u8BE5\u6A21\u5F0F\u4ECD\u7136\u9002\u7528\u4E8E\u4E00\u7EC4\u51FD\u6570\u7684\u903B\u8F91\u5206\u7EC4\u3002\u56E0\u6B64 TypeScript \u63D0\u4F9B\u4E86 <code>namespace</code> \u5173\u952E\u5B57\u6765\u63CF\u8FF0\u8FD9\u79CD\u5206\u7EC4\uFF0C\u5982\u4E0B\u6240\u793A\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Utility</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">export</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">log</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">msg</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">export</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">error</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">msg</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// usage</span></span>
<span class="line"><span style="color:#A6ACCD;">Utility</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Call me</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">Utility</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">maybe</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p><code>namespace</code> \u5173\u952E\u5B57\u7F16\u8BD1\u540E\u7684 JavaScript \u4EE3\u7801\uFF0C\u4E0E\u6211\u4EEC\u65E9\u4E9B\u65F6\u5019\u770B\u5230\u7684 JavaScript \u4EE3\u7801\u4E00\u6837\u3002</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> Utility</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Utility</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u6DFB\u52A0\u5C5E\u6027\u81F3 Utility</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)(Utility </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> Utility </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u503C\u5F97\u6CE8\u610F\u7684\u4E00\u70B9\u662F\uFF0C\u547D\u540D\u7A7A\u95F4\u662F\u652F\u6301\u5D4C\u5957\u7684\u3002\u56E0\u6B64\uFF0C\u4F60\u53EF\u4EE5\u505A\u4E00\u4E9B\u7C7B\u4F3C\u4E8E\u5728 <code>Utility</code> \u547D\u540D\u7A7A\u95F4\u4E0B\u5D4C\u5957\u4E00\u4E2A\u547D\u540D\u7A7A\u95F4 <code>Messaging</code> \u7684\u4E8B\u60C5\u3002</p><p>\u5BF9\u4E8E\u5927\u591A\u6570\u9879\u76EE\uFF0C\u6211\u4EEC\u5EFA\u8BAE\u4F7F\u7528\u5916\u90E8\u6A21\u5757\u548C\u547D\u540D\u7A7A\u95F4\uFF0C\u6765\u5FEB\u901F\u6F14\u793A\u548C\u79FB\u690D\u65E7\u7684 JavaScript \u4EE3\u7801\u3002</p><h3 id="\u52A8\u6001\u5BFC\u5165\u8868\u8FBE\u5F0F" tabindex="-1">\u52A8\u6001\u5BFC\u5165\u8868\u8FBE\u5F0F <a class="header-anchor" href="#\u52A8\u6001\u5BFC\u5165\u8868\u8FBE\u5F0F" aria-hidden="true">#</a></h3><p>\u52A8\u6001\u5BFC\u5165\u8868\u8FBE\u5F0F\u662F ECMAScript \u7684\u4E00\u4E2A\u65B0\u529F\u80FD\uFF0C\u5B83\u5141\u8BB8\u4F60\u5728\u7A0B\u5E8F\u7684\u4EFB\u610F\u4F4D\u7F6E\u5F02\u6B65\u52A0\u8F7D\u4E00\u4E2A\u6A21\u5757\uFF0CTC39 JavaScript \u59D4\u5458\u4F1A\u6709\u4E00\u4E2A\u63D0\u6848\uFF0C\u76EE\u524D\u5904\u4E8E\u7B2C\u56DB\u9636\u6BB5\uFF0C\u5B83\u88AB\u79F0\u4E3A <a href="https://github.com/tc39/proposal-dynamic-import" target="_blank" rel="noreferrer">import() proposal for JavaScript</a>\u3002</p><p>\u6B64\u5916\uFF0C<strong>webpack</strong> bundler \u6709\u4E00\u4E2A <code>Code Splitting</code> \u529F\u80FD\uFF0C\u5B83\u80FD\u5141\u8BB8\u4F60\u5C06\u4EE3\u7801\u62C6\u5206\u4E3A\u8BB8\u591A\u5757\uFF0C\u8FD9\u4E9B\u5757\u5728\u5C06\u6765\u53EF\u88AB\u5F02\u6B65\u4E0B\u8F7D\u3002\u56E0\u6B64\uFF0C\u4F60\u53EF\u4EE5\u5728\u7A0B\u5E8F\u4E2D\u9996\u5148\u63D0\u4F9B\u4E00\u4E2A\u6700\u5C0F\u7684\u7A0B\u5E8F\u542F\u52A8\u5305\uFF0C\u5E76\u5728\u5C06\u6765\u5F02\u6B65\u52A0\u8F7D\u5176\u4ED6\u6A21\u5757\u3002</p><p>\u8FD9\u5F88\u81EA\u7136\u5C31\u4F1A\u8BA9\u4EBA\u60F3\u5230\uFF08\u5982\u679C\u6211\u4EEC\u5DE5\u4F5C\u5728 webpack dev \u7684\u5DE5\u4F5C\u6D41\u7A0B\u4E2D\uFF09<a href="https://github.com/Microsoft/TypeScript/wiki/What%27s-new-in-TypeScript#dynamic-import-expressions" target="_blank" rel="noreferrer">TypeScript 2.4 dynamic import expressions</a> \u5C06\u4F1A\u628A\u4F60\u6700\u7EC8\u751F\u6210\u7684 JavaScript \u4EE3\u7801\u81EA\u52A8\u5206\u5272\u6210\u5F88\u591A\u5757\u3002\u4F46\u662F\u8FD9\u4F3C\u4E4E\u5E76\u4E0D\u5BB9\u6613\u5B9E\u73B0\uFF0C\u56E0\u4E3A\u5B83\u4F9D\u8D56\u4E8E\u6211\u4EEC\u6B63\u5728\u4F7F\u7528\u7684 <code>tsconfig.json</code> \u914D\u7F6E\u6587\u4EF6\u3002</p><p>webpack \u5B9E\u73B0\u4EE3\u7801\u5206\u5272\u7684\u65B9\u5F0F\u6709\u4E24\u79CD\uFF1A\u4F7F\u7528 <code>import()</code> \uFF08\u9996\u9009\uFF0CECMAScript \u7684\u63D0\u6848\uFF09\u548C <code>require.ensure()</code> \uFF08\u6700\u540E\u8003\u8651\uFF0Cwebpack \u5177\u4F53\u5B9E\u73B0\uFF09\u3002\u56E0\u6B64\uFF0C\u6211\u4EEC\u671F\u671B TypeScript \u7684\u8F93\u51FA\u662F\u4FDD\u7559 <code>import()</code> \u8BED\u53E5\uFF0C\u800C\u4E0D\u662F\u5C06\u5176\u8F6C\u5316\u4E3A\u5176\u4ED6\u4EFB\u4F55\u4EE3\u7801\u3002</p><p>\u8BA9\u6211\u4EEC\u6765\u770B\u4E00\u4E2A\u4F8B\u5B50\uFF0C\u5728\u8FD9\u4E2A\u4F8B\u5B50\u4E2D\uFF0C\u6211\u4EEC\u6F14\u793A\u4E86\u5982\u4F55\u914D\u7F6E webpack \u548C TypeScript 2.4 +\u3002</p><p>\u5728\u4E0B\u9762\u7684\u4EE3\u7801\u4E2D\uFF0C\u6211\u5E0C\u671B\u61D2\u52A0\u8F7D <code>moment</code> \u5E93\uFF0C\u540C\u65F6\u6211\u4E5F\u5E0C\u671B\u4F7F\u7528\u4EE3\u7801\u5206\u5272\u7684\u529F\u80FD\uFF0C\u8FD9\u610F\u5473 <code>moment</code> \u4F1A\u88AB\u5206\u5272\u5230\u4E00\u4E2A\u5355\u72EC\u7684 JavaScript \u6587\u4EF6\uFF0C\u5F53\u5B83\u88AB\u4F7F\u7528\u65F6\uFF0C\u4F1A\u88AB\u5F02\u6B65\u52A0\u8F7D\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#82AAFF;">import</span><span style="color:#A6ACCD;">(</span><span style="color:#676E95;">/* webpackChunkName: &quot;momentjs&quot; */</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">moment</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;">moment</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u61D2\u52A0\u8F7D\u7684\u6A21\u5757\u62E5\u6709\u6240\u6709\u7684\u7C7B\u578B\uFF0C\u5E76\u4E14\u80FD\u591F\u6309\u671F\u5DE5\u4F5C</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u7C7B\u578B\u68C0\u67E5\u4F1A\u5DE5\u4F5C\uFF0C\u4EE3\u7801\u5F15\u7528\u4E5F\u4F1A\u5DE5\u4F5C  :100:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">time</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">moment</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">format</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">TypeScript &gt;= 2.4.0 Dynamic Import Expression:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">time</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Failed to load moment</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u662F <code>tsconfig.json</code> \u7684\u914D\u7F6E\u6587\u4EF6\uFF1A</p><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">compilerOptions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">target</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">es5</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">esnext</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">lib</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dom</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">es5</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scripthost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">es2015.promise</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">jsx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">declaration</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">sourceMap</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">outDir</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./dist/js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">strict</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">moduleResolution</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">node</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">typeRoots</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./node_modules/@types</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">types</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">node</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">react-dom</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">DANGER</p><ul><li>\u4F7F\u7528 <code>&quot;module&quot;: &quot;esnext&quot;</code> \u9009\u9879\uFF1ATypeScript \u4FDD\u7559 <code>import()</code> \u8BED\u53E5\uFF0C\u8BE5\u8BED\u53E5\u7528\u4E8E Webpack Code Splitting\u3002</li><li>\u8FDB\u4E00\u6B65\u4E86\u89E3\u6709\u5173\u4FE1\u606F\uFF0C\u63A8\u8350\u9605\u8BFB\u8FD9\u7BC7\u6587\u7AE0\uFF1A<a href="https://blog.josequinto.com/2017/06/29/dynamic-import-expressions-and-webpack-code-splitting-integration-with-typescript-2-4/" target="_blank" rel="noreferrer">Dynamic Import Expressions and webpack 2 Code Splitting integration with TypeScript 2.4</a>.</li></ul></div><h2 id="typescript-\u7C7B\u578B\u7CFB\u7EDF" tabindex="-1">TypeScript \u7C7B\u578B\u7CFB\u7EDF <a class="header-anchor" href="#typescript-\u7C7B\u578B\u7CFB\u7EDF" aria-hidden="true">#</a></h2><h3 id="\u6982\u89C8" tabindex="-1">\u6982\u89C8 <a class="header-anchor" href="#\u6982\u89C8" aria-hidden="true">#</a></h3><h4 id="typescript-\u7C7B\u578B\u7CFB\u7EDF-1" tabindex="-1">TypeScript \u7C7B\u578B\u7CFB\u7EDF <a class="header-anchor" href="#typescript-\u7C7B\u578B\u7CFB\u7EDF-1" aria-hidden="true">#</a></h4><p>TypeScript \u7C7B\u578B\u7CFB\u7EDF\u7684\u4E3B\u8981\u529F\u80FD\u3002\u4EE5\u4E0B\u662F\u4E00\u4E9B\u5173\u952E\u70B9\uFF1A</p><ul><li>TypeScript \u7684\u7C7B\u578B\u7CFB\u7EDF\u88AB\u8BBE\u8BA1\u4E3A\u53EF\u9009\u7684\uFF0C\u56E0\u6B64\uFF0C\u4F60\u7684 JavaScript \u5C31\u662F TypeScript;</li><li>TypeScript \u4E0D\u4F1A\u963B\u6B62 JavaScript \u7684\u8FD0\u884C\uFF0C\u5373\u4F7F\u5B58\u5728\u7C7B\u578B\u9519\u8BEF\u4E5F\u4E0D\u4F8B\u5916\uFF0C\u8FD9\u80FD\u8BA9\u4F60\u7684 JavaScript \u9010\u6B65\u8FC1\u79FB\u81F3 TypeScript\u3002</li></ul><p>\u73B0\u5728\u8BA9\u6211\u4EEC\u5F00\u59CB\u5B66\u4E60 TypeScript \u7C7B\u578B\u7CFB\u7EDF\u7684\u8BED\u6CD5\u5427\uFF0C\u5728\u8FD9\u4E00\u7AE0\u8282\u4E2D\uFF0C\u4F60\u5C06\u80FD\u7ED9\u4F60\u7684\u4EE3\u7801\u52A0\u4E0A\u7C7B\u578B\u6CE8\u89E3\uFF0C\u5E76\u4E14\u80FD\u770B\u5230\u5B83\u7684\u76CA\u5904\u3002\u8FD9\u5C06\u4E3A\u6211\u4EEC\u8FDB\u4E00\u6B65\u4E86\u89E3\u7C7B\u578B\u7CFB\u7EDF\u505A\u94FA\u57AB\u3002</p><h4 id="\u57FA\u672C\u6CE8\u89E3" tabindex="-1">\u57FA\u672C\u6CE8\u89E3 <a class="header-anchor" href="#\u57FA\u672C\u6CE8\u89E3" aria-hidden="true">#</a></h4><p>\u5982\u524D\u6587\u6240\u63D0\u53CA\uFF0C\u7C7B\u578B\u6CE8\u89E3\u4F7F\u7528 <code>:TypeAnnotation</code> \u8BED\u6CD5\u3002\u5728\u7C7B\u578B\u58F0\u660E\u7A7A\u95F4\u4E2D\u53EF\u7528\u7684\u4EFB\u4F55\u5185\u5BB9\u90FD\u53EF\u4EE5\u7528\u4F5C\u7C7B\u578B\u6CE8\u89E3\u3002</p><p>\u5728\u4E0B\u9762\u8FD9\u4E2A\u4F8B\u5B50\u4E2D\uFF0C\u4F7F\u7528\u4E86\u53D8\u91CF\u3001\u51FD\u6570\u53C2\u6570\u4EE5\u53CA\u51FD\u6570\u8FD4\u56DE\u503C\u7684\u7C7B\u578B\u6CE8\u89E3\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> num</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">identity</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u539F\u59CB\u7C7B\u578B" tabindex="-1">\u539F\u59CB\u7C7B\u578B <a class="header-anchor" href="#\u539F\u59CB\u7C7B\u578B" aria-hidden="true">#</a></h4><p>JavaScript \u539F\u59CB\u7C7B\u578B\u4E5F\u540C\u6837\u9002\u5E94\u4E8E TypeScript \u7684\u7C7B\u578B\u7CFB\u7EDF\uFF0C\u56E0\u6B64 <code>string</code>\u3001<code>number</code>\u3001<code>boolean</code> \u4E5F\u53EF\u4EE5\u88AB\u7528\u4F5C\u7C7B\u578B\u6CE8\u89E3\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> num</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> str</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bool</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123.456</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">str </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">str </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">bool </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">bool </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">bool </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">false</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"></span></code></pre></div><h4 id="\u6570\u7EC4" tabindex="-1">\u6570\u7EC4 <a class="header-anchor" href="#\u6570\u7EC4" aria-hidden="true">#</a></h4><p>TypeScript \u4E3A\u6570\u7EC4\u63D0\u4F9B\u4E86\u4E13\u7528\u7684\u7C7B\u578B\u8BED\u6CD5\uFF0C\u56E0\u6B64\u4F60\u53EF\u4EE5\u5F88\u8F7B\u6613\u7684\u6CE8\u89E3\u6570\u7EC4\u3002\u5B83\u4F7F\u7528\u540E\u7F00 <code>[]</code>\uFF0C \u63A5\u7740\u4F60\u53EF\u4EE5\u6839\u636E\u9700\u8981\u8865\u5145\u4EFB\u4F55\u6709\u6548\u7684\u7C7B\u578B\u6CE8\u89E3\uFF08\u5982\uFF1A<code>:boolean[]</code>\uFF09\u3002\u5B83\u80FD\u8BA9\u4F60\u5B89\u5168\u7684\u4F7F\u7528\u4EFB\u4F55\u6709\u5173\u6570\u7EC4\u7684\u64CD\u4F5C\uFF0C\u800C\u4E14\u5B83\u4E5F\u80FD\u9632\u6B62\u4E00\u4E9B\u7C7B\u4F3C\u4E8E\u8D4B\u503C\u9519\u8BEF\u7C7B\u578B\u7ED9\u6210\u5458\u7684\u884C\u4E3A\u3002\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> boolArray</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#A6ACCD;">[]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">boolArray </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(boolArray[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// true</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(boolArray</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">boolArray[</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">boolArray </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">boolArray[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">false</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"><span style="color:#A6ACCD;">boolArray </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">false</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"><span style="color:#A6ACCD;">boolArray </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">false</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"></span></code></pre></div><h4 id="\u63A5\u53E3" tabindex="-1">\u63A5\u53E3 <a class="header-anchor" href="#\u63A5\u53E3" aria-hidden="true">#</a></h4><p>\u63A5\u53E3\u662F TypeScript \u7684\u4E00\u4E2A\u6838\u5FC3\u77E5\u8BC6\uFF0C\u5B83\u80FD\u5408\u5E76\u4F17\u591A\u7C7B\u578B\u58F0\u660E\u81F3\u4E00\u4E2A\u7C7B\u578B\u58F0\u660E\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">first</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">second</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Name</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">first</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">John</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">second</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Doe</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// Error: &#39;Second is missing&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">first</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">John</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// Error: &#39;Second is the wrong type&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">first</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">John</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">second</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1337</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u8FD9\u91CC\uFF0C\u6211\u4EEC\u628A\u7C7B\u578B\u6CE8\u89E3\uFF1A<code>first: string</code> + <code>second: string</code> \u5408\u5E76\u5230\u4E86\u4E00\u4E2A\u65B0\u7684\u7C7B\u578B\u6CE8\u89E3 <code>Name</code> \u91CC\uFF0C\u8FD9\u6837\u80FD\u5F3A\u5236\u5BF9\u6BCF\u4E2A\u6210\u5458\u8FDB\u884C\u7C7B\u578B\u68C0\u67E5\u3002\u63A5\u53E3\u5728 TypeScript \u62E5\u6709\u5F3A\u5927\u7684\u529B\u91CF\uFF0C\u7A0D\u540E\uFF0C\u6211\u4EEC\u5C06\u4F1A\u7528\u4E00\u4E2A\u5185\u5BB9\u4E13\u95E8\u9610\u8FF0\u5982\u4F55\u66F4\u597D\u7684\u4F7F\u7528\u5B83\u3002</p><h4 id="\u5185\u8054\u7C7B\u578B\u6CE8\u89E3" tabindex="-1">\u5185\u8054\u7C7B\u578B\u6CE8\u89E3 <a class="header-anchor" href="#\u5185\u8054\u7C7B\u578B\u6CE8\u89E3" aria-hidden="true">#</a></h4><p>\u4E0E\u521B\u5EFA\u4E00\u4E2A\u63A5\u53E3\u4E0D\u540C\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528\u5185\u8054\u6CE8\u89E3\u8BED\u6CD5\u6CE8\u89E3\u4EFB\u4F55\u5185\u5BB9\uFF1A<code>:{ /*Structure*/ }</code>\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">first</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">second</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">first</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">John</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">second</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Doe</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// Error: &#39;Second is missing&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">first</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">John</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// Error: &#39;Second is the wrong type&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">first</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">John</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">second</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1337</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>\u5185\u8054\u7C7B\u578B\u80FD\u4E3A\u4F60\u5FEB\u901F\u7684\u63D0\u4F9B\u4E00\u4E2A\u7C7B\u578B\u6CE8\u89E3\u3002\u5B83\u53EF\u4EE5\u5E2E\u52A9\u4F60\u7701\u53BB\u4E3A\u7C7B\u578B\u8D77\u540D\u7684\u9EBB\u70E6\uFF08\u4F60\u53EF\u80FD\u4F1A\u4F7F\u7528\u4E00\u4E2A\u5F88\u7CDF\u7CD5\u7684\u540D\u79F0\uFF09\u3002\u7136\u800C\uFF0C\u5982\u679C\u4F60\u53D1\u73B0\u9700\u8981\u591A\u6B21\u4F7F\u7528\u76F8\u540C\u7684\u5185\u8054\u6CE8\u89E3\u65F6\uFF0C\u90A3\u4E48\u8003\u8651\u628A\u5B83\u91CD\u6784\u4E3A\u4E00\u4E2A\u63A5\u53E3\uFF08\u6216\u8005\u662F <code>type alias</code>\uFF0C\u5B83\u4F1A\u5728\u63A5\u4E0B\u6765\u7684\u90E8\u5206\u63D0\u5230\uFF09\u662F\u4E00\u4E2A\u4E0D\u9519\u7684\u4E3B\u610F\u3002</p><h4 id="\u7279\u6B8A\u7C7B\u578B" tabindex="-1">\u7279\u6B8A\u7C7B\u578B <a class="header-anchor" href="#\u7279\u6B8A\u7C7B\u578B" aria-hidden="true">#</a></h4><p>\u9664\u4E86\u88AB\u63D0\u5230\u7684\u4E00\u4E9B\u539F\u59CB\u7C7B\u578B\uFF0C\u5728 TypeScript \u4E2D\uFF0C\u8FD8\u5B58\u5728\u4E00\u4E9B\u7279\u6B8A\u7684\u7C7B\u578B\uFF0C\u5B83\u4EEC\u662F <code>any</code>\u3001 <code>null</code>\u3001 <code>undefined</code> \u4EE5\u53CA <code>void</code>\u3002</p><h5 id="any" tabindex="-1">any <a class="header-anchor" href="#any" aria-hidden="true">#</a></h5><p><code>any</code> \u7C7B\u578B\u5728 TypeScript \u7C7B\u578B\u7CFB\u7EDF\u4E2D\u5360\u6709\u7279\u6B8A\u7684\u5730\u4F4D\u3002\u5B83\u63D0\u4F9B\u7ED9\u4F60\u4E00\u4E2A\u7C7B\u578B\u7CFB\u7EDF\u7684\u300C\u540E\u95E8\u300D,TypeScript \u5C06\u4F1A\u628A\u7C7B\u578B\u68C0\u67E5\u5173\u95ED\u3002\u5728\u7C7B\u578B\u7CFB\u7EDF\u91CC <code>any</code> \u80FD\u591F\u517C\u5BB9\u6240\u6709\u7684\u7C7B\u578B\uFF08\u5305\u62EC\u5B83\u81EA\u5DF1\uFF09\u3002\u56E0\u6B64\uFF0C\u6240\u6709\u7C7B\u578B\u90FD\u80FD\u88AB\u8D4B\u503C\u7ED9\u5B83\uFF0C\u5B83\u4E5F\u80FD\u88AB\u8D4B\u503C\u7ED9\u5176\u4ED6\u4EFB\u4F55\u7C7B\u578B\u3002\u4EE5\u4E0B\u6709\u4E00\u4E2A\u8BC1\u660E\u4F8B\u5B50\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> power</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u8D4B\u503C\u4EFB\u610F\u7C7B\u578B</span></span>
<span class="line"><span style="color:#A6ACCD;">power </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">power </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u5B83\u4E5F\u517C\u5BB9\u4EFB\u4F55\u7C7B\u578B</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> num</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">power </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> num</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> power</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5F53\u4F60\u628A JavaScript \u8FC1\u79FB\u81F3 TypeScript \u65F6\uFF0C\u4F60\u5C06\u4F1A\u7ECF\u5E38\u6027\u4F7F\u7528 <code>any</code>\u3002\u4F46\u4F60\u5FC5\u987B\u51CF\u5C11\u5BF9\u5B83\u7684\u4F9D\u8D56\uFF0C\u56E0\u4E3A\u4F60\u9700\u8981\u786E\u4FDD\u7C7B\u578B\u5B89\u5168\u3002\u5F53\u4F7F\u7528 <code>any</code> \u65F6\uFF0C\u4F60\u57FA\u672C\u4E0A\u662F\u5728\u544A\u8BC9 TypeScript \u7F16\u8BD1\u5668\u4E0D\u8981\u8FDB\u884C\u4EFB\u4F55\u7684\u7C7B\u578B\u68C0\u67E5\u3002</p><h5 id="null-\u548C-undefined" tabindex="-1">null \u548C undefined <a class="header-anchor" href="#null-\u548C-undefined" aria-hidden="true">#</a></h5><p>\u5728\u7C7B\u578B\u7CFB\u7EDF\u4E2D\uFF0CJavaScript \u4E2D\u7684 null \u548C undefined \u5B57\u9762\u91CF\u548C\u5176\u4ED6\u88AB\u6807\u6CE8\u4E86 <code>any</code> \u7C7B\u578B\u7684\u53D8\u91CF\u4E00\u6837\uFF0C\u90FD\u80FD\u88AB\u8D4B\u503C\u7ED9\u4EFB\u610F\u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u5982\u4E0B\u4F8B\u5B50\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// strictNullChecks: false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> num</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> str</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u8FD9\u4E9B\u7C7B\u578B\u80FD\u88AB\u8D4B\u4E88</span></span>
<span class="line"><span style="color:#A6ACCD;">num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#A6ACCD;">str </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">undefined;</span></span>
<span class="line"></span></code></pre></div><h5 id="void" tabindex="-1">void <a class="header-anchor" href="#void" aria-hidden="true">#</a></h5><p>\u4F7F\u7528 <code>:void</code> \u6765\u8868\u793A\u4E00\u4E2A\u51FD\u6570\u6CA1\u6709\u4E00\u4E2A\u8FD4\u56DE\u503C</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">log</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">message</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u8303\u578B" tabindex="-1">\u8303\u578B <a class="header-anchor" href="#\u8303\u578B" aria-hidden="true">#</a></h4><p>\u5728\u8BA1\u7B97\u673A\u79D1\u5B66\u4E2D\uFF0C\u8BB8\u591A\u7B97\u6CD5\u548C\u6570\u636E\u7ED3\u6784\u5E76\u4E0D\u4F1A\u4F9D\u8D56\u4E8E\u5BF9\u8C61\u7684\u5B9E\u9645\u7C7B\u578B\u3002\u4F46\u662F\uFF0C\u4F60\u4ECD\u7136\u4F1A\u60F3\u5728\u6BCF\u4E2A\u53D8\u91CF\u91CC\u5F3A\u5236\u63D0\u4F9B\u7EA6\u675F\u3002\u4F8B\u5982\uFF1A\u5728\u4E00\u4E2A\u51FD\u6570\u4E2D\uFF0C\u5B83\u63A5\u53D7\u4E00\u4E2A\u5217\u8868\uFF0C\u5E76\u4E14\u8FD4\u56DE\u8FD9\u4E2A\u5217\u8868\u7684\u53CD\u5411\u6392\u5E8F\uFF0C\u8FD9\u91CC\u7684\u7EA6\u675F\u662F\u6307\u4F20\u5165\u81F3\u51FD\u6570\u7684\u53C2\u6570\u4E0E\u51FD\u6570\u7684\u8FD4\u56DE\u503C\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">reverse</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">items</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;">[]</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;">[] </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">toreturn</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">items</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">--</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">toreturn</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">items</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">toreturn</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> sample </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> reversed </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">reverse</span><span style="color:#A6ACCD;">(sample)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(reversed)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 3, 2, 1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Safety</span></span>
<span class="line"><span style="color:#A6ACCD;">reversed[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"><span style="color:#A6ACCD;">reversed </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">reversed[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#A6ACCD;">reversed </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u4E0A\u4E2A\u4F8B\u5B50\u4E2D\uFF0C\u51FD\u6570 <code>reverse</code> \u63A5\u53D7\u4E00\u4E2A\u7C7B\u578B\u4E3A <code>T</code>\uFF08\u6CE8\u610F\u5728 <code>reverse&lt;T&gt;</code> \u4E2D\u7684\u7C7B\u578B\u53C2\u6570\uFF09 \u7684\u6570\u7EC4\uFF08<code>items: T[]</code>\uFF09\uFF0C\u8FD4\u56DE\u503C\u4E3A\u7C7B\u578B <code>T</code> \u7684\u4E00\u4E2A\u6570\u7EC4\uFF08\u6CE8\u610F\uFF1A<code>T[]</code>\uFF09\uFF0C\u51FD\u6570 <code>reverse</code> \u7684\u8FD4\u56DE\u503C\u7C7B\u578B\u4E0E\u5B83\u63A5\u53D7\u7684\u53C2\u6570\u7684\u7C7B\u578B\u4E00\u6837\u3002\u5F53\u4F60\u4F20\u5165 <code>const sample = [1, 2, 3]</code> \u65F6\uFF0CTypeScript \u80FD\u63A8\u65AD\u51FA <code>reverse</code> \u4E3A <code>number[]</code> \u7C7B\u578B\uFF0C\u4ECE\u800C\u80FD\u7ED9\u4F60\u7C7B\u578B\u5B89\u5168\u3002\u4E0E\u6B64\u76F8\u4F3C\uFF0C\u5F53\u4F60\u4F20\u5165\u4E00\u4E2A\u7C7B\u578B\u4E3A <code>string[]</code> \u7C7B\u578B\u7684\u6570\u7EC4\u65F6\uFF0CTypeScript \u80FD\u63A8\u65AD <code>reverse</code> \u4E3A <code>string[]</code> \u7C7B\u578B\uFF0C\u5982\u4E0B\u4F8B\u5B50\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> strArr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> reversedStrs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">reverse</span><span style="color:#A6ACCD;">(strArr)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">reversedStrs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"></span></code></pre></div><p>\u4E8B\u5B9E\u4E0A\uFF0CJavaScript \u6570\u7EC4\u5DF2\u7ECF\u62E5\u6709\u4E86 reverse \u7684\u65B9\u6CD5\uFF0CTypeScript \u4E5F\u786E\u5B9E\u4F7F\u7528\u4E86\u6CDB\u578B\u6765\u5B9A\u4E49\u5176\u7ED3\u6784\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Array</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">reverse</span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;">[]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u610F\u5473\u7740\uFF0C\u5F53\u4F60\u5728\u6570\u7EC4\u4E0A\u8C03\u7528 <code>.reverse</code> \u65B9\u6CD5\u65F6\uFF0C\u5C06\u4F1A\u83B7\u5F97\u7C7B\u578B\u5B89\u5168\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> numArr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> reversedNums </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> numArr</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reverse</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">reversedNums </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"></span></code></pre></div><p>\u5F53\u7A0D\u540E\u5728 <a href="#%E7%8E%AF%E5%A2%83%E5%A3%B0%E6%98%8E">\u73AF\u5883\u58F0\u660E</a> \u7AE0\u8282\u4E2D\u63D0\u53CA <code>lib.d.ts</code> \u65F6\uFF0C\u6211\u4EEC\u4F1A\u8BA8\u8BBA\u66F4\u591A\u5173\u4E8E <code>Array&lt;T&gt;</code> \u7684\u4FE1\u606F\u3002</p><h4 id="\u8054\u5408\u7C7B\u578B" tabindex="-1">\u8054\u5408\u7C7B\u578B <a class="header-anchor" href="#\u8054\u5408\u7C7B\u578B" aria-hidden="true">#</a></h4><p>\u5728 JavaScript \u4E2D\uFF0C\u4F60\u53EF\u80FD\u5E0C\u671B\u5C5E\u6027\u4E3A\u591A\u79CD\u7C7B\u578B\u4E4B\u4E00\uFF0C\u5982\u5B57\u7B26\u4E32\u6216\u8005\u6570\u7EC4\u3002\u8FD9\u6B63\u662F TypeScript \u4E2D\u8054\u5408\u7C7B\u578B\u80FD\u6D3E\u4E0A\u7528\u573A\u7684\u5730\u65B9\uFF08\u5B83\u4F7F\u7528 <code>|</code> \u4F5C\u4E3A\u6807\u8BB0\uFF0C\u5982 <code>string | number</code>\uFF09\u3002\u5173\u4E8E\u8054\u5408\u7C7B\u578B\uFF0C\u4E00\u4E2A\u5E38\u89C1\u7684\u7528\u4F8B\u662F\u4E00\u4E2A\u53EF\u4EE5\u63A5\u53D7\u5B57\u7B26\u4E32\u6570\u7EC4\u6216\u5355\u4E2A\u5B57\u7B26\u4E32\u7684\u51FD\u6570\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">formatCommandline</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">command</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">[] </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">line</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">command</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">line</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">command</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">trim</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">line</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">command</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">trim</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// Do stuff with line: string</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u4EA4\u53C9\u7C7B\u578B" tabindex="-1">\u4EA4\u53C9\u7C7B\u578B <a class="header-anchor" href="#\u4EA4\u53C9\u7C7B\u578B" aria-hidden="true">#</a></h4><p>\u5728 JavaScript \u4E2D\uFF0C <code>extend</code> \u662F\u4E00\u79CD\u975E\u5E38\u5E38\u89C1\u7684\u6A21\u5F0F\uFF0C\u5728\u8FD9\u79CD\u6A21\u5F0F\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u4ECE\u4E24\u4E2A\u5BF9\u8C61\u4E2D\u521B\u5EFA\u4E00\u4E2A\u65B0\u5BF9\u8C61\uFF0C\u65B0\u5BF9\u8C61\u62E5\u6709\u7740\u4E24\u4E2A\u5BF9\u8C61\u6240\u6709\u7684\u529F\u80FD\u3002\u4EA4\u53C9\u7C7B\u578B\u53EF\u4EE5\u8BA9\u4F60\u5B89\u5168\u7684\u4F7F\u7528\u6B64\u79CD\u6A21\u5F0F\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">extend</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">object</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">U</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">object</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">first</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">second</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">U</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">U</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> &lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">U</span><span style="color:#F07178;">&gt;</span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">id</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">first</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    (&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">)[</span><span style="color:#A6ACCD;">id</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">first</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">id</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">id</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">second</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">hasOwnProperty</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">id</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      (&lt;</span><span style="color:#FFCB6B;">U</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">)[</span><span style="color:#A6ACCD;">id</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">second</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">id</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">extend</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">42</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u73B0\u5728 x \u62E5\u6709\u4E86 a \u5C5E\u6027\u4E0E b \u5C5E\u6027</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> x</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> x</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="\u5143\u7EC4\u7C7B\u578B" tabindex="-1">\u5143\u7EC4\u7C7B\u578B <a class="header-anchor" href="#\u5143\u7EC4\u7C7B\u578B" aria-hidden="true">#</a></h4><p>JavaScript \u5E76\u4E0D\u652F\u6301\u5143\u7EC4\uFF0C\u5F00\u53D1\u8005\u4EEC\u901A\u5E38\u53EA\u80FD\u4F7F\u7528\u6570\u7EC4\u6765\u8868\u793A\u5143\u7EC4\u3002\u800C TypeScript \u652F\u6301\u5B83\uFF0C\u5F00\u53D1\u8005\u53EF\u4EE5\u4F7F\u7528 <code>:[typeofmember1, typeofmember2]</code> \u7684\u5F62\u5F0F\uFF0C\u4E3A\u5143\u7EC4\u6DFB\u52A0\u7C7B\u578B\u6CE8\u89E3\uFF0C\u5143\u7EC4\u53EF\u4EE5\u5305\u542B\u4EFB\u610F\u6570\u91CF\u7684\u6210\u5458\uFF0C\u793A\u4F8B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> nameNumber</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Ok</span></span>
<span class="line"><span style="color:#A6ACCD;">nameNumber </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Jenny</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">221345</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Error</span></span>
<span class="line"><span style="color:#A6ACCD;">nameNumber </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Jenny</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">221345</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5C06\u5176\u4E0E TypeScript \u4E2D\u7684\u89E3\u6784\u4E00\u8D77\u4F7F\u7528\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> nameNumber</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">nameNumber </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Jenny</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">322134</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> num</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> nameNumber</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="\u7C7B\u578B\u522B\u540D" tabindex="-1">\u7C7B\u578B\u522B\u540D <a class="header-anchor" href="#\u7C7B\u578B\u522B\u540D" aria-hidden="true">#</a></h4><p>TypeScript \u63D0\u4F9B\u4E86\u4E3A\u7C7B\u578B\u6CE8\u89E3\u8BBE\u7F6E\u522B\u540D\u7684\u4FBF\u6377\u8BED\u6CD5\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528 <code>type SomeName = someValidTypeAnnotation</code> \u6765\u521B\u5EFA\u522B\u540D\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">StrOrNum</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4F7F\u7528</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> sample</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">StrOrNum</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">sample </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">sample </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4F1A\u68C0\u67E5\u7C7B\u578B</span></span>
<span class="line"><span style="color:#A6ACCD;">sample </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"></span></code></pre></div><p>\u4E0E\u63A5\u53E3\u4E0D\u540C\uFF0C\u4F60\u53EF\u4EE5\u4E3A\u4EFB\u610F\u7684\u7C7B\u578B\u6CE8\u89E3\u63D0\u4F9B\u7C7B\u578B\u522B\u540D\uFF08\u5728\u8054\u5408\u7C7B\u578B\u548C\u4EA4\u53C9\u7C7B\u578B\u4E2D\u6BD4\u8F83\u5B9E\u7528\uFF09\uFF0C\u4E0B\u9762\u662F\u4E00\u4E9B\u80FD\u8BA9\u4F60\u719F\u6089\u7C7B\u578B\u522B\u540D\u8BED\u6CD5\u7684\u793A\u4F8B\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Text</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Coordinates</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Callback</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>\u5982\u679C\u4F60\u9700\u8981\u4F7F\u7528\u7C7B\u578B\u6CE8\u89E3\u7684\u5C42\u6B21\u7ED3\u6784\uFF0C\u8BF7\u4F7F\u7528\u63A5\u53E3\u3002\u5B83\u80FD\u4F7F\u7528 <code>implements</code> \u548C <code>extends</code></li><li>\u4E3A\u4E00\u4E2A\u7B80\u5355\u7684\u5BF9\u8C61\u7C7B\u578B\uFF08\u5982\u4E0A\u9762\u4F8B\u5B50\u4E2D\u7684 Coordinates\uFF09\u4F7F\u7528\u7C7B\u578B\u522B\u540D\uFF0C\u53EA\u9700\u8981\u7ED9\u5B83\u4E00\u4E2A\u8BED\u4E49\u5316\u7684\u540D\u5B57\u5373\u53EF\u3002\u53E6\u5916\uFF0C\u5F53\u4F60\u60F3\u7ED9\u8054\u5408\u7C7B\u578B\u548C\u4EA4\u53C9\u7C7B\u578B\u63D0\u4F9B\u4E00\u4E2A\u8BED\u4E49\u5316\u7684\u540D\u79F0\u65F6\uFF0C\u4E00\u4E2A\u7C7B\u578B\u522B\u540D\u5C06\u4F1A\u662F\u4E00\u4E2A\u597D\u7684\u9009\u62E9\u3002</li></ul></div><h4 id="\u6700\u540E" tabindex="-1">\u6700\u540E <a class="header-anchor" href="#\u6700\u540E" aria-hidden="true">#</a></h4><p>\u73B0\u5728\u4F60\u5DF2\u7ECF\u80FD\u591F\u4E3A\u4F60\u7684\u5927\u90E8\u5206 JavaScript \u4EE3\u7801\u6DFB\u52A0\u7C7B\u578B\u6CE8\u89E3\uFF0C\u63A5\u7740\uFF0C\u8BA9\u6211\u4EEC\u6DF1\u5165\u4E86\u89E3 TypeScript \u7684\u7C7B\u578B\u7CFB\u7EDF\u5427\u3002</p><h3 id="\u4ECEjavascript-\u8FC1\u79FB" tabindex="-1">\u4ECEJavaScript \u8FC1\u79FB <a class="header-anchor" href="#\u4ECEjavascript-\u8FC1\u79FB" aria-hidden="true">#</a></h3><p>\u9996\u5148\uFF0C\u5047\u8BBE\u5982\u4E0B\uFF1A</p><ul><li>\u4F60\u4E86\u89E3 JavaScript\uFF1B</li><li>\u4F60\u4E86\u89E3\u5728\u9879\u76EE\u4E2D\u5E38\u7528\u7684\u65B9\u5F0F\u548C\u6784\u5EFA\u5DE5\u5177\uFF08\u5982\uFF1Awebpack\uFF09\u3002</li></ul><p>\u6709\u4E86\u4EE5\u4E0A\u5047\u8BBE\uFF0C\u4E00\u822C\u6765\u8BF4\uFF0C\u5C06 JavaScript \u4EE3\u7801\u8FC1\u79FB\u81F3 TypeScript \u5305\u62EC\u4EE5\u4E0B\u6B65\u9AA4\uFF1A</p><ul><li>\u6DFB\u52A0\u4E00\u4E2A <code>tsconfig.json</code> \u6587\u4EF6\uFF1B</li><li>\u628A\u6587\u4EF6\u6269\u5C55\u540D\u4ECE <code>.js</code> \u6539\u6210 <code>.ts</code>\uFF0C\u5F00\u59CB\u4F7F\u7528 <code>any</code> \u6765\u51CF\u5C11\u9519\u8BEF\uFF1B</li><li>\u5F00\u59CB\u5728 TypeScript \u4E2D\u5199\u4EE3\u7801\uFF0C\u5C3D\u53EF\u80FD\u7684\u51CF\u5C11 <code>any</code> \u7684\u4F7F\u7528\uFF1B</li><li>\u56DE\u5230\u65E7\u4EE3\u7801\uFF0C\u5F00\u59CB\u6DFB\u52A0\u7C7B\u578B\u6CE8\u89E3\uFF0C\u5E76\u4FEE\u590D\u5DF2\u8BC6\u522B\u7684\u9519\u8BEF\uFF1B</li><li>\u4E3A\u7B2C\u4E09\u65B9 JavaScript \u4EE3\u7801\u5B9A\u4E49\u73AF\u5883\u58F0\u660E\u3002</li></ul><p>\u8BA9\u6211\u4EEC\u8FDB\u4E00\u6B65\u8BA8\u8BBA\u5176\u4E2D\u7684\u51E0\u4E2A\u5173\u952E\u70B9\u3002</p><p>\u8BB0\u4F4F\uFF1A\u6240\u6709\u7684 JavaScript \u4EE3\u7801\u90FD\u662F\u6709\u6548\u7684 TypeScript \u4EE3\u7801\u3002\u8FD9\u610F\u5473\u7740\uFF0C\u5982\u679C\u8BA9 TypeScript \u7F16\u8BD1\u5668\u7F16\u8BD1 TypeScript \u91CC\u7684 JavaScript \u4EE3\u7801\uFF0C\u7F16\u8BD1\u540E\u7684\u7ED3\u679C\u5C06\u4F1A\u4E0E\u539F\u59CB\u7684 JavaScript \u4EE3\u7801\u4E00\u6A21\u4E00\u6837\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u628A\u6587\u4EF6\u6269\u5C55\u540D\u4ECE <code>.js</code> \u6539\u6210 <code>.ts</code> \u5C06\u4E0D\u4F1A\u9020\u6210\u4EFB\u4F55\u8D1F\u9762\u7684\u5F71\u54CD\u3002</p><h4 id="\u51CF\u5C11\u9519\u8BEF" tabindex="-1">\u51CF\u5C11\u9519\u8BEF <a class="header-anchor" href="#\u51CF\u5C11\u9519\u8BEF" aria-hidden="true">#</a></h4><p>\u4EE3\u7801\u88AB\u8FC1\u79FB\u81F3 TypeScript \u540E\uFF0CTypeScript \u5C06\u4F1A\u7ACB\u5373\u5BF9\u4F60\u7684\u4EE3\u7801\u8FDB\u884C\u7C7B\u578B\u68C0\u67E5\uFF0C\u4F60\u7684 JavaScript \u4EE3\u7801\u53EF\u80FD\u5E76\u4E0D\u50CF\u60F3\u8C61\u4E2D\u90A3\u6837\u6574\u9F50\u4E86\uFF0C\u56E0\u6B64\u4F60\u53EF\u80FD\u4F1A\u6536\u5230\u4E00\u4E9B\u62A5\u9519\u4FE1\u606F\u3002\u8FD9\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528 any \u6765\u89E3\u51B3\u5927\u90E8\u5206\u7684\u62A5\u9519\u95EE\u9898\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hey</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: \u4E0D\u80FD\u628A number \u7C7B\u578B\u8D4B\u503C\u7ED9 string \u7C7B\u578B</span></span>
<span class="line"></span></code></pre></div><p>\u867D\u7136\u8FD9\u4E9B\u9519\u8BEF\u662F\u6709\u6548\u7684\uFF0C\u5E76\u4E14\u5728\u5927\u591A\u6570\u60C5\u51B5\u4E0B\uFF0C\u6839\u636E\u8FD9\u4E9B\u9519\u8BEF\u6240\u63A8\u65AD\u51FA\u7684\u4FE1\u606F\u6BD4\u4EE3\u7801\u5E93\u7684\u4E0D\u540C\u90E8\u5206\u7684\u539F\u59CB\u4F5C\u8005\u60F3\u8C61\u7684\u66F4\u597D\uFF0C\u4F46\u662F\u4F60\u7684\u91CD\u70B9\u662F\u5728\u9010\u6B65\u66F4\u65B0\u65E7\u4EE3\u7801\u5E93\u7684\u540C\u65F6\uFF0C\u7528 TypeScript \u7F16\u5199\u65B0\u4EE3\u7801\u3002\u5728\u8FD9\u91CC\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528\u7C7B\u578B\u65AD\u8A00\u6765\u51CF\u5C11\u6B64\u9519\u8BEF\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hey</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"></span></code></pre></div><p>\u4ECE\u53E6\u4E00\u65B9\u9762\u6765\u8BF4\uFF0C\u4F60\u53EF\u80FD\u60F3\u7528 any \u7528\u4F5C\u7C7B\u578B\u6CE8\u89E3\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hey</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: \u4E0D\u80FD\u628A\u4E00\u4E2A number \u7C7B\u578B\u8D4B\u503C\u7ED9 string \u7C7B\u578B</span></span>
<span class="line"></span></code></pre></div><p>\u51CF\u5C11\u8FD9\u79CD\u9519\u8BEF\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u6DFB\u52A0 &#39;any&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hey</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u4F7F\u7528\u6B64\u79CD\u65B9\u5F0F\u6765\u51CF\u5C11\u9519\u8BEF\u662F\u5371\u9669\u7684\uFF0C\u4F46\u662F\u5B83\u5141\u8BB8\u4F60\u5C06\u6CE8\u610F\u529B\u8F6C\u79FB\u5230\u4F60\u7684\u65B0 TypeScript \u4EE3\u7801\u9519\u8BEF\u4E0A\u3002\u5F53\u4F60\u8FDB\u884C\u4E0B\u4E00\u6B65\u524D\uFF0C\u6700\u597D\u8981\u7559\u4E0B <code>// TODO</code> \u7684\u6CE8\u91CA\u3002</p></div><h4 id="\u7B2C\u4E09\u65B9\u4EE3\u7801" tabindex="-1">\u7B2C\u4E09\u65B9\u4EE3\u7801 <a class="header-anchor" href="#\u7B2C\u4E09\u65B9\u4EE3\u7801" aria-hidden="true">#</a></h4><p>\u4F60\u53EF\u4EE5\u5C06\u4F60\u7684 JavaScript \u4EE3\u7801\u6539\u6210 TypeScript \u4EE3\u7801\uFF0C\u4F46\u662F\u4F60\u4E0D\u80FD\u8BA9\u6574\u4E2A\u4E16\u754C\u90FD\u4F7F\u7528 TypeScript\u3002\u8FD9\u6B63\u662F TypeScript \u73AF\u5883\u58F0\u660E\u652F\u6301\u7684\u5730\u65B9\u3002\u6211\u5EFA\u8BAE\u4F60\u4EE5\u521B\u5EFA\u4E00\u4E2A <code>vendor.d.ts</code> \u6587\u4EF6\u4F5C\u4E3A\u5F00\u59CB\uFF08<code>.d.ts</code> \u6587\u4EF6\u6269\u5C55\u540D\u6307\u5B9A\u8FD9\u4E2A\u6587\u4EF6\u662F\u4E00\u4E2A\u58F0\u660E\u6587\u4EF6\uFF09\uFF0C\u7136\u540E\u6211\u5411\u6587\u4EF6\u91CC\u6DFB\u52A0\u4E1C\u897F\u3002\u6216\u8005\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u9488\u5BF9\u4E8E\u7279\u5B9A\u5E93\u7684\u58F0\u660E\u6587\u4EF6\uFF0C\u5982\u4E3A jquery \u521B\u5EFA <code>jquery.d.ts</code> \u6587\u4EF6\u3002</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u51E0\u4E4E\u6392\u540D\u524D 90% \u7684 JavaScript \u5E93\u7684\u58F0\u660E\u6587\u4EF6\u5B58\u5728\u4E8E <a href="https://github.com/DefinitelyTyped/DefinitelyTyped" target="_blank" rel="noreferrer">DefinitelyTyped</a> \u4ED3\u5E93\u91CC\uFF0C\u5728\u521B\u5EFA\u81EA\u5DF1\u5B9A\u4E49\u7684\u58F0\u660E\u6587\u4EF6\u4E4B\u524D\uFF0C\u6211\u4EEC\u5EFA\u8BAE\u4F60\u5148\u53BB\u4ED3\u5E93\u4E2D\u5BFB\u627E\u662F\u5426\u6709\u5BF9\u5E94\u7684\u58F0\u660E\u6587\u4EF6\u3002\u5C3D\u7BA1\u5982\u6B64\uFF0C\u521B\u5EFA\u4E00\u4E2A\u58F0\u660E\u6587\u4EF6\u8FD9\u79CD\u5FEB\u901F\u4F46\u4E0D\u597D\u7684\u65B9\u5F0F\u662F\u51CF\u5C0F\u4F7F\u7528 TypeScript \u521D\u59CB\u963B\u529B\u7684\u91CD\u8981\u6B65\u9AA4</p></div><p>\u6839\u636E <code>jquery</code> \u7684\u4F7F\u7528\uFF0C\u4F60\u53EF\u4EE5\u975E\u5E38\u7B80\u5355\u5FEB\u901F\u7684\u4E3A\u5B83\u521B\u5EFA\u4E00\u4E2A\u5B9A\u4E49\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> $</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u6709\u65F6\uFF0C\u4F60\u53EF\u80FD\u60F3\u5728\u67D0\u4E9B\u5185\u5BB9\uFF08\u5982 <code>jQuery</code>\uFF09\u4E0A\u6DFB\u52A0\u663E\u5F0F\u7684\u6CE8\u89E3\uFF0C\u5E76\u4E14\u4F60\u4F1A\u5728\u7C7B\u578B\u58F0\u660E\u7A7A\u95F4\u4E2D\u4F7F\u7528\u5B83\u3002\u4F60\u53EF\u4EE5\u901A\u8FC7 type \u5173\u952E\u5B57\u5FEB\u901F\u7684\u5B9E\u73B0\u5B83\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">JQuery</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> $</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">JQuery</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u63D0\u4F9B\u7ED9\u4F60\u4E00\u4E2A\u66F4\u6E05\u6670\u7684\u4F7F\u7528\u6A21\u5F0F\u3002</p><p>\u4E00\u4E2A\u9AD8\u8D28\u91CF\u7684 jquery.d.ts \u5DF2\u7ECF\u5728 DefinitelyTyped \u4E2D\u5B58\u5728\u3002\u73B0\u5728\u4F60\u5DF2\u7ECF\u77E5\u9053\u5982\u4F55\u5728\u4F7F\u7528\u7B2C\u4E09\u65B9 JavaScript \u6A21\u5757\u65F6\uFF0C\u5FEB\u901F\u514B\u670D\u4ECE JavaScript \u81F3 TypeScript \u7684\u963B\u529B\u4E86\u3002\u5728\u63A5\u4E0B\u53BB\u7684\u7AE0\u8282\uFF0C\u6211\u4EEC\u5C06\u4F1A\u8BA8\u8BBA\u73AF\u5883\u58F0\u660E\u3002</p><h4 id="\u7B2C\u4E09\u65B9\u7684-npm-\u6A21\u5757" tabindex="-1">\u7B2C\u4E09\u65B9\u7684 NPM \u6A21\u5757 <a class="header-anchor" href="#\u7B2C\u4E09\u65B9\u7684-npm-\u6A21\u5757" aria-hidden="true">#</a></h4><p>\u4E0E\u5168\u5C40\u53D8\u91CF\u58F0\u660E\u76F8\u4F3C\uFF0C\u4F60\u53EF\u4EE5\u5FEB\u901F\u7684\u5B9A\u4E49\u4E00\u4E2A\u5168\u5C40\u6A21\u5757\uFF0C\u5982\uFF1A\u5BF9\u4E8E jquery\uFF0C\u5982\u679C\u4F60\u60F3\u628A\u5B83\u4F5C\u4E3A\u4E00\u4E2A\u6A21\u5757\u6765\u4F7F\u7528\uFF08[NPM(<a href="https://www.npmjs.com/package/jquery" target="_blank" rel="noreferrer">https://www.npmjs.com/package/jquery</a>)]\uFF09\uFF0C\u53EF\u4EE5\u81EA\u5DF1\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u5B9E\u73B0\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">module</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">jquery</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u540E\u4F60\u5C31\u53EF\u4EE5\u5728\u5FC5\u8981\u65F6\u5BFC\u5165\u5B83\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> $ </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">jquery</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u518D\u4E00\u6B21\u8BF4\u660E\uFF0C\u4E00\u4E2A\u9AD8\u8D28\u91CF\u7684 <code>jquery.d.ts</code> \u5DF2\u7ECF\u5728 <a href="https://github.com/DefinitelyTyped/DefinitelyTyped" target="_blank" rel="noreferrer">DefinitelyTyped</a> \u4E2D\u5B58\u5728\uFF0C\u4F46\u662F\u53EF\u80FD\u5728\u4F60\u7684\u5305\u91CC\u6CA1\u6709\uFF0C\u90A3\u4E48\uFF0C\u4F60\u73B0\u5728\u6709\u4E00\u4E2A\u7B80\u5355\u5FEB\u901F\u7684\u65B9\u5F0F\u6765\u7EE7\u7EED\u8FC1\u79FB\u3002</p></div><h4 id="\u989D\u5916\u7684\u975E-javascript-\u8D44\u6E90" tabindex="-1">\u989D\u5916\u7684\u975E JavaScript \u8D44\u6E90 <a class="header-anchor" href="#\u989D\u5916\u7684\u975E-javascript-\u8D44\u6E90" aria-hidden="true">#</a></h4><p>\u5728 TypeScript \u4E2D\uFF0C\u751A\u81F3\u53EF\u4EE5\u5141\u8BB8\u4F60\u5BFC\u5165\u4EFB\u4F55\u6587\u4EF6\uFF0C\u4F8B\u5982 <code>.css</code> \u6587\u4EF6\uFF08\u5982\u679C\u4F60\u4F7F\u7528\u7684\u662F webpack \u6837\u5F0F\u52A0\u8F7D\u5668\u6216 css \u6A21\u5757\uFF09\uFF0C\u4F60\u53EA\u8981\u6DFB\u52A0\u5982\u4E0B\u4EE3\u7801\uFF08\u653E\u5728 <code>global.d.ts</code>\uFF09\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> $ </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">jquery</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u73B0\u5728\u4F60\u53EF\u4EE5\u4F7F\u7528 <code>import * as foo from &#39;./some/file.css&#39;</code>\u3002</p><p>\u4E0E\u6B64\u76F8\u4F3C\uFF0C\u5982\u679C\u4F60\u60F3\u4F7F\u7528 html \u6A21\u7248\uFF08\u4F8B\u5982\uFF1Aangular\uFF09\uFF0C\u4F60\u53EF\u4EE5\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">module</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="types" tabindex="-1">@types <a class="header-anchor" href="#types" aria-hidden="true">#</a></h3><p>\u6BEB\u65E0\u7591\u95EE\uFF0C<a href="https://github.com/DefinitelyTyped/DefinitelyTyped" target="_blank" rel="noreferrer">DefinitelyTyped</a> \u662F TypeScript \u6700\u5927\u7684\u4F18\u52BF\u4E4B\u4E00\uFF0C\u793E\u533A\u5DF2\u7ECF\u8BB0\u5F55\u4E86 90% \u7684\u9876\u7EA7 JavaScript \u5E93\u3002</p><p>\u8FD9\u610F\u5473\u7740\uFF0C\u4F60\u53EF\u4EE5\u975E\u5E38\u9AD8\u6548\u5730\u4F7F\u7528\u8FD9\u4E9B\u5E93\uFF0C\u800C\u65E0\u987B\u5728\u5355\u72EC\u7684\u7A97\u53E3\u6253\u5F00\u76F8\u5E94\u6587\u6863\u4EE5\u786E\u4FDD\u8F93\u5165\u7684\u6B63\u786E\u6027\u3002</p><h4 id="\u4F7F\u7528-types" tabindex="-1">\u4F7F\u7528 <code>@types</code> <a class="header-anchor" href="#\u4F7F\u7528-types" aria-hidden="true">#</a></h4><p>\u4F60\u53EF\u4EE5\u901A\u8FC7 <code>npm</code> \u6765\u5B89\u88C5\u4F7F\u7528 <code>@types</code>\uFF0C\u4F8B\u5982\u4E3A <code>jquery</code> \u6DFB\u52A0\u58F0\u660E\u6587\u4EF6\uFF1A</p><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">npm install @types/jquery --save-dev</span></span>
<span class="line"></span></code></pre></div><p><code>@types</code> \u652F\u6301\u5168\u5C40\u548C\u6A21\u5757\u7C7B\u578B\u5B9A\u4E49\u3002</p><h5 id="\u5168\u5C40-types" tabindex="-1">\u5168\u5C40 <code>@types</code> <a class="header-anchor" href="#\u5168\u5C40-types" aria-hidden="true">#</a></h5><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CTypeScript \u4F1A\u81EA\u52A8\u5305\u542B\u652F\u6301\u5168\u5C40\u4F7F\u7528\u7684\u4EFB\u4F55\u58F0\u660E\u5B9A\u4E49\u3002\u4F8B\u5982\uFF0C\u5BF9\u4E8E jquery\uFF0C\u4F60\u5E94\u8BE5\u80FD\u591F\u5728\u9879\u76EE\u4E2D\u5F00\u59CB\u5168\u5C40\u4F7F\u7528 <code>$</code>\u3002</p><h5 id="\u6A21\u5757-types" tabindex="-1">\u6A21\u5757 <code>@types</code> <a class="header-anchor" href="#\u6A21\u5757-types" aria-hidden="true">#</a></h5><p>\u5B89\u88C5\u5B8C\u4E4B\u540E\uFF0C\u4E0D\u9700\u8981\u7279\u522B\u7684\u914D\u7F6E\uFF0C\u4F60\u5C31\u53EF\u4EE5\u50CF\u4F7F\u7528\u6A21\u5757\u4E00\u6837\u4F7F\u7528\u5B83\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> $ </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">jquery</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u73B0\u5728\u4F60\u53EF\u4EE5\u6B64\u6A21\u5757\u4E2D\u4EFB\u610F\u4F7F\u7528$\u4E86 :)</span></span>
<span class="line"></span></code></pre></div><h4 id="\u63A7\u5236\u5168\u5C40" tabindex="-1">\u63A7\u5236\u5168\u5C40 <a class="header-anchor" href="#\u63A7\u5236\u5168\u5C40" aria-hidden="true">#</a></h4><p>\u53EF\u4EE5\u770B\u51FA\uFF0C\u5BF9\u4E8E\u67D0\u4E9B\u56E2\u961F\u800C\u8A00\uFF0C\u62E5\u6709\u5141\u8BB8\u5168\u5C40\u4F7F\u7528\u7684\u5B9A\u4E49\u662F\u4E00\u4E2A\u95EE\u9898\u3002\u56E0\u6B64\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6E <code>tsconfig.json</code> \u7684 <code>compilerOptions.types</code> \u9009\u9879\uFF0C\u5F15\u5165\u6709\u610F\u4E49\u7684\u7C7B\u578B\uFF1A</p><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">compilerOptions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">types</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">jquery</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u4E0A\u4F8B\u6240\u793A\uFF0C\u901A\u8FC7\u914D\u7F6E <code>compilerOptions.types: [ &quot;jquery&quot; ]</code> \u540E\uFF0C\u53EA\u5141\u8BB8\u4F7F\u7528 <code>jquery</code> \u7684 <code>@types</code> \u5305\uFF0C\u5373\u4F7F\u8FD9\u4E2A\u4EBA\u5B89\u88C5\u4E86\u53E6\u4E00\u4E2A\u58F0\u660E\u6587\u4EF6\uFF0C\u6BD4\u5982 <code>npm install @types/node</code>\uFF0C\u5B83\u7684\u5168\u5C40\u53D8\u91CF\uFF08\u4F8B\u5982 <code>process</code>\uFF09\u4E5F\u4E0D\u4F1A\u6CC4\u6F0F\u5230\u4F60\u7684\u4EE3\u7801\u4E2D\uFF0C\u76F4\u5230\u4F60\u5C06\u5B83\u4EEC\u6DFB\u52A0\u5230 <code>tsconfig.json</code> \u7C7B\u578B\u9009\u9879\u3002</p><h3 id="\u73AF\u5883\u58F0\u660E" tabindex="-1">\u73AF\u5883\u58F0\u660E <a class="header-anchor" href="#\u73AF\u5883\u58F0\u660E" aria-hidden="true">#</a></h3><blockquote><p>TypeScript \u7684\u8BBE\u8BA1\u76EE\u6807\u4E4B\u4E00\u662F\u8BA9\u4F60\u5728 TypeScript \u4E2D\u5B89\u5168\u3001\u8F7B\u677E\u5730\u4F7F\u7528\u73B0\u6709\u7684 JavaScript \u5E93\uFF0CTypeScript \u901A\u8FC7\u58F0\u660E\u6587\u4EF6\u6765\u505A\u5230\u8FD9\u4E00\u70B9</p></blockquote><p>\u73AF\u5883\u58F0\u660E\u5141\u8BB8\u4F60\u5B89\u5168\u5730\u4F7F\u7528\u73B0\u6709\u7684 JavaScript \u5E93\uFF0C\u5E76\u4E14\u80FD\u8BA9\u4F60\u7684 JavaScript\u3001CoffeeScript \u6216\u8005\u5176\u4ED6\u9700\u8981\u7F16\u8BD1\u6210 JavaScript \u7684\u8BED\u8A00\u9010\u6B65\u8FC1\u79FB\u81F3 TypeScript\u3002</p><p>\u5B66\u4E60\u4E3A\u7B2C\u4E09\u65B9 JavaScript \u5E93\u7F16\u5199\u73AF\u5883\u58F0\u660E\uFF0C\u662F\u4E00\u79CD\u4E3A TypeScript \u5199\u6CE8\u89E3\u6BD4\u8F83\u597D\u7684\u5B9E\u8DF5\u65B9\u5F0F</p><h4 id="\u58F0\u660E\u6587\u4EF6" tabindex="-1">\u58F0\u660E\u6587\u4EF6 <a class="header-anchor" href="#\u58F0\u660E\u6587\u4EF6" aria-hidden="true">#</a></h4><p>\u4F60\u53EF\u4EE5\u901A\u8FC7 declare \u5173\u952E\u5B57\u6765\u544A\u8BC9 TypeScript\uFF0C\u4F60\u6B63\u5728\u8BD5\u56FE\u8868\u8FF0\u4E00\u4E2A\u5176\u4ED6\u5730\u65B9\u5DF2\u7ECF\u5B58\u5728\u7684\u4EE3\u7801\uFF0C\u5982\uFF1A\u5199\u5728 JavaScript\u3001CoffeeScript \u6216\u8005\u662F\u50CF\u6D4F\u89C8\u5668\u548C Node.js \u8FD0\u884C\u73AF\u5883\u91CC\u7684\u4EE3\u7801\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#A6ACCD;">foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: &#39;foo&#39; is not defined</span></span>
<span class="line"></span></code></pre></div><p>\u548C\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// allow</span></span>
<span class="line"></span></code></pre></div><p>\u4F60\u53EF\u4EE5\u9009\u62E9\u628A\u8FD9\u4E9B\u58F0\u660E\u653E\u5165 <code>.ts</code> \u6216\u8005 <code>.d.ts</code> \u91CC\u3002\u5728\u4F60\u5B9E\u9645\u7684\u9879\u76EE\u91CC\uFF0C\u6211\u4EEC\u5F3A\u70C8\u5EFA\u8BAE\u4F60\u5E94\u8BE5\u628A\u58F0\u660E\u653E\u5165\u72EC\u7ACB\u7684 .<code>d.ts</code> \u91CC\uFF08\u53EF\u4EE5\u4ECE\u4E00\u4E2A\u547D\u540D\u4E3A <code>global.d.ts</code> \u6216\u8005 <code>vendor.d.ts</code> \u6587\u4EF6\u5F00\u59CB\uFF09\u3002</p><p>\u5982\u679C\u4E00\u4E2A\u6587\u4EF6\u6709\u6269\u5C55\u540D <code>.d.ts</code>\uFF0C\u8FD9\u610F\u5473\u7740\u6BCF\u4E2A\u6839\u7EA7\u522B\u7684\u58F0\u660E\u90FD\u5FC5\u987B\u4EE5 <code>declare</code> \u5173\u952E\u5B57\u4F5C\u4E3A\u524D\u7F00\u3002\u8FD9\u6709\u5229\u4E8E\u8BA9\u5F00\u53D1\u8005\u6E05\u695A\u7684\u77E5\u9053\uFF0C\u5728\u8FD9\u91CC TypeScript \u5C06\u4E0D\u4F1A\u628A\u5B83\u7F16\u8BD1\u6210\u4EFB\u4F55\u4EE3\u7801\uFF0C\u540C\u65F6\u5F00\u53D1\u8005\u9700\u8981\u786E\u4FDD\u8FD9\u4E9B\u5728\u7F16\u8BD1\u65F6\u5B58\u5728\u3002</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>\u73AF\u5883\u58F0\u660E\u5C31\u597D\u50CF\u4F60\u4E0E\u7F16\u8BD1\u5668\u4E4B\u95F4\u7684\u4E00\u4E2A\u7EA6\u5B9A\uFF0C\u5982\u679C\u5728\u7F16\u8BD1\u65F6\u5B83\u4EEC\u4E0D\u5B58\u5728\uFF0C\u4F46\u662F\u4F60\u5374\u4F7F\u7528\u4E86\u5B83\u4EEC\uFF0C\u7A0B\u5E8F\u5C06\u4F1A\u5728\u6CA1\u6709\u8B66\u544A\u7684\u60C5\u51B5\u4E0B\u4E2D\u65AD\u3002</li><li>\u73AF\u5883\u58F0\u660E\u5C31\u597D\u50CF\u662F\u4E00\u4E2A\u6587\u6863\u3002\u5982\u679C\u6E90\u6587\u4EF6\u66F4\u65B0\u4E86\uFF0C\u4F60\u5E94\u8BE5\u540C\u6B65\u66F4\u65B0\u3002\u6240\u4EE5\uFF0C\u5F53\u4F60\u5728\u8FD0\u884C\u65F6\u6709\u65B0\u7684\u884C\u4E3A\u65F6\uFF0C\u5982\u679C\u6CA1\u6709\u53BB\u66F4\u65B0\u73AF\u5883\u58F0\u660E\uFF0C\u7F16\u8BD1\u5668\u5C06\u4F1A\u62A5\u9519\u3002</li></ul></div><h4 id="\u53D8\u91CF" tabindex="-1">\u53D8\u91CF <a class="header-anchor" href="#\u53D8\u91CF" aria-hidden="true">#</a></h4><p>\u5F53\u4F60\u60F3\u544A\u8BC9 TypeScript \u7F16\u8F91\u5668\u5173\u4E8E process \u53D8\u91CF\u65F6\uFF0C\u4F60\u53EF\u4EE5\u8FD9\u4E48\u505A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> process</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u4F60\u5E76\u4E0D\u9700\u8981\u4E3A <code>process</code> \u505A\u8FD9\u4E9B\uFF0C\u56E0\u4E3A\u8FD9\u5DF2\u7ECF\u5B58\u5728\u4E8E\u793E\u533A\u7EF4\u62A4\u7684 <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/node/index.d.ts" target="_blank" rel="noreferrer"><code>node.d.ts</code></a></p></div><p>\u8FD9\u5141\u8BB8\u4F60\u4F7F\u7528 <code>process</code>\uFF0C\u5E76\u80FD\u6210\u529F\u901A\u8FC7 TypeScript \u7684\u7F16\u8BD1\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#A6ACCD;">process</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exit</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u63A8\u8350\u5C3D\u53EF\u80FD\u7684\u4F7F\u7528\u63A5\u53E3\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Process</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">exit</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">code</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> process</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Process</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u56E0\u4E3A\u8FD9\u5141\u8BB8\u5176\u4ED6\u4EBA\u6269\u5145\u8FD9\u4E9B\u5168\u5C40\u53D8\u91CF\uFF0C\u5E76\u4E14\u4F1A\u544A\u8BC9 TypeScript \u6709\u5173\u4E8E\u8FD9\u4E9B\u58F0\u660E\u7684\u4FEE\u6539\u3002\u4F8B\u5982\uFF1A\u8003\u8651\u5230\u4EE5\u4E0B\u60C5\u51B5\uFF0C\u6211\u4EEC\u6DFB\u52A0\u4E00\u4E2A <code>exitWithLogging</code> \u51FD\u6570\u81F3 <code>process</code>\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Process</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">exitWithLogging</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">code</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">process</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exitWithLogging</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">exiting</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">process</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exit</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">apply</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">process</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arguments</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u4E0B\u6765\uFF0C\u8BA9\u6211\u4EEC\u66F4\u8BE6\u7EC6\u7684\u4E86\u89E3\u63A5\u53E3\u3002</p><h3 id="\u63A5\u53E3-1" tabindex="-1">\u63A5\u53E3 <a class="header-anchor" href="#\u63A5\u53E3-1" aria-hidden="true">#</a></h3><p>\u63A5\u53E3\u8FD0\u884C\u65F6\u7684\u5F71\u54CD\u4E3A 0\u3002\u5728 TypeScript \u63A5\u53E3\u4E2D\u6709\u5F88\u591A\u65B9\u5F0F\u6765\u58F0\u660E\u53D8\u91CF\u7684\u7ED3\u6784\u3002</p><p>\u4E0B\u9762\u4E24\u4E2A\u662F\u7B49\u6548\u7684\u58F0\u660E, \u793A\u4F8B A \u4F7F\u7528\u5185\u8054\u6CE8\u89E3\uFF0C\u793A\u4F8B B \u4F7F\u7528\u63A5\u53E3\u5F62\u5F0F\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u793A\u4F8B A</span></span>
<span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> myPoint</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u793A\u4F8B B</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> myPoint</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u793A\u4F8B B \u7684\u597D\u5904\u5728\u4E8E\uFF0C\u5982\u679C\u6709\u4EBA\u521B\u5EFA\u4E86\u4E00\u4E2A\u57FA\u4E8E <code>myPoint</code> \u7684\u5E93\u6765\u6DFB\u52A0\u65B0\u6210\u5458, \u90A3\u4E48\u4ED6\u53EF\u4EE5\u8F7B\u677E\u5C06\u6B64\u6210\u5458\u6DFB\u52A0\u5230 <code>myPoint</code> \u7684\u73B0\u6709\u58F0\u660E\u4E2D:</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// Lib a.d.ts</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> myPoint</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Lib b.d.ts</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">z</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Your code</span></span>
<span class="line"><span style="color:#A6ACCD;">myPoint</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">z </span><span style="color:#676E95;">// Allowed!</span></span>
<span class="line"></span></code></pre></div><p>TypeScript \u63A5\u53E3\u662F\u5F00\u653E\u5F0F\u7684\uFF0C\u8FD9\u662F TypeScript \u7684\u4E00\u4E2A\u91CD\u8981\u539F\u5219\uFF0C\u5B83\u5141\u8BB8\u4F60\u4F7F\u7528\u63A5\u53E3\u6765\u6A21\u4EFF JavaScript \u7684\u53EF\u6269\u5C55\u6027\u3002</p><h4 id="\u7C7B\u53EF\u4EE5\u5B9E\u73B0\u63A5\u53E3" tabindex="-1">\u7C7B\u53EF\u4EE5\u5B9E\u73B0\u63A5\u53E3 <a class="header-anchor" href="#\u7C7B\u53EF\u4EE5\u5B9E\u73B0\u63A5\u53E3" aria-hidden="true">#</a></h4><p>\u5982\u679C\u4F60\u5E0C\u671B\u5728\u7C7B\u4E2D\u4F7F\u7528\u5FC5\u987B\u8981\u88AB\u9075\u5FAA\u7684\u63A5\u53E3\uFF08\u7C7B\uFF09\u6216\u522B\u4EBA\u5B9A\u4E49\u7684\u5BF9\u8C61\u7ED3\u6784\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>implements</code> \u5173\u952E\u5B57\u6765\u786E\u4FDD\u5176\u517C\u5BB9\u6027\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MyPoint</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Same as Point</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u57FA\u672C\u4E0A\uFF0C\u5728 <code>implements</code>\uFF08\u5B9E\u73B0\uFF09 \u5B58\u5728\u7684\u60C5\u51B5\u4E0B\uFF0C\u8BE5\u5916\u90E8 <code>Point</code> \u63A5\u53E3\u7684\u4EFB\u4F55\u66F4\u6539\u90FD\u5C06\u5BFC\u81F4\u4EE3\u7801\u5E93\u4E2D\u7684\u7F16\u8BD1\u9519\u8BEF\uFF0C\u56E0\u6B64\u53EF\u4EE5\u8F7B\u677E\u5730\u4F7F\u5176\u4FDD\u6301\u540C\u6B65\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">z</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// New member</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MyPoint</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// ERROR : missing member \`z\`</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>\u6CE8\u610F\uFF0C<code>implements</code> \u9650\u5236\u4E86\u7C7B\u5B9E\u4F8B\u7684\u7ED3\u6784\uFF0C\u5982\u4E0B\u6240\u793A:</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MyPoint</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u4F46\u50CF <code>foo: Point = MyPoint</code> \u8FD9\u6837\u7684\u4EE3\u7801\uFF0C\u4E0E\u5176\u5E76\u4E0D\u662F\u4E00\u56DE\u4E8B\u3002</p><h4 id="\u6CE8\u610F" tabindex="-1">\u6CE8\u610F <a class="header-anchor" href="#\u6CE8\u610F" aria-hidden="true">#</a></h4><h5 id="\u5E76\u975E\u6BCF\u4E2A\u63A5\u53E3\u90FD\u662F\u5F88\u5BB9\u6613\u5B9E\u73B0\u7684" tabindex="-1">\u5E76\u975E\u6BCF\u4E2A\u63A5\u53E3\u90FD\u662F\u5F88\u5BB9\u6613\u5B9E\u73B0\u7684 <a class="header-anchor" href="#\u5E76\u975E\u6BCF\u4E2A\u63A5\u53E3\u90FD\u662F\u5F88\u5BB9\u6613\u5B9E\u73B0\u7684" aria-hidden="true">#</a></h5><p>\u63A5\u53E3\u65E8\u5728\u58F0\u660E JavaScript \u4E2D\u53EF\u80FD\u5B58\u5728\u7684\u4EFB\u610F\u7ED3\u6784\u3002</p><p>\u601D\u8003\u4EE5\u4E0B\u4F8B\u5B50\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>new</code> \u8C03\u7528\u67D0\u4E9B\u5185\u5BB9\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Crazy</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">hello</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4F60\u53EF\u80FD\u4F1A\u6709\u4E0B\u9762\u8FD9\u6837\u7684\u4EE3\u7801\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">CrazyClass</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Crazy</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> hello</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">123</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Because</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> crazy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CrazyClass</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// crazy would be { hello:123 }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u8FD0\u884C\u62A5\u9519\uFF0C\u56E0\u4E3ATS\u7C7B\u578B\u68C0\u67E5\u4E0D\u4F1A\u5BF9constructor\u68C0\u67E5\uFF0C\u53EA\u4F1A\u68C0\u67E5\u548C\u5B9E\u4F8B\u76F8\u5173\u7684\u5C5E\u6027\u548C\u65B9\u6CD5</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">\u6B63\u5E38\u8FD0\u884C</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Crazy</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">hello</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ICrazyClass</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hello</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">CrazyClass</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Crazy</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hello</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">hello</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">123</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ct1</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ct</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Crazy</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ct</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Because</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> crazy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ct1</span><span style="color:#A6ACCD;">(CrazyClass)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div></div><p>\u4F60\u53EF\u4EE5\u4F7F\u7528\u63A5\u53E3\u58F0\u660E\u6240\u6709\u201C\u75AF\u72C2\u7684\u201D\u7684 JavaScript \u4EE3\u7801\uFF0C\u751A\u81F3\u53EF\u4EE5\u5B89\u5168\u5730\u5728 TypeScript \u4E2D\u4F7F\u7528\u5B83\u4EEC\u3002\u4F46\u8FD9\u5E76\u4E0D\u610F\u5473\u7740\u4F60\u53EF\u4EE5\u4F7F\u7528 TypeScript \u7C7B\u6765\u5B9E\u73B0\u5B83\u4EEC\u3002</p><h3 id="\u679A\u4E3E" tabindex="-1">\u679A\u4E3E <a class="header-anchor" href="#\u679A\u4E3E" aria-hidden="true">#</a></h3><p>\u679A\u4E3E\u662F\u7EC4\u7EC7\u6536\u96C6\u6709\u5173\u8054\u53D8\u91CF\u7684\u4E00\u79CD\u65B9\u5F0F\uFF0C\u8BB8\u591A\u7A0B\u5E8F\u8BED\u8A00\uFF08\u5982\uFF1Ac/c#/Java\uFF09\u90FD\u6709\u679A\u4E3E\u6570\u636E\u7C7B\u578B\u3002\u4E0B\u9762\u662F\u5B9A\u4E49\u4E00\u4E2A TypeScript \u679A\u4E3E\u7C7B\u578B\u7684\u65B9\u5F0F\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">CardSuit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  Clubs</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Diamonds</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Hearts</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Spades</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u7B80\u5355\u7684\u4F7F\u7528\u679A\u4E3E\u7C7B\u578B</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> Card </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CardSuit</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Clubs</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u7C7B\u578B\u5B89\u5168</span></span>
<span class="line"><span style="color:#A6ACCD;">Card </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">not a member of card suit</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: string \u4E0D\u80FD\u8D4B\u503C\u7ED9 \`CardSuit\` \u7C7B\u578B</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E9B\u679A\u4E3E\u7C7B\u578B\u7684\u503C\u90FD\u662F\u6570\u5B57\u7C7B\u578B\uFF0C\u56E0\u6B64\u5B83\u4EEC\u88AB\u79F0\u4E3A\u6570\u5B57\u7C7B\u578B\u679A\u4E3E\u3002</p><h4 id="\u6570\u5B57\u7C7B\u578B\u679A\u4E3E\u4E0E\u6570\u5B57\u7C7B\u578B" tabindex="-1">\u6570\u5B57\u7C7B\u578B\u679A\u4E3E\u4E0E\u6570\u5B57\u7C7B\u578B <a class="header-anchor" href="#\u6570\u5B57\u7C7B\u578B\u679A\u4E3E\u4E0E\u6570\u5B57\u7C7B\u578B" aria-hidden="true">#</a></h4><p>\u6570\u5B57\u7C7B\u578B\u679A\u4E3E\uFF0C\u5141\u8BB8\u6211\u4EEC\u5C06\u6570\u5B57\u7C7B\u578B\u6216\u8005\u5176\u4ED6\u4EFB\u4F55\u4E0E\u6570\u5B57\u7C7B\u578B\u517C\u5BB9\u7684\u7C7B\u578B\u8D4B\u503C\u7ED9\u679A\u4E3E\u7C7B\u578B\u7684\u5B9E\u4F8B\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Color</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  Red</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Green</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Blue</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> col </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Color</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Red</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">col </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u6709\u6548\u7684\uFF0C\u8FD9\u4E5F\u662F Color.Red</span></span>
<span class="line"></span></code></pre></div><h4 id="\u6570\u5B57\u7C7B\u578B\u679A\u4E3E\u4E0E\u81EA\u8D1F\u5E8A\u7C7B\u578B" tabindex="-1">\u6570\u5B57\u7C7B\u578B\u679A\u4E3E\u4E0E\u81EA\u8D1F\u5E8A\u7C7B\u578B <a class="header-anchor" href="#\u6570\u5B57\u7C7B\u578B\u679A\u4E3E\u4E0E\u81EA\u8D1F\u5E8A\u7C7B\u578B" aria-hidden="true">#</a></h4><p>\u5728\u6211\u4EEC\u7EE7\u7EED\u6DF1\u5165\u5B66\u4E60\u679A\u4E3E\u7C7B\u578B\u4E4B\u524D\uFF0C\u5148\u6765\u770B\u770B\u5B83\u7F16\u8BD1\u7684 JavaScript \u5427\uFF0C\u4EE5\u4E0B\u662F\u4E00\u4E2A\u7B80\u5355\u7684 TypeScript \u679A\u4E3E\u7C7B\u578B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Tristate</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  False</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  True</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Unknown</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5176\u88AB\u7F16\u8BD1\u6210 JavaScript \u540E\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> Tristate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Tristate</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">Tristate</span><span style="color:#F07178;">[(</span><span style="color:#A6ACCD;">Tristate</span><span style="color:#F07178;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">False</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">)] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">False</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">Tristate</span><span style="color:#F07178;">[(</span><span style="color:#A6ACCD;">Tristate</span><span style="color:#F07178;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">True</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">)] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">True</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">Tristate</span><span style="color:#F07178;">[(</span><span style="color:#A6ACCD;">Tristate</span><span style="color:#F07178;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Unknown</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#F07178;">)] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Unknown</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)(Tristate </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> (Tristate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5148\u8BA9\u6211\u4EEC\u805A\u7126 <code>Tristate[Tristate[&#39;False&#39;] = 0] = &#39;False&#39;</code> \u8FD9\u884C\u4EE3\u7801\uFF0C\u5176\u4E2D <code>Tristate[&#39;False&#39;] = 0</code>\u7684\u610F\u601D\u662F\u5C06 <code>Tristate</code> \u5BF9\u8C61\u91CC\u7684 <code>False</code> \u6210\u5458\u503C\u8BBE\u7F6E\u4E3A <code>0</code>\u3002\u6CE8\u610F\uFF0CJavaScript \u8D4B\u503C\u8FD0\u7B97\u7B26\u8FD4\u56DE\u7684\u503C\u662F\u88AB\u8D4B\u4E88\u7684\u503C\uFF08\u5728\u6B64\u4F8B\u5B50\u4E2D\u662F <code>0</code>\uFF09\uFF0C\u56E0\u6B64\u4E0B\u4E00\u6B21 JavaScript \u8FD0\u884C\u65F6\u6267\u884C\u7684\u4EE3\u7801\u662F <code>Tristate[0] = &#39;False&#39;</code>\u3002\u610F\u5473\u7740\u4F60\u53EF\u4EE5\u4F7F\u7528 <code>Tristate</code> \u53D8\u91CF\u6765\u628A\u5B57\u7B26\u4E32\u679A\u4E3E\u7C7B\u578B\u6539\u9020\u6210\u4E00\u4E2A\u6570\u5B57\u6216\u8005\u662F\u6570\u5B57\u7C7B\u578B\u7684\u679A\u4E3E\u7C7B\u578B\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Tristate</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  False</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  True</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Unknown</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(Tristate[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// &#39;False&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(Tristate[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">False</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 0</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(Tristate[Tristate</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">False])</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// &#39;False&#39; because \`Tristate.False == 0\`</span></span>
<span class="line"></span></code></pre></div><h4 id="\u6539\u53D8\u4E0E\u6570\u5B57\u679A\u4E3E\u5173\u8054\u7684\u6570\u5B57" tabindex="-1">\u6539\u53D8\u4E0E\u6570\u5B57\u679A\u4E3E\u5173\u8054\u7684\u6570\u5B57 <a class="header-anchor" href="#\u6539\u53D8\u4E0E\u6570\u5B57\u679A\u4E3E\u5173\u8054\u7684\u6570\u5B57" aria-hidden="true">#</a></h4><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u7B2C\u4E00\u4E2A\u679A\u4E3E\u503C\u662F <code>0</code>\uFF0C\u7136\u540E\u6BCF\u4E2A\u540E\u7EED\u503C\u4F9D\u6B21\u9012\u589E 1\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Color</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  Red</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 0</span></span>
<span class="line"><span style="color:#A6ACCD;">  Green</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 1</span></span>
<span class="line"><span style="color:#A6ACCD;">  Blue </span><span style="color:#676E95;">// 2</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4F46\u662F\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7\u7279\u5B9A\u7684\u8D4B\u503C\u6765\u6539\u53D8\u7ED9\u4EFB\u4F55\u679A\u4E3E\u6210\u5458\u5173\u8054\u7684\u6570\u5B57\uFF0C\u5982\u4E0B\u4F8B\u5B50\uFF0C\u6211\u4EEC\u4ECE 3 \u5F00\u59CB\u4F9D\u6B21\u9012\u589E\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Color</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  DarkRed </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 3</span></span>
<span class="line"><span style="color:#A6ACCD;">  DarkGreen</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 4</span></span>
<span class="line"><span style="color:#A6ACCD;">  DarkBlue </span><span style="color:#676E95;">// 5</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u6211\u901A\u5E38\u7528 <code>= 1</code> \u521D\u59CB\u5316\uFF0C\u56E0\u4E3A\u5728\u679A\u4E3E\u7C7B\u578B\u503C\u91CC\uFF0C\u5B83\u80FD\u8BA9\u4F60\u505A\u4E00\u4E2A\u5B89\u5168\u53EF\u9760\u7684\u68C0\u67E5\u3002</p></div><h4 id="\u4F7F\u7528\u6570\u5B57\u7C7B\u578B\u4F5C\u4E3A\u6807\u5FD7" tabindex="-1">\u4F7F\u7528\u6570\u5B57\u7C7B\u578B\u4F5C\u4E3A\u6807\u5FD7 <a class="header-anchor" href="#\u4F7F\u7528\u6570\u5B57\u7C7B\u578B\u4F5C\u4E3A\u6807\u5FD7" aria-hidden="true">#</a></h4><p>\u679A\u4E3E\u7684\u4E00\u4E2A\u5F88\u597D\u7528\u9014\u662F\u4F7F\u7528\u679A\u4E3E\u4F5C\u4E3A\u6807\u5FD7\u3002\u8FD9\u4E9B\u6807\u5FD7\u5141\u8BB8\u4F60\u68C0\u67E5\u4E00\u7EC4\u6761\u4EF6\u4E2D\u7684\u67D0\u4E2A\u6761\u4EF6\u662F\u5426\u4E3A\u771F\u3002\u8003\u8651\u5982\u4E0B\u4EE3\u7801\u4F8B\u5B50\uFF0C\u6211\u4EEC\u6709\u4E00\u7EC4\u5173\u4E8E animals \u7684\u5C5E\u6027\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">AnimalFlags</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  None        </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  HasClaws    </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  CanFly      </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  EatsFish    </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Endangered  </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u8FD9\u91CC\uFF0C\u6211\u4EEC\u4F7F\u7528\u4E86\u5DE6\u79FB\u7684\u4F4D\u8FD0\u7B97\u7B26\uFF0C\u5C06\u6570\u5B57 <code>1</code> \u7684\u4E8C\u8FDB\u5236\u5411\u5DE6\u79FB\u52A8\u4F4D\u7F6E\u5F97\u5230\u6570\u5B57 <code>0001</code>\u3001<code>0010</code>\u3001<code>0100</code> \u548C <code>1000</code>\uFF08\u6362\u6210\u5341\u8FDB\u5236\u7ED3\u679C\u662F\uFF1A1, 2, 4, 8\uFF09\u3002\u5F53\u4F60\u5728\u4F7F\u7528\u8FD9\u79CD\u6807\u8BB0\u7684\u65F6\u5019\uFF0C\u8FD9\u4E9B\u4F4D\u8FD0\u7B97\u7B26 <code>|</code> (\u6216)\u3001<code>&amp;</code> \uFF08\u548C\uFF09\u3001<code>~ </code>\uFF08\u975E\uFF09\u5C06\u4F1A\u662F\u4F60\u6700\u597D\u7684\u670B\u53CB\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">AnimalFlags</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  None        </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  HasClaws    </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  CanFly      </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Animal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">flags</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">AnimalFlags</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  [</span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">printAnimalAbilities</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">animal</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Animal</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">animalFlags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">animal</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">flags</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">animalFlags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">AnimalFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">HasClaws</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">animal has claws</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">animalFlags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">AnimalFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">CanFly</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">animal can fly</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">animalFlags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">AnimalFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">None</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">nothing</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> animal </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">flags</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> AnimalFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">None </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#82AAFF;">printAnimalAbilities</span><span style="color:#A6ACCD;">(animal)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// nothing</span></span>
<span class="line"><span style="color:#A6ACCD;">animal</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">flags </span><span style="color:#89DDFF;">|=</span><span style="color:#A6ACCD;"> AnimalFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">HasClaws</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">printAnimalAbilities</span><span style="color:#A6ACCD;">(animal)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// animal has claws</span></span>
<span class="line"><span style="color:#A6ACCD;">animal</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">flags </span><span style="color:#89DDFF;">&amp;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">AnimalFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">HasClaws</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">printAnimalAbilities</span><span style="color:#A6ACCD;">(animal)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// nothing</span></span>
<span class="line"><span style="color:#A6ACCD;">animal</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">flags </span><span style="color:#89DDFF;">|=</span><span style="color:#A6ACCD;"> AnimalFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">HasClaws </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> AnimalFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">CanFly</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">printAnimalAbilities</span><span style="color:#A6ACCD;">(animal)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// animal has claws, animal can fly</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u8FD9\u91CC\uFF1A</p><ul><li>\u6211\u4EEC\u4F7F\u7528 <code>|=</code> \u6765\u6DFB\u52A0\u4E00\u4E2A\u6807\u5FD7\uFF1B</li><li>\u7EC4\u5408\u4F7F\u7528 <code>&amp;=</code> \u548C <code>~</code> \u6765\u6E05\u7406\u4E00\u4E2A\u6807\u5FD7\uFF1B</li><li><code>|</code> \u6765\u5408\u5E76\u6807\u5FD7\u3002</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">AnimalFlags</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  None        </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  HasClaws    </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  CanFly      </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  EatsFish    </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Endangered  </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  EndangeredFlyingClawedFishEating </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> HasClaws </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> CanFly </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> EatsFish </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> Endangered</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u5B57\u7B26\u4E32\u679A\u4E3E" tabindex="-1">\u5B57\u7B26\u4E32\u679A\u4E3E <a class="header-anchor" href="#\u5B57\u7B26\u4E32\u679A\u4E3E" aria-hidden="true">#</a></h4><p>\u5728\u4E0A\u6587\u4E2D\uFF0C\u6211\u4EEC\u53EA\u770B\u5230\u4E86\u6570\u5B57\u7C7B\u578B\u7684\u679A\u4E3E\uFF0C\u5B9E\u9645\u4E0A\uFF0C\u679A\u4E3E\u7C7B\u578B\u7684\u503C\uFF0C\u4E5F\u53EF\u4EE5\u662F\u5B57\u7B26\u4E32\u7C7B\u578B\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EvidenceTypeEnum</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  UNKNOWN </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  PASSPORT_VISA </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">passport_visa</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  PASSPORT </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">passport</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  SIGHTED_STUDENT_CARD </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">sighted_tertiary_edu_id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  SIGHTED_KEYPASS_CARD </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">sighted_keypass_card</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  SIGHTED_PROOF_OF_AGE_CARD </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">sighted_proof_of_age_card</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E9B\u53EF\u4EE5\u66F4\u5BB9\u6613\u88AB\u5904\u7406\u548C\u8C03\u8BD5\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u63D0\u4F9B\u6709\u610F\u4E49/\u53EF\u8C03\u8BD5\u7684\u5B57\u7B26\u4E32\u3002</p><p>\u4F60\u53EF\u4EE5\u4F7F\u7528\u5B83\u4EEC\u7528\u4E8E\u7B80\u5355\u7684\u5B57\u7B26\u4E32\u6BD4\u8F83\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// Where \`someStringFromBackend\` will be &#39;&#39; | &#39;passport_visa&#39; | &#39;passport&#39; ... etc.</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> someStringFromBackend</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">passport</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> value </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> someStringFromBackend </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EvidenceTypeEnum</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Sample use in code</span></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> (value </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> EvidenceTypeEnum</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PASSPORT) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">You provided a passport</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// \`passport\`</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u5E38\u91CF\u679A\u4E3E" tabindex="-1">\u5E38\u91CF\u679A\u4E3E <a class="header-anchor" href="#\u5E38\u91CF\u679A\u4E3E" aria-hidden="true">#</a></h4><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Tristate</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  False</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  True</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Unknown</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> lie </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Tristate</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">False</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p><code>const lie = Tristate.False</code> \u4F1A\u88AB\u7F16\u8BD1\u6210 JavaScript <code>let lie = Tristate.False</code> (\u662F\u7684\uFF0C\u7F16\u8BD1\u540E\u4E0E\u7F16\u8BD1\u524D\uFF0C\u51E0\u4E4E\u76F8\u540C)\u3002\u8FD9\u610F\u5473\u7740\u5728\u8FD0\u884C\u6267\u884C\u65F6\uFF0C\u5B83\u5C06\u4F1A\u67E5\u627E\u53D8\u91CF <code>Tristate</code> \u548C <code>Tristate.False</code>\u3002\u5728\u6B64\u5904\u83B7\u5F97\u6027\u80FD\u63D0\u5347\u7684\u4E00\u4E2A\u5C0F\u6280\u5DE7\u662F\u4F7F\u7528\u5E38\u91CF\u679A\u4E3E\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Tristate</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  False</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  True</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Unknown</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> lie </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Tristate</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">False</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5C06\u4F1A\u88AB\u7F16\u8BD1\u6210\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> lie </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u7F16\u8BD1\u5668\u5C06\u4F1A\uFF1A</p><ul><li>\u5185\u8054\u679A\u4E3E\u7684\u4EFB\u4F55\u7528\u6CD5\uFF08<code>0</code> \u800C\u4E0D\u662F <code>Tristate.False</code>\uFF09\uFF1B</li><li>\u4E0D\u4F1A\u4E3A\u679A\u4E3E\u7C7B\u578B\u7F16\u8BD1\u6210\u4EFB\u4F55 JavaScript\uFF08\u5728\u8FD9\u4E2A\u4F8B\u5B50\u4E2D\uFF0C\u8FD0\u884C\u65F6\u6CA1\u6709 <code>Tristate</code> \u53D8\u91CF\uFF09\uFF0C\u56E0\u4E3A\u5B83\u4F7F\u7528\u5185\u8054\u8BED\u6CD5\u3002</li></ul><h5 id="\u5E38\u91CF\u679A\u4E3E-preserveconstenums-\u9009\u9879" tabindex="-1">\u5E38\u91CF\u679A\u4E3E <code>preserveConstEnums</code> \u9009\u9879 <a class="header-anchor" href="#\u5E38\u91CF\u679A\u4E3E-preserveconstenums-\u9009\u9879" aria-hidden="true">#</a></h5><p>\u4F7F\u7528\u5185\u8054\u8BED\u6CD5\u5BF9\u6027\u80FD\u6709\u660E\u663E\u7684\u63D0\u5347\u4F5C\u7528\u3002\u8FD0\u884C\u65F6\u6CA1\u6709 <code>Tristate</code> \u53D8\u91CF\u7684\u4E8B\u5B9E\uFF0C\u662F\u56E0\u4E3A\u7F16\u8BD1\u5668\u5E2E\u52A9\u4F60\u628A\u4E00\u4E9B\u5728\u8FD0\u884C\u65F6\u6CA1\u6709\u7528\u5230\u7684\u4E0D\u7F16\u8BD1\u6210 JavaScript\u3002\u7136\u800C\uFF0C\u4F60\u53EF\u80FD\u60F3\u8BA9\u7F16\u8BD1\u5668\u4ECD\u7136\u628A\u679A\u4E3E\u7C7B\u578B\u7F16\u8BD1\u6210 JavaScript\uFF0C\u7528\u4E8E\u5982\u4E0A\u4F8B\u5B50\u4E2D\u4ECE\u5B57\u7B26\u4E32\u5230\u6570\u5B57\uFF0C\u6216\u8005\u662F\u4ECE\u6570\u5B57\u5230\u5B57\u7B26\u4E32\u7684\u67E5\u627E\u3002\u5728\u8FD9\u79CD\u60C5\u666F\u4E0B\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528\u7F16\u8BD1\u9009\u9879 <code>--preserveConstEnums</code>\uFF0C\u5B83\u4F1A\u7F16\u8BD1\u51FA <code>var Tristate</code> \u7684\u5B9A\u4E49\uFF0C\u56E0\u6B64\u4F60\u5728\u8FD0\u884C\u65F6\uFF0C\u624B\u52A8\u4F7F\u7528 <code>Tristate[&#39;False&#39;]</code> \u548C <code>Tristate[0]</code>\u3002\u5E76\u4E14\u8FD9\u4E0D\u4F1A\u4EE5\u4EFB\u4F55\u65B9\u5F0F\u5F71\u54CD\u5185\u8054\u3002</p><h4 id="\u6709\u9759\u6001\u65B9\u6CD5\u7684\u679A\u4E3E" tabindex="-1">\u6709\u9759\u6001\u65B9\u6CD5\u7684\u679A\u4E3E <a class="header-anchor" href="#\u6709\u9759\u6001\u65B9\u6CD5\u7684\u679A\u4E3E" aria-hidden="true">#</a></h4><p>\u4F60\u53EF\u4EE5\u4F7F\u7528 <code>enum</code> + <code>namespace</code> \u7684\u58F0\u660E\u7684\u65B9\u5F0F\u5411\u679A\u4E3E\u7C7B\u578B\u6DFB\u52A0\u9759\u6001\u65B9\u6CD5\u3002\u5982\u4E0B\u4F8B\u6240\u793A\uFF0C\u6211\u4EEC\u5C06\u9759\u6001\u6210\u5458 <code>isBusinessDay</code> \u6DFB\u52A0\u5230\u679A\u4E3E\u4E0A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Weekday</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  Monday</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Tuesday</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Wednesday</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Thursday</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Friday</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Saturday</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Sunday</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Weekday</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">export</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">isBusinessDay</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">day</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Weekday</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">switch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">day</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Weekday</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Saturday</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Weekday</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Sunday</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">default</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> mon </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Weekday</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Monday</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> sun </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Weekday</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Sunday</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(Weekday</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isBusinessDay</span><span style="color:#A6ACCD;">(mon))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// true</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(Weekday</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isBusinessDay</span><span style="color:#A6ACCD;">(sun))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="\u5F00\u653E\u5F0F\u679A\u4E3E" tabindex="-1">\u5F00\u653E\u5F0F\u679A\u4E3E <a class="header-anchor" href="#\u5F00\u653E\u5F0F\u679A\u4E3E" aria-hidden="true">#</a></h4><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u4F60\u53EA\u6709\u5728\u4E0D\u4F7F\u7528\u6A21\u5757\u65F6\uFF0C\u5F00\u653E\u5F0F\u7684\u679A\u4E3E\u624D\u6709\u610F\u4E49\uFF0C\u4F60\u5E94\u8BE5\u4F7F\u7528\u6A21\u5757\uFF0C\u56E0\u6B64\u8FD9\u90E8\u5206\u5728\u6587\u7AE0\u6700\u540E\u3002</p></div><p>\u8BA9\u6211\u4EEC\u518D\u4E00\u6B21\u770B\u770B\u7F16\u8BD1\u6210 JavaScript \u7684\u679A\u4E3E\u662F\u4EC0\u4E48\u6837\u5B50\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> Tristate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Tristate</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">Tristate</span><span style="color:#F07178;">[(</span><span style="color:#A6ACCD;">Tristate</span><span style="color:#F07178;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">False</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">)] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">False</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">Tristate</span><span style="color:#F07178;">[(</span><span style="color:#A6ACCD;">Tristate</span><span style="color:#F07178;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">True</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">)] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">True</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">Tristate</span><span style="color:#F07178;">[(</span><span style="color:#A6ACCD;">Tristate</span><span style="color:#F07178;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Unknown</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#F07178;">)] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Unknown</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)(Tristate </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> (Tristate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u5DF2\u7ECF\u89E3\u91CA\u4E86 <code>Tristate[Tristate[&#39;False&#39;] = 0] = &#39;False&#39;</code> \u90E8\u5206\uFF0C\u73B0\u5728\u6211\u4EEC\u6765\u770B\u770B\u5305\u88F9\u51FD\u6570 <code>(function (Tristate) { /* code here */})(Tristate || (Tristate = {}))</code>\uFF0C\u7279\u522B\u662F <code>(Tristate || (Tristate = {}))</code> \u90E8\u5206\u3002\u8FD9\u6355\u83B7\u4E86\u4E00\u4E2A\u5C40\u90E8\u53D8\u91CF <code>TriState</code>\uFF0C\u5B83\u8981\u4E48\u6307\u5411\u5DF2\u7ECF\u5B9A\u4E49\u7684 <code>TriState</code> \u503C\uFF0C\u8981\u4E48\u4F7F\u7528\u4E00\u4E2A\u65B0\u7684\u7A7A\u5BF9\u8C61\u6765\u521D\u59CB\u5316\u5B83\u3002</p><p>\u8FD9\u610F\u5473\u7740\u4F60\u53EF\u4EE5\u8DE8\u591A\u4E2A\u6587\u4EF6\u62C6\u5206\uFF08\u548C\u6269\u5C55\uFF09\u679A\u4E3E\u5B9A\u4E49\uFF0C\u5982\u4E0B\u6240\u793A\uFF0C\u4F60\u53EF\u4EE5\u628A <code>Color</code> \u7684\u5B9A\u4E49\u62C6\u5206\u81F3\u4E24\u4E2A\u5757\u4E2D\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Color</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  Red</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Green</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Blue</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Color</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  DarkRed </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  DarkGreen</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  DarkBlue</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u4F60\u5E94\u8BE5\u5728\u679A\u4E3E\u7684\u5EF6\u7EED\u5757\u4E2D\uFF0C\u91CD\u65B0\u521D\u59CB\u5316\u7B2C\u4E00\u4E2A\u6210\u5458\uFF08\u6B64\u5904\u4E3A <code>DarkRed = 3</code>\uFF09\uFF0C\u4F7F\u751F\u6210\u7684\u4EE3\u7801\u4E0D\u7834\u574F\u5148\u524D\u5B9A\u4E49\u7684\u503C\uFF08\u53730\u30011...\u7B49\u503C\uFF09\u3002\u5982\u679C\u60A8\u4ECD\u7136\u4E0D\u8FD9\u6837\u505A\uFF0CTypeScript \u5C06\u4F1A\u53D1\u51FA\u8B66\u544A\uFF08\u9519\u8BEF\u4FE1\u606F\uFF1A<code>In an enum with multiple declarations, only one declaration can omit an initializer for its first enum element.</code>\uFF09\u3002</p></div><h3 id="lib-d-ts" tabindex="-1"><code>lib.d.ts</code> <a class="header-anchor" href="#lib-d-ts" aria-hidden="true">#</a></h3><p>\u5F53\u4F60\u5B89\u88C5 <code>TypeScript</code> \u65F6\uFF0C\u4F1A\u987A\u5E26\u5B89\u88C5\u4E00\u4E2A <code>lib.d.ts</code> \u58F0\u660E\u6587\u4EF6\u3002\u8FD9\u4E2A\u6587\u4EF6\u5305\u542B JavaScript \u8FD0\u884C\u65F6\u4EE5\u53CA DOM \u4E2D\u5B58\u5728\u5404\u79CD\u5E38\u89C1\u7684\u73AF\u5883\u58F0\u660E\u3002</p><ul><li>\u5B83\u81EA\u52A8\u5305\u542B\u5728 <code>TypeScript</code> \u9879\u76EE\u7684\u7F16\u8BD1\u4E0A\u4E0B\u6587\u4E2D\uFF1B</li><li>\u5B83\u80FD\u8BA9\u4F60\u5FEB\u901F\u5F00\u59CB\u4E66\u5199\u7ECF\u8FC7\u7C7B\u578B\u68C0\u67E5\u7684 JavaScript \u4EE3\u7801\u3002</li></ul><p>\u4F60\u53EF\u4EE5\u901A\u8FC7\u6307\u5B9A <code>--noLib</code> \u7684\u7F16\u8BD1\u5668\u547D\u4EE4\u884C\u6807\u5FD7\uFF08\u6216\u8005\u5728 <code>tsconfig.json</code> \u4E2D\u6307\u5B9A\u9009\u9879 <code>noLib: true</code>\uFF09\u4ECE\u4E0A\u4E0B\u6587\u4E2D\u6392\u9664\u6B64\u6587\u4EF6\u3002</p><h4 id="\u4F7F\u7528\u4F8B\u5B50" tabindex="-1">\u4F7F\u7528\u4F8B\u5B50 <a class="header-anchor" href="#\u4F7F\u7528\u4F8B\u5B50" aria-hidden="true">#</a></h4><p>\u770B\u5982\u4E0B\u4F8B\u5B50\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u6BB5\u4EE3\u7801\u7684\u7C7B\u578B\u68C0\u67E5\u6B63\u5E38\uFF0C\u56E0\u4E3A <code>lib.d.ts</code> \u4E3A\u6240\u6709 JavaScript \u5BF9\u8C61\u5B9A\u4E49\u4E86 <code>toString</code> \u65B9\u6CD5\u3002</p><p>\u5982\u679C\u4F60\u5728 <code>noLib</code> \u9009\u9879\u4E0B\uFF0C\u4F7F\u7528\u76F8\u540C\u7684\u4EE3\u7801\uFF0C\u8FD9\u5C06\u4F1A\u51FA\u73B0\u7C7B\u578B\u68C0\u67E5\u9519\u8BEF\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: \u5C5E\u6027 toString \u4E0D\u5B58\u5728\u7C7B\u578B number \u4E0A</span></span>
<span class="line"></span></code></pre></div><p>\u73B0\u5728\u4F60\u5DF2\u7ECF\u7406\u89E3\u4E86 <code>lib.d.ts</code> \u7684\u91CD\u8981\u6027\uFF0C\u81F3\u4E8E\u5B83\u7684\u5185\u5BB9\u662F\u600E\u4E48\u6837\u7684\uFF0C\u6211\u4EEC\u63A5\u4E0B\u6765\u5C06\u4F1A\u89E3\u91CA\u3002</p><h4 id="\u89C2\u5BDF-lib-d-ts-\u7684\u5185\u5BB9" tabindex="-1">\u89C2\u5BDF <code>lib.d.ts</code> \u7684\u5185\u5BB9 <a class="header-anchor" href="#\u89C2\u5BDF-lib-d-ts-\u7684\u5185\u5BB9" aria-hidden="true">#</a></h4><p><code>lib.d.ts</code> \u7684\u5185\u5BB9\u4E3B\u8981\u662F\u4E00\u4E9B\u53D8\u91CF\u58F0\u660E\uFF08\u5982\uFF1A<code>window</code>\u3001<code>document</code>\u3001<code>math</code>\uFF09\u548C\u4E00\u4E9B\u7C7B\u4F3C\u7684\u63A5\u53E3\u58F0\u660E\uFF08\u5982\uFF1A<code>Window</code>\u3001<code>Document</code>\u3001<code>Math</code>\uFF09\u3002</p><p>\u5BFB\u627E\u4EE3\u7801\u7C7B\u578B\uFF08\u5982\uFF1A<code>Math.floor</code>\uFF09\u7684\u6700\u7B80\u5355\u65B9\u5F0F\u662F\u4F7F\u7528 IDE \u7684 <code>F12</code>\uFF08\u8DF3\u8F6C\u5230\u5B9A\u4E49\uFF09\u3002</p><p>\u8BA9\u6211\u4EEC\u6765\u770B\u4E00\u4E2A\u53D8\u91CF\u58F0\u660E\u7684\u793A\u4F8B\uFF0C\u5982 <code>window</code> \u88AB\u5B9A\u4E49\u4E3A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> window</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Window</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u53EA\u662F\u4E00\u4E2A\u7B80\u5355\u7684 <code>declare var</code>\uFF0C\u540E\u9762\u8DDF\u4E00\u4E2A\u53D8\u91CF\u540D\u79F0\uFF08<code>window</code>\uFF09\u548C\u4E00\u4E2A\u7528\u6765\u7C7B\u578B\u6CE8\u89E3\u7684\u63A5\u53E3\uFF08<code>Window</code>\uFF09\uFF0C\u8FD9\u4E9B\u53D8\u91CF\u901A\u5E38\u6307\u5411\u4E00\u4E9B\u5168\u5C40\u7684\u63A5\u53E3\uFF0C\u4F8B\u5982\uFF0C\u4EE5\u4E0B\u662F <code>Window</code> \u63A5\u53E3\u7684\u4E00\u5C0F\u90E8\u5206\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Window</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EventTarget</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">WindowTimers</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">WindowSessionStorage</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">WindowLocalStorage</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">WindowConsole</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">GlobalEventHandlers</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">IDBEnvironment</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">WindowBase64</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">animationStartTime</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">applicationCache</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ApplicationCache</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">clientInformation</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Navigator</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">closed</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">crypto</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Crypto</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// so on and so forth...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4F60\u53EF\u4EE5\u5728\u8FD9\u4E9B\u63A5\u53E3\u91CC\u770B\u5230\u5927\u91CF\u7684\u7C7B\u578B\u4FE1\u606F\uFF0C\u5F53\u4F60\u4E0D\u4F7F\u7528 TypeScript \u65F6\uFF0C\u4F60\u9700\u8981\u5C06\u5B83\u4EEC\u4FDD\u5B58\u5728\u4F60\u7684\u5927\u8111\u91CC\u3002\u73B0\u5728\u4F60\u53EF\u4EE5\u4F7F\u7528 <code>intellisense</code> \u4E4B\u7C7B\u4E1C\u897F\uFF0C\u4ECE\u800C\u53EF\u4EE5\u51CF\u5C11\u5BF9\u77E5\u8BC6\u7684\u8BB0\u5FC6\u3002</p><p>\u4F7F\u7528\u8FD9\u4E9B\u5168\u5C40\u53D8\u91CF\u662F\u6709\u5229\u7684\u3002\u5728\u4E0D\u66F4\u6539 <code>lib.d.ts</code> \u7684\u60C5\u51B5\u4E0B\uFF0C\u5B83\u53EF\u4EE5\u8BA9\u4F60\u6DFB\u52A0\u989D\u5916\u7684\u5C5E\u6027\u3002\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u5C06\u4ECB\u7ECD\u8FD9\u4E9B\u6982\u5FF5\u3002</p><h4 id="\u4FEE\u6539\u539F\u59CB\u7C7B\u578B" tabindex="-1">\u4FEE\u6539\u539F\u59CB\u7C7B\u578B <a class="header-anchor" href="#\u4FEE\u6539\u539F\u59CB\u7C7B\u578B" aria-hidden="true">#</a></h4><p>\u5728 TypeScript \u4E2D\uFF0C\u63A5\u53E3\u662F\u5F00\u653E\u5F0F\u7684\uFF0C\u8FD9\u610F\u5473\u7740\u5F53\u4F60\u60F3\u4F7F\u7528\u4E0D\u5B58\u5728\u7684\u6210\u5458\u65F6\uFF0C\u53EA\u9700\u8981\u5C06\u5B83\u4EEC\u6DFB\u52A0\u81F3 <code>lib.d.ts</code> \u4E2D\u7684\u63A5\u53E3\u58F0\u660E\u4E2D\u5373\u53EF\uFF0CTypeScript \u5C06\u4F1A\u81EA\u52A8\u63A5\u6536\u5B83\u3002\u6CE8\u610F\uFF0C\u4F60\u9700\u8981\u5728<a href="#%E5%85%A8%E5%B1%80%E6%A8%A1%E5%9D%97">\u5168\u5C40\u6A21\u5757</a>\u4E2D\u505A\u8FD9\u4E9B\u4FEE\u6539\uFF0C\u4EE5\u4F7F\u8FD9\u4E9B\u63A5\u53E3\u4E0E <code>lib.d.ts</code> \u76F8\u5173\u8054\u3002\u6211\u4EEC\u63A8\u8350\u4F60\u521B\u5EFA\u4E00\u4E2A\u79F0\u4E3A <code>global.d.ts</code> \u7684\u7279\u6B8A\u6587\u4EF6\u3002</p><p>\u8FD9\u91CC\u6709\u6211\u4EEC\u9700\u8981\u6DFB\u52A0\u81F3 <code>Window</code>\uFF0C<code>Math</code>\uFF0C<code>Date</code> \u7684\u4E00\u4E9B\u4F8B\u5B50\uFF1A</p><h5 id="window" tabindex="-1">Window <a class="header-anchor" href="#window" aria-hidden="true">#</a></h5><p>\u4EC5\u4EC5\u662F\u6DFB\u52A0\u81F3 <code>Window</code> \u63A5\u53E3\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Window</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">helloWorld</span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u5C06\u5141\u8BB8\u4F60\u4EE5\u7C7B\u578B\u5B89\u5168\u7684\u5F62\u5F0F\u4F7F\u7528\u5B83\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// Add it at runtime</span></span>
<span class="line"><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">helloWorld</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello world</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Call it</span></span>
<span class="line"><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">helloWorld</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u6EE5\u7528\u4F1A\u5BFC\u81F4\u9519\u8BEF</span></span>
<span class="line"><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">helloWorld</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">gracius</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: \u63D0\u4F9B\u7684\u53C2\u6570\u4E0E\u76EE\u6807\u4E0D\u5339\u914D</span></span>
<span class="line"></span></code></pre></div><h5 id="math" tabindex="-1">Math <a class="header-anchor" href="#math" aria-hidden="true">#</a></h5><p>\u5168\u5C40\u53D8\u91CF <code>Math</code> \u5728 <code>lib.d.ts</code> \u4E2D\u88AB\u5B9A\u4E49\u4E3A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">/** An intrinsic object that provides basic mathematics functionality and constants. */</span></span>
<span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> Math</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Math</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5373\u53D8\u91CF Math \u662F Math \u7684\u4E00\u4E2A\u5B9E\u4F8B\uFF0CMath \u63A5\u53E3\u88AB\u5B9A\u4E49\u4E3A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Math</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">E</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">LN10</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// others ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5F53\u4F60\u60F3\u5728 <code>Math</code> \u5168\u5C40\u53D8\u91CF\u4E0A\u6DFB\u52A0\u4F60\u9700\u8981\u7684\u5C5E\u6027\u65F6\uFF0C\u4F60\u53EA\u9700\u8981\u628A\u5B83\u6DFB\u52A0\u5230 <code>Math</code> \u7684\u5168\u5C40\u63A5\u53E3\u4E0A\u5373\u53EF\uFF0C\u4F8B\u5982\uFF1A\u5728<a href="https://www.npmjs.com/package/seedrandom" target="_blank" rel="noreferrer">seedrandom Project</a>\u9879\u76EE\u91CC\uFF0C\u5B83\u6DFB\u52A0\u4E86 <code>seedrandom</code> \u51FD\u6570\u81F3\u5168\u5C40\u7684 <code>Math</code> \u5BF9\u8C61\u4E0A\uFF0C\u8FD9\u5F88\u5BB9\u6613\u88AB\u58F0\u660E\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Math</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">seedrandom</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">seed</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4F60\u53EF\u4EE5\u50CF\u4E0B\u9762\u4E00\u6837\u4F7F\u7528\u5B83\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#A6ACCD;">Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">seedrandom</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">seedrandom</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Any string you want</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h5 id="date" tabindex="-1">Date <a class="header-anchor" href="#date" aria-hidden="true">#</a></h5><p>\u5982\u679C\u4F60\u5728 <code>lib.d.ts</code> \u4E2D\u5BFB\u627E <code>Date</code> \u5B9A\u4E49\u7684\u58F0\u660E\uFF0C\u4F60\u5C06\u4F1A\u627E\u5230\u5982\u4E0B\u4EE3\u7801\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> Date</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DateConstructor</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u53E3 <code>DateConstructor</code> \u4E0E\u4E0A\u6587\u4E2D <code>Math</code> \u548C <code>Window</code> \u63A5\u53E3\u4E00\u6837\uFF0C\u5B83\u6DB5\u76D6\u4E86\u53EF\u4EE5\u4F7F\u7528\u7684 <code>Date</code> \u5168\u5C40\u53D8\u91CF\u7684\u6210\u5458\uFF08\u5982\uFF1A<code>Date.now()</code>\uFF09\u3002\u9664\u6B64\u4E4B\u5916\uFF0C\u5B83\u8FD8\u5305\u542B\u4E86\u53EF\u4EE5\u8BA9\u4F60\u521B\u5EFA <code>Date</code> \u5B9E\u4F8B\u7684\u6784\u9020\u51FD\u6570\u7B7E\u540D\uFF08\u5982\uFF1A<code>new Date()</code>\uFF09\u3002<code>DateConstructor</code> \u63A5\u53E3\u7684\u4E00\u90E8\u5206\u4EE3\u7801\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DateConstructor</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Date</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u4E00\u4E9B\u5176\u4ED6\u7684\u6784\u9020\u51FD\u6570\u7B7E\u540D</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">now</span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u5176\u4ED6\u6210\u5458\u51FD\u6570</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5728 <a href="https://github.com/abritinthebay/datejs" target="_blank" rel="noreferrer">datejs</a> \u91CC\uFF0C\u5B83\u5728 Date \u7684\u5168\u5C40\u53D8\u91CF\u4EE5\u53CA Date \u5B9E\u4F8B\u4E0A\u540C\u65F6\u6DFB\u52A0\u4E86\u6210\u5458\uFF0C\u56E0\u6B64\u8FD9\u4E2A\u5E93\u7684 TypeScript \u5B9A\u4E49\u770B\u8D77\u6765\u50CF\u5982\u4E0B\u6240\u793A\uFF08\u793E\u533A\u5DF2\u7ECF<a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/datejs/index.d.ts" target="_blank" rel="noreferrer">\u5B9A\u4E49</a>\u597D\u4E86\uFF09\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// DateJS \u516C\u5F00\u7684\u9759\u6001\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DateConstructor</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">/** Gets a date that is set to the current date. The time is set to the start of the day (00:00 or 12:00 AM) */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">today</span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Date</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// ... so on and so forth</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// DateJS \u516C\u5F00\u7684\u5B9E\u4F8B\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Date</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">/** Adds the specified number of milliseconds to this instance. */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">addMilliseconds</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">milliseconds</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Date</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// ... so on and so forth</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u5141\u8BB8\u4F60\u5728\u7C7B\u578B\u5B89\u5168\u7684\u60C5\u51B5\u4E0B\u505A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> today </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Date</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">today</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> todayAfter1second </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> today</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addMilliseconds</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1000</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h5 id="string" tabindex="-1">string <a class="header-anchor" href="#string" aria-hidden="true">#</a></h5><p>\u5982\u679C\u4F60\u5728 <code>lib.d.ts</code> \u91CC\u5BFB\u627E <code>string</code>\uFF0C\u4F60\u5C06\u4F1A\u627E\u5230\u4E0E <code>Date</code> \u76F8\u7C7B\u4F3C\u7684\u5185\u5BB9\uFF08\u5168\u5C40\u53D8\u91CF <code>String</code>\uFF0CStringConstructor \u63A5\u53E3\uFF0C<code>String</code> \u63A5\u53E3\uFF09\u3002\u4F46\u503C\u5F97\u6CE8\u610F\u7684\u662F\uFF0C<code>String</code> \u63A5\u53E3\u4E5F\u4F1A\u5F71\u54CD\u5B57\u7B26\u4E32\u5B57\u9762\u91CF\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">endsWith</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">suffix</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">String</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">endsWith</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">suffix</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">str</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">indexOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">suffix</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">suffix</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo bar</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">endsWith</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bas</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// false</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo bas</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">endsWith</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bas</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// true</span></span>
<span class="line"></span></code></pre></div><h5 id="\u7EC8\u6781-string" tabindex="-1">\u7EC8\u6781 string <a class="header-anchor" href="#\u7EC8\u6781-string" aria-hidden="true">#</a></h5><p>\u57FA\u4E8E\u53EF\u7EF4\u62A4\u6027\uFF0C\u6211\u4EEC\u63A8\u8350\u521B\u5EFA\u4E00\u4E2A <code>global.d.ts</code> \u6587\u4EF6\u3002\u7136\u800C\uFF0C\u5982\u679C\u4F60\u613F\u610F\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528 <code>declare global { /* global namespace */ }</code>\uFF0C\u4ECE\u6587\u4EF6\u6A21\u5757\u4E2D\u8FDB\u5165\u5168\u5C40\u547D\u540D\u7A7A\u95F4\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u786E\u4FDD\u662F\u6A21\u5757</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> global </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">interface</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">String</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    endsWith</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">suffix</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">String</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">endsWith</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">suffix</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">str</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">indexOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">suffix</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">suffix</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo bar</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">endsWith</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bas</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// false</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo bas</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">endsWith</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bas</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// true</span></span>
<span class="line"></span></code></pre></div><h4 id="\u4F7F\u7528\u4F60\u81EA\u5DF1\u5B9A\u4E49\u7684-lib-d-ts" tabindex="-1">\u4F7F\u7528\u4F60\u81EA\u5DF1\u5B9A\u4E49\u7684 lib.d.ts <a class="header-anchor" href="#\u4F7F\u7528\u4F60\u81EA\u5DF1\u5B9A\u4E49\u7684-lib-d-ts" aria-hidden="true">#</a></h4><p>\u6B63\u5982\u4E0A\u6587\u6240\u8BF4\uFF0C\u4F7F\u7528 <code>--noLib</code> \u7F16\u8BD1\u9009\u9879\u4F1A\u5BFC\u81F4 TypeScript \u6392\u9664\u81EA\u52A8\u5305\u542B\u7684 <code>lib.d.ts</code> \u6587\u4EF6\u3002\u4E3A\u4EC0\u4E48\u8FD9\u4E2A\u529F\u80FD\u662F\u6709\u6548\u7684\uFF0C\u6211\u4F8B\u4E3E\u4E86\u4E00\u4E9B\u5E38\u89C1\u539F\u56E0\uFF1A</p><ul><li>\u8FD0\u884C\u7684 JavaScript \u73AF\u5883\u4E0E\u57FA\u4E8E\u6807\u51C6\u6D4F\u89C8\u5668\u8FD0\u884C\u65F6\u73AF\u5883\u6709\u5F88\u5927\u4E0D\u540C\uFF1B</li><li>\u4F60\u5E0C\u671B\u5728\u4EE3\u7801\u91CC\u4E25\u683C\u7684\u63A7\u5236\u5168\u5C40\u53D8\u91CF\uFF0C\u4F8B\u5982\uFF1A<code>lib.d.ts</code> \u5C06 <code>item</code> \u5B9A\u4E49\u4E3A\u5168\u5C40\u53D8\u91CF\uFF0C\u4F60\u4E0D\u5E0C\u671B\u5B83\u6CC4\u6F0F\u5230\u4F60\u7684\u4EE3\u7801\u91CC\u3002</li></ul><p>\u4E00\u65E6\u4F60\u6392\u9664\u4E86\u9ED8\u8BA4\u7684 <code>lib.d.ts</code> \u6587\u4EF6\uFF0C\u4F60\u5C31\u53EF\u4EE5\u5728\u7F16\u8BD1\u4E0A\u4E0B\u6587\u4E2D\u5305\u542B\u4E00\u4E2A\u547D\u540D\u76F8\u4F3C\u7684\u6587\u4EF6\uFF0CTypeScript \u5C06\u63D0\u53D6\u8BE5\u6587\u4EF6\u8FDB\u884C\u7C7B\u578B\u68C0\u67E5\u3002</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u5C0F\u5FC3\u4F7F\u7528 <code>--noLib</code> \u9009\u9879\uFF0C\u4E00\u65E6\u4F60\u4F7F\u7528\u4E86\u5B83\uFF0C\u5F53\u4F60\u628A\u4F60\u7684\u9879\u76EE\u5206\u4EAB\u7ED9\u5176\u4ED6\u4EBA\u65F6\uFF0C\u5B83\u4EEC\u4E5F\u5C06\u88AB\u8FEB\u4F7F\u7528 <code>--noLib</code> \u9009\u9879\uFF0C\u66F4\u7CDF\u7CD5\u7684\u662F\uFF0C\u5982\u679C\u5C06\u8FD9\u4E9B\u4EE3\u7801\u653E\u5165\u4F60\u7684\u9879\u76EE\u4E2D\uFF0C\u4F60\u53EF\u80FD\u9700\u8981\u5C06\u5B83\u4EEC\u79FB\u690D\u5230\u57FA\u4E8E\u4F60\u7684\u4EE3\u7801\u7684 <code>lib</code> \u4E2D\u3002</p></div><h4 id="\u7F16\u8BD1\u76EE\u6807\u5BF9-lib-d-ts-\u7684\u5F71\u54CD" tabindex="-1">\u7F16\u8BD1\u76EE\u6807\u5BF9 <code>lib.d.ts</code> \u7684\u5F71\u54CD <a class="header-anchor" href="#\u7F16\u8BD1\u76EE\u6807\u5BF9-lib-d-ts-\u7684\u5F71\u54CD" aria-hidden="true">#</a></h4><p>\u8BBE\u7F6E\u7F16\u8BD1\u76EE\u6807\u4E3A <code>es6</code> \u65F6\uFF0C\u80FD\u5BFC\u81F4 <code>lib.d.ts</code> \u5305\u542B\u66F4\u591A\u50CF Promise \u73B0\u4EE3\uFF08es6\uFF09\u5185\u5BB9\u7684\u73AF\u5883\u58F0\u660E\u3002\u7F16\u8BD1\u5668\u76EE\u6807\u7684\u8FD9\u79CD\u4F5C\u7528\uFF0C\u6539\u53D8\u4E86\u4EE3\u7801\u7684\u73AF\u5883\uFF0C\u8FD9\u5BF9\u67D0\u4E9B\u4EBA\u6765\u8BF4\u662F\u7406\u60F3\u7684\uFF0C\u4F46\u662F\u8FD9\u5BF9\u53E6\u5916\u4E00\u4E9B\u4EBA\u6765\u8BF4\u9020\u6210\u4E86\u56F0\u6270\uFF0C\u56E0\u4E3A\u5B83\u5C06\u7F16\u8BD1\u51FA\u7684\u4EE3\u7801\u4E0E\u73AF\u5883\u6DF7\u4E3A\u4E00\u8C08\u3002</p><p>\u5F53\u4F60\u60F3\u5BF9\u73AF\u5883\u8FDB\u884C\u66F4\u7EC6\u7C92\u7684\u63A7\u5236\u65F6\uFF0C\u4F60\u5E94\u8BE5\u4F7F\u7528\u6211\u4EEC\u63A5\u4E0B\u6765\u5C06\u8981\u8BA8\u8BBA\u7684 <code>--lib</code> \u9009\u9879\u3002</p><h4 id="lib-\u9009\u9879" tabindex="-1"><code>--lib</code> \u9009\u9879 <a class="header-anchor" href="#lib-\u9009\u9879" aria-hidden="true">#</a></h4><p>\u6709\u65F6\uFF0C\u4F60\u60F3\u8981\u89E3\u8026\u7F16\u8BD1\u76EE\u6807\uFF08\u5373\u751F\u6210\u7684 JavaScript \u7248\u672C\uFF09\u548C\u73AF\u5883\u5E93\u652F\u6301\u4E4B\u95F4\u7684\u5173\u7CFB\u3002\u4F8B\u5982\u5BF9\u4E8E Promise\uFF0C\u4F60\u7684\u7F16\u8BD1\u76EE\u6807\u662F <code>--target es5</code>\uFF0C\u4F46\u662F\u4F60\u4ECD\u7136\u60F3\u4F7F\u7528\u5B83\uFF0C\u8FD9\u65F6\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528 <code>lib</code> \u5BF9\u5B83\u8FDB\u884C\u63A7\u5236\u3002</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u4F7F\u7528 --lib \u9009\u9879\u53EF\u4EE5\u5C06\u4EFB\u4F55 lib \u4E0E --target \u89E3\u8026\u3002</p></div><p>\u4F60\u53EF\u4EE5\u901A\u8FC7\u547D\u4EE4\u884C\u6216\u8005\u5728 <code>tsconfig.json</code> \u4E2D\u63D0\u4F9B\u6B64\u9009\u9879\uFF08\u63A8\u8350\uFF09\uFF1A</p><h5 id="\u547D\u4EE4\u884C" tabindex="-1">\u547D\u4EE4\u884C <a class="header-anchor" href="#\u547D\u4EE4\u884C" aria-hidden="true">#</a></h5><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">tsc --target es5 --lib dom,es6</span></span>
<span class="line"></span></code></pre></div><h5 id="config-json" tabindex="-1">config.json <a class="header-anchor" href="#config-json" aria-hidden="true">#</a></h5><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">compilerOptions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">lib</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dom</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">es6</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><code>lib</code> \u5206\u7C7B\u5982\u4E0B\uFF1A</p><ul><li>JavaScript \u529F\u80FD <ul><li>es5</li><li>es6</li><li>es2015</li><li>es7</li><li>es2016</li><li>es2017</li><li>esnext</li></ul></li><li>\u8FD0\u884C\u73AF\u5883 <ul><li>dom</li><li>dom.iterable</li><li>webworker</li><li>scripthost</li></ul></li><li>ESNext \u529F\u80FD\u9009\u9879 <ul><li>es2015.core</li><li>es2015.collection</li><li>es2015.generator</li><li>es2015.iterable</li><li>es2015.promise</li><li>es2015.proxy</li><li>es2015.reflect</li><li>es2015.symbol</li><li>es2015.symbol.wellknown</li><li>es2016.array.include</li><li>es2017.object</li><li>es2017.sharedmemory</li><li>esnext.asynciterable</li></ul></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>--lib</code> \u9009\u9879\u63D0\u4F9B\u975E\u5E38\u7CBE\u7EC6\u7684\u63A7\u5236\uFF0C\u56E0\u6B64\u4F60\u6700\u6709\u53EF\u80FD\u4ECE\u8FD0\u884C\u73AF\u5883\u4E0E JavaScript \u529F\u80FD\u7C7B\u522B\u4E2D\u5206\u522B\u9009\u62E9\u4E00\u9879\uFF0C\u5982\u679C\u4F60\u6CA1\u6709\u6307\u5B9A <code>--lib</code>\uFF0C\u5219\u4F1A\u5BFC\u5165\u9ED8\u8BA4\u5E93\uFF1A</p><ul><li><code>--target</code> \u9009\u9879\u4E3A es5 \u65F6\uFF0C\u4F1A\u5BFC\u5165 es5, dom, scripthost\u3002</li><li><code>--target</code> \u9009\u9879\u4E3A es6 \u65F6\uFF0C\u4F1A\u5BFC\u5165 es6, dom, dom.iterable, scripthost\u3002</li></ul></div><p>\u6211\u4E2A\u4EBA\u7684\u63A8\u8350\uFF1A</p><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">compilerOptions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">target</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">es5</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">lib</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">es6</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dom</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5305\u62EC\u4F7F\u7528 Symbol \u7684 ES5 \u4F7F\u7528\u4F8B\u5B50\uFF1A</p><div class="language-json"><button class="copy"></button><span class="lang">json</span><pre><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">compilerOptions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">target</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">es5</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">lib</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">es5</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dom</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scripthost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">es2015.symbol</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u5728\u65E7\u7684-javascript-\u5F15\u64CE\u65F6\u4F7F\u7528-polyfill" tabindex="-1">\u5728\u65E7\u7684 JavaScript \u5F15\u64CE\u65F6\u4F7F\u7528 Polyfill <a class="header-anchor" href="#\u5728\u65E7\u7684-javascript-\u5F15\u64CE\u65F6\u4F7F\u7528-polyfill" aria-hidden="true">#</a></h4><p>\u8981\u4F7F\u7528\u4E00\u4E9B\u65B0\u529F\u80FD\u5982 <code>Map</code>\u3001<code>Set</code>\u3001<code>Promise</code>\uFF08\u968F\u7740\u65F6\u95F4\u63A8\u79FB\u4F1A\u53D8\u5316\uFF09\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528\u73B0\u4EE3\u7684 <code>lib</code> \u9009\u9879\uFF0C\u5E76\u4E14\u9700\u8981\u5B89\u88C5 <code>core-js</code>\uFF1A</p><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">npm install core-js --save-dev</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\uFF0C\u5728\u4F60\u7684\u9879\u76EE\u91CC\u5BFC\u5165\u5B83\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">core-js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="\u51FD\u6570" tabindex="-1">\u51FD\u6570 <a class="header-anchor" href="#\u51FD\u6570" aria-hidden="true">#</a></h3><p>\u51FD\u6570\u7C7B\u578B\u5728 TypeScript \u7C7B\u578B\u7CFB\u7EDF\u4E2D\u626E\u6F14\u7740\u975E\u5E38\u91CD\u8981\u7684\u89D2\u8272\uFF0C\u5B83\u4EEC\u662F\u53EF\u7EC4\u5408\u7CFB\u7EDF\u7684\u6838\u5FC3\u6784\u5EFA\u5757\u3002</p><h4 id="\u53C2\u6570\u6CE8\u89E3" tabindex="-1">\u53C2\u6570\u6CE8\u89E3 <a class="header-anchor" href="#\u53C2\u6570\u6CE8\u89E3" aria-hidden="true">#</a></h4><p>\u4F60\u53EF\u4EE5\u6CE8\u89E3\u51FD\u6570\u53C2\u6570\uFF0C\u5C31\u50CF\u4F60\u53EF\u4EE5\u6CE8\u89E3\u5176\u4ED6\u53D8\u91CF\u4E00\u6837:</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// variable annotation</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> sampleVariable</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// function parameter annotation</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">sampleParameter</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u91CC\u6211\u4EEC\u4F7F\u7528\u4E86\u5185\u8054\u7C7B\u578B\u6CE8\u89E3\uFF0C\u9664\u6B64\u4E4B\u5916\uFF0C\u4F60\u8FD8\u53EF\u4EE5\u4F7F\u7528\u63A5\u53E3\u7B49\u5176\u4ED6\u65B9\u5F0F\u3002</p><h5 id="\u8FD4\u56DE\u7C7B\u578B\u6CE8\u89E3" tabindex="-1">\u8FD4\u56DE\u7C7B\u578B\u6CE8\u89E3 <a class="header-anchor" href="#\u8FD4\u56DE\u7C7B\u578B\u6CE8\u89E3" aria-hidden="true">#</a></h5><p>\u4F60\u53EF\u4EE5\u5728\u51FD\u6570\u53C2\u6570\u5217\u8868\u4E4B\u540E\u4F7F\u7528\u4E0E\u53D8\u91CF\u76F8\u540C\u7684\u6837\u5F0F\u6765\u6CE8\u89E3\u8FD4\u56DE\u7C7B\u578B\uFF0C\u5982\u4F8B\u5B50\u4E2D <code>\uFF1AFoo</code>\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Return type annotated as \`: Foo\`</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">sample</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sample</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u5728\u8FD9\u91CC\u4F7F\u7528\u4E86\u4E00\u4E2A <code>interface</code>\uFF0C\u4F46\u4F60\u53EF\u4EE5\u81EA\u7531\u5730\u4F7F\u7528\u5176\u4ED6\u6CE8\u89E3\u65B9\u5F0F\uFF0C\u4F8B\u5982\u5185\u8054\u6CE8\u89E3\u3002</p><p>\u901A\u5E38\uFF0C\u4F60\u4E0D\u9700\u8981\u6CE8\u89E3\u51FD\u6570\u7684\u8FD4\u56DE\u7C7B\u578B\uFF0C\u56E0\u4E3A\u5B83\u53EF\u4EE5\u7531\u7F16\u8BD1\u5668\u63A8\u65AD\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">sample</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sample</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// inferred return type &#39;Foo&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4F46\u662F\uFF0C\u6DFB\u52A0\u8FD9\u4E9B\u6CE8\u89E3\u4EE5\u5E2E\u52A9\u89E3\u51B3\u9519\u8BEF\u63D0\u793A\u901A\u5E38\u662F\u4E00\u4E2A\u597D\u4E3B\u610F\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> fou</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">John Doe</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// You might not find this misspelling of \`foo\` till it&#39;s too late</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">sendAsJSON</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">foo</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u4F60\u4E0D\u6253\u7B97\u4ECE\u51FD\u6570\u8FD4\u56DE\u4EFB\u4F55\u5185\u5BB9\uFF0C\u5219\u53EF\u4EE5\u5C06\u5176\u6807\u6CE8\u4E3A\uFF1A<code>void</code> \u3002\u4F60\u901A\u5E38\u53EF\u4EE5\u5220\u9664 <code>void</code>\uFF0C TypeScript \u80FD\u63A8\u5BFC\u51FA\u6765\uFF1A</p><h5 id="\u53EF\u9009\u53C2\u6570" tabindex="-1">\u53EF\u9009\u53C2\u6570 <a class="header-anchor" href="#\u53EF\u9009\u53C2\u6570" aria-hidden="true">#</a></h5><p>\u4F60\u53EF\u4EE5\u5C06\u53C2\u6570\u6807\u8BB0\u4E3A\u53EF\u9009:</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">bas</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// ..</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">foo</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">123</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">foo</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u6216\u8005\uFF0C\u5F53\u8C03\u7528\u8005\u6CA1\u6709\u63D0\u4F9B\u8BE5\u53C2\u6570\u65F6\uFF0C\u4F60\u53EF\u4EE5\u63D0\u4F9B\u4E00\u4E2A\u9ED8\u8BA4\u503C\uFF08\u5728\u53C2\u6570\u58F0\u660E\u540E\u4F7F\u7528 <code>= someValue</code> \uFF09\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">bas</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">bar</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">bas</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">foo</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">123</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 123, hello</span></span>
<span class="line"><span style="color:#82AAFF;">foo</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">world</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 123, world</span></span>
<span class="line"></span></code></pre></div><h5 id="\u91CD\u8F7D" tabindex="-1">\u91CD\u8F7D <a class="header-anchor" href="#\u91CD\u8F7D" aria-hidden="true">#</a></h5><p>TypeScript \u5141\u8BB8\u4F60\u58F0\u660E\u51FD\u6570\u91CD\u8F7D\u3002\u8FD9\u5BF9\u4E8E\u6587\u6863 + \u7C7B\u578B\u5B89\u5168\u6765\u8BF4\u5F88\u5B9E\u7528\u3002\u8BF7\u601D\u8003\u4EE5\u4E0B\u4EE3\u7801\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">padding</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">c</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">b</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">c</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">d</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">b</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">c</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">d</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">c</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">d</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">c</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">d</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    top</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    right</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    bottom</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">c</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    left</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">d</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u4ED4\u7EC6\u67E5\u770B\u4EE3\u7801\uFF0C\u5C31\u4F1A\u53D1\u73B0 a\uFF0Cb\uFF0Cc\uFF0Cd \u7684\u503C\u4F1A\u6839\u636E\u4F20\u5165\u7684\u53C2\u6570\u6570\u91CF\u800C\u53D8\u5316\u3002\u6B64\u51FD\u6570\u4E5F\u53EA\u9700\u8981 1 \u4E2A\uFF0C2 \u4E2A\u6216 4 \u4E2A\u53C2\u6570\u3002\u53EF\u4EE5\u4F7F\u7528\u51FD\u6570\u91CD\u8F7D\u6765<em>\u5F3A\u5236</em>\u548C<em>\u8BB0\u5F55</em>\u8FD9\u4E9B\u7EA6\u675F\u3002\u4F60\u53EA\u9700\u591A\u6B21\u58F0\u660E\u51FD\u6570\u5934\u3002\u6700\u540E\u4E00\u4E2A\u51FD\u6570\u5934\u662F\u5728\u51FD\u6570\u4F53\u5185\u5B9E\u9645\u5904\u4E8E\u6D3B\u52A8\u72B6\u6001\u4F46\u4E0D\u53EF\u7528\u4E8E\u5916\u90E8\u3002</p><p>\u5982\u4E0B\u6240\u793A:</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u91CD\u8F7D</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">padding</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">all</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">padding</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">topAndBottom</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">leftAndRight</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">padding</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">top</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">right</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">bottom</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">left</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#676E95;">// Actual implementation that is a true representation of all the cases the function body needs to handle</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">padding</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">c</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">b</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">c</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">d</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">b</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">c</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">d</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">c</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">d</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">c</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">d</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    top</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    right</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    bottom</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">c</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    left</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">d</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u91CC\u524D\u4E09\u4E2A\u51FD\u6570\u5934\u53EF\u6709\u6548\u8C03\u7528 <code>padding</code>:</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#82AAFF;">padding</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Okay: all</span></span>
<span class="line"><span style="color:#82AAFF;">padding</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Okay: topAndBottom, leftAndRight</span></span>
<span class="line"><span style="color:#82AAFF;">padding</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Okay: top, right, bottom, left</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">padding</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: Not a part of the available overloads</span></span>
<span class="line"></span></code></pre></div><p>\u5F53\u7136\uFF0C\u6700\u7EC8\u58F0\u660E\uFF08\u4ECE\u51FD\u6570\u5185\u90E8\u770B\u5230\u7684\u771F\u6B63\u58F0\u660E\uFF09\u4E0E\u6240\u6709\u91CD\u8F7D\u517C\u5BB9\u662F\u5F88\u91CD\u8981\u7684\u3002\u8FD9\u662F\u56E0\u4E3A\u8FD9\u662F\u51FD\u6570\u4F53\u9700\u8981\u8003\u8651\u7684\u51FD\u6570\u8C03\u7528\u7684\u771F\u5B9E\u6027\u8D28\u3002</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>TypeScript \u4E2D\u7684\u51FD\u6570\u91CD\u8F7D\u6CA1\u6709\u4EFB\u4F55\u8FD0\u884C\u65F6\u5F00\u9500\u3002\u5B83\u53EA\u5141\u8BB8\u4F60\u8BB0\u5F55\u5E0C\u671B\u8C03\u7528\u51FD\u6570\u7684\u65B9\u5F0F\uFF0C\u5E76\u4E14\u7F16\u8BD1\u5668\u4F1A\u68C0\u67E5\u5176\u4F59\u4EE3\u7801\u3002</p></div><h5 id="\u51FD\u6570\u58F0\u660E" tabindex="-1">\u51FD\u6570\u58F0\u660E <a class="header-anchor" href="#\u51FD\u6570\u58F0\u660E" aria-hidden="true">#</a></h5><blockquote><p>\u5FEB\u901F\u5F00\u59CB\uFF1A\u7C7B\u578B\u6CE8\u89E3\u662F\u4F60\u63CF\u8FF0\u73B0\u6709\u5B9E\u73B0\u7C7B\u578B\u7684\u4E00\u79CD\u65B9\u5F0F</p></blockquote><p>\u5728\u6CA1\u6709\u63D0\u4F9B\u51FD\u6570\u5B9E\u73B0\u7684\u60C5\u51B5\u4E0B\uFF0C\u6709\u4E24\u79CD\u58F0\u660E\u51FD\u6570\u7C7B\u578B\u7684\u65B9\u5F0F:</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">LongHand</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ShortHand</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\u7684\u4E24\u4E2A\u4F8B\u5B50\u5B8C\u5168\u76F8\u540C\u3002\u4F46\u662F\uFF0C\u5F53\u4F60\u60F3\u4F7F\u7528\u51FD\u6570\u91CD\u8F7D\u65F6\uFF0C\u53EA\u80FD\u7528\u7B2C\u4E00\u79CD\u65B9\u5F0F:</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">LongHandAllowsOverloadDeclarations</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><h3 id="\u53EF\u8C03\u7528\u7684" tabindex="-1">\u53EF\u8C03\u7528\u7684 <a class="header-anchor" href="#\u53EF\u8C03\u7528\u7684" aria-hidden="true">#</a></h3><p>\u4F60\u53EF\u4EE5\u4F7F\u7528\u7C7B\u578B\u522B\u540D\u6216\u8005\u63A5\u53E3\u6765\u8868\u793A\u4E00\u4E2A\u53EF\u88AB\u8C03\u7528\u7684\u7C7B\u578B\u6CE8\u89E3\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ReturnString</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5B83\u53EF\u4EE5\u8868\u793A\u4E00\u4E2A\u8FD4\u56DE\u503C\u4E3A <code>string</code> \u7684\u51FD\u6570\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ReturnString</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// bar \u88AB\u63A8\u65AD\u4E3A\u4E00\u4E2A\u5B57\u7B26\u4E32\u3002</span></span>
<span class="line"></span></code></pre></div><h4 id="\u4E00\u4E2A\u5B9E\u9645\u7684\u4F8B\u5B50" tabindex="-1">\u4E00\u4E2A\u5B9E\u9645\u7684\u4F8B\u5B50 <a class="header-anchor" href="#\u4E00\u4E2A\u5B9E\u9645\u7684\u4F8B\u5B50" aria-hidden="true">#</a></h4><p>\u5F53\u7136\uFF0C\u50CF\u8FD9\u6837\u4E00\u4E2A\u53EF\u88AB\u8C03\u7528\u7684\u7C7B\u578B\u6CE8\u89E3\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u6765\u4F20\u9012\u4EFB\u4F55\u53C2\u6570\u3001\u53EF\u9009\u53C2\u6570\u4EE5\u53CA rest \u53C2\u6570\uFF0C\u8FD9\u6709\u4E00\u4E2A\u7A0D\u5FAE\u590D\u6742\u7684\u4F8B\u5B50\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Complex</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">bar</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">others</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#A6ACCD;">[]</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4E00\u4E2A\u63A5\u53E3\u53EF\u63D0\u4F9B\u591A\u79CD\u8C03\u7528\u7B7E\u540D\uFF0C\u7528\u4EE5\u7279\u6B8A\u7684\u51FD\u6570\u91CD\u8F7D\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Overloaded</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u5B9E\u73B0\u63A5\u53E3\u7684\u4E00\u4E2A\u4F8B\u5B50\uFF1A</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">stringOrNumber</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">stringOrNumber</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">stringOrNumber</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">hello </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">}\`</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> overloaded</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Overloaded</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> stringOrNumber</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4F7F\u7528</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> str </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">overloaded</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// str \u88AB\u63A8\u65AD\u4E3A &#39;string&#39;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">overloaded</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">123</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// num \u88AB\u63A8\u65AD\u4E3A &#39;number&#39;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E5F\u53EF\u4EE5\u7528\u4E8E\u5185\u8054\u6CE8\u89E3\u4E2D\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> overloaded</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><h4 id="\u7BAD\u5934\u51FD\u6570" tabindex="-1">\u7BAD\u5934\u51FD\u6570 <a class="header-anchor" href="#\u7BAD\u5934\u51FD\u6570" aria-hidden="true">#</a></h4><p>\u4E3A\u4E86\u4F7F\u6307\u5B9A\u53EF\u8C03\u7528\u7684\u7C7B\u578B\u7B7E\u540D\u66F4\u5BB9\u6613\uFF0CTypeScript \u4E5F\u5141\u8BB8\u4F60\u4F7F\u7528\u7B80\u5355\u7684\u7BAD\u5934\u51FD\u6570\u7C7B\u578B\u6CE8\u89E3\u3002\u4F8B\u5982\uFF0C\u5728\u4E00\u4E2A\u4EE5 number \u7C7B\u578B\u4E3A\u53C2\u6570\uFF0C\u4EE5 string \u7C7B\u578B\u4E3A\u8FD4\u56DE\u503C\u7684\u51FD\u6570\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u8FD9\u4E48\u5199\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> simple</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">foo</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u5B83\u4EC5\u4EC5\u53EA\u80FD\u4F5C\u4E3A\u7B80\u5355\u7684\u7BAD\u5934\u51FD\u6570\uFF0C\u4F60\u65E0\u6CD5\u4F7F\u7528\u91CD\u8F7D\u3002\u5982\u679C\u60F3\u4F7F\u7528\u91CD\u8F7D\uFF0C\u4F60\u5FC5\u987B\u4F7F\u7528\u5B8C\u6574\u7684 <code>{ (someArgs): someReturn }</code> \u7684\u8BED\u6CD5</p></div><h4 id="\u53EF\u5B9E\u4F8B\u5316" tabindex="-1">\u53EF\u5B9E\u4F8B\u5316 <a class="header-anchor" href="#\u53EF\u5B9E\u4F8B\u5316" aria-hidden="true">#</a></h4><p>\u53EF\u5B9E\u4F8B\u5316\u4EC5\u4EC5\u662F\u53EF\u8C03\u7528\u7684\u4E00\u79CD\u7279\u6B8A\u60C5\u51B5\uFF0C\u5B83\u4F7F\u7528 <code>new</code> \u4F5C\u4E3A\u524D\u7F00\u3002\u5B83\u610F\u5473\u7740\u4F60\u9700\u8981\u4F7F\u7528 <code>new</code> \u5173\u952E\u5B57\u53BB\u8C03\u7528\u5B83\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">CallMeWithNewToGetString</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4F7F\u7528</span></span>
<span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> Foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">CallMeWithNewToGetString</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Foo</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// bar \u88AB\u63A8\u65AD\u4E3A string \u7C7B\u578B</span></span>
<span class="line"></span></code></pre></div><h3 id="\u7C7B\u578B\u65AD\u8A00" tabindex="-1">\u7C7B\u578B\u65AD\u8A00 <a class="header-anchor" href="#\u7C7B\u578B\u65AD\u8A00" aria-hidden="true">#</a></h3><p>TypeScript \u5141\u8BB8\u4F60\u8986\u76D6\u5B83\u7684\u63A8\u65AD\uFF0C\u5E76\u4E14\u80FD\u4EE5\u4F60\u4EFB\u4F55\u4F60\u60F3\u8981\u7684\u65B9\u5F0F\u5206\u6790\u5B83\uFF0C\u8FD9\u79CD\u673A\u5236\u88AB\u79F0\u4E3A\u300C\u7C7B\u578B\u65AD\u8A00\u300D\u3002TypeScript \u7C7B\u578B\u65AD\u8A00\u7528\u6765\u544A\u8BC9\u7F16\u8BD1\u5668\u4F60\u6BD4\u5B83\u66F4\u4E86\u89E3\u8FD9\u4E2A\u7C7B\u578B\uFF0C\u5E76\u4E14\u5B83\u4E0D\u5E94\u8BE5\u518D\u53D1\u51FA\u9519\u8BEF\u3002</p><p>\u7C7B\u578B\u65AD\u8A00\u7684\u4E00\u4E2A\u5E38\u89C1\u7528\u4F8B\u662F\u5F53\u4F60\u4ECE JavaScript \u8FC1\u79FB\u5230 TypeScript \u65F6\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: &#39;bar&#39; \u5C5E\u6027\u4E0D\u5B58\u5728\u4E8E \u2018{}\u2019</span></span>
<span class="line"><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bas </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: &#39;bas&#39; \u5C5E\u6027\u4E0D\u5B58\u5728\u4E8E &#39;{}&#39;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u91CC\u7684\u4EE3\u7801\u53D1\u51FA\u4E86\u9519\u8BEF\u8B66\u544A\uFF0C\u56E0\u4E3A <code>foo</code> \u7684\u7C7B\u578B\u63A8\u65AD\u4E3A <code>{}</code>\uFF0C\u5373\u6CA1\u6709\u5C5E\u6027\u7684\u5BF9\u8C61\u3002\u56E0\u6B64\uFF0C\u4F60\u4E0D\u80FD\u5728\u5B83\u7684\u5C5E\u6027\u4E0A\u6DFB\u52A0 <code>bar</code> \u6216 <code>bas</code>\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7\u7C7B\u578B\u65AD\u8A00\u6765\u907F\u514D\u6B64\u95EE\u9898\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bas</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bas </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="as-foo-\u4E0E-foo" tabindex="-1"><code>as foo</code> \u4E0E <code>&lt;foo&gt;</code> <a class="header-anchor" href="#as-foo-\u4E0E-foo" aria-hidden="true">#</a></h4><p>\u6700\u521D\u7684\u65AD\u8A00\u8BED\u6CD5\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> &lt;</span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">&gt;foo</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u73B0\u5728 bar \u7684\u7C7B\u578B\u662F &#39;string&#39;</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u800C\uFF0C\u5F53\u4F60\u5728 JSX \u4E2D\u4F7F\u7528 <code>&lt;foo&gt;</code> \u7684\u65AD\u8A00\u8BED\u6CD5\u65F6\uFF0C\u8FD9\u4F1A\u4E0E JSX \u7684\u8BED\u6CD5\u5B58\u5728\u6B67\u4E49\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> &lt;</span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">&gt;bar</span><span style="color:#89DDFF;">;&lt;/</span><span style="color:#A6ACCD;">string</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"></span></code></pre></div><p>\u56E0\u6B64\uFF0C\u4E3A\u4E86\u4E00\u81F4\u6027\uFF0C\u6211\u4EEC\u5EFA\u8BAE\u4F60\u4F7F\u7528 <code>as foo</code> \u7684\u8BED\u6CD5\u6765\u4E3A\u7C7B\u578B\u65AD\u8A00\u3002</p><h4 id="\u7C7B\u578B\u65AD\u8A00\u4E0E\u7C7B\u578B\u8F6C\u6362" tabindex="-1">\u7C7B\u578B\u65AD\u8A00\u4E0E\u7C7B\u578B\u8F6C\u6362 <a class="header-anchor" href="#\u7C7B\u578B\u65AD\u8A00\u4E0E\u7C7B\u578B\u8F6C\u6362" aria-hidden="true">#</a></h4><p>\u5B83\u4E4B\u6240\u4EE5\u4E0D\u88AB\u79F0\u4E3A\u300C\u7C7B\u578B\u8F6C\u6362\u300D\uFF0C\u662F\u56E0\u4E3A\u8F6C\u6362\u901A\u5E38\u610F\u5473\u7740\u67D0\u79CD\u8FD0\u884C\u65F6\u7684\u652F\u6301\u3002\u4F46\u662F\uFF0C\u7C7B\u578B\u65AD\u8A00\u7EAF\u7CB9\u662F\u4E00\u4E2A\u7F16\u8BD1\u65F6\u8BED\u6CD5\uFF0C\u540C\u65F6\uFF0C\u5B83\u4E5F\u662F\u4E00\u79CD\u4E3A\u7F16\u8BD1\u5668\u63D0\u4F9B\u5173\u4E8E\u5982\u4F55\u5206\u6790\u4EE3\u7801\u7684\u65B9\u6CD5\u3002</p><h4 id="\u7C7B\u578B\u65AD\u8A00\u88AB\u8BA4\u4E3A\u662F\u6709\u5BB3\u7684" tabindex="-1">\u7C7B\u578B\u65AD\u8A00\u88AB\u8BA4\u4E3A\u662F\u6709\u5BB3\u7684 <a class="header-anchor" href="#\u7C7B\u578B\u65AD\u8A00\u88AB\u8BA4\u4E3A\u662F\u6709\u5BB3\u7684" aria-hidden="true">#</a></h4><p>\u5728\u5F88\u591A\u60C5\u666F\u4E0B\uFF0C\u65AD\u8A00\u80FD\u8BA9\u4F60\u66F4\u5BB9\u6613\u7684\u4ECE\u9057\u7559\u9879\u76EE\u4E2D\u8FC1\u79FB\uFF08\u751A\u81F3\u5C06\u5176\u4ED6\u4EE3\u7801\u7C98\u8D34\u590D\u5236\u5230\u4F60\u7684\u9879\u76EE\u4E2D\uFF09\uFF0C\u7136\u800C\uFF0C\u4F60\u5E94\u8BE5\u5C0F\u5FC3\u8C28\u614E\u7684\u4F7F\u7528\u65AD\u8A00\u3002\u8BA9\u6211\u4EEC\u7528\u6700\u521D\u7684\u4EE3\u7801\u4F5C\u4E3A\u793A\u4F8B\uFF0C\u5982\u679C\u4F60\u6CA1\u6709\u6309\u7EA6\u5B9A\u6DFB\u52A0\u5C5E\u6027\uFF0CTypeScript \u7F16\u8BD1\u5668\u5E76\u4E0D\u4F1A\u5BF9\u6B64\u53D1\u51FA\u9519\u8BEF\u8B66\u544A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bas</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// ahhh, \u5FD8\u8BB0\u4E86\u4EC0\u4E48\uFF1F</span></span>
<span class="line"></span></code></pre></div><p>\u53E6\u5916\u4E00\u4E2A\u5E38\u89C1\u7684\u60F3\u6CD5\u662F\u4F7F\u7528\u7C7B\u578B\u65AD\u8A00\u6765\u63D0\u4F9B\u4EE3\u7801\u7684\u63D0\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bas</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> &lt;</span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;">&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u7F16\u8BD1\u5668\u5C06\u4F1A\u63D0\u4F9B\u5173\u4E8E Foo \u5C5E\u6027\u7684\u4EE3\u7801\u63D0\u793A</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u4F46\u662F\u5F00\u53D1\u4EBA\u5458\u4E5F\u5F88\u5BB9\u6613\u5FD8\u8BB0\u6DFB\u52A0\u6240\u6709\u7684\u5C5E\u6027</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u540C\u6837\uFF0C\u5982\u679C Foo \u88AB\u91CD\u6784\uFF0C\u8FD9\u6BB5\u4EE3\u7801\u4E5F\u53EF\u80FD\u88AB\u7834\u574F\uFF08\u4F8B\u5982\uFF0C\u4E00\u4E2A\u65B0\u7684\u5C5E\u6027\u88AB\u6DFB\u52A0\uFF09\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E5F\u4F1A\u5B58\u5728\u4E00\u4E2A\u540C\u6837\u7684\u95EE\u9898\uFF0C\u5982\u679C\u4F60\u5FD8\u8BB0\u4E86\u67D0\u4E2A\u5C5E\u6027\uFF0C\u7F16\u8BD1\u5668\u540C\u6837\u4E5F\u4E0D\u4F1A\u53D1\u51FA\u9519\u8BEF\u8B66\u544A\u3002\u4F7F\u7528\u4E00\u79CD\u66F4\u597D\u7684\u65B9\u5F0F\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bas</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u7F16\u8BD1\u5668\u5C06\u4F1A\u63D0\u4F9B Foo \u5C5E\u6027\u7684\u4EE3\u7801\u63D0\u793A</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u67D0\u4E9B\u60C5\u666F\u4E0B\uFF0C\u4F60\u53EF\u80FD\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u4E34\u65F6\u7684\u53D8\u91CF\uFF0C\u4F46\u81F3\u5C11\uFF0C\u4F60\u4E0D\u4F1A\u4F7F\u7528\u4E00\u4E2A\u627F\u8BFA\uFF08\u53EF\u80FD\u662F\u5047\u7684\uFF09\uFF0C\u800C\u662F\u4F9D\u9760\u7C7B\u578B\u63A8\u65AD\u6765\u68C0\u67E5\u4F60\u7684\u4EE3\u7801\u3002</p><h4 id="\u53CC\u91CD\u65AD\u8A00" tabindex="-1">\u53CC\u91CD\u65AD\u8A00 <a class="header-anchor" href="#\u53CC\u91CD\u65AD\u8A00" aria-hidden="true">#</a></h4><p>\u7C7B\u578B\u65AD\u8A00\uFF0C\u5C3D\u7BA1\u6211\u4EEC\u5DF2\u7ECF\u8BC1\u660E\u4E86\u5B83\u5E76\u4E0D\u662F\u90A3\u4E48\u5B89\u5168\uFF0C\u4F46\u5B83\u4E5F\u8FD8\u662F\u6709\u7528\u6B66\u4E4B\u5730\u3002\u5982\u4E0B\u4E00\u4E2A\u975E\u5E38\u5B9E\u7528\u7684\u4F8B\u5B50\u6240\u793A\uFF0C\u5F53\u4F7F\u7528\u8005\u4E86\u89E3\u4F20\u5165\u53C2\u6570\u66F4\u5177\u4F53\u7684\u7C7B\u578B\u65F6\uFF0C\u7C7B\u578B\u65AD\u8A00\u80FD\u6309\u9884\u671F\u5DE5\u4F5C\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">handler</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">mouseEvent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">event</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">as</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">MouseEvent</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u800C\uFF0C\u5982\u4E0B\u4F8B\u5B50\u4E2D\u7684\u4EE3\u7801\u5C06\u4F1A\u62A5\u9519\uFF0C\u5C3D\u7BA1\u4F7F\u7528\u8005\u5DF2\u7ECF\u4F7F\u7528\u4E86\u7C7B\u578B\u65AD\u8A00\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">handler</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">element</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">event</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">as</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">HTMLElement</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error: &#39;Event&#39; \u548C &#39;HTMLElement&#39; \u4E2D\u7684\u4EFB\u4F55\u4E00\u4E2A\u90FD\u4E0D\u80FD\u8D4B\u503C\u7ED9\u53E6\u5916\u4E00\u4E2A</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u4F60\u4ECD\u7136\u60F3\u4F7F\u7528\u90A3\u4E2A\u7C7B\u578B\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528\u53CC\u91CD\u65AD\u8A00\u3002\u9996\u5148\u65AD\u8A00\u6210\u517C\u5BB9\u6240\u6709\u7C7B\u578B\u7684 <code>any</code>\uFF0C\u7F16\u8BD1\u5668\u5C06\u4E0D\u4F1A\u62A5\u9519\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">handler</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">element</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">event</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">as</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">as</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">HTMLElement</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h5 id="typescript-\u662F\u600E\u4E48\u786E\u5B9A\u5355\u4E2A\u5224\u65AD\u662F\u5426\u8DB3\u591F" tabindex="-1">TypeScript \u662F\u600E\u4E48\u786E\u5B9A\u5355\u4E2A\u5224\u65AD\u662F\u5426\u8DB3\u591F <a class="header-anchor" href="#typescript-\u662F\u600E\u4E48\u786E\u5B9A\u5355\u4E2A\u5224\u65AD\u662F\u5426\u8DB3\u591F" aria-hidden="true">#</a></h5><p>\u5F53 <code>S</code> \u7C7B\u578B\u662F <code>T</code> \u7C7B\u578B\u7684\u5B50\u96C6\uFF0C\u6216\u8005 <code>T</code> \u7C7B\u578B\u662F <code>S</code> \u7C7B\u578B\u7684\u5B50\u96C6\u65F6\uFF0C<code>S</code> \u80FD\u88AB\u6210\u529F\u65AD\u8A00\u6210 <code>T</code>\u3002\u8FD9\u662F\u4E3A\u4E86\u5728\u8FDB\u884C\u7C7B\u578B\u65AD\u8A00\u65F6\u63D0\u4F9B\u989D\u5916\u7684\u5B89\u5168\u6027\uFF0C\u5B8C\u5168\u6BEB\u65E0\u6839\u636E\u7684\u65AD\u8A00\u662F\u5371\u9669\u7684\uFF0C\u5982\u679C\u4F60\u60F3\u8FD9\u4E48\u505A\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528 <code>any</code>\u3002</p><h3 id="freshness" tabindex="-1">Freshness <a class="header-anchor" href="#freshness" aria-hidden="true">#</a></h3><p>\u4E3A\u4E86\u80FD\u8BA9\u68C0\u67E5\u5BF9\u8C61\u5B57\u9762\u91CF\u7C7B\u578B\u66F4\u5BB9\u6613\uFF0CTypeScript \u63D0\u4F9B \u300C<a href="https://github.com/Microsoft/TypeScript/pull/3823" target="_blank" rel="noreferrer">Freshness</a>\u300D \u7684\u6982\u5FF5\uFF08\u5B83\u4E5F\u88AB\u79F0\u4E3A\u66F4\u4E25\u683C\u7684\u5BF9\u8C61\u5B57\u9762\u91CF\u68C0\u67E5\uFF09\u7528\u6765\u786E\u4FDD\u5BF9\u8C61\u5B57\u9762\u91CF\u5728\u7ED3\u6784\u4E0A\u7C7B\u578B\u517C\u5BB9\u3002</p><p>\u7ED3\u6784\u7C7B\u578B\u975E\u5E38\u65B9\u4FBF\u3002\u8003\u8651\u5982\u4E0B\u4F8B\u5B50\u4EE3\u7801\uFF0C\u5B83\u53EF\u4EE5\u8BA9\u4F60\u975E\u5E38\u4FBF\u5229\u7684\u4ECE JavaScript \u8FC1\u79FB\u81F3 TypeScript\uFF0C\u5E76\u4E14\u4F1A\u63D0\u4F9B\u7C7B\u578B\u5B89\u5168\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">logName</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">something</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">something</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> person </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">matt</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">job</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">being awesome</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> animal </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cow</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">diet</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vegan, but has milk of own specie</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> randow </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">note</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">I don&#39;t have a name property</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">logName</span><span style="color:#A6ACCD;">(person)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#82AAFF;">logName</span><span style="color:#A6ACCD;">(animal)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#82AAFF;">logName</span><span style="color:#A6ACCD;">(randow)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: \u6CA1\u6709 \`name\` \u5C5E\u6027</span></span>
<span class="line"></span></code></pre></div><p>\u4F46\u662F\uFF0C\u7ED3\u6784\u7C7B\u578B\u6709\u4E00\u4E2A\u7F3A\u70B9\uFF0C\u5B83\u80FD\u8BEF\u5BFC\u4F60\u8BA4\u4E3A\u67D0\u4E9B\u4E1C\u897F\u63A5\u6536\u7684\u6570\u636E\u6BD4\u5B83\u5B9E\u9645\u7684\u591A\u3002\u5982\u4E0B\u4F8B\uFF0CTypeScript \u53D1\u51FA\u9519\u8BEF\u8B66\u544A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">logName</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">something</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">something</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">logName</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">matt</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#82AAFF;">logName</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">matt</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">job</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">being awesome</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: \u5BF9\u8C61\u5B57\u9762\u91CF\u53EA\u80FD\u6307\u5B9A\u5DF2\u77E5\u5C5E\u6027\uFF0C\`job\` \u5C5E\u6027\u5728\u8FD9\u91CC\u5E76\u4E0D\u5B58\u5728\u3002</span></span>
<span class="line"></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>\u8BF7\u6CE8\u610F\uFF0C\u8FD9\u79CD\u9519\u8BEF\u63D0\u793A\uFF0C\u53EA\u4F1A\u53D1\u751F\u5728\u5BF9\u8C61\u5B57\u9762\u91CF\u4E0A\u3002</p></div><p>\u5982\u679C\u6CA1\u6709\u8FD9\u79CD\u9519\u8BEF\u63D0\u793A\uFF0C\u6211\u4EEC\u53EF\u80FD\u4F1A\u53BB\u5BFB\u627E\u51FD\u6570\u7684\u8C03\u7528 <code>logName({ name: &#39;matt&#39;, job: &#39;being awesome&#39; })</code>\uFF0C\u7EE7\u800C\u4F1A\u8BA4\u4E3A <code>logName</code> \u53EF\u80FD\u4F1A\u4F7F\u7528 <code>job</code> \u5C5E\u6027\u505A\u4E00\u4E9B\u4E8B\u60C5\uFF0C\u7136\u800C\u5B9E\u9645\u4E0A <code>logName</code> \u5E76\u6CA1\u6709\u4F7F\u7528\u5B83\u3002</p><p>\u53E6\u5916\u4E00\u4E2A\u4F7F\u7528\u6BD4\u8F83\u591A\u7684\u573A\u666F\u662F\u4E0E\u5177\u6709\u53EF\u9009\u6210\u5458\u7684\u63A5\u53E3\u4E00\u8D77\u4F7F\u7528\uFF0C\u5982\u679C\u6CA1\u6709\u8FD9\u6837\u7684\u5BF9\u8C61\u5B57\u9762\u91CF\u68C0\u67E5\uFF0C\u5F53\u4F60\u8F93\u5165\u9519\u8BEF\u5355\u8BCD\u7684\u65F6\u5019\uFF0C\u5E76\u4E0D\u4F1A\u53D1\u51FA\u9519\u8BEF\u8B66\u544A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">logIfHasName</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">something</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">something</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">something</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> person </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">matt</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">job</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">being awesome</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> animal </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cow</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">diet</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vegan, but has milk of own species</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">logIfHasName</span><span style="color:#A6ACCD;">(person)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// okay</span></span>
<span class="line"><span style="color:#82AAFF;">logIfHasName</span><span style="color:#A6ACCD;">(animal)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// okay</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">logIfHasName</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">neme</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">I just misspelled name to neme</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: \u5BF9\u8C61\u5B57\u9762\u91CF\u53EA\u80FD\u6307\u5B9A\u5DF2\u77E5\u5C5E\u6027\uFF0C\`neme\` \u5C5E\u6027\u4E0D\u5B58\u5728\u3002</span></span>
<span class="line"></span></code></pre></div><p>\u4E4B\u6240\u4EE5\u53EA\u5BF9\u5BF9\u8C61\u5B57\u9762\u91CF\u8FDB\u884C\u7C7B\u578B\u68C0\u67E5\uFF0C\u56E0\u4E3A\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u90A3\u4E9B\u5B9E\u9645\u4E0A\u5E76\u6CA1\u6709\u88AB\u4F7F\u7528\u5230\u7684\u5C5E\u6027\u6709\u53EF\u80FD\u4F1A\u62FC\u5199\u9519\u8BEF\u6216\u8005\u4F1A\u88AB\u8BEF\u7528\u3002</p><h4 id="\u5141\u8BB8\u989D\u5916\u7684\u5C5E\u6027" tabindex="-1">\u5141\u8BB8\u989D\u5916\u7684\u5C5E\u6027 <a class="header-anchor" href="#\u5141\u8BB8\u989D\u5916\u7684\u5C5E\u6027" aria-hidden="true">#</a></h4><p>\u4E00\u4E2A\u7C7B\u578B\u80FD\u591F\u5305\u542B\u7D22\u5F15\u7B7E\u540D\uFF0C\u4EE5\u660E\u786E\u8868\u660E\u53EF\u4EE5\u4F7F\u7528\u989D\u5916\u7684\u5C5E\u6027\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">baz</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok, &#39;baz&#39; \u5C5E\u6027\u5339\u914D\u4E8E\u7D22\u5F15\u7B7E\u540D</span></span>
<span class="line"></span></code></pre></div><h4 id="\u7528\u4F8B-react-state" tabindex="-1">\u7528\u4F8B: React State <a class="header-anchor" href="#\u7528\u4F8B-react-state" aria-hidden="true">#</a></h4><p>Facebook ReactJS \u4E3A\u5BF9\u8C61\u7684 Freshness \u63D0\u4F9B\u4E86\u4E00\u4E2A\u5F88\u597D\u7684\u7528\u4F8B\uFF0C\u901A\u5E38\u5728\u7EC4\u4EF6\u4E2D\uFF0C\u4F60\u53EA\u4F7F\u7528\u5C11\u91CF\u5C5E\u6027\uFF0C\u800C\u4E0D\u662F\u4F20\u5165\u6240\u6709\uFF0C\u6765\u8C03\u7528 <code>setState</code>\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u5047\u8BBE</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">State</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4F60\u53EF\u80FD\u60F3\u505A\uFF1A</span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setState</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: \u6CA1\u6709\u5C5E\u6027 &#39;bar&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u56E0\u4E3A state \u5305\u542B &#39;foo&#39; \u4E0E &#39;bar&#39;\uFF0CTypeScript \u4F1A\u5F3A\u5236\u4F60\u8FD9\u4E48\u505A\uFF1A</span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setState</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u4F60\u60F3\u4F7F\u7528 Freshness\uFF0C\u4F60\u53EF\u80FD\u9700\u8981\u5C06\u6240\u6709\u6210\u5458\u6807\u8BB0\u4E3A\u53EF\u9009\uFF0C\u8FD9\u4ECD\u7136\u4F1A\u6355\u6349\u5230\u62FC\u5199\u9519\u8BEF\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u5047\u8BBE</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">State</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4F60\u53EF\u80FD\u60F3\u505A</span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setState</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Yay works fine!</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u7531\u4E8E Freshness\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u9632\u6B62\u9519\u522B\u5B57</span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setState</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">foos</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">}; </span><span style="color:#676E95;">// Error: \u5BF9\u8C61\u53EA\u80FD\u6307\u5B9A\u5DF2\u77E5\u5C5E\u6027</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4ECD\u7136\u4F1A\u6709\u7C7B\u578B\u68C0\u67E5</span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setState</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">}; </span><span style="color:#676E95;">// Error: \u65E0\u6CD5\u5C06 number \u7C7B\u578B\u8D4B\u503C\u7ED9 string \u7C7B\u578B</span></span>
<span class="line"></span></code></pre></div><h3 id="\u7C7B\u578B\u4FDD\u62A4" tabindex="-1">\u7C7B\u578B\u4FDD\u62A4 <a class="header-anchor" href="#\u7C7B\u578B\u4FDD\u62A4" aria-hidden="true">#</a></h3><p>\u7C7B\u578B\u4FDD\u62A4\u5141\u8BB8\u4F60\u4F7F\u7528\u66F4\u5C0F\u8303\u56F4\u4E0B\u7684\u5BF9\u8C61\u7C7B\u578B\u3002</p><h4 id="typeof" tabindex="-1">typeof <a class="header-anchor" href="#typeof" aria-hidden="true">#</a></h4><p>TypeScript \u719F\u77E5 JavaScript \u4E2D <code>instanceof</code> \u548C <code>typeof</code> \u8FD0\u7B97\u7B26\u7684\u7528\u6CD5\u3002\u5982\u679C\u4F60\u5728\u4E00\u4E2A\u6761\u4EF6\u5757\u4E2D\u4F7F\u7528\u8FD9\u4E9B\uFF0CTypeScript \u5C06\u4F1A\u63A8\u5BFC\u51FA\u5728\u6761\u4EF6\u5757\u4E2D\u7684\u7684\u53D8\u91CF\u7C7B\u578B\u3002\u5982\u4E0B\u4F8B\u6240\u793A\uFF0CTypeScript \u5C06\u4F1A\u8FA8\u522B <code>string</code> \u4E0A\u662F\u5426\u5B58\u5728\u7279\u5B9A\u7684\u51FD\u6570\uFF0C\u4EE5\u53CA\u662F\u5426\u53D1\u751F\u4E86\u62FC\u5199\u9519\u8BEF\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">doSome</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u5728\u8FD9\u4E2A\u5757\u4E2D\uFF0CTypeScript \u77E5\u9053 \`x\` \u7684\u7C7B\u578B\u5FC5\u987B\u662F \`string\`</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">subtr</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error: &#39;subtr&#39; \u65B9\u6CD5\u5E76\u6CA1\u6709\u5B58\u5728\u4E8E \`string\` \u4E0A</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">substr</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">substr</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error: \u65E0\u6CD5\u4FDD\u8BC1 \`x\` \u662F \`string\` \u7C7B\u578B</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="instanceof" tabindex="-1">instanceof <a class="header-anchor" href="#instanceof" aria-hidden="true">#</a></h4><p>\u8FD9\u6709\u4E00\u4E2A\u5173\u4E8E <code>class</code> \u548C <code>instanceof</code> \u7684\u4F8B\u5B50\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">common</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">common</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">doStuff</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">arg</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">instanceof</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">arg</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">instanceof</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">doStuff</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Foo</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">doStuff</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Bar</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>TypeScript \u751A\u81F3\u80FD\u591F\u7406\u89E3 <code>else</code>\u3002\u5F53\u4F60\u4F7F\u7528 <code>if</code> \u6765\u7F29\u5C0F\u7C7B\u578B\u65F6\uFF0CTypeScript \u77E5\u9053\u5728\u5176\u4ED6\u5757\u4E2D\u7684\u7C7B\u578B\u5E76\u4E0D\u662F <code>if</code> \u4E2D\u7684\u7C7B\u578B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">doStuff</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">arg</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">instanceof</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u8FD9\u4E2A\u5757\u4E2D\uFF0C\u4E00\u5B9A\u662F &#39;Bar&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">doStuff</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Foo</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">doStuff</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Bar</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="in" tabindex="-1">in <a class="header-anchor" href="#in" aria-hidden="true">#</a></h4><p><code>in</code> \u64CD\u4F5C\u7B26\u53EF\u4EE5\u5B89\u5168\u7684\u68C0\u67E5\u4E00\u4E2A\u5BF9\u8C61\u4E0A\u662F\u5426\u5B58\u5728\u4E00\u4E2A\u5C5E\u6027\uFF0C\u5B83\u901A\u5E38\u4E5F\u88AB\u4F5C\u4E3A\u7C7B\u578B\u4FDD\u62A4\u4F7F\u7528\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">A</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">B</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">doStuff</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">q</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">A</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">B</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">x</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">q</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// q: A</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// q: B</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u5B57\u9762\u91CF\u7C7B\u578B\u4FDD\u62A4" tabindex="-1">\u5B57\u9762\u91CF\u7C7B\u578B\u4FDD\u62A4 <a class="header-anchor" href="#\u5B57\u9762\u91CF\u7C7B\u578B\u4FDD\u62A4" aria-hidden="true">#</a></h4><p>\u5F53\u4F60\u5728\u8054\u5408\u7C7B\u578B\u91CC\u4F7F\u7528\u5B57\u9762\u91CF\u7C7B\u578B\u65F6\uFF0C\u4F60\u53EF\u4EE5\u68C0\u67E5\u5B83\u4EEC\u662F\u5426\u6709\u533A\u522B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5B57\u9762\u91CF\u7C7B\u578B</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bar</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5B57\u9762\u91CF\u7C7B\u578B</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">doStuff</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u4E00\u5B9A\u662F Bar</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u4F7F\u7528\u5B9A\u4E49\u7684\u7C7B\u578B\u4FDD\u62A4" tabindex="-1">\u4F7F\u7528\u5B9A\u4E49\u7684\u7C7B\u578B\u4FDD\u62A4 <a class="header-anchor" href="#\u4F7F\u7528\u5B9A\u4E49\u7684\u7C7B\u578B\u4FDD\u62A4" aria-hidden="true">#</a></h4><p>JavaScript \u5E76\u6CA1\u6709\u5185\u7F6E\u975E\u5E38\u4E30\u5BCC\u7684\u3001\u8FD0\u884C\u65F6\u7684\u81EA\u6211\u68C0\u67E5\u673A\u5236\u3002\u5F53\u4F60\u5728\u4F7F\u7528\u666E\u901A\u7684 JavaScript \u5BF9\u8C61\u65F6\uFF08\u4F7F\u7528\u7ED3\u6784\u7C7B\u578B\uFF0C\u66F4\u6709\u76CA\u5904\uFF09\uFF0C\u4F60\u751A\u81F3\u65E0\u6CD5\u8BBF\u95EE <code>instanceof</code> \u548C <code>typeof</code>\u3002\u5728\u8FD9\u79CD\u60C5\u666F\u4E0B\uFF0C\u4F60\u53EF\u4EE5\u521B\u5EFA<em>\u7528\u6237\u81EA\u5B9A\u4E49\u7684\u7C7B\u578B\u4FDD\u62A4\u51FD\u6570</em>\uFF0C\u8FD9\u4EC5\u4EC5\u662F\u4E00\u4E2A\u8FD4\u56DE\u503C\u4E3A\u7C7B\u4F3C\u4E8E<code>someArgumentName is SomeType</code> \u7684\u51FD\u6570\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u4EC5\u4EC5\u662F\u4E00\u4E2A interface</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">common</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">common</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u7528\u6237\u81EA\u5DF1\u5B9A\u4E49\u7684\u7C7B\u578B\u4FDD\u62A4\uFF01</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">isFoo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">arg</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">arg</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">as</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u7528\u6237\u81EA\u5DF1\u5B9A\u4E49\u7684\u7C7B\u578B\u4FDD\u62A4\u4F7F\u7528\u7528\u4F8B\uFF1A</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">doStuff</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">isFoo</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">doStuff</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">common</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">doStuff</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">common</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="\u5B57\u9762\u91CF\u7C7B\u578B" tabindex="-1">\u5B57\u9762\u91CF\u7C7B\u578B <a class="header-anchor" href="#\u5B57\u9762\u91CF\u7C7B\u578B" aria-hidden="true">#</a></h3><p>\u5B57\u9762\u91CF\u662F JavaScript \u672C\u8EAB\u63D0\u4F9B\u7684\u4E00\u4E2A\u51C6\u786E\u53D8\u91CF\u3002</p><h4 id="\u5B57\u7B26\u4E32\u5B57\u9762\u91CF" tabindex="-1">\u5B57\u7B26\u4E32\u5B57\u9762\u91CF <a class="header-anchor" href="#\u5B57\u7B26\u4E32\u5B57\u9762\u91CF" aria-hidden="true">#</a></h4><p>\u4F60\u53EF\u4EE5\u4F7F\u7528\u4E00\u4E2A\u5B57\u7B26\u4E32\u5B57\u9762\u91CF\u4F5C\u4E3A\u4E00\u4E2A\u7C7B\u578B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u8FD9\u91CC\uFF0C\u6211\u4EEC\u521B\u5EFA\u4E86\u4E00\u4E2A\u88AB\u79F0\u4E3A <code>foo</code> \u53D8\u91CF\uFF0C\u5B83\u4EC5\u63A5\u6536\u4E00\u4E2A\u5B57\u9762\u91CF\u503C\u4E3A <code>Hello</code> \u7684\u53D8\u91CF\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Bar</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: &#39;bar&#39; \u4E0D\u80FD\u8D4B\u503C\u7ED9\u7C7B\u578B &#39;Hello&#39;</span></span>
<span class="line"></span></code></pre></div><p>\u5B83\u4EEC\u672C\u8EAB\u5E76\u4E0D\u662F\u5F88\u5B9E\u7528\uFF0C\u4F46\u662F\u53EF\u4EE5\u5728\u4E00\u4E2A\u8054\u5408\u7C7B\u578B\u4E2D\u7EC4\u5408\u521B\u5EFA\u4E00\u4E2A\u5F3A\u5927\u7684\uFF08\u5B9E\u7528\u7684\uFF09\u62BD\u8C61\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">CardinalDirection</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">North</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">East</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">South</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">West</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">move</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">distance</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">direction</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">CardinalDirection</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">move</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">North</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#82AAFF;">move</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Nurth</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"></span></code></pre></div><h4 id="\u5176\u4ED6\u5B57\u9762\u91CF\u7C7B\u578B" tabindex="-1">\u5176\u4ED6\u5B57\u9762\u91CF\u7C7B\u578B <a class="header-anchor" href="#\u5176\u4ED6\u5B57\u9762\u91CF\u7C7B\u578B" aria-hidden="true">#</a></h4><p>TypeScript \u540C\u6837\u4E5F\u63D0\u4F9B <code>boolean</code> \u548C <code>number</code> \u7684\u5B57\u9762\u91CF\u7C7B\u578B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">OneToFive</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bools</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="\u63A8\u65AD" tabindex="-1">\u63A8\u65AD <a class="header-anchor" href="#\u63A8\u65AD" aria-hidden="true">#</a></h4><p>\u901A\u5E38\uFF0C\u4F60\u4F1A\u5F97\u5230\u4E00\u4E2A\u7C7B\u4F3C\u4E8E <code>Type string is not assignable to type &#39;foo&#39;</code> \u7684\u9519\u8BEF\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">iTakeFoo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> test </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">someProp</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">iTakeFoo</span><span style="color:#A6ACCD;">(test</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">someProp)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: Argument of type string is not assignable to parameter of type &#39;foo&#39;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u662F\u7531\u4E8E <code>test</code> \u88AB\u63A8\u65AD\u4E3A <code>{ someProp: string }</code>\uFF0C\u6211\u4EEC\u53EF\u4EE5\u91C7\u7528\u4E00\u4E2A\u7B80\u5355\u7684\u7C7B\u578B\u65AD\u8A00\u6765\u544A\u8BC9 TypeScript \u4F60\u60F3\u63A8\u65AD\u7684\u5B57\u9762\u91CF\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">iTakeFoo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Test</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">someProp</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> test</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Test</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u63A8\u65AD \`someProp\` \u6C38\u8FDC\u662F &#39;foo&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">someProp</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">iTakeFoo</span><span style="color:#A6ACCD;">(test</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">someProp)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"></span></code></pre></div><h4 id="\u4F7F\u7528\u7528\u4F8B" tabindex="-1">\u4F7F\u7528\u7528\u4F8B <a class="header-anchor" href="#\u4F7F\u7528\u7528\u4F8B" aria-hidden="true">#</a></h4><p>TypeScript \u679A\u4E3E\u7C7B\u578B\u662F\u57FA\u4E8E\u6570\u5B57\u7684\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528\u5E26\u5B57\u7B26\u4E32\u5B57\u9762\u91CF\u7684\u8054\u5408\u7C7B\u578B\uFF0C\u6765\u6A21\u62DF\u4E00\u4E2A\u57FA\u4E8E\u5B57\u7B26\u4E32\u7684\u679A\u4E3E\u7C7B\u578B\uFF0C\u5C31\u597D\u50CF\u4E0A\u6587\u4E2D\u63D0\u51FA\u7684 <code>CardinalDirection</code>\u3002\u4F60\u751A\u81F3\u53EF\u4EE5\u4F7F\u7528\u4E0B\u9762\u7684\u51FD\u6570\u6765\u751F\u6210 <code>key: value</code> \u7684\u7ED3\u6784\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u7528\u4E8E\u521B\u5EFA\u5B57\u7B26\u4E32\u5217\u8868\u6620\u5C04\u81F3 \`K: V\` \u7684\u51FD\u6570</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">strEnum</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">o</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Array</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;):</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> [</span><span style="color:#FFCB6B;">K</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">K</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">o</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reduce</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">null</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u540E\uFF0C\u4F60\u5C31\u53EF\u4EE5\u4F7F\u7528 <code>keyof</code>\u3001<code>typeof</code> \u6765\u751F\u6210\u5B57\u7B26\u4E32\u7684\u8054\u5408\u7C7B\u578B\u3002\u4E0B\u9762\u662F\u4E00\u4E2A\u5B8C\u5168\u7684\u4F8B\u5B50\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u7528\u4E8E\u521B\u5EFA\u5B57\u7B26\u4E32\u5217\u8868\u6620\u5C04\u81F3 \`K: V\` \u7684\u51FD\u6570</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">strEnum</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">o</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Array</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;):</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> [</span><span style="color:#FFCB6B;">K</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">K</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">o</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reduce</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">null</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u521B\u5EFA K: V</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> Direction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">strEnum</span><span style="color:#A6ACCD;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">North</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">South</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">East</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">West</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u521B\u5EFA\u4E00\u4E2A\u7C7B\u578B</span></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Direction</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">keyof</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#A6ACCD;"> Direction</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u7B80\u5355\u7684\u4F7F\u7528</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> sample</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Direction</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">sample </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Direction</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">North</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Okay</span></span>
<span class="line"><span style="color:#A6ACCD;">sample </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">North</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Okay</span></span>
<span class="line"><span style="color:#A6ACCD;">sample </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">AnythingElse</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ERROR!</span></span>
<span class="line"></span></code></pre></div><h4 id="\u8FA8\u6790\u8054\u5408\u7C7B\u578B" tabindex="-1">\u8FA8\u6790\u8054\u5408\u7C7B\u578B <a class="header-anchor" href="#\u8FA8\u6790\u8054\u5408\u7C7B\u578B" aria-hidden="true">#</a></h4><p>\u6211\u4EEC\u5C06\u4F1A\u5728\u6B64\u4E66\u7684\u7A0D\u540E\u7AE0\u8282\u8BB2\u89E3\u5B83\u3002</p><h3 id="readonly" tabindex="-1">readonly <a class="header-anchor" href="#readonly" aria-hidden="true">#</a></h3><p>TypeScript \u7C7B\u578B\u7CFB\u7EDF\u5141\u8BB8\u4F60\u5728\u4E00\u4E2A\u63A5\u53E3\u91CC\u4F7F\u7528 <code>readonly</code> \u6765\u6807\u8BB0\u5C5E\u6027\u3002\u5B83\u80FD\u8BA9\u4F60\u4EE5\u4E00\u79CD\u66F4\u5B89\u5168\u7684\u65B9\u5F0F\u5DE5\u4F5C\uFF08\u4E0D\u53EF\u9884\u671F\u7684\u6539\u53D8\u662F\u5F88\u7CDF\u7CD5\u7684\uFF09\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">readonly</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">readonly</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bas</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// ..</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> config </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bas</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#82AAFF;">foo</span><span style="color:#A6ACCD;">(config)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u73B0\u5728\u4F60\u80FD\u591F\u786E\u4FDD &#39;config&#39; \u4E0D\u80FD\u591F\u88AB\u6539\u53D8\u4E86</span></span>
<span class="line"></span></code></pre></div><p>\u5F53\u7136\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u5728 <code>interface</code> \u548C <code>type</code> \u91CC\u4F7F\u7528 <code>readonly</code>\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">readonly</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">readonly</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bas</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u521D\u59CB\u5316</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bas</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">456</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4E0D\u80FD\u88AB\u6539\u53D8</span></span>
<span class="line"><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">456</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: foo.bar \u4E3A\u4EC5\u8BFB\u5C5E\u6027</span></span>
<span class="line"></span></code></pre></div><p>\u4F60\u4E5F\u80FD\u6307\u5B9A\u4E00\u4E2A\u7C7B\u7684\u5C5E\u6027\u4E3A\u53EA\u8BFB\uFF0C\u7136\u540E\u5728\u58F0\u660E\u65F6\u6216\u8005\u6784\u9020\u51FD\u6570\u4E2D\u521D\u59CB\u5316\u5B83\u4EEC\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">readonly</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// OK</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">readonly</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">baz</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">baz</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// OK</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="readonly-1" tabindex="-1">Readonly <a class="header-anchor" href="#readonly-1" aria-hidden="true">#</a></h4><p>\u8FD9\u6709\u4E00\u4E2A <code>Readonly</code> \u7684\u6620\u5C04\u7C7B\u578B\uFF0C\u5B83\u63A5\u6536\u4E00\u4E2A\u6CDB\u578B <code>T</code>\uFF0C\u7528\u6765\u628A\u5B83\u7684\u6240\u6709\u5C5E\u6027\u6807\u8BB0\u4E3A\u53EA\u8BFB\u7C7B\u578B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bas</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FooReadonly</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Readonly</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Foo</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bas</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">456</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> fooReadonly</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FooReadonly</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bas</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">456</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">456</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#A6ACCD;">fooReadonly</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">456</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: bar \u5C5E\u6027\u53EA\u8BFB</span></span>
<span class="line"></span></code></pre></div><h4 id="\u5176\u4ED6\u7684\u4F7F\u7528\u7528\u4F8B" tabindex="-1">\u5176\u4ED6\u7684\u4F7F\u7528\u7528\u4F8B <a class="header-anchor" href="#\u5176\u4ED6\u7684\u4F7F\u7528\u7528\u4F8B" aria-hidden="true">#</a></h4><h5 id="reactjs" tabindex="-1">ReactJS <a class="header-anchor" href="#reactjs" aria-hidden="true">#</a></h5><p><code>ReactJS</code> \u662F\u4E00\u4E2A\u559C\u6B22\u7528\u4E0D\u53D8\u6570\u636E\u7684\u5E93\uFF0C\u4F60\u53EF\u4EE5\u6807\u8BB0\u4F60\u7684 <code>Props</code> \u548C <code>State</code> \u4E3A\u4E0D\u53EF\u53D8\u6570\u636E\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Props</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">readonly</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">State</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">readonly</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Something</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">React</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Component</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Props</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">State</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">someMethod</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u4F60\u53EF\u4EE5\u653E\u5FC3\uFF0C\u6CA1\u6709\u4EBA\u4F1A\u50CF\u4E0B\u9762\u8FD9\u4E48\u505A</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error: props \u662F\u4E0D\u53EF\u53D8\u7684</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">baz</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">456</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error: \u4F60\u5E94\u8BE5\u4F7F\u7528 this.setState()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u800C\uFF0C\u4F60\u5E76\u6CA1\u6709\u5FC5\u8981\u8FD9\u4E48\u505A\uFF0C<code>React</code> \u7684\u58F0\u660E\u6587\u4EF6\u5DF2\u7ECF\u6807\u8BB0\u8FD9\u4E9B\u4E3A <code>readonly</code>\uFF08\u901A\u8FC7\u4F20\u5165\u6CDB\u578B\u53C2\u6570\u81F3\u4E00\u4E2A\u5185\u90E8\u5305\u88C5\uFF0C\u6765\u628A\u6BCF\u4E2A\u5C5E\u6027\u6807\u8BB0\u4E3A <code>readonly</code>\uFF0C\u5982\u4E0A\u4F8B\u5B50\u6240\u793A\uFF09\uFF0C</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Something</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">React</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Component</span><span style="color:#89DDFF;">&lt;{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">baz</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">someMethod</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error: props \u662F\u4E0D\u53EF\u53D8\u7684</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">baz</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">456</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error: \u4F60\u5E94\u8BE5\u4F7F\u7528 this.setState()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h5 id="\u7EDD\u5BF9\u7684\u4E0D\u53EF\u53D8" tabindex="-1">\u7EDD\u5BF9\u7684\u4E0D\u53EF\u53D8 <a class="header-anchor" href="#\u7EDD\u5BF9\u7684\u4E0D\u53EF\u53D8" aria-hidden="true">#</a></h5><p>\u4F60\u751A\u81F3\u53EF\u4EE5\u628A\u7D22\u5F15\u7B7E\u540D\u6807\u8BB0\u4E3A\u53EA\u8BFB\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">readonly</span><span style="color:#A6ACCD;"> [</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4F7F\u7528</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">345</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(foo[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok\uFF08\u8BFB\u53D6\uFF09</span></span>
<span class="line"><span style="color:#A6ACCD;">foo[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">456</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: \u5C5E\u6027\u53EA\u8BFB</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u4F60\u60F3\u4EE5\u4E0D\u53D8\u7684\u65B9\u5F0F\u4F7F\u7528\u539F\u751F JavaScript \u6570\u7EC4\uFF0C\u53EF\u4EE5\u4F7F\u7528 TypeScript \u63D0\u4F9B\u7684 <code>ReadonlyArray&lt;T&gt;</code> \u63A5\u53E3\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ReadonlyArray</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(foo[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: ReadonlyArray \u4E0A\u4E0D\u5B58\u5728 \`push\`\uFF0C\u56E0\u4E3A\u4ED6\u4F1A\u6539\u53D8\u6570\u7EC4</span></span>
<span class="line"><span style="color:#A6ACCD;">foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">concat</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok, \u521B\u5EFA\u4E86\u4E00\u4E2A\u590D\u5236</span></span>
<span class="line"></span></code></pre></div><h5 id="\u81EA\u52A8\u63A8\u65AD" tabindex="-1">\u81EA\u52A8\u63A8\u65AD <a class="header-anchor" href="#\u81EA\u52A8\u63A8\u65AD" aria-hidden="true">#</a></h5><p>\u5728\u4E00\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u7F16\u8BD1\u5668\u80FD\u628A\u4E00\u4E9B\u7279\u5B9A\u7684\u5C5E\u6027\u63A8\u65AD\u4E3A <code>readonly</code>\uFF0C\u4F8B\u5982\u5728\u4E00\u4E2A <code>class</code> \u4E2D\uFF0C\u5982\u679C\u4F60\u6709\u4E00\u4E2A\u53EA\u542B\u6709 <code>getter</code> \u4F46\u662F\u6CA1\u6709 <code>setter</code> \u7684\u5C5E\u6027\uFF0C\u4ED6\u80FD\u88AB\u63A8\u65AD\u4E3A\u53EA\u8BFB\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Person</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">firstName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">John</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">lastName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Doe</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">fullName</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">firstName</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">lastName</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> person </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Person</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(person</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fullName)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// John Doe</span></span>
<span class="line"><span style="color:#A6ACCD;">person</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fullName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Dear Reader</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error, fullName \u53EA\u8BFB</span></span>
<span class="line"></span></code></pre></div><h4 id="\u4E0E-const-\u7684\u4E0D\u540C" tabindex="-1">\u4E0E <code>const</code> \u7684\u4E0D\u540C <a class="header-anchor" href="#\u4E0E-const-\u7684\u4E0D\u540C" aria-hidden="true">#</a></h4><p><code>const</code></p><ul><li>\u7528\u4E8E\u53D8\u91CF\uFF1B</li><li>\u53D8\u91CF\u4E0D\u80FD\u91CD\u65B0\u8D4B\u503C\u7ED9\u5176\u4ED6\u4EFB\u4F55\u4E8B\u7269\u3002</li></ul><p><code>readonly</code></p><ul><li>\u7528\u4E8E\u5C5E\u6027\uFF1B</li><li>\u7528\u4E8E\u522B\u540D\uFF0C\u53EF\u4EE5\u4FEE\u6539\u5C5E\u6027\uFF1B</li></ul><p>\u7B80\u5355\u7684\u4F8B\u5B50 1\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u53D8\u91CF</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">readonly</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5C5E\u6027</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>\u7B80\u5355\u7684\u4F8B\u5B50 2\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">readonly</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">iMutateFoo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">456</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">iMutateFoo</span><span style="color:#A6ACCD;">(foo)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(foo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 456</span></span>
<span class="line"></span></code></pre></div><p><code>readonly</code> \u80FD\u786E\u4FDD\u201C\u6211\u201D\u4E0D\u80FD\u4FEE\u6539\u5C5E\u6027\uFF0C\u4F46\u662F\u5F53\u4F60\u628A\u8FD9\u4E2A\u5C5E\u6027\u4EA4\u7ED9\u5176\u4ED6\u5E76\u6CA1\u6709\u8FD9\u79CD\u4FDD\u8BC1\u7684\u4F7F\u7528\u8005\uFF08\u5141\u8BB8\u51FA\u4E8E\u7C7B\u578B\u517C\u5BB9\u6027\u7684\u539F\u56E0\uFF09\uFF0C\u4ED6\u4EEC\u80FD\u6539\u53D8\u5B83\u3002\u5F53\u7136\uFF0C\u5982\u679C <code>iMutateFoo</code> \u660E\u786E\u7684\u8868\u793A\uFF0C\u4ED6\u4EEC\u7684\u53C2\u6570\u4E0D\u53EF\u4FEE\u6539\uFF0C\u90A3\u4E48\u7F16\u8BD1\u5668\u4F1A\u53D1\u51FA\u9519\u8BEF\u8B66\u544A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">readonly</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">iTakeFoo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">456</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error: bar \u5C5E\u6027\u53EA\u8BFB</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">iTakeFoo</span><span style="color:#A6ACCD;">(foo)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="\u8303\u578B-1" tabindex="-1">\u8303\u578B <a class="header-anchor" href="#\u8303\u578B-1" aria-hidden="true">#</a></h3><p>\u8BBE\u8BA1\u6CDB\u578B\u7684\u5173\u952E\u76EE\u7684\u662F\u5728\u6210\u5458\u4E4B\u95F4\u63D0\u4F9B\u6709\u610F\u4E49\u7684\u7EA6\u675F\uFF0C\u8FD9\u4E9B\u6210\u5458\u53EF\u4EE5\u662F\uFF1A</p><ul><li>\u7C7B\u7684\u5B9E\u4F8B\u6210\u5458</li><li>\u7C7B\u7684\u65B9\u6CD5</li><li>\u51FD\u6570\u53C2\u6570</li><li>\u51FD\u6570\u8FD4\u56DE\u503C</li></ul><h4 id="\u52A8\u673A\u548C\u793A\u4F8B" tabindex="-1">\u52A8\u673A\u548C\u793A\u4F8B <a class="header-anchor" href="#\u52A8\u673A\u548C\u793A\u4F8B" aria-hidden="true">#</a></h4><p>\u4E0B\u9762\u662F\u5BF9\u4E00\u4E2A\u5148\u8FDB\u5148\u51FA\u7684\u6570\u636E\u7ED3\u6784\u2014\u2014\u961F\u5217\uFF0C\u5728 <code>TypeScript</code> \u548C <code>JavaScript</code> \u4E2D\u7684\u7B80\u5355\u5B9E\u73B0\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Queue</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">data</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">item</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">push</span><span style="color:#A6ACCD;">(item)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">pop</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">shift</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u4E0A\u8FF0\u4EE3\u7801\u4E2D\u5B58\u5728\u4E00\u4E2A\u95EE\u9898\uFF0C\u5B83\u5141\u8BB8\u4F60\u5411\u961F\u5217\u4E2D\u6DFB\u52A0\u4EFB\u4F55\u7C7B\u578B\u7684\u6570\u636E\uFF0C\u5F53\u7136\uFF0C\u5F53\u6570\u636E\u88AB\u5F39\u51FA\u961F\u5217\u65F6\uFF0C\u4E5F\u53EF\u4EE5\u662F\u4EFB\u610F\u7C7B\u578B\u3002\u5728\u4E0B\u9762\u7684\u793A\u4F8B\u4E2D\uFF0C\u770B\u8D77\u6765\u4EBA\u4EEC\u53EF\u4EE5\u5411\u961F\u5217\u4E2D\u6DFB\u52A0 <code>string</code> \u7C7B\u578B\u7684\u6570\u636E\uFF0C\u4F46\u662F\u5B9E\u9645\u4E0A\uFF0C\u8BE5\u7528\u6CD5\u5047\u5B9A\u7684\u662F\u53EA\u6709 <code>number</code> \u7C7B\u578B\u4F1A\u88AB\u6DFB\u52A0\u5230\u961F\u5217\u91CC\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Queue</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">data</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">item</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">push</span><span style="color:#A6ACCD;">(item)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">pop</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">shift</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> queue </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Queue</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">queue</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">queue</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Oops\uFF0C\u4E00\u4E2A\u9519\u8BEF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4E00\u4E2A\u4F7F\u7528\u8005\uFF0C\u8D70\u5165\u4E86\u8BEF\u533A</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(queue</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pop</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toPrecision</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(queue</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pop</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toPrecision</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// RUNTIME ERROR</span></span>
<span class="line"></span></code></pre></div><p>\u4E00\u4E2A\u89E3\u51B3\u7684\u529E\u6CD5\uFF08\u4E8B\u5B9E\u4E0A\uFF0C\u8FD9\u4E5F\u662F\u4E0D\u652F\u6301\u6CDB\u578B\u7C7B\u578B\u7684\u552F\u4E00\u89E3\u51B3\u529E\u6CD5\uFF09\u662F\u4E3A\u8FD9\u4E9B\u7EA6\u675F\u521B\u5EFA\u7279\u6B8A\u7C7B\uFF0C\u5982\u5FEB\u901F\u521B\u5EFA\u6570\u5B57\u7C7B\u578B\u7684\u961F\u5217\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">QueueNumber</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">data</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">push</span><span style="color:#A6ACCD;">(item)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">pop</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">shift</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> queue </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">QueueNumber</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">queue</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">queue</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: \u4E0D\u80FD\u63A8\u5165\u4E00\u4E2A \`string\` \u7C7B\u578B\uFF0C\u53EA\u80FD\u662F \`number\` \u7C7B\u578B</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u5982\u679C\u8BE5\u9519\u8BEF\u5F97\u5230\u4FEE\u590D\uFF0C\u5176\u4ED6\u5C06\u4E0D\u4F1A\u51FA\u73B0\u95EE\u9898</span></span>
<span class="line"></span></code></pre></div><p>\u5F53\u7136\uFF0C\u5FEB\u901F\u4E5F\u610F\u5473\u7740\u75DB\u82E6\u3002\u4F8B\u5982\u5F53\u4F60\u60F3\u521B\u5EFA\u4E00\u4E2A\u5B57\u7B26\u4E32\u7684\u961F\u5217\u65F6\uFF0C\u4F60\u5C06\u4E0D\u5F97\u4E0D\u518D\u6B21\u4FEE\u6539\u76F8\u5F53\u5927\u7684\u4EE3\u7801\u3002\u6211\u4EEC\u771F\u6B63\u60F3\u8981\u7684\u4E00\u79CD\u65B9\u5F0F\u662F\u65E0\u8BBA\u4EC0\u4E48\u7C7B\u578B\u88AB\u63A8\u5165\u961F\u5217\uFF0C\u88AB\u63A8\u51FA\u7684\u7C7B\u578B\u90FD\u4E0E\u63A8\u5165\u7C7B\u578B\u4E00\u6837\u3002\u5F53\u4F60\u4F7F\u7528\u6CDB\u578B\u65F6\uFF0C\u8FD9\u4F1A\u5F88\u5BB9\u6613\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u521B\u5EFA\u4E00\u4E2A\u6CDB\u578B\u7C7B</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Queue</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;">[] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">push</span><span style="color:#A6ACCD;">(item)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">pop</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">undefined</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">shift</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u7B80\u5355\u7684\u4F7F\u7528</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> queue </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Queue</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">queue</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">queue</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error\uFF1A\u4E0D\u80FD\u63A8\u5165\u4E00\u4E2A \`string\`\uFF0C\u53EA\u6709 number \u7C7B\u578B\u88AB\u5141\u8BB8</span></span>
<span class="line"></span></code></pre></div><p>\u53E6\u5916\u4E00\u4E2A\u6211\u4EEC\u89C1\u8FC7\u7684\u4F8B\u5B50\uFF1A\u4E00\u4E2A <code>reverse</code> \u51FD\u6570\uFF0C\u73B0\u5728\u5728\u8FD9\u4E2A\u51FD\u6570\u91CC\u63D0\u4F9B\u4E86\u51FD\u6570\u53C2\u6570\u4E0E\u51FD\u6570\u8FD4\u56DE\u503C\u7684\u7EA6\u675F\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">reverse</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">items</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;">[]</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;">[] </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">toreturn</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">items</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">--</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">toreturn</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">items</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">toreturn</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> sample </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> reversed </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">reverse</span><span style="color:#A6ACCD;">(sample)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">reversed[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"><span style="color:#A6ACCD;">reversed </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">reversed[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#A6ACCD;">reversed </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u6B64\u7AE0\u8282\u4E2D\uFF0C\u4F60\u5DF2\u7ECF\u4E86\u89E3\u5728\u7C7B\u548C\u51FD\u6570\u4E0A\u4F7F\u7528\u6CDB\u578B\u7684\u4F8B\u5B50\u3002\u4E00\u4E2A\u503C\u5F97\u8865\u5145\u4E00\u70B9\u7684\u662F\uFF0C\u4F60\u53EF\u4EE5\u4E3A\u521B\u5EFA\u7684\u6210\u5458\u51FD\u6570\u6DFB\u52A0\u6CDB\u578B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Utility</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">reverse</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">items</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;">[]</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;">[] </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">toreturn</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">items</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">--</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">toreturn</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">items</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">toreturn</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u4F60\u53EF\u4EE5\u968F\u610F\u8C03\u7528\u6CDB\u578B\u53C2\u6570\uFF0C\u5F53\u4F60\u4F7F\u7528\u7B80\u5355\u7684\u6CDB\u578B\u65F6\uFF0C\u6CDB\u578B\u5E38\u7528 <code>T</code>\u3001<code>U</code>\u3001<code>V</code> \u8868\u793A\u3002\u5982\u679C\u5728\u4F60\u7684\u53C2\u6570\u91CC\uFF0C\u4E0D\u6B62\u62E5\u6709\u4E00\u4E2A\u6CDB\u578B\uFF0C\u4F60\u5E94\u8BE5\u4F7F\u7528\u4E00\u4E2A\u66F4\u8BED\u4E49\u5316\u540D\u79F0\uFF0C\u5982 <code>TKey</code> \u548C <code>TValue</code> \uFF08\u901A\u5E38\u60C5\u51B5\u4E0B\uFF0C\u4EE5 <code>T</code> \u4F5C\u4E3A\u6CDB\u578B\u7684\u524D\u7F00\uFF0C\u5728\u5176\u4ED6\u8BED\u8A00\u5982 C++ \u91CC\uFF0C\u4E5F\u88AB\u79F0\u4E3A\u6A21\u677F\uFF09</p></div><h4 id="\u8BEF\u7528\u7684\u6CDB\u578B" tabindex="-1">\u8BEF\u7528\u7684\u6CDB\u578B <a class="header-anchor" href="#\u8BEF\u7528\u7684\u6CDB\u578B" aria-hidden="true">#</a></h4><p>\u6211\u89C1\u8FC7\u5F00\u53D1\u8005\u4F7F\u7528\u6CDB\u578B\u4EC5\u4EC5\u662F\u4E3A\u4E86\u5B83\u7684 hack\u3002\u5F53\u4F60\u4F7F\u7528\u5B83\u65F6\uFF0C\u4F60\u5E94\u8BE5\u95EE\u95EE\u81EA\u5DF1\uFF1A\u4F60\u60F3\u7528\u5B83\u6765\u63D0\u4F9B\u4EC0\u4E48\u6837\u7684\u7EA6\u675F\u3002\u5982\u679C\u4F60\u4E0D\u80FD\u5F88\u597D\u7684\u56DE\u7B54\u5B83\uFF0C\u4F60\u53EF\u80FD\u4F1A\u8BEF\u7528\u6CDB\u578B\uFF0C\u5982\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u8FD9\u91CC\uFF0C\u6CDB\u578B\u5B8C\u5168\u6CA1\u6709\u5FC5\u8981\u4F7F\u7528\uFF0C\u56E0\u4E3A\u5B83\u4EC5\u7528\u4E8E\u5355\u4E2A\u53C2\u6570\u7684\u4F4D\u7F6E\uFF0C\u4F7F\u7528\u5982\u4E0B\u65B9\u5F0F\u53EF\u80FD\u66F4\u597D\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u65B9\u4FBF\u901A\u7528" tabindex="-1">\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u65B9\u4FBF\u901A\u7528 <a class="header-anchor" href="#\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u65B9\u4FBF\u901A\u7528" aria-hidden="true">#</a></h4><p>\u8003\u8651\u5982\u4E0B\u51FD\u6570\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">parse</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u6CDB\u578B <code>T</code> \u53EA\u5728\u4E00\u4E2A\u5730\u65B9\u88AB\u4F7F\u7528\u4E86\uFF0C\u5B83\u5E76\u6CA1\u6709\u5728\u6210\u5458\u4E4B\u95F4\u63D0\u4F9B\u7EA6\u675F <code>T</code>\u3002\u8FD9\u76F8\u5F53\u4E8E\u4E00\u4E2A\u5982\u4E0B\u7684\u7C7B\u578B\u65AD\u8A00\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">parse</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> something </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">parse</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">something</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TypeOfSomething</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u4EC5\u4F7F\u7528\u4E00\u6B21\u7684\u6CDB\u578B\u5E76\u4E0D\u6BD4\u4E00\u4E2A\u7C7B\u578B\u65AD\u8A00\u6765\u7684\u5B89\u5168\u3002\u5B83\u4EEC\u90FD\u7ED9\u4F60\u4F7F\u7528 API \u63D0\u4F9B\u4E86\u4FBF\u5229\u3002</p><p>\u53E6\u4E00\u4E2A\u660E\u663E\u7684\u4F8B\u5B50\u662F\uFF0C\u4E00\u4E2A\u7528\u4E8E\u52A0\u8F7D json \u8FD4\u56DE\u503C\u51FD\u6570\uFF0C\u5B83\u8FD4\u56DE\u4F60\u4EFB\u4F55\u4F20\u5165\u7C7B\u578B\u7684 <code>Promise</code>\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> getJSON </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">headers</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> [</span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fetchConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    method</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    Accept</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">application/json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">Content-Type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">application/json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">fetch</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fetchConfig</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">response</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">json</span><span style="color:#F07178;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><h5 id="\u914D\u5408-axios-\u4F7F\u7528" tabindex="-1">\u914D\u5408 axios \u4F7F\u7528 <a class="header-anchor" href="#\u914D\u5408-axios-\u4F7F\u7528" aria-hidden="true">#</a></h5><p>\u901A\u5E38\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u4F1A\u628A\u540E\u7AEF\u8FD4\u56DE\u6570\u636E\u683C\u5F0F\u5355\u72EC\u653E\u5165\u4E00\u4E2A interface \u91CC\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u8BF7\u6C42\u63A5\u53E3\u6570\u636E</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ResponseData</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;">   * \u72B6\u6001\u7801</span></span>
<span class="line"><span style="color:#676E95;">   * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">type</span><span style="color:#676E95;"> </span><span style="color:#89DDFF;">{</span><span style="color:#FFCB6B;"> number </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;">   */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">code</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;">   * \u6570\u636E</span></span>
<span class="line"><span style="color:#676E95;">   * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">type</span><span style="color:#676E95;"> </span><span style="color:#89DDFF;">{</span><span style="color:#FFCB6B;"> T </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;">   */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">result</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;">   * \u6D88\u606F</span></span>
<span class="line"><span style="color:#676E95;">   * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">type</span><span style="color:#676E95;"> </span><span style="color:#89DDFF;">{</span><span style="color:#FFCB6B;"> string </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;">   */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">message</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5F53\u6211\u4EEC\u628A API \u5355\u72EC\u62BD\u79BB\u6210\u5355\u4E2A\u6A21\u5757\u65F6\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u5728 axios.ts \u6587\u4EF6\u4E2D\u5BF9 axios \u8FDB\u884C\u4E86\u5904\u7406\uFF0C\u4F8B\u5982\u6DFB\u52A0\u901A\u7528\u914D\u7F6E\u3001\u62E6\u622A\u5668\u7B49</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> Ax </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./axios</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ResponseData</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./interface.ts</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getUser</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Ax</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">ResponseData</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/somepath</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u6211\u4EEC\u5199\u5165\u8FD4\u56DE\u7684\u6570\u636E\u7C7B\u578B <code>User</code>\uFF0C\u8FD9\u53EF\u4EE5\u8BA9 TypeScript \u987A\u5229\u63A8\u65AD\u51FA\u6211\u4EEC\u60F3\u8981\u7684\u7C7B\u578B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">age</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// user \u88AB\u63A8\u65AD\u51FA\u4E3A</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// {</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//  code: number,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//  result: { name: string, age: number },</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//  message: string</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// }</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">user</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">await</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getUser</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">User</span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="\u7C7B\u578B\u63A8\u65AD" tabindex="-1">\u7C7B\u578B\u63A8\u65AD <a class="header-anchor" href="#\u7C7B\u578B\u63A8\u65AD" aria-hidden="true">#</a></h3><p>TypeScript \u80FD\u6839\u636E\u4E00\u4E9B\u7B80\u5355\u7684\u89C4\u5219\u63A8\u65AD\uFF08\u68C0\u67E5\uFF09\u53D8\u91CF\u7684\u7C7B\u578B\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7\u5B9E\u8DF5\uFF0C\u5F88\u5FEB\u7684\u4E86\u89E3\u5B83\u4EEC\u3002</p><h4 id="\u5B9A\u4E49\u53D8\u91CF" tabindex="-1">\u5B9A\u4E49\u53D8\u91CF <a class="header-anchor" href="#\u5B9A\u4E49\u53D8\u91CF" aria-hidden="true">#</a></h4><p>\u53D8\u91CF\u7684\u7C7B\u578B\uFF0C\u7531\u5B9A\u4E49\u63A8\u65AD\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// foo \u662F &#39;number&#39;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// bar \u662F &#39;string&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> bar</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: \u4E0D\u80FD\u5C06 &#39;string&#39; \u8D4B\u503C\u7ED9 \`number\`</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u662F\u4E00\u4E2A\u4ECE\u53F3\u5411\u5DE6\u6D41\u52A8\u7C7B\u578B\u7684\u793A\u4F8B\u3002</p><h4 id="\u51FD\u6570\u8FD4\u56DE\u7C7B\u578B" tabindex="-1">\u51FD\u6570\u8FD4\u56DE\u7C7B\u578B <a class="header-anchor" href="#\u51FD\u6570\u8FD4\u56DE\u7C7B\u578B" aria-hidden="true">#</a></h4><p>\u8FD4\u56DE\u7C7B\u578B\u80FD\u88AB <code>return</code> \u8BED\u53E5\u63A8\u65AD\uFF0C\u5982\u4E0B\u6240\u793A\uFF0C\u63A8\u65AD\u51FD\u6570\u8FD4\u56DE\u4E3A\u4E00\u4E2A\u6570\u5B57\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">add</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u662F\u4E00\u4E2A\u4ECE\u5E95\u90E8\u6D41\u51FA\u7C7B\u578B\u7684\u4F8B\u5B50\u3002</p><h4 id="\u8D4B\u503C" tabindex="-1">\u8D4B\u503C <a class="header-anchor" href="#\u8D4B\u503C" aria-hidden="true">#</a></h4><p>\u51FD\u6570\u53C2\u6570\u7C7B\u578B/\u8FD4\u56DE\u503C\u4E5F\u80FD\u901A\u8FC7\u8D4B\u503C\u6765\u63A8\u65AD\u3002\u5982\u4E0B\u6240\u793A\uFF0C<code>foo</code> \u7684\u7C7B\u578B\u662F <code>Adder</code>\uFF0C\u4ED6\u80FD\u8BA9 <code>foo</code> \u7684\u53C2\u6570 <code>a</code>\u3001<code>b</code> \u662F <code>number</code> \u7C7B\u578B\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Adder</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Adder</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> b</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E2A\u4E8B\u5B9E\u53EF\u4EE5\u7528\u4E0B\u9762\u7684\u4EE3\u7801\u6765\u8BC1\u660E\uFF0CTypeScript \u4F1A\u53D1\u51FA\u6B63\u5982\u4F60\u671F\u671B\u53D1\u51FA\u7684\u9519\u8BEF\u8B66\u544A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Adder</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Adder</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error\uFF1A\u4E0D\u80FD\u628A &#39;string&#39; \u7C7B\u578B\u8D4B\u503C\u7ED9 &#39;number&#39; \u7C7B\u578B</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u662F\u4E00\u4E2A\u4ECE\u5DE6\u5411\u53F3\u6D41\u52A8\u7C7B\u578B\u7684\u793A\u4F8B\u3002</p><p>\u5982\u679C\u4F60\u521B\u5EFA\u4E00\u4E2A\u51FD\u6570\uFF0C\u5E76\u4E14\u51FD\u6570\u53C2\u6570\u4E3A\u4E00\u4E2A\u56DE\u8C03\u51FD\u6570\uFF0C\u76F8\u540C\u7684\u8D4B\u503C\u89C4\u5219\u4E5F\u9002\u7528\u4E8E\u5B83\u3002\u4ECE <code>argument</code> \u81F3 <code>parameter</code> \u53EA\u662F\u53D8\u91CF\u8D4B\u503C\u7684\u53E6\u4E00\u79CD\u5F62\u5F0F\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Adder</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">iTakeAnAdder</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">adder</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Adder</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">adder</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">iTakeAnAdder</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error: \u4E0D\u80FD\u628A &#39;string&#39; \u7C7B\u578B\u8D4B\u503C\u7ED9 &#39;number&#39; \u7C7B\u578B</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="\u7ED3\u6784\u5316" tabindex="-1">\u7ED3\u6784\u5316 <a class="header-anchor" href="#\u7ED3\u6784\u5316" aria-hidden="true">#</a></h4><p>\u8FD9\u4E9B\u7B80\u5355\u7684\u89C4\u5219\u4E5F\u9002\u7528\u4E8E\u7ED3\u6784\u5316\u7684\u5B58\u5728\uFF08\u5BF9\u8C61\u5B57\u9762\u91CF\uFF09\uFF0C\u4F8B\u5982\u5728\u4E0B\u9762\u8FD9\u79CD\u60C5\u51B5\u4E0B foo \u7684\u7C7B\u578B\u88AB\u63A8\u65AD\u4E3A { a: number, b: number }\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">456</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error\uFF1A\u4E0D\u80FD\u628A &#39;string&#39; \u7C7B\u578B\u8D4B\u503C\u7ED9 &#39;number&#39; \u7C7B\u578B</span></span>
<span class="line"></span></code></pre></div><p>\u6570\u7EC4\u4E5F\u4E00\u6837\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">bar[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error\uFF1A\u4E0D\u80FD\u628A &#39;string&#39; \u7C7B\u578B\u8D4B\u503C\u7ED9 &#39;number&#39; \u7C7B\u578B</span></span>
<span class="line"></span></code></pre></div><h4 id="\u89E3\u6784" tabindex="-1">\u89E3\u6784 <a class="header-anchor" href="#\u89E3\u6784" aria-hidden="true">#</a></h4><p>\u8FD9\u4E9B\u4E5F\u9002\u7528\u4E8E\u89E3\u6784\u4E2D\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">456</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error\uFF1A\u4E0D\u80FD\u628A &#39;string&#39; \u7C7B\u578B\u8D4B\u503C\u7ED9 &#39;number&#39; \u7C7B\u578B</span></span>
<span class="line"></span></code></pre></div><p>\u6570\u7EC4\u4E2D\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> b</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> bar</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error\uFF1A\u4E0D\u80FD\u628A &#39;string&#39; \u7C7B\u578B\u8D4B\u503C\u7ED9 &#39;number&#39; \u7C7B\u578B</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u51FD\u6570\u53C2\u6570\u80FD\u591F\u88AB\u63A8\u65AD\u51FA\u6765\uFF0C\u90A3\u4E48\u89E3\u6784\u4EA6\u662F\u5982\u6B64\u3002\u5728\u5982\u4E0B\u4F8B\u5B50\u4E2D\uFF0C\u51FD\u6570\u53C2\u6570\u80FD\u591F\u88AB\u89E3\u6784\u4E3A <code>a/b</code> \u6210\u5458\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Adder</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">number</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">iTakeAnAdder</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">adder</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Adder</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">adder</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> a</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> b</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">iTakeAnAdder</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">({</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// a, b \u7684\u7C7B\u578B\u80FD\u88AB\u63A8\u65AD\u51FA\u6765</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Error\uFF1A\u4E0D\u80FD\u628A &#39;string&#39; \u7C7B\u578B\u8D4B\u503C\u7ED9 &#39;number&#39; \u7C7B\u578B</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="\u7C7B\u578B\u4FDD\u62A4-1" tabindex="-1">\u7C7B\u578B\u4FDD\u62A4 <a class="header-anchor" href="#\u7C7B\u578B\u4FDD\u62A4-1" aria-hidden="true">#</a></h4><p>\u5728\u524D\u9762\u7AE0\u8282<a href="#%E7%B1%BB%E5%9E%8B%E4%BF%9D%E6%8A%A4">\u7C7B\u578B\u4FDD\u62A4</a>\u4E2D\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u77E5\u9053\u5B83\u5982\u4F55\u5E2E\u52A9\u6211\u4EEC\u6539\u53D8\u548C\u7F29\u5C0F\u7C7B\u578B\u8303\u56F4\uFF08\u7279\u522B\u662F\u5728\u8054\u5408\u7C7B\u578B\u4E0B\uFF09\u3002\u7C7B\u578B\u4FDD\u62A4\u53EA\u662F\u4E00\u4E2A\u5757\u4E2D\u53D8\u91CF\u53E6\u4E00\u79CD\u63A8\u65AD\u5F62\u5F0F\u3002</p><h4 id="\u8B66\u544A" tabindex="-1">\u8B66\u544A <a class="header-anchor" href="#\u8B66\u544A" aria-hidden="true">#</a></h4><h5 id="\u5C0F\u5FC3\u4F7F\u7528\u51FD\u6570" tabindex="-1">\u5C0F\u5FC3\u4F7F\u7528\u51FD\u6570 <a class="header-anchor" href="#\u5C0F\u5FC3\u4F7F\u7528\u51FD\u6570" aria-hidden="true">#</a></h5><p>\u5982\u679C\u7C7B\u578B\u4E0D\u80FD\u88AB\u8D4B\u503C\u63A8\u65AD\u51FA\u6765\uFF0C\u7C7B\u578B\u4E5F\u5C06\u4E0D\u4F1A\u6D41\u5165\u51FD\u6570\u53C2\u6570\u4E2D\u3002\u4F8B\u5982\u5982\u4E0B\u7684\u4E00\u4E2A\u4F8B\u5B50\uFF0C\u7F16\u8BD1\u5668\u5E76\u4E0D\u77E5\u9053 <code>foo</code> \u7684\u7C7B\u578B\uFF0C\u6240\u5B83\u4E5F\u5C31\u4E0D\u80FD\u63A8\u65AD\u51FA <code>a</code> \u6216\u8005 <code>b</code> \u7684\u7C7B\u578B\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;">/* do something */</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u800C\uFF0C\u5982\u679C <code>foo</code> \u6DFB\u52A0\u4E86\u7C7B\u578B\u6CE8\u89E3\uFF0C\u51FD\u6570\u53C2\u6570\u4E5F\u5C31\u80FD\u88AB\u63A8\u65AD\uFF08<code>a</code>\uFF0C<code>b</code> \u90FD\u80FD\u88AB\u63A8\u65AD\u4E3A <code>number</code> \u7C7B\u578B\uFF09\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TwoNumberFunction</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TwoNumberFunction</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;">/* do something */</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><h5 id="\u5C0F\u5FC3\u4F7F\u7528\u8FD4\u56DE\u503C" tabindex="-1">\u5C0F\u5FC3\u4F7F\u7528\u8FD4\u56DE\u503C <a class="header-anchor" href="#\u5C0F\u5FC3\u4F7F\u7528\u8FD4\u56DE\u503C" aria-hidden="true">#</a></h5><p>\u5C3D\u7BA1 TypeScript \u4E00\u822C\u60C5\u51B5\u4E0B\u80FD\u63A8\u65AD\u51FD\u6570\u7684\u8FD4\u56DE\u503C\uFF0C\u4F46\u662F\u5B83\u53EF\u80FD\u5E76\u4E0D\u662F\u4F60\u60F3\u8981\u7684\u3002\u4F8B\u5982\u5982\u4E0B\u7684 <code>foo</code> \u51FD\u6570\uFF0C\u5B83\u7684\u8FD4\u56DE\u503C\u4E3A <code>any</code>\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">addOne</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">b</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4E00\u4E9B\u4F7F\u7528 JavaScript \u5E93\u7684\u7279\u6B8A\u51FD\u6570</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">addOne</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u662F\u56E0\u4E3A\u8FD4\u56DE\u503C\u7684\u7C7B\u578B\u88AB\u4E00\u4E2A\u7F3A\u5C11\u7C7B\u578B\u5B9A\u4E49\u7684 <code>addOne</code> \u51FD\u6570\u6240\u5F71\u54CD\uFF08<code>a</code> \u662F <code>any</code>\uFF0C\u6240\u4EE5 <code>addOne</code> \u8FD4\u56DE\u503C\u4E3A <code>any</code>\uFF0C<code>foo</code> \u7684\u8FD4\u56DE\u503C\u662F\u4E5F\u662F <code>any</code>\uFF09\u3002</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u6211\u53D1\u73B0\u6700\u7B80\u5355\u7684\u65B9\u5F0F\u662F\u660E\u786E\u7684\u5199\u4E0A\u51FD\u6570\u8FD4\u56DE\u503C\uFF0C\u6BD5\u7ADF\u8FD9\u4E9B\u6CE8\u89E3\u662F\u4E00\u4E2A\u5B9A\u7406\uFF0C\u800C\u51FD\u6570\u662F\u6CE8\u89E3\u7684\u4E00\u4E2A\u8BC1\u636E\u3002</p></div><p>\u8FD9\u91CC\u8FD8\u6709\u4E00\u4E9B\u5176\u4ED6\u53EF\u4EE5\u60F3\u8C61\u7684\u60C5\u666F\uFF0C\u4F46\u662F\u6709\u4E00\u4E2A\u597D\u6D88\u606F\u662F\u6709\u7F16\u8BD1\u5668\u9009\u9879 <code>noImplicitAny</code> \u53EF\u4EE5\u6355\u83B7\u8FD9\u4E9B bug\u3002</p><h5 id="noimplicitany" tabindex="-1"><code>noImplicitAny</code> <a class="header-anchor" href="#noimplicitany" aria-hidden="true">#</a></h5><p>\u9009\u9879 <code>noImplicitAny</code> \u7528\u6765\u544A\u8BC9\u7F16\u8BD1\u5668\uFF0C\u5F53\u65E0\u6CD5\u63A8\u65AD\u4E00\u4E2A\u53D8\u91CF\u65F6\u53D1\u51FA\u4E00\u4E2A\u9519\u8BEF\uFF08\u6216\u8005\u53EA\u80FD\u63A8\u65AD\u4E3A\u4E00\u4E2A\u9690\u5F0F\u7684 <code>any</code> \u7C7B\u578B\uFF09\uFF0C\u4F60\u53EF\u4EE5\uFF1A</p><ul><li>\u901A\u8FC7\u663E\u5F0F\u6DFB\u52A0 <code>:any</code> \u7684\u7C7B\u578B\u6CE8\u89E3\uFF0C\u6765\u8BA9\u5B83\u6210\u4E3A\u4E00\u4E2A <code>any</code> \u7C7B\u578B\uFF1B</li><li>\u901A\u8FC7\u4E00\u4E9B\u66F4\u6B63\u786E\u7684\u7C7B\u578B\u6CE8\u89E3\u6765\u5E2E\u52A9 TypeScript \u63A8\u65AD\u7C7B\u578B\u3002</li></ul><h3 id="\u7C7B\u578B\u517C\u5BB9\u6027" tabindex="-1">\u7C7B\u578B\u517C\u5BB9\u6027 <a class="header-anchor" href="#\u7C7B\u578B\u517C\u5BB9\u6027" aria-hidden="true">#</a></h3><p>\u7C7B\u578B\u517C\u5BB9\u6027\u7528\u4E8E\u786E\u5B9A\u4E00\u4E2A\u7C7B\u578B\u662F\u5426\u80FD\u8D4B\u503C\u7ED9\u5176\u4ED6\u7C7B\u578B\u3002</p><p>\u5982 <code>string</code> \u7C7B\u578B\u4E0E <code>number</code> \u7C7B\u578B\u4E0D\u517C\u5BB9\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> str</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> num</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">str </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> num</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: &#39;number&#39; \u4E0D\u80FD\u8D4B\u503C\u7ED9 &#39;string&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> str</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: &#39;string&#39; \u4E0D\u80FD\u8D4B\u503C\u7ED9 &#39;number&#39;</span></span>
<span class="line"></span></code></pre></div><h4 id="\u5B89\u5168\u6027" tabindex="-1">\u5B89\u5168\u6027 <a class="header-anchor" href="#\u5B89\u5168\u6027" aria-hidden="true">#</a></h4><p>TypeScript \u7C7B\u578B\u7CFB\u7EDF\u8BBE\u8BA1\u6BD4\u8F83\u65B9\u4FBF\uFF0C\u5B83\u5141\u8BB8\u4F60\u6709\u4E00\u4E9B\u4E0D\u6B63\u786E\u7684\u884C\u4E3A\u3002\u4F8B\u5982\uFF1A\u4EFB\u4F55\u7C7B\u578B\u90FD\u80FD\u88AB\u8D4B\u503C\u7ED9 <code>any</code>\uFF0C\u8FD9\u610F\u5473\u7740\u544A\u8BC9\u7F16\u8BD1\u5668\u4F60\u53EF\u4EE5\u505A\u4EFB\u4F55\u4F60\u60F3\u505A\u7684\u4E8B\u60C5\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toPrecision</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="\u7ED3\u6784\u5316-1" tabindex="-1">\u7ED3\u6784\u5316 <a class="header-anchor" href="#\u7ED3\u6784\u5316-1" aria-hidden="true">#</a></h4><p>TypeScript \u5BF9\u8C61\u662F\u4E00\u79CD\u7ED3\u6784\u7C7B\u578B\uFF0C\u8FD9\u610F\u5473\u7740\u53EA\u8981\u7ED3\u6784\u5339\u914D\uFF0C\u540D\u79F0\u4E5F\u5C31\u65E0\u5173\u7D27\u8981\u4E86\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point2D</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// ok, \u56E0\u4E3A\u662F\u7ED3\u6784\u5316\u7684\u7C7B\u578B</span></span>
<span class="line"><span style="color:#A6ACCD;">p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Point2D</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u5141\u8BB8\u4F60\u52A8\u6001\u521B\u5EFA\u5BF9\u8C61\uFF08\u5C31\u597D\u50CF\u4F60\u5728 <code>vanilla JS</code> \u4E2D\u4F7F\u7528\u4E00\u6837\uFF09\uFF0C\u5E76\u4E14\u5B83\u5982\u679C\u80FD\u88AB\u63A8\u65AD\uFF0C\u8BE5\u5BF9\u8C61\u4ECD\u7136\u5177\u6709\u5B89\u5168\u6027\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point2D</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point3D</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">z</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> point2D</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point2D</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> point3D</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point3D</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">z</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">iTakePoint2D</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">point</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point2D</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;">/* do something */</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">iTakePoint2D</span><span style="color:#A6ACCD;">(point2D)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok, \u5B8C\u5168\u5339\u914D</span></span>
<span class="line"><span style="color:#82AAFF;">iTakePoint2D</span><span style="color:#A6ACCD;">(point3D)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u989D\u5916\u7684\u4FE1\u606F\uFF0C\u6CA1\u5173\u7CFB</span></span>
<span class="line"><span style="color:#82AAFF;">iTakePoint2D</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: \u6CA1\u6709 &#39;y&#39;</span></span>
<span class="line"></span></code></pre></div><h4 id="\u53D8\u4F53" tabindex="-1">\u53D8\u4F53 <a class="header-anchor" href="#\u53D8\u4F53" aria-hidden="true">#</a></h4><p>\u5BF9\u7C7B\u578B\u517C\u5BB9\u6027\u6765\u8BF4\uFF0C\u53D8\u4F53\u662F\u4E00\u4E2A\u5229\u4E8E\u7406\u89E3\u548C\u91CD\u8981\u7684\u6982\u5FF5\u3002</p><p>\u5BF9\u4E00\u4E2A\u7B80\u5355\u7C7B\u578B <code>Base</code> \u548C Child \u6765\u8BF4\uFF0C\u5982\u679C <code>Child</code> \u662F <code>Base</code> \u7684\u5B50\u7C7B\uFF0C<code>Child</code> \u7684\u5B9E\u4F8B\u80FD\u88AB\u8D4B\u503C\u7ED9 <code>Base</code> \u7C7B\u578B\u7684\u53D8\u91CF\u3002</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u8FD9\u662F\u591A\u6001\u6027\u3002</p></div><p>\u5728\u7531 <code>Base</code> \u548C <code>Child</code> \u7EC4\u5408\u7684\u590D\u6742\u7C7B\u578B\u7684\u7C7B\u578B\u517C\u5BB9\u6027\u4E2D\uFF0C\u5B83\u53D6\u51B3\u4E8E\u76F8\u540C\u573A\u666F\u4E0B\u7684 <code>Base</code> \u4E0E Child \u7684\u53D8\u4F53\uFF1A</p><ul><li>\u534F\u53D8\uFF08Covariant\uFF09\uFF1A\u53EA\u5728\u540C\u4E00\u4E2A\u65B9\u5411\uFF1B</li><li>\u9006\u53D8\uFF08Contravariant\uFF09\uFF1A\u53EA\u5728\u76F8\u53CD\u7684\u65B9\u5411\uFF1B</li><li>\u53CC\u5411\u534F\u53D8\uFF08Bivariant\uFF09\uFF1A\u5305\u62EC\u540C\u4E00\u4E2A\u65B9\u5411\u548C\u4E0D\u540C\u65B9\u5411\uFF1B</li><li>\u4E0D\u53D8\uFF08Invariant\uFF09\uFF1A\u5982\u679C\u7C7B\u578B\u4E0D\u5B8C\u5168\u76F8\u540C\uFF0C\u5219\u5B83\u4EEC\u662F\u4E0D\u517C\u5BB9\u7684\u3002</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u5BF9\u4E8E\u5B58\u5728\u5B8C\u5168\u53EF\u53D8\u6570\u636E\u7684\u5065\u5168\u7684\u7C7B\u578B\u7CFB\u7EDF\uFF08\u5982 JavaScript\uFF09\uFF0C<code>Invariant</code> \u662F\u4E00\u4E2A\u552F\u4E00\u7684\u6709\u6548\u53EF\u9009\u5C5E\u6027\uFF0C\u4F46\u662F\u5982\u6211\u4EEC\u6240\u8BA8\u8BBA\u7684\uFF0C<em>\u4FBF\u5229\u6027</em>\u8FEB\u4F7F\u6211\u4EEC\u4F5C\u51FA\u4E00\u4E9B\u4E0D\u662F\u5F88\u5B89\u5168\u7684\u9009\u62E9\u3002</p></div><p>\u5173\u4E8E\u534F\u53D8\u548C\u9006\u53D8\u7684\u66F4\u591A\u5185\u5BB9\uFF0C\u8BF7\u53C2\u8003\uFF1A<a href="#%E5%8D%8F%E5%8F%98%E4%B8%8E%E9%80%86%E5%8F%98">\u534F\u53D8\u4E0E\u9006\u53D8</a></p><h4 id="\u51FD\u6570-1" tabindex="-1">\u51FD\u6570 <a class="header-anchor" href="#\u51FD\u6570-1" aria-hidden="true">#</a></h4><p>\u5F53\u4F60\u5728\u6BD4\u8F83\u4E24\u4E2A\u51FD\u6570\u65F6\uFF0C\u8FD9\u6709\u4E00\u4E9B\u4F60\u9700\u8981\u8003\u8651\u5230\u7684\u4E8B\u60C5\u3002</p><h5 id="\u8FD4\u56DE\u7C7B\u578B" tabindex="-1">\u8FD4\u56DE\u7C7B\u578B <a class="header-anchor" href="#\u8FD4\u56DE\u7C7B\u578B" aria-hidden="true">#</a></h5><p>\u534F\u53D8\uFF08Covariant\uFF09\uFF1A\u8FD4\u56DE\u7C7B\u578B\u5FC5\u987B\u5305\u542B\u8DB3\u591F\u7684\u6570\u636E\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point2D</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point3D</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">z</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> iMakePoint2D </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point2D</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> iMakePoint3D </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point3D</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">z</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">iMakePoint2D </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> iMakePoint3D</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">iMakePoint3D </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> iMakePoint2D</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ERROR: Point2D \u4E0D\u80FD\u8D4B\u503C\u7ED9 Point3D</span></span>
<span class="line"></span></code></pre></div><h5 id="\u53C2\u6570\u6570\u91CF" tabindex="-1">\u53C2\u6570\u6570\u91CF <a class="header-anchor" href="#\u53C2\u6570\u6570\u91CF" aria-hidden="true">#</a></h5><p>\u66F4\u5C11\u7684\u53C2\u6570\u6570\u91CF\u662F\u597D\u7684\uFF08\u5982\uFF1A\u51FD\u6570\u80FD\u591F\u9009\u62E9\u6027\u7684\u5FFD\u7565\u4E00\u4E9B\u591A\u4F59\u7684\u53C2\u6570\uFF09\uFF0C\u4F46\u662F\u4F60\u5F97\u4FDD\u8BC1\u6709\u8DB3\u591F\u7684\u53C2\u6570\u88AB\u4F7F\u7528\u4E86\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> iTakeSomethingAndPassItAnErr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Error</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;">/* \u505A\u4E00\u4E9B\u5176\u4ED6\u7684 */</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">iTakeSomethingAndPassItAnErr</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#82AAFF;">iTakeSomethingAndPassItAnErr</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#82AAFF;">iTakeSomethingAndPassItAnErr</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Error: \u53C2\u6570\u7C7B\u578B \`(err: any, data: any, more: any) =&gt; null\` \u4E0D\u80FD\u8D4B\u503C\u7ED9\u53C2\u6570\u7C7B\u578B \`(err: Error, data: any) =&gt; void\`</span></span>
<span class="line"><span style="color:#82AAFF;">iTakeSomethingAndPassItAnErr</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">more</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h5 id="\u53EF\u9009\u7684\u548C-rest-\u53C2\u6570" tabindex="-1">\u53EF\u9009\u7684\u548C rest \u53C2\u6570 <a class="header-anchor" href="#\u53EF\u9009\u7684\u548C-rest-\u53C2\u6570" aria-hidden="true">#</a></h5><p>\u53EF\u9009\u7684\uFF08\u9884\u5148\u786E\u5B9A\u7684\uFF09\u548C Rest \u53C2\u6570\uFF08\u4EFB\u4F55\u6570\u91CF\u7684\u53C2\u6570\uFF09\u90FD\u662F\u517C\u5BB9\u7684\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bas </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(...</span><span style="color:#A6ACCD;">args</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;">[]</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> bas</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">bas </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u53EF\u9009\u7684\uFF08\u4E0A\u4F8B\u5B50\u4E2D\u7684 <code>bar</code>\uFF09\u4E0E\u4E0D\u53EF\u9009\u7684\uFF08\u4E0A\u4F8B\u5B50\u4E2D\u7684 <code>foo</code>\uFF09\u4EC5\u5728\u9009\u9879\u4E3A <code>strictNullChecks</code> \u4E3A <code>false</code> \u65F6\u517C\u5BB9\u3002</p></div><h5 id="\u51FD\u6570\u53C2\u6570\u7C7B\u578B" tabindex="-1">\u51FD\u6570\u53C2\u6570\u7C7B\u578B <a class="header-anchor" href="#\u51FD\u6570\u53C2\u6570\u7C7B\u578B" aria-hidden="true">#</a></h5><p>\u53CC\u5411\u534F\u53D8\uFF08Bivariant\uFF09\uFF1A\u65E8\u5728\u652F\u6301\u5E38\u89C1\u7684\u4E8B\u4EF6\u5904\u7406\u65B9\u6848\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u4E8B\u4EF6\u7B49\u7EA7</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Event</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">timestamp</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MouseEvent</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Event</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">KeyEvent</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Event</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">keyCode</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u7B80\u5355\u7684\u4E8B\u4EF6\u76D1\u542C</span></span>
<span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EventType</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  Mouse</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Keyboard</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">addEventListener</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">eventType</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EventType</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">handler</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">n</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4E0D\u5B89\u5168\uFF0C\u4F46\u662F\u6709\u7528\uFF0C\u5E38\u89C1\u3002\u51FD\u6570\u53C2\u6570\u7684\u6BD4\u8F83\u662F\u53CC\u5411\u534F\u53D8\u3002</span></span>
<span class="line"><span style="color:#82AAFF;">addEventListener</span><span style="color:#A6ACCD;">(EventType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Mouse</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MouseEvent</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">y))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u5728\u5B89\u5168\u60C5\u666F\u4E0B\u7684\u4E00\u79CD\u4E0D\u597D\u65B9\u6848</span></span>
<span class="line"><span style="color:#82AAFF;">addEventListener</span><span style="color:#A6ACCD;">(EventType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Mouse</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">((&lt;</span><span style="color:#FFCB6B;">MouseEvent</span><span style="color:#A6ACCD;">&gt;e)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> (&lt;</span><span style="color:#FFCB6B;">MouseEvent</span><span style="color:#A6ACCD;">&gt;e)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">y))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">addEventListener</span><span style="color:#A6ACCD;">(EventType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Mouse</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> &lt;</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;">&gt;(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MouseEvent</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">y)))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4ECD\u7136\u4E0D\u5141\u8BB8\u660E\u786E\u7684\u9519\u8BEF\uFF0C\u5BF9\u5B8C\u5168\u4E0D\u517C\u5BB9\u7684\u7C7B\u578B\u4F1A\u5F3A\u5236\u68C0\u67E5</span></span>
<span class="line"><span style="color:#82AAFF;">addEventListener</span><span style="color:#A6ACCD;">(EventType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Mouse</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(e))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u540C\u6837\u7684\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u628A <code>Array&lt;Child&gt;</code> \u8D4B\u503C\u7ED9 <code>Array&lt;Base&gt;</code> \uFF08\u534F\u53D8\uFF09\uFF0C\u56E0\u4E3A\u51FD\u6570\u662F\u517C\u5BB9\u7684\u3002\u6570\u7EC4\u7684\u534F\u53D8\u9700\u8981\u6240\u6709\u7684\u51FD\u6570 <code>Array&lt;Child&gt;</code> \u90FD\u80FD\u8D4B\u503C\u7ED9 <code>Array&lt;Base&gt;</code>\uFF0C\u4F8B\u5982 <code>push(t: Child)</code> \u80FD\u88AB\u8D4B\u503C\u7ED9 <code>push(t: Base)</code>\uFF0C\u8FD9\u90FD\u53EF\u4EE5\u901A\u8FC7\u51FD\u6570\u53C2\u6570\u53CC\u5411\u534F\u53D8\u5B9E\u73B0\u3002</p><p>\u4E0B\u9762\u7684\u4EE3\u7801\u5BF9\u4E8E\u5176\u4ED6\u8BED\u8A00\u7684\u5F00\u53D1\u8005\u6765\u8BF4\uFF0C\u53EF\u80FD\u4F1A\u611F\u5230\u5F88\u56F0\u60D1\uFF0C\u56E0\u4E3A\u4ED6\u4EEC\u8BA4\u4E3A\u662F\u6709\u9519\u8BEF\u7684\uFF0C\u53EF\u662F Typescript \u5E76\u4E0D\u4F1A\u62A5\u9519\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point2D</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point3D</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">z</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> iTakePoint2D </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">point</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point2D</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> iTakePoint3D </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">point</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point3D</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">iTakePoint3D </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> iTakePoint2D</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok, \u8FD9\u662F\u5408\u7406\u7684</span></span>
<span class="line"><span style="color:#A6ACCD;">iTakePoint2D </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> iTakePoint3D</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok\uFF0C\u4E3A\u4EC0\u4E48\uFF1F</span></span>
<span class="line"></span></code></pre></div><h4 id="\u679A\u4E3E-1" tabindex="-1">\u679A\u4E3E <a class="header-anchor" href="#\u679A\u4E3E-1" aria-hidden="true">#</a></h4><ul><li>\u679A\u4E3E\u4E0E\u6570\u5B57\u7C7B\u578B\u76F8\u4E92\u517C\u5BB9</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Status</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  Ready</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Waiting</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> status </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Status</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Ready</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">status </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> num</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> status</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><ul><li>\u6765\u81EA\u4E8E\u4E0D\u540C\u679A\u4E3E\u7684\u679A\u4E3E\u53D8\u91CF\uFF0C\u88AB\u8BA4\u4E3A\u662F\u4E0D\u517C\u5BB9\u7684\uFF1A</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Status</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  Ready</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Waiting</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Color</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  Red</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Blue</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Green</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> status </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Status</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Ready</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> color </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Color</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Red</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">status </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> color</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"></span></code></pre></div><h4 id="\u7C7B" tabindex="-1">\u7C7B <a class="header-anchor" href="#\u7C7B" aria-hidden="true">#</a></h4><ul><li>\u4EC5\u4EC5\u53EA\u6709\u5B9E\u4F8B\u6210\u5458\u548C\u65B9\u6CD5\u4F1A\u76F8\u6BD4\u8F83\uFF0C\u6784\u9020\u51FD\u6570\u548C\u9759\u6001\u6210\u5458\u4E0D\u4F1A\u88AB\u68C0\u67E5\u3002</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Animal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">feet</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">numFeet</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Size</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">feet</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">meters</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Animal</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> s</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Size</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> s</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// OK</span></span>
<span class="line"><span style="color:#A6ACCD;">s </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// OK</span></span>
<span class="line"></span></code></pre></div><ul><li>\u79C1\u6709\u7684\u548C\u53D7\u4FDD\u62A4\u7684\u6210\u5458\u5FC5\u987B\u6765\u81EA\u4E8E\u76F8\u540C\u7684\u7C7B\u3002</li></ul><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Animal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">protected</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">feet</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Animal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> animal</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Animal</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> cat</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Cat</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">animal </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> cat</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#A6ACCD;">cat </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> animal</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Size</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">protected</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">feet</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Size</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">animal </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> size</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ERROR</span></span>
<span class="line"><span style="color:#A6ACCD;">size </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> animal</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ERROR</span></span>
<span class="line"></span></code></pre></div><h4 id="\u6CDB\u578B" tabindex="-1">\u6CDB\u578B <a class="header-anchor" href="#\u6CDB\u578B" aria-hidden="true">#</a></h4><p>TypeScript \u7C7B\u578B\u7CFB\u7EDF\u57FA\u4E8E\u53D8\u91CF\u7684\u7ED3\u6784\uFF0C\u4EC5\u5F53\u7C7B\u578B\u53C2\u6570\u5728\u88AB\u4E00\u4E2A\u6210\u5458\u4F7F\u7528\u65F6\uFF0C\u624D\u4F1A\u5F71\u54CD\u517C\u5BB9\u6027\u3002\u5982\u4E0B\u4F8B\u5B50\u4E2D\uFF0C<code>T</code> \u5BF9\u517C\u5BB9\u6027\u6CA1\u6709\u5F71\u54CD\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Empty</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Empty</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Empty</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> y</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"></span></code></pre></div><p>\u5F53 <code>T</code> \u88AB\u6210\u5458\u4F7F\u7528\u65F6\uFF0C\u5B83\u5C06\u5728\u5B9E\u4F8B\u5316\u6CDB\u578B\u540E\u5F71\u54CD\u517C\u5BB9\u6027\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Empty</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Empty</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Empty</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> y</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u5C1A\u672A\u5B9E\u4F8B\u5316\u6CDB\u578B\u53C2\u6570\uFF0C\u5219\u5728\u68C0\u67E5\u517C\u5BB9\u6027\u4E4B\u524D\u5C06\u5176\u66FF\u6362\u4E3A <code>any</code>\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> identity </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> reverse </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">U</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">U</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">U</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">identity </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> reverse</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok, \u56E0\u4E3A \`(x: any) =&gt; any\` \u5339\u914D \`(y: any) =&gt; any\`</span></span>
<span class="line"></span></code></pre></div><p>\u7C7B\u4E2D\u7684\u6CDB\u578B\u517C\u5BB9\u6027\u4E0E\u524D\u6587\u6240\u63D0\u53CA\u4E00\u81F4\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">add</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">val</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Animal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Animal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">meow</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// ..</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> animals </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Animal</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">animals</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Animal</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#A6ACCD;">animals</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cat</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> cats </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Cat</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">cats</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Animal</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"><span style="color:#A6ACCD;">cats</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cat</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"></span></code></pre></div><h4 id="\u811A\u6CE8\uFF1A\u4E0D\u53D8\u6027-invariance" tabindex="-1">\u811A\u6CE8\uFF1A\u4E0D\u53D8\u6027 (Invariance) <a class="header-anchor" href="#\u811A\u6CE8\uFF1A\u4E0D\u53D8\u6027-invariance" aria-hidden="true">#</a></h4><p>\u6211\u4EEC\u8BF4\u8FC7\uFF0C\u4E0D\u53D8\u6027\u53EF\u80FD\u662F\u552F\u4E00\u4E00\u4E2A\u542C\u8D77\u6765\u5408\u7406\u7684\u9009\u9879\uFF0C\u8FD9\u91CC\u6709\u4E00\u4E2A\u5173\u4E8E <code>contra</code> \u548C <code>co</code> \u7684\u53D8\u4F53\uFF0C\u88AB\u8BA4\u4E3A\u5BF9\u6570\u7EC4\u662F\u4E0D\u5B89\u5168\u7684\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Animal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Animal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">meow</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cat</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> animal </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Animal</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">animal</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> cat </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cat</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cat</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u591A\u6001</span></span>
<span class="line"><span style="color:#676E95;">// Animal &lt;= Cat</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">animal </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> cat</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#A6ACCD;">cat </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> animal</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ERROR: cat \u7EE7\u627F\u4E8E animal</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u6F14\u793A\u6BCF\u4E2A\u6570\u7EC4\u5F62\u5F0F</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> animalArr</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Animal</span><span style="color:#A6ACCD;">[] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [animal]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> catArr</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Cat</span><span style="color:#A6ACCD;">[] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [cat]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u660E\u663E\u7684\u574F\u5904\uFF0C\u9006\u53D8</span></span>
<span class="line"><span style="color:#676E95;">// Animal &lt;= Cat</span></span>
<span class="line"><span style="color:#676E95;">// Animal[] &gt;= Cat[]</span></span>
<span class="line"><span style="color:#A6ACCD;">catArr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> animalArr</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok, \u5982\u6709\u6709\u9006\u53D8</span></span>
<span class="line"><span style="color:#A6ACCD;">catArr[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">meow</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5141\u8BB8\uFF0C\u4F46\u662F\u4F1A\u5728\u8FD0\u884C\u65F6\u62A5\u9519</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u53E6\u5916\u4E00\u4E2A\u574F\u5904\uFF0C\u534F\u53D8</span></span>
<span class="line"><span style="color:#676E95;">// Animal &lt;= Cat</span></span>
<span class="line"><span style="color:#676E95;">// Animal[] &lt;= Cat[]</span></span>
<span class="line"><span style="color:#A6ACCD;">animalArr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> catArr</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok\uFF0C\u534F\u53D8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">animalArr</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Animal</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">another animal</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u4EC5\u4EC5\u662F push \u4E00\u4E2A animal \u81F3 carArr \u91CC</span></span>
<span class="line"><span style="color:#A6ACCD;">catArr</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;">c</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> c</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">meow</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5141\u8BB8\uFF0C\u4F46\u662F\u4F1A\u5728\u8FD0\u884C\u65F6\u62A5\u9519\u3002</span></span>
<span class="line"></span></code></pre></div><h3 id="never" tabindex="-1">Never <a class="header-anchor" href="#never" aria-hidden="true">#</a></h3><p>\u7A0B\u5E8F\u8BED\u8A00\u7684\u8BBE\u8BA1\u786E\u5B9E\u5E94\u8BE5\u5B58\u5728\u4E00\u4E2A\u5E95\u90E8\u7C7B\u578B\u7684\u6982\u5FF5\uFF0C\u5F53\u4F60\u5728\u5206\u6790\u4EE3\u7801\u6D41\u7684\u65F6\u5019\uFF0C\u8FD9\u4F1A\u662F\u4E00\u4E2A\u7406\u6240\u5F53\u7136\u5B58\u5728\u7684\u7C7B\u578B\u3002TypeScript \u5C31\u662F\u8FD9\u6837\u4E00\u79CD\u5206\u6790\u4EE3\u7801\u6D41\u7684\u8BED\u8A00\uFF08\u{1F60E}\uFF09\uFF0C\u56E0\u6B64\u5B83\u9700\u8981\u4E00\u4E2A\u53EF\u9760\u7684\uFF0C\u4EE3\u8868\u6C38\u8FDC\u4E0D\u4F1A\u53D1\u751F\u7684\u7C7B\u578B\u3002</p><p><code>never</code> \u7C7B\u578B\u662F TypeScript \u4E2D\u7684\u5E95\u5C42\u7C7B\u578B\u3002\u5B83\u81EA\u7136\u88AB\u5206\u914D\u7684\u4E00\u4E9B\u4F8B\u5B50\uFF1A</p><ul><li>\u4E00\u4E2A\u4ECE\u6765\u4E0D\u4F1A\u6709\u8FD4\u56DE\u503C\u7684\u51FD\u6570\uFF08\u5982\uFF1A\u5982\u679C\u51FD\u6570\u5185\u542B\u6709 <code>while(true) {}</code>\uFF09\uFF1B</li><li>\u4E00\u4E2A\u603B\u662F\u4F1A\u629B\u51FA\u9519\u8BEF\u7684\u51FD\u6570\uFF08\u5982\uFF1A<code>function foo() { throw new Error(&#39;Not Implemented&#39;) }</code>\uFF0C<code>foo</code> \u7684\u8FD4\u56DE\u7C7B\u578B\u662F <code>never</code>\uFF09\uFF1B</li></ul><p>\u4F60\u4E5F\u53EF\u4EE5\u5C06\u5B83\u7528\u505A\u7C7B\u578B\u6CE8\u89E3\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">never</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"></span></code></pre></div><p>\u4F46\u662F\uFF0C<code>never</code> \u7C7B\u578B\u4EC5\u80FD\u88AB\u8D4B\u503C\u7ED9\u53E6\u5916\u4E00\u4E2A <code>never</code>\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">never</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: number \u7C7B\u578B\u4E0D\u80FD\u8D4B\u503C\u7ED9 never \u7C7B\u578B</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// ok, \u4F5C\u4E3A\u51FD\u6570\u8FD4\u56DE\u7C7B\u578B\u7684 never</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">never</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Throw my hands in the air like I just dont care</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5F88\u68D2\uFF0C\u73B0\u5728\u8BA9\u6211\u4EEC\u770B\u770B\u5B83\u7684\u5173\u952E\u7528\u4F8B\u3002</p><h4 id="\u7528\u4F8B\uFF1A\u8BE6\u7EC6\u7684\u68C0\u67E5" tabindex="-1">\u7528\u4F8B\uFF1A\u8BE6\u7EC6\u7684\u68C0\u67E5 <a class="header-anchor" href="#\u7528\u4F8B\uFF1A\u8BE6\u7EC6\u7684\u68C0\u67E5" aria-hidden="true">#</a></h4><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u5982\u679C\u4E0D\u662F\u4E00\u4E2A never \u7C7B\u578B\uFF0C\u8FD9\u4F1A\u62A5\u9519\uFF1A</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// - \u4E0D\u662F\u6240\u6709\u6761\u4EF6\u90FD\u6709\u8FD4\u56DE\u503C \uFF08\u4E25\u683C\u6A21\u5F0F\u4E0B\uFF09</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// - \u6216\u8005\u68C0\u67E5\u5230\u65E0\u6CD5\u8BBF\u95EE\u7684\u4EE3\u7801</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u4F46\u662F\u7531\u4E8E TypeScript \u7406\u89E3 \`fail\` \u51FD\u6570\u8FD4\u56DE\u4E3A \`never\` \u7C7B\u578B</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u5B83\u53EF\u4EE5\u8BA9\u4F60\u8C03\u7528\u5B83\uFF0C\u56E0\u4E3A\u4F60\u53EF\u80FD\u4F1A\u5728\u8FD0\u884C\u65F6\u7528\u5B83\u6765\u505A\u5B89\u5168\u6216\u8005\u8BE6\u7EC6\u7684\u68C0\u67E5\u3002</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">fail</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Unexhaustive</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">fail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">never</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">message</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><code>never</code> \u4EC5\u80FD\u88AB\u8D4B\u503C\u7ED9\u53E6\u5916\u4E00\u4E2A <code>never</code> \u7C7B\u578B\uFF0C\u56E0\u6B64\u4F60\u53EF\u4EE5\u7528\u5B83\u6765\u8FDB\u884C\u7F16\u8BD1\u65F6\u7684\u5168\u9762\u7684\u68C0\u67E5\uFF0C\u6211\u4EEC\u5C06\u4F1A\u5728<a href="#%E8%BE%A8%E6%9E%90%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B">\u8FA8\u6790\u8054\u5408\u7C7B\u578B</a>\u4E2D\u8BB2\u89E3\u5B83\u3002</p><h4 id="\u4E0E-void-\u7684\u5DEE\u5F02" tabindex="-1">\u4E0E <code>void</code> \u7684\u5DEE\u5F02 <a class="header-anchor" href="#\u4E0E-void-\u7684\u5DEE\u5F02" aria-hidden="true">#</a></h4><p>\u4E00\u65E6\u6709\u4EBA\u544A\u8BC9\u4F60\uFF0C<code>never</code> \u8868\u793A\u4E00\u4E2A\u4ECE\u6765\u4E0D\u4F1A\u4F18\u96C5\u7684\u8FD4\u56DE\u7684\u51FD\u6570\u65F6\uFF0C\u4F60\u53EF\u80FD\u9A6C\u4E0A\u5C31\u4F1A\u60F3\u5230\u4E0E\u6B64\u7C7B\u4F3C\u7684 <code>void</code>\uFF0C\u7136\u800C\u5B9E\u9645\u4E0A\uFF0C<code>void</code> \u8868\u793A\u6CA1\u6709\u4EFB\u4F55\u7C7B\u578B\uFF0C<code>never</code> \u8868\u793A\u6C38\u8FDC\u4E0D\u5B58\u5728\u7684\u503C\u7684\u7C7B\u578B\u3002</p><p>\u5F53\u4E00\u4E2A\u51FD\u6570\u8FD4\u56DE\u7A7A\u503C\u65F6\uFF0C\u5B83\u7684\u8FD4\u56DE\u503C\u4E3A <code>void</code> \u7C7B\u578B\uFF0C\u4F46\u662F\uFF0C\u5F53\u4E00\u4E2A\u51FD\u6570\u6C38\u4E0D\u8FD4\u56DE\u65F6\uFF08\u6216\u8005\u603B\u662F\u629B\u51FA\u9519\u8BEF\uFF09\uFF0C\u5B83\u7684\u8FD4\u56DE\u503C\u4E3A <code>never</code> \u7C7B\u578B\u3002<code>void</code> \u7C7B\u578B\u53EF\u4EE5\u88AB\u8D4B\u503C\uFF08\u5728 <code>strictNullChecking</code> \u4E3A <code>false</code> \u65F6\uFF09\uFF0C\u4F46\u662F\u9664\u4E86 <code>never</code> \u672C\u8EAB\u4EE5\u5916\uFF0C\u5176\u4ED6\u4EFB\u4F55\u7C7B\u578B\u4E0D\u80FD\u8D4B\u503C\u7ED9 <code>never</code>\u3002</p><h3 id="\u8FA8\u6790\u8054\u5408\u7C7B\u578B-1" tabindex="-1">\u8FA8\u6790\u8054\u5408\u7C7B\u578B <a class="header-anchor" href="#\u8FA8\u6790\u8054\u5408\u7C7B\u578B-1" aria-hidden="true">#</a></h3><p>\u5F53\u7C7B\u4E2D\u542B\u6709<a href="#%E5%AD%97%E9%9D%A2%E9%87%8F%E7%B1%BB%E5%9E%8B">\u5B57\u9762\u91CF\u6210\u5458</a>\u65F6\uFF0C\u6211\u4EEC\u53EF\u4EE5\u7528\u8BE5\u7C7B\u7684\u5C5E\u6027\u6765\u8FA8\u6790\u8054\u5408\u7C7B\u578B\u3002</p><p>\u4F5C\u4E3A\u4E00\u4E2A\u4F8B\u5B50\uFF0C\u8003\u8651 <code>Square</code> \u548C <code>Rectangle</code> \u7684\u8054\u5408\u7C7B\u578B <code>Shape</code>\u3002<code>Square</code> \u548C <code>Rectangle</code>\u6709\u5171\u540C\u6210\u5458 <code>kind</code>\uFF0C\u56E0\u6B64 <code>kind</code> \u5B58\u5728\u4E8E <code>Shape</code> \u4E2D\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Square</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">square</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Rectangle</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rectangle</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">width</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">height</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Shape</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Square</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Rectangle</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u4F60\u4F7F\u7528\u7C7B\u578B\u4FDD\u62A4\u98CE\u683C\u7684\u68C0\u67E5\uFF08<code>==</code>\u3001<code>===</code>\u3001<code>!=</code>\u3001<code>!==</code>\uFF09\u6216\u8005\u4F7F\u7528\u5177\u6709\u5224\u65AD\u6027\u7684\u5C5E\u6027\uFF08\u5728\u8FD9\u91CC\u662F <code>kind</code>\uFF09\uFF0CTypeScript \u5C06\u4F1A\u8BA4\u4E3A\u4F60\u4F1A\u4F7F\u7528\u7684\u5BF9\u8C61\u7C7B\u578B\u4E00\u5B9A\u662F\u62E5\u6709\u7279\u6B8A\u5B57\u9762\u91CF\u7684\uFF0C\u5E76\u4E14\u5B83\u4F1A\u4E3A\u4F60\u81EA\u52A8\u628A\u7C7B\u578B\u8303\u56F4\u53D8\u5C0F\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">area</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Shape</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">square</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u73B0\u5728 TypeScript \u77E5\u9053 s \u7684\u7C7B\u578B\u662F Square</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u6240\u4EE5\u4F60\u73B0\u5728\u80FD\u5B89\u5168\u4F7F\u7528\u5B83</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">size</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">size</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u4E0D\u662F\u4E00\u4E2A square \uFF1F\u56E0\u6B64 TypeScript \u5C06\u4F1A\u63A8\u7B97\u51FA s \u4E00\u5B9A\u662F Rectangle</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u8BE6\u7EC6\u7684\u68C0\u67E5" tabindex="-1">\u8BE6\u7EC6\u7684\u68C0\u67E5 <a class="header-anchor" href="#\u8BE6\u7EC6\u7684\u68C0\u67E5" aria-hidden="true">#</a></h4><p>\u901A\u5E38\uFF0C\u8054\u5408\u7C7B\u578B\u7684\u6210\u5458\u6709\u4E00\u4E9B\u81EA\u5DF1\u7684\u884C\u4E3A\uFF08\u4EE3\u7801\uFF09\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Square</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">square</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Rectangle</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rectangle</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">width</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">height</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u6709\u4EBA\u4EC5\u4EC5\u662F\u6DFB\u52A0\u4E86 \`Circle\` \u7C7B\u578B</span></span>
<span class="line"><span style="color:#676E95;">// \u6211\u4EEC\u53EF\u80FD\u5E0C\u671B TypeScript \u80FD\u5728\u4EFB\u4F55\u88AB\u9700\u8981\u7684\u5730\u65B9\u629B\u51FA\u9519\u8BEF</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Circle</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">circle</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">radius</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Shape</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Square</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Rectangle</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Circle</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u4E00\u4E2A\u53EF\u80FD\u4F1A\u8BA9\u4F60\u7684\u4EE3\u7801\u53D8\u5DEE\u7684\u4F8B\u5B50\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">area</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Shape</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">square</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">size</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">size</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rectangle</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u5982\u679C\u4F60\u80FD\u8BA9 TypeScript \u7ED9\u4F60\u4E00\u4E2A\u9519\u8BEF\uFF0C\u8FD9\u662F\u4E0D\u662F\u5F88\u68D2\uFF1F</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4F60\u53EF\u4EE5\u901A\u8FC7\u4E00\u4E2A\u7B80\u5355\u7684\u5411\u4E0B\u601D\u60F3\uFF0C\u6765\u786E\u4FDD\u5757\u4E2D\u7684\u7C7B\u578B\u88AB\u63A8\u65AD\u4E3A\u4E0E <code>never</code> \u7C7B\u578B\u517C\u5BB9\u7684\u7C7B\u578B\u3002\u4F8B\u5982\uFF0C\u4F60\u53EF\u4EE5\u6DFB\u52A0\u4E00\u4E2A\u66F4\u8BE6\u7EC6\u7684\u68C0\u67E5\u6765\u6355\u83B7\u9519\u8BEF\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">area</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Shape</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">square</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">size</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">size</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rectangle</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// Error: &#39;Circle&#39; \u4E0D\u80FD\u88AB\u8D4B\u503C\u7ED9 &#39;never&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_exhaustiveCheck</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">never</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5B83\u5C06\u5F3A\u5236\u4F60\u6DFB\u52A0\u4E00\u79CD\u65B0\u7684\u6761\u4EF6\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">area</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Shape</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">square</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">size</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">size</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rectangle</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">circle</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Math</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PI</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">radius</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">**</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_exhaustiveCheck</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">never</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="switch" tabindex="-1">Switch <a class="header-anchor" href="#switch" aria-hidden="true">#</a></h4><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u4F60\u53EF\u4EE5\u901A\u8FC7 <code>switch</code> \u6765\u5B9E\u73B0\u4EE5\u4E0A\u4F8B\u5B50\u3002</p></div><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">area</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Shape</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">switch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">square</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">size</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">size</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rectangle</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">circle</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Math</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PI</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">radius</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">**</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">default</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_exhaustiveCheck</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">never</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="strictnullchecks" tabindex="-1">strictNullChecks <a class="header-anchor" href="#strictnullchecks" aria-hidden="true">#</a></h4><p>\u5982\u679C\u4F60\u4F7F\u7528 <code>strictNullChecks</code> \u9009\u9879\u6765\u505A\u8BE6\u7EC6\u7684\u68C0\u67E5\uFF0C\u4F60\u5E94\u8BE5\u8FD4\u56DE <code>_exhaustiveCheck</code> \u53D8\u91CF\uFF08\u7C7B\u578B\u662F <code>never</code>\uFF09\uFF0C\u5426\u5219 TypeScript \u53EF\u80FD\u4F1A\u63A8\u65AD\u8FD4\u56DE\u503C\u4E3A <code>undefined</code>\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">area</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Shape</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">switch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">square</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">size</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">size</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rectangle</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">circle</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Math</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PI</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">radius</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">**</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">default</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_exhaustiveCheck</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">never</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_exhaustiveCheck</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="redux" tabindex="-1">Redux <a class="header-anchor" href="#redux" aria-hidden="true">#</a></h4><p>Redux \u5E93\u6B63\u662F\u4F7F\u7528\u7684\u4E0A\u8FF0\u4F8B\u5B50\u3002</p><p>\u4EE5\u4E0B\u662F\u6DFB\u52A0\u4E86 TypeScript \u7C7B\u578B\u6CE8\u89E3\u7684<a href="https://github.com/reduxjs/redux#the-gist" target="_blank" rel="noreferrer">redux \u8981\u70B9</a>\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">createStore</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">redux</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Action</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">INCREMENT</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DECREMENT</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;"> * This is a reducer, a pure function with (state, action) =&gt; state signature.</span></span>
<span class="line"><span style="color:#676E95;"> * It describes how an action transforms the state into the next state.</span></span>
<span class="line"><span style="color:#676E95;"> *</span></span>
<span class="line"><span style="color:#676E95;"> * The shape of the state is up to you: it can be a primitive, an array, an object,</span></span>
<span class="line"><span style="color:#676E95;"> * or even an Immutable.js data structure. The only important part is that you should</span></span>
<span class="line"><span style="color:#676E95;"> * not mutate the state object, but return a new object if the state changes.</span></span>
<span class="line"><span style="color:#676E95;"> *</span></span>
<span class="line"><span style="color:#676E95;"> * In this example, we use a \`switch\` statement and strings, but you can use a helper that</span></span>
<span class="line"><span style="color:#676E95;"> * follows a different convention (such as function maps) if it makes sense for your</span></span>
<span class="line"><span style="color:#676E95;"> * project.</span></span>
<span class="line"><span style="color:#676E95;"> */</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">counter</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">state</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">action</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Action</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">switch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">action</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">type</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">INCREMENT</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">state</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DECREMENT</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">state</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">default</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Create a Redux store holding the state of your app.</span></span>
<span class="line"><span style="color:#676E95;">// Its API is { subscribe, dispatch, getState }.</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> store </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createStore</span><span style="color:#A6ACCD;">(counter)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// You can use subscribe() to update the UI in response to state changes.</span></span>
<span class="line"><span style="color:#676E95;">// Normally you&#39;d use a view binding library (e.g. React Redux) rather than subscribe() directly.</span></span>
<span class="line"><span style="color:#676E95;">// However it can also be handy to persist the current state in the localStorage.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">subscribe</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getState</span><span style="color:#A6ACCD;">()))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// The only way to mutate the internal state is to dispatch an action.</span></span>
<span class="line"><span style="color:#676E95;">// The actions can be serialized, logged or stored and later replayed.</span></span>
<span class="line"><span style="color:#A6ACCD;">store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">dispatch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">INCREMENT</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">// 1</span></span>
<span class="line"><span style="color:#A6ACCD;">store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">dispatch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">INCREMENT</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">// 2</span></span>
<span class="line"><span style="color:#A6ACCD;">store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">dispatch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DECREMENT</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">// 1</span></span>
<span class="line"></span></code></pre></div><p>\u4E0E TypeScript \u4E00\u8D77\u4F7F\u7528\u53EF\u4EE5\u6709\u6548\u7684\u9632\u6B62\u62FC\u5199\u9519\u8BEF\uFF0C\u5E76\u4E14\u80FD\u63D0\u9AD8\u91CD\u6784\u548C\u4E66\u5199\u6587\u6863\u5316\u4EE3\u7801\u7684\u80FD\u529B\u3002</p><h3 id="\u7D22\u5F15\u7B7E\u540D" tabindex="-1">\u7D22\u5F15\u7B7E\u540D <a class="header-anchor" href="#\u7D22\u5F15\u7B7E\u540D" aria-hidden="true">#</a></h3><p>\u53EF\u4EE5\u7528\u5B57\u7B26\u4E32\u8BBF\u95EE JavaScript \u4E2D\u7684\u5BF9\u8C61\uFF08TypeScript \u4E2D\u4E5F\u4E00\u6837\uFF09\uFF0C\u7528\u6765\u4FDD\u5B58\u5BF9\u5176\u4ED6\u5BF9\u8C61\u7684\u5F15\u7528\u3002</p><p>\u4F8B\u5982\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#A6ACCD;">foo[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">World</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(foo[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// World</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u5728\u952E <code>Hello</code> \u4E0B\u4FDD\u5B58\u4E86\u4E00\u4E2A\u5B57\u7B26\u4E32 <code>World</code>\uFF0C\u9664\u5B57\u7B26\u4E32\u5916\uFF0C\u5B83\u4E5F\u53EF\u4EE5\u4FDD\u5B58\u4EFB\u610F\u7684 JavaScript \u5BF9\u8C61\uFF0C\u4F8B\u5982\u4E00\u4E2A\u7C7B\u7684\u5B9E\u4F8B\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">log</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">message</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#A6ACCD;">foo[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Foo</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">World</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">foo[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// World</span></span>
<span class="line"></span></code></pre></div><p>\u5F53\u4F60\u4F20\u5165\u4E00\u4E2A\u5176\u4ED6\u5BF9\u8C61\u81F3\u7D22\u5F15\u7B7E\u540D\u65F6\uFF0CJavaScript \u4F1A\u5728\u5F97\u5230\u7ED3\u679C\u4E4B\u524D\u4F1A\u5148\u8C03\u7528 <code>.toString</code> \u65B9\u6CD5\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">toString</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">toString called</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#A6ACCD;">foo[obj] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">World</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// toString called</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(foo[obj])</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// toString called, World</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(foo[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Worldorld</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u53EA\u8981\u7D22\u5F15\u4F4D\u7F6E\u4F7F\u7528\u4E86 <code>obj</code>\uFF0C<code>toString</code> \u65B9\u6CD5\u90FD\u5C06\u4F1A\u88AB\u8C03\u7528\u3002</p></div><p>\u6570\u7EC4\u6709\u70B9\u7A0D\u5FAE\u4E0D\u540C\uFF0C\u5BF9\u4E8E\u4E00\u4E2A <code>number</code> \u7C7B\u578B\u7684\u7D22\u5F15\u7B7E\u540D\uFF0CJavaScript \u5F15\u64CE\u5C06\u4F1A\u5C1D\u8BD5\u53BB\u4F18\u5316\uFF08\u8FD9\u53D6\u51B3\u4E8E\u5B83\u662F\u5426\u662F\u4E00\u4E2A\u771F\u7684\u6570\u7EC4\u3001\u5B58\u50A8\u7684\u9879\u76EE\u7ED3\u6784\u662F\u5426\u5339\u914D\u7B49\uFF09\u3002\u56E0\u6B64\uFF0C<code>number</code> \u5E94\u8BE5\u88AB\u8003\u8651\u4F5C\u4E3A\u4E00\u4E2A\u6709\u6548\u7684\u5BF9\u8C61\u8BBF\u95EE\u5668\uFF08\u8FD9\u4E0E <code>string</code> \u4E0D\u540C\uFF09\uFF0C\u5982\u4E0B\u4F8B\u5B50\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">World</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(foo[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// World</span></span>
<span class="line"></span></code></pre></div><p>\u56E0\u6B64\uFF0C\u8FD9\u5C31\u662F JavaScript\u3002\u73B0\u5728\u8BA9\u6211\u4EEC\u770B\u770B TypeScript \u5BF9\u8FD9\u4E9B\u6982\u5FF5\u66F4\u4F18\u96C5\u7684\u5904\u7406\u3002</p><h4 id="typescript-\u7D22\u5F15\u7B7E\u540D" tabindex="-1">TypeScript \u7D22\u5F15\u7B7E\u540D <a class="header-anchor" href="#typescript-\u7D22\u5F15\u7B7E\u540D" aria-hidden="true">#</a></h4><p>JavaScript \u5728\u4E00\u4E2A\u5BF9\u8C61\u7C7B\u578B\u7684\u7D22\u5F15\u7B7E\u540D\u4E0A\u4F1A\u9690\u5F0F\u8C03\u7528 \xB7 \u65B9\u6CD5\uFF0C\u800C\u5728 TypeScript \u4E2D\uFF0C\u4E3A\u9632\u6B62\u521D\u5B66\u8005\u7838\u4F24\u81EA\u5DF1\u7684\u811A\uFF08\u6211\u603B\u662F\u770B\u5230 stackoverflow \u4E0A\u6709\u5F88\u591A JavaScript \u4F7F\u7528\u8005\u90FD\u4F1A\u8FD9\u6837\u3002\uFF09\uFF0C\u5B83\u5C06\u4F1A\u629B\u51FA\u4E00\u4E2A\u9519\u8BEF\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">toString</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// ERROR: \u7D22\u5F15\u7B7E\u540D\u5FC5\u987B\u4E3A string, number....</span></span>
<span class="line"><span style="color:#A6ACCD;">foo[obj] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">World</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// FIX: TypeScript \u5F3A\u5236\u4F60\u5FC5\u987B\u660E\u786E\u8FD9\u4E48\u505A\uFF1A</span></span>
<span class="line"><span style="color:#A6ACCD;">foo[obj</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#A6ACCD;">()] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">World</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5F3A\u5236\u7528\u6237\u5FC5\u987B\u660E\u786E\u7684\u5199\u51FA <code>toString()</code> \u7684\u539F\u56E0\u662F\uFF1A\u5728\u5BF9\u8C61\u4E0A\u9ED8\u8BA4\u6267\u884C\u7684 <code>toString</code> \u65B9\u6CD5\u662F\u6709\u5BB3\u7684\u3002\u4F8B\u5982 v8 \u5F15\u64CE\u4E0A\u603B\u662F\u4F1A\u8FD4\u56DE <code>[object Object]</code></p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">World</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(foo[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// World</span></span>
<span class="line"></span></code></pre></div><p>\u5F53\u7136\uFF0C\u6570\u5B57\u7C7B\u578B\u662F\u88AB\u5141\u8BB8\u7684\uFF0C\u8FD9\u662F\u56E0\u4E3A\uFF1A</p><ul><li>\u9700\u8981\u5BF9\u6570\u7EC4 / \u5143\u7EC4\u5B8C\u7F8E\u7684\u652F\u6301\uFF1B</li><li>\u5373\u4F7F\u4F60\u5728\u4E0A\u4F8B\u4E2D\u4F7F\u7528 <code>number</code> \u7C7B\u578B\u7684\u503C\u6765\u66FF\u4EE3 <code>obj</code>\uFF0C<code>number</code> \u7C7B\u578B\u9ED8\u8BA4\u7684 <code>toString</code> \u65B9\u6CD5\u5B9E\u73B0\u7684\u5F88\u53CB\u597D\uFF08\u4E0D\u662F <code>[object Object]</code>\uFF09\u3002</li></ul><p>\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">((</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 1</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">((</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 2</span></span>
<span class="line"></span></code></pre></div><p>\u56E0\u6B64\uFF0C\u6211\u4EEC\u6709\u4EE5\u4E0B\u7ED3\u8BBA\uFF1A</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>TypeScript \u7684\u7D22\u5F15\u7B7E\u540D\u5FC5\u987B\u662F <code>string</code> \u6216\u8005 <code>number</code>\u3002</p><p><code>symbols</code> \u4E5F\u662F\u6709\u6548\u7684\uFF0CTypeScript \u652F\u6301\u5B83\u3002\u5728\u63A5\u4E0B\u6765\u6211\u4EEC\u5C06\u4F1A\u8BB2\u89E3\u5B83\u3002</p></div><h4 id="\u58F0\u660E\u4E00\u4E2A\u7D22\u5F15\u7B7E\u540D" tabindex="-1">\u58F0\u660E\u4E00\u4E2A\u7D22\u5F15\u7B7E\u540D <a class="header-anchor" href="#\u58F0\u660E\u4E00\u4E2A\u7D22\u5F15\u7B7E\u540D" aria-hidden="true">#</a></h4><p>\u5728\u4E0A\u6587\u4E2D\uFF0C\u6211\u4EEC\u901A\u8FC7\u4F7F\u7528 <code>any</code> \u6765\u8BA9 TypeScript \u5141\u8BB8\u6211\u4EEC\u53EF\u4EE5\u505A\u4EFB\u610F\u6211\u4EEC\u60F3\u505A\u7684\u4E8B\u60C5\u3002\u5B9E\u9645\u4E0A\uFF0C\u6211\u4EEC\u53EF\u4EE5\u660E\u786E\u7684\u6307\u5B9A\u7D22\u5F15\u7B7E\u540D\u3002\u4F8B\u5982\uFF1A\u5047\u8BBE\u4F60\u60F3\u786E\u8BA4\u5B58\u50A8\u5728\u5BF9\u8C61\u4E2D\u4EFB\u4F55\u5185\u5BB9\u90FD\u7B26\u5408 <code>{ message: string }</code> \u7684\u7ED3\u6784\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7 <code>[index: string]: { message: string }</code> \u6765\u5B9E\u73B0\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  [</span><span style="color:#A6ACCD;">index</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">message</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u50A8\u5B58\u7684\u4E1C\u897F\u5FC5\u987B\u7B26\u5408\u7ED3\u6784</span></span>
<span class="line"><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#A6ACCD;">foo[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">message</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">some message</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Error, \u5FC5\u987B\u5305\u542B \`message\`</span></span>
<span class="line"><span style="color:#A6ACCD;">foo[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">messages</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">some message</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u8BFB\u53D6\u65F6\uFF0C\u4E5F\u4F1A\u6709\u7C7B\u578B\u68C0\u67E5</span></span>
<span class="line"><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#A6ACCD;">foo[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Error: messages \u4E0D\u5B58\u5728</span></span>
<span class="line"><span style="color:#A6ACCD;">foo[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">messages</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u7D22\u5F15\u7B7E\u540D\u7684\u540D\u79F0\uFF08\u5982\uFF1A<code>{ [index: string]: { message: string } }</code> \u91CC\u7684 <code>index</code> \uFF09\u9664\u4E86\u53EF\u8BFB\u6027\u5916\uFF0C\u5E76\u6CA1\u6709\u4EFB\u4F55\u610F\u4E49\u3002\u4F8B\u5982\uFF1A\u5982\u679C\u6709\u4E00\u4E2A\u7528\u6237\u540D\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528 <code>{ username: string}: { message: string }</code>\uFF0C\u8FD9\u6709\u5229\u4E8E\u4E0B\u4E00\u4E2A\u5F00\u53D1\u8005\u7406\u89E3\u4F60\u7684\u4EE3\u7801\u3002</p></div><p><code>number</code> \u7C7B\u578B\u7684\u7D22\u5F15\u4E5F\u652F\u6301\uFF1A<code>{ [count: number]: &#39;SomeOtherTypeYouWantToStoreEgRebate&#39; }</code>\u3002</p><h4 id="\u6240\u6709\u6210\u5458\u90FD\u5FC5\u987B\u7B26\u5408\u5B57\u7B26\u4E32\u7684\u7D22\u5F15\u7B7E\u540D" tabindex="-1">\u6240\u6709\u6210\u5458\u90FD\u5FC5\u987B\u7B26\u5408\u5B57\u7B26\u4E32\u7684\u7D22\u5F15\u7B7E\u540D <a class="header-anchor" href="#\u6240\u6709\u6210\u5458\u90FD\u5FC5\u987B\u7B26\u5408\u5B57\u7B26\u4E32\u7684\u7D22\u5F15\u7B7E\u540D" aria-hidden="true">#</a></h4><p>\u5F53\u4F60\u58F0\u660E\u4E00\u4E2A\u7D22\u5F15\u7B7E\u540D\u65F6\uFF0C\u6240\u6709\u660E\u786E\u7684\u6210\u5458\u90FD\u5FC5\u987B\u7B26\u5408\u7D22\u5F15\u7B7E\u540D\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  [</span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Error</span></span>
<span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  [</span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: y \u5C5E\u6027\u5FC5\u987B\u4E3A number \u7C7B\u578B</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u53EF\u4EE5\u7ED9\u4F60\u63D0\u4F9B\u5B89\u5168\u6027\uFF0C\u4EFB\u4F55\u4EE5\u5B57\u7B26\u4E32\u7684\u8BBF\u95EE\u90FD\u80FD\u5F97\u5230\u76F8\u540C\u7ED3\u679C\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  [</span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u76F4\u63A5</span></span>
<span class="line"><span style="color:#A6ACCD;">foo[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">x</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// number</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u95F4\u63A5</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">x</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">foo[x]</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// number</span></span>
<span class="line"></span></code></pre></div><h4 id="\u4F7F\u7528\u4E00\u7EC4\u6709\u9650\u7684\u5B57\u7B26\u4E32\u5B57\u9762\u91CF" tabindex="-1">\u4F7F\u7528\u4E00\u7EC4\u6709\u9650\u7684\u5B57\u7B26\u4E32\u5B57\u9762\u91CF <a class="header-anchor" href="#\u4F7F\u7528\u4E00\u7EC4\u6709\u9650\u7684\u5B57\u7B26\u4E32\u5B57\u9762\u91CF" aria-hidden="true">#</a></h4><p>\u4E00\u4E2A\u7D22\u5F15\u7B7E\u540D\u53EF\u4EE5\u901A\u8FC7\u6620\u5C04\u7C7B\u578B\u6765\u4F7F\u7D22\u5F15\u5B57\u7B26\u4E32\u4E3A\u8054\u5408\u7C7B\u578B\u4E2D\u7684\u4E00\u5458\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Index</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">c</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FromIndex</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> [</span><span style="color:#FFCB6B;">k</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Index</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> good</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FromIndex</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Error:</span></span>
<span class="line"><span style="color:#676E95;">// \`{ b: 1, c: 2, d: 3 }\` \u4E0D\u80FD\u5206\u914D\u7ED9 &#39;FromIndex&#39;</span></span>
<span class="line"><span style="color:#676E95;">// \u5BF9\u8C61\u5B57\u9762\u91CF\u53EA\u80FD\u6307\u5B9A\u5DF2\u77E5\u7C7B\u578B\uFF0C&#39;d&#39; \u4E0D\u5B58\u5728 &#39;FromIndex&#39; \u7C7B\u578B\u4E0A</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bad</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FromIndex</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">d</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u901A\u5E38\u4E0E <code>keyof/typeof</code> \u4E00\u8D77\u4F7F\u7528\uFF0C\u6765\u83B7\u53D6\u53D8\u91CF\u7684\u7C7B\u578B\uFF0C\u5728\u4E0B\u4E00\u7AE0\u8282\u4E2D\uFF0C\u6211\u4EEC\u5C06\u89E3\u91CA\u5B83\u3002</p><p>\u53D8\u91CF\u7684\u89C4\u5219\u4E00\u822C\u53EF\u4EE5\u5EF6\u8FDF\u88AB\u63A8\u65AD\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FromSomeIndex</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">K</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> [</span><span style="color:#FFCB6B;">key</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">K</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><h4 id="\u540C\u65F6\u62E5\u6709-string-\u548C-number-\u7C7B\u578B\u7684\u7D22\u5F15\u7B7E\u540D" tabindex="-1">\u540C\u65F6\u62E5\u6709 <code>string</code> \u548C <code>number</code> \u7C7B\u578B\u7684\u7D22\u5F15\u7B7E\u540D <a class="header-anchor" href="#\u540C\u65F6\u62E5\u6709-string-\u548C-number-\u7C7B\u578B\u7684\u7D22\u5F15\u7B7E\u540D" aria-hidden="true">#</a></h4><p>\u8FD9\u5E76\u4E0D\u662F\u4E00\u4E2A\u5E38\u89C1\u7684\u7528\u4F8B\uFF0C\u4F46\u662F TypeScript \u652F\u6301\u5B83\u3002</p><p><code>string</code> \u7C7B\u578B\u7684\u7D22\u5F15\u7B7E\u540D\u6BD4 <code>number</code> \u7C7B\u578B\u7684\u7D22\u5F15\u7B7E\u540D\u66F4\u4E25\u683C\u3002\u8FD9\u662F\u6545\u610F\u8BBE\u8BA1\uFF0C\u5B83\u5141\u8BB8\u4F60\u6709\u5982\u4E0B\u7C7B\u578B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ArrStr</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  [</span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5FC5\u987B\u5305\u62EC\u6240\u7528\u6210\u5458\u7C7B\u578B</span></span>
<span class="line"><span style="color:#A6ACCD;">  [</span><span style="color:#A6ACCD;">index</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5B57\u7B26\u4E32\u7D22\u5F15\u7C7B\u578B\u7684\u5B50\u7EA7</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// example</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">length</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u7D22\u5F15\u7B7E\u540D\u7684\u5D4C\u5957" tabindex="-1">\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u7D22\u5F15\u7B7E\u540D\u7684\u5D4C\u5957 <a class="header-anchor" href="#\u8BBE\u8BA1\u6A21\u5F0F\uFF1A\u7D22\u5F15\u7B7E\u540D\u7684\u5D4C\u5957" aria-hidden="true">#</a></h4><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u6DFB\u52A0\u7D22\u5F15\u7B7E\u540D\u65F6\uFF0C\u9700\u8981\u8003\u8651\u7684 API\u3002</p></div><p>\u5728 JavaScript \u793E\u533A\u4F60\u5C06\u4F1A\u89C1\u5230\u5F88\u591A\u6EE5\u7528\u7D22\u5F15\u7B7E\u540D\u7684 API\u3002\u5982 JavaScript \u5E93\u4E2D\u4F7F\u7528 CSS \u7684\u5E38\u89C1\u6A21\u5F0F\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">NestedCSS</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// strictNullChecks=false \u65F6\u7D22\u5F15\u7B7E\u540D\u53EF\u4E3A undefined</span></span>
<span class="line"><span style="color:#A6ACCD;">  [</span><span style="color:#A6ACCD;">selector</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">NestedCSS</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> example</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">NestedCSS</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">red</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">.subclass</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">blue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>\u5C3D\u91CF\u4E0D\u8981\u4F7F\u7528\u8FD9\u79CD\u628A\u5B57\u7B26\u4E32\u7D22\u5F15\u7B7E\u540D\u4E0E\u6709\u6548\u53D8\u91CF\u6DF7\u5408\u4F7F\u7528\u3002\u5982\u679C\u5C5E\u6027\u540D\u79F0\u4E2D\u6709\u62FC\u5199\u9519\u8BEF\uFF0C\u8FD9\u4E2A\u9519\u8BEF\u4E0D\u4F1A\u88AB\u6355\u83B7\u5230\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> failsSilently</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">NestedCSS</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">colour</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">red</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// &#39;colour&#39; \u4E0D\u4F1A\u88AB\u6355\u6349\u5230\u9519\u8BEF</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>\u53D6\u800C\u4EE3\u4E4B\uFF0C\u6211\u4EEC\u628A\u7D22\u5F15\u7B7E\u540D\u5206\u79BB\u5230\u81EA\u5DF1\u7684\u5C5E\u6027\u91CC\uFF0C\u5982\u547D\u540D\u4E3A <code>nest</code>\uFF08\u6216\u8005 <code>children</code>\u3001<code>subnodes</code> \u7B49\uFF09\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">NestedCSS</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">nest</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    [</span><span style="color:#A6ACCD;">selector</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">NestedCSS</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> example</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">NestedCSS</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">red</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">nest</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">.subclass</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">blue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> failsSliently</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">NestedCSS</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">colour</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">red</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">// TS Error: \u672A\u77E5\u5C5E\u6027 &#39;colour&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u7D22\u5F15\u7B7E\u540D\u4E2D\u6392\u9664\u67D0\u4E9B\u5C5E\u6027" tabindex="-1">\u7D22\u5F15\u7B7E\u540D\u4E2D\u6392\u9664\u67D0\u4E9B\u5C5E\u6027 <a class="header-anchor" href="#\u7D22\u5F15\u7B7E\u540D\u4E2D\u6392\u9664\u67D0\u4E9B\u5C5E\u6027" aria-hidden="true">#</a></h4><p>\u6709\u65F6\uFF0C\u4F60\u9700\u8981\u628A\u5C5E\u6027\u5408\u5E76\u81F3\u7D22\u5F15\u7B7E\u540D\uFF08\u867D\u7136\u6211\u4EEC\u5E76\u4E0D\u5EFA\u8BAE\u8FD9\u4E48\u505A\uFF0C\u4F60\u5E94\u8BE5\u4F7F\u7528\u4E0A\u6587\u4E2D\u63D0\u5230\u7684\u5D4C\u5957\u7D22\u5F15\u7B7E\u540D\u7684\u5F62\u5F0F\uFF09\uFF0C\u5982\u4E0B\u4F8B\u5B50\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FieldState</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FromState</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">isValid</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: \u4E0D\u7B26\u5408\u7D22\u5F15\u7B7E\u540D</span></span>
<span class="line"><span style="color:#A6ACCD;">  [</span><span style="color:#A6ACCD;">filedName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FieldState</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>TypeScript \u4F1A\u62A5\u9519\uFF0C\u56E0\u4E3A\u6DFB\u52A0\u7684\u7D22\u5F15\u7B7E\u540D\uFF0C\u5E76\u4E0D\u517C\u5BB9\u5B83\u539F\u6709\u7684\u7C7B\u578B\uFF0C\u4F7F\u7528\u4EA4\u53C9\u7C7B\u578B\u53EF\u4EE5\u89E3\u51B3\u4E0A\u8FF0\u95EE\u9898\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FieldState</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FormState</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">isValid</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> [</span><span style="color:#A6ACCD;">fieldName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FieldState</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>\u8BF7\u6CE8\u610F\u5C3D\u7BA1\u4F60\u53EF\u4EE5\u58F0\u660E\u5B83\u81F3\u4E00\u4E2A\u5DF2\u5B58\u5728\u7684 TypeScript \u7C7B\u578B\u4E0A\uFF0C\u4F46\u662F\u4F60\u4E0D\u80FD\u521B\u5EFA\u5982\u4E0B\u7684\u5BF9\u8C61\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FieldState</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FormState</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">isValid</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> [</span><span style="color:#A6ACCD;">fieldName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FieldState</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u5C06\u5B83\u7528\u4E8E\u4ECE\u67D0\u4E9B\u5730\u65B9\u83B7\u53D6\u7684 JavaScript \u5BF9\u8C61</span></span>
<span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FormState</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> isValidBool </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">isValid</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> somethingFieldState </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">something</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4F7F\u7528\u5B83\u6765\u521B\u5EFA\u4E00\u4E2A\u5BF9\u8C61\u65F6\uFF0C\u5C06\u4E0D\u4F1A\u5DE5\u4F5C</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FormState</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// &#39;isValid&#39; \u4E0D\u80FD\u8D4B\u503C\u7ED9 &#39;FieldState&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">isValid</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><h3 id="\u6D41\u52A8\u7684\u7C7B\u578B" tabindex="-1">\u6D41\u52A8\u7684\u7C7B\u578B <a class="header-anchor" href="#\u6D41\u52A8\u7684\u7C7B\u578B" aria-hidden="true">#</a></h3><p>TypeScript \u7C7B\u578B\u7CFB\u7EDF\u975E\u5E38\u5F3A\u5927\uFF0C\u5B83\u652F\u6301\u5176\u4ED6\u4EFB\u4F55\u5355\u4E00\u8BED\u8A00\u65E0\u6CD5\u5B9E\u73B0\u7684\u7C7B\u578B\u6D41\u52A8\u548C\u7C7B\u578B\u7247\u6BB5\u3002</p><p>\u8FD9\u662F\u56E0\u4E3A TypeScript \u7684\u8BBE\u8BA1\u76EE\u7684\u4E4B\u4E00\u662F\u8BA9\u4F60\u65E0\u7F1D\u4E0E\u50CF JavaScript \u8FD9\u7C7B\u9AD8\u52A8\u6001\u7684\u8BED\u8A00\u4E00\u8D77\u5DE5\u4F5C\u3002\u5728\u8FD9\u91CC\uFF0C\u6211\u4EEC\u4ECB\u7ECD\u4E00\u4E9B\u5728 TypeScript \u4E2D\u4F7F\u7528\u79FB\u52A8\u7C7B\u578B\u7684\u6280\u5DE7\u3002</p><p>\u5173\u952E\u7684\u52A8\u673A\uFF1A\u5F53\u4F60\u6539\u53D8\u4E86\u5176\u4E2D\u4E00\u4E2A\u65F6\uFF0C\u5176\u4ED6\u76F8\u5173\u7684\u4F1A\u81EA\u52A8\u66F4\u65B0\uFF0C\u5E76\u4E14\u5F53\u6709\u4E8B\u60C5\u53D8\u7CDF\u7CD5\u65F6\uFF0C\u4F60\u4F1A\u5F97\u5230\u4E00\u4E2A\u53CB\u597D\u7684\u63D0\u793A\uFF0C\u5C31\u597D\u50CF\u4E00\u4E2A\u88AB\u7CBE\u5FC3\u8BBE\u8BA1\u8FC7\u7684\u7EA6\u675F\u7CFB\u7EDF\u3002</p><h4 id="\u590D\u5236\u7C7B\u578B\u548C\u503C" tabindex="-1">\u590D\u5236\u7C7B\u578B\u548C\u503C <a class="header-anchor" href="#\u590D\u5236\u7C7B\u578B\u548C\u503C" aria-hidden="true">#</a></h4><p>\u5982\u679C\u4F60\u60F3\u79FB\u52A8\u4E00\u4E2A\u7C7B\uFF0C\u4F60\u53EF\u80FD\u4F1A\u60F3\u8981\u505A\u4EE5\u4E0B\u4E8B\u60C5\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> Bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Foo</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: \u4E0D\u80FD\u627E\u5230\u540D\u79F0 &#39;Bar&#39;</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4F1A\u5F97\u5230\u4E00\u4E2A\u9519\u8BEF\uFF0C\u56E0\u4E3A <code>const</code> \u4EC5\u4EC5\u662F\u590D\u5236\u4E86 <code>Foo</code> \u5230\u4E00\u4E2A\u53D8\u91CF\u58F0\u660E\u7A7A\u95F4\uFF0C\u56E0\u6B64\u4F60\u65E0\u6CD5\u628A <code>Bar</code> \u5F53\u4F5C\u4E00\u4E2A\u7C7B\u578B\u58F0\u660E\u4F7F\u7528\u3002\u6B63\u786E\u7684\u65B9\u5F0F\u662F\u4F7F\u7528 <code>import</code> \u5173\u952E\u5B57\uFF0C\u8BF7\u6CE8\u610F\uFF0C\u5982\u679C\u4F60\u5728\u4F7F\u7528 <code>namespace</code> \u6216\u8005 <code>modules</code>\uFF0C\u4F7F\u7528 <code>import</code> \u662F\u4F60\u552F\u4E00\u80FD\u7528\u7684\u65B9\u5F0F\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">importing</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">export</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">class</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> Bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">importing</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Foo</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Bar</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E2A <code>import</code> \u6280\u5DE7\uFF0C\u4EC5\u9002\u5408\u4E8E\u7C7B\u578B\u548C\u53D8\u91CF\u3002</p><h4 id="\u6355\u83B7\u53D8\u91CF\u7684\u7C7B\u578B" tabindex="-1">\u6355\u83B7\u53D8\u91CF\u7684\u7C7B\u578B <a class="header-anchor" href="#\u6355\u83B7\u53D8\u91CF\u7684\u7C7B\u578B" aria-hidden="true">#</a></h4><p>\u4F60\u53EF\u4EE5\u901A\u8FC7 <code>typeof</code> \u64CD\u4F5C\u7B26\u5728\u7C7B\u578B\u6CE8\u89E3\u4E2D\u4F7F\u7528\u53D8\u91CF\u3002\u8FD9\u5141\u8BB8\u4F60\u544A\u8BC9\u7F16\u8BD1\u5668\uFF0C\u4E00\u4E2A\u53D8\u91CF\u7684\u7C7B\u578B\u4E0E\u5176\u4ED6\u7C7B\u578B\u76F8\u540C\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// &#39;bar&#39; \u7C7B\u578B\u4E0E &#39;foo&#39; \u7C7B\u578B\u76F8\u540C\uFF08\u5728\u8FD9\u91CC\u662F\uFF1A &#39;number&#39;\uFF09</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">456</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#A6ACCD;">bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">789</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error: &#39;string&#39; \u4E0D\u80FD\u5206\u914D\u7ED9 &#39;number&#39; \u7C7B\u578B</span></span>
<span class="line"></span></code></pre></div><h4 id="\u6355\u83B7\u7C7B\u6210\u5458\u7684\u7C7B\u578B" tabindex="-1">\u6355\u83B7\u7C7B\u6210\u5458\u7684\u7C7B\u578B <a class="header-anchor" href="#\u6355\u83B7\u7C7B\u6210\u5458\u7684\u7C7B\u578B" aria-hidden="true">#</a></h4><p>\u4E0E\u6355\u83B7\u53D8\u91CF\u7684\u7C7B\u578B\u76F8\u4F3C\uFF0C\u4F60\u4EC5\u4EC5\u662F\u9700\u8981\u58F0\u660E\u4E00\u4E2A\u53D8\u91CF\u7528\u6765\u6355\u83B7\u5230\u7684\u7C7B\u578B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u6211\u4EEC\u60F3\u8981\u6355\u83B7\u7684\u7C7B\u578B</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> _foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4E0E\u4E4B\u524D\u505A\u6CD5\u76F8\u540C</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#A6ACCD;"> _foo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="\u6355\u83B7\u5B57\u7B26\u4E32\u7C7B\u578B" tabindex="-1">\u6355\u83B7\u5B57\u7B26\u4E32\u7C7B\u578B <a class="header-anchor" href="#\u6355\u83B7\u5B57\u7B26\u4E32\u7C7B\u578B" aria-hidden="true">#</a></h4><p>\u8BB8\u591A JavaScript \u5E93\u548C\u6846\u67B6\u90FD\u4F7F\u7528\u539F\u59CB\u7684 JavaScript \u5B57\u7B26\u4E32\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528 <code>const</code> \u5B9A\u4E49\u4E00\u4E2A\u53D8\u91CF\u6355\u83B7\u5B83\u7684\u7C7B\u578B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u6355\u83B7\u5B57\u7B26\u4E32\u7684\u7C7B\u578B\u4E0E\u503C</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello World</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4F7F\u7528\u4E00\u4E2A\u6355\u83B7\u7684\u7C7B\u578B</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// bar \u4EC5\u80FD\u88AB\u8D4B\u503C &#39;Hello World&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello World</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#A6ACCD;">bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">anything else</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u8FD9\u4E2A\u4F8B\u5B50\u91CC\uFF0C<code>bar</code> \u6709\u5B57\u9762\u91CF\u7C7B\u578B <code>Hello World</code>\uFF0C\u6211\u4EEC\u5728<a href="#%E5%AD%97%E9%9D%A2%E9%87%8F%E7%B1%BB%E5%9E%8B">\u5B57\u9762\u91CF\u7C7B\u578B</a>\u7AE0\u8282\u5DF2\u7ECF\u6DF1\u5165\u8BA8\u8BBA\u3002</p><h4 id="\u6355\u83B7\u952E\u7684\u540D\u79F0" tabindex="-1">\u6355\u83B7\u952E\u7684\u540D\u79F0 <a class="header-anchor" href="#\u6355\u83B7\u952E\u7684\u540D\u79F0" aria-hidden="true">#</a></h4><p>keyof \u64CD\u4F5C\u7B26\u80FD\u8BA9\u4F60\u6355\u83B7\u4E00\u4E2A\u7C7B\u578B\u7684\u952E\u3002\u4F8B\u5982\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528\u5B83\u6765\u6355\u83B7\u53D8\u91CF\u7684\u952E\u540D\u79F0\uFF0C\u5728\u901A\u8FC7\u4F7F\u7528 typeof \u6765\u83B7\u53D6\u7C7B\u578B\u4E4B\u540E\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> colors </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">red</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">red</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">blue</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">blue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Colors</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">keyof</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#A6ACCD;"> colors</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Colors</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// color \u7684\u7C7B\u578B\u662F &#39;red&#39; | &#39;blue&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">color </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">red</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#A6ACCD;">color </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">blue</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ok</span></span>
<span class="line"><span style="color:#A6ACCD;">color </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">anythingElse</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Error</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u5141\u8BB8\u4F60\u5F88\u5BB9\u6613\u5730\u62E5\u6709\u50CF\u5B57\u7B26\u4E32\u679A\u4E3E+\u5E38\u91CF\u8FD9\u6837\u7684\u7C7B\u578B\uFF0C\u5982\u4E0A\u4F8B\u6240\u793A\u3002</p><h3 id="\u5F02\u5E38\u5904\u7406" tabindex="-1">\u5F02\u5E38\u5904\u7406 <a class="header-anchor" href="#\u5F02\u5E38\u5904\u7406" aria-hidden="true">#</a></h3><p>JavaScript \u6709\u4E00\u4E2A <code>Error</code> \u7C7B\uFF0C\u7528\u4E8E\u5904\u7406\u5F02\u5E38\u3002\u4F60\u53EF\u4EE5\u901A\u8FC7 <code>throw</code> \u5173\u952E\u5B57\u6765\u629B\u51FA\u4E00\u4E2A\u9519\u8BEF\u3002\u7136\u540E\u901A\u8FC7 <code>try/catch</code> \u5757\u6765\u6355\u83B7\u6B64\u9519\u8BEF\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Something bad happened</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">catch</span><span style="color:#A6ACCD;"> (e) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u9519\u8BEF\u7684\u5B50\u7C7B\u578B" tabindex="-1">\u9519\u8BEF\u7684\u5B50\u7C7B\u578B <a class="header-anchor" href="#\u9519\u8BEF\u7684\u5B50\u7C7B\u578B" aria-hidden="true">#</a></h4><p>\u9664\u5185\u7F6E\u7684 <code>Error</code> \u7C7B\u5916\uFF0C\u8FD8\u6709\u4E00\u4E9B\u989D\u5916\u7684\u5185\u7F6E\u9519\u8BEF\uFF0C\u5B83\u4EEC\u7EE7\u627F\u81EA <code>Error</code> \u7C7B\uFF1A</p><h5 id="rangeerror" tabindex="-1">RangeError <a class="header-anchor" href="#rangeerror" aria-hidden="true">#</a></h5><p>\u5F53\u6570\u5B57\u7C7B\u578B\u53D8\u91CF\u6216\u8005\u53C2\u6570\u8D85\u51FA\u5176\u6709\u6548\u8303\u56F4\u65F6\uFF0C\u51FA\u73B0 <code>RangeError</code> \u7684\u9519\u8BEF\u63D0\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u4F7F\u7528\u8FC7\u591A\u53C2\u6570\u8C03\u7528 console</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">apply</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Array</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1000000000</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// RangeError: \u6570\u7EC4\u957F\u5EA6\u65E0\u6548</span></span>
<span class="line"></span></code></pre></div><h5 id="referenceerror" tabindex="-1">ReferenceError <a class="header-anchor" href="#referenceerror" aria-hidden="true">#</a></h5><p>\u5F53\u5F15\u7528\u65E0\u6548\u65F6\uFF0C\u4F1A\u51FA\u73B0 <code>ReferenceError</code> \u7684\u9519\u8BEF\u63D0\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">use strict</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(notValidVar)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ReferenceError: notValidVar \u672A\u5B9A\u4E49</span></span>
<span class="line"></span></code></pre></div><h5 id="syntaxerror" tabindex="-1">SyntaxError <a class="header-anchor" href="#syntaxerror" aria-hidden="true">#</a></h5><p>\u5F53\u89E3\u6790\u65E0\u6548 JavaScript \u4EE3\u7801\u65F6\uFF0C\u4F1A\u51FA\u73B0 <code>SyntaxError</code> \u7684\u9519\u8BEF\u63D0\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">***</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;">// SyntaxError: \u65E0\u6548\u7684\u6807\u8BB0 *</span></span>
<span class="line"></span></code></pre></div><h5 id="typeerror" tabindex="-1">TypeError <a class="header-anchor" href="#typeerror" aria-hidden="true">#</a></h5><p>\u53D8\u91CF\u6216\u8005\u53C2\u6570\u4E0D\u662F\u6709\u6548\u7C7B\u578B\u65F6\uFF0C\u4F1A\u51FA\u73B0 <code>TypeError</code> \u7684\u9519\u8BEF\u63D0\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1.2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toPrecision</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// TypeError: &#39;1.2&#39;.toPrecision \u4E0D\u662F\u51FD\u6570\u3002</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h5 id="urierror" tabindex="-1">URIError <a class="header-anchor" href="#urierror" aria-hidden="true">#</a></h5><p>\u5F53\u4F20\u5165\u65E0\u6548\u53C2\u6570\u81F3 <code>encodeURI()</code> \u548C <code>decodeURI()</code> \u65F6\uFF0C\u4F1A\u51FA\u73B0 <code>URIError</code> \u7684\u9519\u8BEF\u63D0\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#82AAFF;">decodeURI</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// URIError: URL \u5F02\u5E38</span></span>
<span class="line"></span></code></pre></div><h4 id="\u4F7F\u7528-error" tabindex="-1">\u4F7F\u7528 <code>Error</code> <a class="header-anchor" href="#\u4F7F\u7528-error" aria-hidden="true">#</a></h4><p>JavaScript \u521D\u5B66\u8005\u53EF\u80FD\u6709\u65F6\u5019\u4EC5\u4EC5\u662F\u629B\u51FA\u4E00\u4E2A\u539F\u59CB\u5B57\u7B26\u4E32\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">World</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(foo[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// World</span></span>
<span class="line"></span></code></pre></div><p>**\u4E0D\u8981\u8FD9\u4E48\u505A\uFF0C**\u4F7F\u7528 <code>Error</code> \u5BF9\u8C61\u7684\u57FA\u672C\u597D\u5904\u662F\uFF0C\u5B83\u80FD\u81EA\u52A8\u8DDF\u8E2A\u5806\u6808\u7684\u5C5E\u6027\u6784\u5EFA\u4EE5\u53CA\u751F\u6210\u4F4D\u7F6E\u3002</p><p>\u539F\u59CB\u5B57\u7B26\u4E32\u4F1A\u5BFC\u81F4\u6781\u5DEE\u7684\u8C03\u8BD5\u4F53\u9A8C\uFF0C\u5E76\u4E14\u5728\u5206\u6790\u65E5\u5FD7\u65F6\uFF0C\u5C06\u4F1A\u53D8\u5F97\u9519\u7EFC\u590D\u6742\u3002</p><h4 id="\u4F60\u5E76\u4E0D\u9700\u8981-throw-\u629B\u51FA\u4E00\u4E2A\u9519\u8BEF" tabindex="-1">\u4F60\u5E76\u4E0D\u9700\u8981 <code>throw</code> \u629B\u51FA\u4E00\u4E2A\u9519\u8BEF <a class="header-anchor" href="#\u4F60\u5E76\u4E0D\u9700\u8981-throw-\u629B\u51FA\u4E00\u4E2A\u9519\u8BEF" aria-hidden="true">#</a></h4><p>\u4F20\u9012\u4E00\u4E2A <code>Error</code> \u5BF9\u8C61\u662F\u6CA1\u95EE\u9898\u7684\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u5728 <code>Node.js</code> \u56DE\u8C03\u51FD\u6570\u4E2D\u975E\u5E38\u5E38\u89C1\uFF0C\u5B83\u7528\u7B2C\u4E00\u4E2A\u53C2\u6570\u4F5C\u4E3A\u9519\u8BEF\u5BF9\u8C61\u8FDB\u884C\u56DE\u8C03\u5904\u7406</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">myFunction</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">callback</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Error</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">doSomethingAsync</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">somethingWrong</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">callback</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">This is my error</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">callback</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u4F18\u79C0\u7684\u7528\u4F8B" tabindex="-1">\u4F18\u79C0\u7684\u7528\u4F8B <a class="header-anchor" href="#\u4F18\u79C0\u7684\u7528\u4F8B" aria-hidden="true">#</a></h4><p>\u300CExceptions should be exceptional\u300D\u662F\u8BA1\u7B97\u673A\u79D1\u5B66\u4E2D\u5E38\u7528\u7528\u8BED\u3002\u8FD9\u91CC\u6709\u4E00\u4E9B\u539F\u56E0\u8BF4\u660E\u5728 JavaScript(TypeScript) \u4E2D\u4E5F\u662F\u5982\u6B64\u3002</p><h5 id="\u4E0D\u6E05\u695A\u4ECE\u54EA\u91CC\u629B\u51FA\u9519\u8BEF" tabindex="-1">\u4E0D\u6E05\u695A\u4ECE\u54EA\u91CC\u629B\u51FA\u9519\u8BEF <a class="header-anchor" href="#\u4E0D\u6E05\u695A\u4ECE\u54EA\u91CC\u629B\u51FA\u9519\u8BEF" aria-hidden="true">#</a></h5><p>\u8003\u8651\u5982\u4E0B\u4EE3\u7801\u5757\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">runTask1</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">runTask2</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">catch</span><span style="color:#A6ACCD;"> (e) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Error:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4E0B\u4E00\u4E2A\u5F00\u53D1\u8005\u53EF\u80FD\u5E76\u4E0D\u6E05\u695A\u54EA\u4E2A\u51FD\u6570\u53EF\u80FD\u4F1A\u629B\u51FA\u9519\u8BEF\u3002\u5728\u6CA1\u6709\u9605\u8BFB <code>task1/task2</code> \u4EE3\u7801\u4EE5\u53CA\u4ED6\u4EEC\u53EF\u80FD\u4F1A\u8C03\u7528\u7684\u51FD\u6570\u65F6\uFF0C\u5BF9\u4EE3\u7801 <code>review</code> \u7684\u4EBA\u5458\u53EF\u80FD\u4E5F\u4E0D\u4F1A\u77E5\u9053\u9519\u8BEF\u4F1A\u4ECE\u54EA\u91CC\u629B\u51FA\u3002</p><h5 id="\u4F18\u96C5\u7684\u9519\u8BEF\u6355\u83B7" tabindex="-1">\u4F18\u96C5\u7684\u9519\u8BEF\u6355\u83B7 <a class="header-anchor" href="#\u4F18\u96C5\u7684\u9519\u8BEF\u6355\u83B7" aria-hidden="true">#</a></h5><p>\u4F60\u53EF\u4EE5\u901A\u8FC7\u4E3A\u6BCF\u4E2A\u53EF\u80FD\u629B\u51FA\u9519\u8BEF\u7684\u4EE3\u7801\u663E\u5F0F\u6355\u83B7\uFF0C\u6765\u4F7F\u5176\u4F18\u96C5\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">runTask1</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">catch</span><span style="color:#A6ACCD;"> (e) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Error:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">runTask2</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">catch</span><span style="color:#A6ACCD;"> (e) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Error:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4F46\u662F\u73B0\u5728\uFF0C\u5982\u679C\u4F60\u60F3\u4ECE\u7B2C\u4E00\u4E2A\u4EFB\u52A1\u4E2D\u4F20\u9012\u53D8\u91CF\u5230\u7B2C\u4E8C\u4E2A\u4EFB\u52A1\u4E2D\uFF0C\u4EE3\u7801\u4F1A\u53D8\u7684\u6DF7\u4E71\uFF08\u6CE8\u610F\uFF1Afoo \u53D8\u91CF\u9700\u8981\u7528 let \u663E\u5F0F\u6CE8\u89E3\u5B83\uFF0C\u56E0\u4E3A\u5B83\u4E0D\u80FD\u4ECE <code>runTask1</code> \u4E2D\u8FD4\u56DE\u51FA\u6765\uFF09\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">World</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(foo[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// World</span></span>
<span class="line"></span></code></pre></div><h5 id="\u6CA1\u6709\u5728\u7C7B\u578B\u7CFB\u7EDF\u4E2D\u5F88\u597D\u7684\u8868\u793A" tabindex="-1">\u6CA1\u6709\u5728\u7C7B\u578B\u7CFB\u7EDF\u4E2D\u5F88\u597D\u7684\u8868\u793A <a class="header-anchor" href="#\u6CA1\u6709\u5728\u7C7B\u578B\u7CFB\u7EDF\u4E2D\u5F88\u597D\u7684\u8868\u793A" aria-hidden="true">#</a></h5><p>\u8003\u8651\u5982\u4E0B\u51FD\u6570\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">validate</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">100</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Invalid value</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u8FD9\u79CD\u60C5\u5883\u4E0B\u4F7F\u7528 <code>Error</code> \u4E0D\u662F\u4E00\u4E2A\u597D\u7684\u4E3B\u610F\u3002\u56E0\u4E3A\u6CA1\u6709\u7528\u6765\u9A8C\u8BC1\u51FD\u6570\u7684\u7C7B\u578B\u5B9A\u4E49\uFF08\u5982\uFF1A<code>(value: number) =&gt; void</code>\uFF09\uFF0C\u53D6\u800C\u4EE3\u4E4B\u4E00\u4E2A\u66F4\u597D\u7684\u65B9\u5F0F\u662F\u521B\u5EFA\u4E00\u4E2A\u9A8C\u8BC1\u65B9\u6CD5\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">validate</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span></span>
<span class="line"><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">error</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">100</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> error</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Invalid value</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u73B0\u5728\u5B83\u5177\u6709\u7C7B\u578B\u5B9A\u4E49\u4E86\u3002</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u9664\u975E\u4F60\u60F3\u7528\u4EE5\u975E\u5E38\u901A\u7528\uFF08try/catch\uFF09\u7684\u65B9\u5F0F\u5904\u7406\u9519\u8BEF\uFF0C\u5426\u5219\u4E0D\u8981\u629B\u51FA\u9519\u8BEF\u3002</p></div><h3 id="\u6DF7\u5408" tabindex="-1">\u6DF7\u5408 <a class="header-anchor" href="#\u6DF7\u5408" aria-hidden="true">#</a></h3><p>TypeScript (\u548C JavaScript) \u7C7B\u53EA\u80FD\u4E25\u683C\u7684\u5355\u7EE7\u627F\uFF0C\u56E0\u6B64\u4F60\u4E0D\u80FD\u505A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Tagged</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Timestamped</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// ERROR : \u4E0D\u80FD\u591A\u91CD\u7EE7\u627F</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// ..</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4ECE\u53EF\u91CD\u7528\u7EC4\u4EF6\u6784\u5EFA\u7C7B\u7684\u53E6\u4E00\u79CD\u65B9\u5F0F\u662F\u901A\u8FC7\u57FA\u7C7B\u6765\u6784\u5EFA\u5B83\u4EEC\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u79F0\u4E3A\u6DF7\u5408\u3002</p><p>\u8FD9\u4E2A\u4E3B\u610F\u662F\u7B80\u5355\u7684\uFF0C\u91C7\u7528\u51FD\u6570 B \u63A5\u53D7\u4E00\u4E2A\u7C7B A\uFF0C\u5E76\u4E14\u8FD4\u56DE\u4E00\u4E2A\u5E26\u6709\u65B0\u529F\u80FD\u7684\u7C7B\u7684\u65B9\u5F0F\u6765\u66FF\u4EE3 A \u7C7B\u6269\u5C55 B \u6765\u83B7\u53D6 B \u4E0A\u7684\u529F\u80FD\uFF0C\u524D\u8005\u4E2D\u7684 B \u5373\u662F\u6DF7\u5408\u3002</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u300C\u6DF7\u5408\u300D\u662F\u4E00\u4E2A\u51FD\u6570\uFF1A</p><ul><li>\u4F20\u5165\u4E00\u4E2A\u6784\u9020\u51FD\u6570\uFF1B</li><li>\u521B\u5EFA\u4E00\u4E2A\u5E26\u6709\u65B0\u529F\u80FD\uFF0C\u5E76\u4E14\u6269\u5C55\u6784\u9020\u51FD\u6570\u7684\u65B0\u7C7B\uFF1B</li><li>\u8FD4\u56DE\u8FD9\u4E2A\u65B0\u7C7B\u3002</li></ul></div><p>\u4E00\u4E2A\u5B8C\u6574\u7684\u4F8B\u5B50\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u6240\u6709 mixins \u90FD\u9700\u8981</span></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Constructor</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(...</span><span style="color:#A6ACCD;">args</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#A6ACCD;">[]</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">/////////////</span></span>
<span class="line"><span style="color:#676E95;">// mixins \u4F8B\u5B50</span></span>
<span class="line"><span style="color:#676E95;">////////////</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u6DFB\u52A0\u5C5E\u6027\u7684\u6DF7\u5408\u4F8B\u5B50</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">TimesTamped</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">TBase</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Constructor</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">Base</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TBase</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">class</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">extends</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Base</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    timestamp </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Date</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">now()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u6DFB\u52A0\u5C5E\u6027\u548C\u65B9\u6CD5\u7684\u6DF7\u5408\u4F8B\u5B50</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Activatable</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">TBase</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Constructor</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">Base</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TBase</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">class</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">extends</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Base</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    isActivated </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    activate</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">isActivated</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    deactivate</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">isActivated</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">///////////</span></span>
<span class="line"><span style="color:#676E95;">// \u7EC4\u5408\u7C7B</span></span>
<span class="line"><span style="color:#676E95;">///////////</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u7B80\u5355\u7684\u7C7B</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u6DFB\u52A0 TimesTamped \u7684 User</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> TimestampedUser </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">TimesTamped</span><span style="color:#A6ACCD;">(User)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Tina TimesTamped \u548C Activatable \u7684\u7C7B</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> TimestampedActivatableUser </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">TimesTamped</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">Activatable</span><span style="color:#A6ACCD;">(User))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">//////////</span></span>
<span class="line"><span style="color:#676E95;">// \u4F7F\u7528\u7EC4\u5408\u7C7B</span></span>
<span class="line"><span style="color:#676E95;">//////////</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> timestampedUserExample </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">TimestampedUser</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(timestampedUserExample</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">timestamp)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> timestampedActivatableUserExample </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">TimestampedActivatableUser</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(timestampedActivatableUserExample</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">timestamp)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(timestampedActivatableUserExample</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">isActivated)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u8BA9\u6211\u4EEC\u5206\u89E3\u8FD9\u4E2A\u4F8B\u5B50\u3002</p><h4 id="\u521B\u5EFA\u4E00\u4E2A\u6784\u9020\u51FD\u6570" tabindex="-1">\u521B\u5EFA\u4E00\u4E2A\u6784\u9020\u51FD\u6570 <a class="header-anchor" href="#\u521B\u5EFA\u4E00\u4E2A\u6784\u9020\u51FD\u6570" aria-hidden="true">#</a></h4><p>\u6DF7\u5408\u63A5\u53D7\u4E00\u4E2A\u7C7B\uFF0C\u5E76\u4E14\u4F7F\u7528\u65B0\u529F\u80FD\u6269\u5C55\u5B83\u3002\u56E0\u6B64\uFF0C\u6211\u4EEC\u9700\u8981\u5B9A\u4E49\u6784\u9020\u51FD\u6570\u7684\u7C7B\u578B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Constructor</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(...</span><span style="color:#A6ACCD;">args</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#A6ACCD;">[]</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h4 id="\u6269\u5C55\u4E00\u4E2A\u7C7B\u5E76\u4E14\u8FD4\u56DE\u5B83" tabindex="-1">\u6269\u5C55\u4E00\u4E2A\u7C7B\u5E76\u4E14\u8FD4\u56DE\u5B83 <a class="header-anchor" href="#\u6269\u5C55\u4E00\u4E2A\u7C7B\u5E76\u4E14\u8FD4\u56DE\u5B83" aria-hidden="true">#</a></h4><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u6DFB\u52A0\u5C5E\u6027\u7684\u6DF7\u5408\u4F8B\u5B50</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">TimesTamped</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">TBase</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Constructor</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">Base</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TBase</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">class</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">extends</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Base</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    timestamp </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Date</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">now()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="thistype" tabindex="-1">ThisType <a class="header-anchor" href="#thistype" aria-hidden="true">#</a></h3><p>\u901A\u8FC7 <code>ThisType</code> \u6211\u4EEC\u53EF\u4EE5\u5728\u5BF9\u8C61\u5B57\u9762\u91CF\u4E2D\u952E\u5165 <code>this</code>\uFF0C\u5E76\u63D0\u4F9B\u901A\u8FC7\u4E0A\u4E0B\u6587\u7C7B\u578B\u63A7\u5236 <code>this</code> \u7C7B\u578B\u7684\u4FBF\u6377\u65B9\u5F0F\u3002\u5B83\u53EA\u6709\u5728 <code>--noImplicitThis</code> \u7684\u9009\u9879\u4E0B\u624D\u6709\u6548\u3002</p><p>\u73B0\u5728\uFF0C\u5728\u5BF9\u8C61\u5B57\u9762\u91CF\u65B9\u6CD5\u4E2D\u7684 <code>this</code> \u7C7B\u578B\uFF0C\u5C06\u7531\u4EE5\u4E0B\u51B3\u5B9A\uFF1A</p><ul><li>\u5982\u679C\u8FD9\u4E2A\u65B9\u6CD5\u663E\u5F0F\u6307\u5B9A\u4E86 <code>this</code> \u53C2\u6570\uFF0C\u90A3\u4E48 <code>this</code> \u5177\u6709\u8BE5\u53C2\u6570\u7684\u7C7B\u578B\u3002\uFF08\u4E0B\u4F8B\u5B50\u4E2D <code>bar</code>\uFF09</li><li>\u5426\u5219\uFF0C\u5982\u679C\u65B9\u6CD5\u7531\u5E26 <code>this</code> \u53C2\u6570\u7684\u7B7E\u540D\u8FDB\u884C\u4E0A\u4E0B\u6587\u952E\u5165\uFF0C\u90A3\u4E48 <code>this</code> \u5177\u6709\u8BE5\u53C2\u6570\u7684\u7C7B\u578B\u3002\uFF08\u4E0B\u4F8B\u5B50\u4E2D <code>foo</code>\uFF09</li><li>\u5426\u5219\uFF0C\u5982\u679C <code>--noImplicitThis</code> \u9009\u9879\u5DF2\u7ECF\u542F\u7528\uFF0C\u5E76\u4E14\u5BF9\u8C61\u5B57\u9762\u91CF\u4E2D\u5305\u542B\u7531 <code>ThisType&lt;T&gt;</code> \u952E\u5165\u7684\u4E0A\u4E0B\u6587\u7C7B\u578B\uFF0C\u90A3\u4E48 <code>this</code> \u7684\u7C7B\u578B\u4E3A <code>T</code>\u3002</li><li>\u5426\u5219\uFF0C\u5982\u679C <code>--noImplicitThis</code> \u9009\u9879\u5DF2\u7ECF\u542F\u7528\uFF0C\u5E76\u4E14\u5BF9\u8C61\u5B57\u9762\u91CF\u4E2D\u4E0D\u5305\u542B\u7531 <code>ThisType&lt;T&gt;</code> \u952E\u5165\u7684\u4E0A\u4E0B\u6587\u7C7B\u578B\uFF0C\u90A3\u4E48 <code>this</code> \u7684\u7C7B\u578B\u4E3A\u8BE5\u4E0A\u4E0B\u6587\u7C7B\u578B\u3002</li><li>\u5426\u5219\uFF0C\u5982\u679C <code>--noImplicitThis</code> \u9009\u9879\u5DF2\u7ECF\u542F\u7528\uFF0C<code>this</code> \u5177\u6709\u8BE5\u5BF9\u8C61\u5B57\u9762\u91CF\u7684\u7C7B\u578B\u3002</li><li>\u5426\u5219\uFF0C<code>this</code> \u7684\u7C7B\u578B\u4E3A <code>any</code>\u3002</li></ul><p>\u4E00\u4E9B\u4F8B\u5B50\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// Compile with --noImplicitThis</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">moveBy</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dx</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">dy</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Point</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">moveBy</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dx</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">dy</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dx</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// this has type Point</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dy</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// this has type Point</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">f</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">n</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// { x: string, f(n: number): void }</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> bar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">f</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">this</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">message</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// { message: string }</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>\u7C7B\u4F3C\u7684\u65B9\u5F0F\uFF0C\u5F53\u4F7F\u7528 <code>--noImplicitThis</code> \u65F6\uFF0C\u51FD\u6570\u8868\u8FBE\u5F0F\u8D4B\u503C\u7ED9 <code>obj.xxx</code> \u6216\u8005 <code>obj[xxx]</code> \u7684\u76EE\u6807\u65F6\uFF0C\u5728\u51FD\u6570\u4E2D <code>this</code> \u7684\u7C7B\u578B\u5C06\u4F1A\u662F <code>obj</code>\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// Compile with --noImplicitThis</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">f</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">n</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">n</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// &#39;this&#39; has same type as &#39;obj&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">obj[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">f</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">n</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">n</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// &#39;this&#39; has same type as &#39;obj&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>\u901A\u8FC7 API \u8F6C\u6362\u53C2\u6570\u7684\u5F62\u5F0F\u6765\u751F\u6210 <code>this</code> \u7684\u503C\u7684\u60C5\u666F\u4E0B\uFF0C\u53EF\u4EE5\u901A\u8FC7\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 <code>ThisType&lt;T&gt;</code> \u6807\u8BB0\u63A5\u53E3\uFF0C\u53EF\u7528\u4E8E\u5728\u4E0A\u4E0B\u6587\u4E2D\u8868\u660E\u8F6C\u6362\u540E\u7684\u7C7B\u578B\u3002\u5C24\u5176\u662F\u5F53\u5B57\u9762\u91CF\u4E2D\u7684\u4E0A\u4E0B\u6587\u7C7B\u578B\u4E3A <code>ThisType&lt;T&gt;</code> \u6216\u8005\u662F\u5305\u542B <code>ThisType&lt;T&gt;</code> \u7684\u4EA4\u96C6\u65F6\uFF0C\u663E\u5F97\u5C24\u4E3A\u6709\u6548\uFF0C\u5BF9\u8C61\u5B57\u9762\u91CF\u65B9\u6CD5\u4E2D <code>this</code> \u7684\u7C7B\u578B\u5373\u4E3A <code>T</code>\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// Compile with --noImplicitThis</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ObjectDescriptor</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">D</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">M</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">D</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">methods</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">M</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ThisType</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">D</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">M</span><span style="color:#89DDFF;">&gt;;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Type of &#39;this&#39; in methods is D &amp; M</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">makeObject</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">D</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">M</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">desc</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ObjectDescriptor</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">D</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">M</span><span style="color:#89DDFF;">&gt;):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">D</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">M</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">object</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">desc</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">methods</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">object</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">desc</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">methods</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">methods</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">as</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">D</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">M</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">makeObject</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">methods</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">moveBy</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dx</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">dy</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dx</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Strongly typed this</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dy</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Strongly typed this</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">y </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">moveBy</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u4E0A\u9762\u7684\u4F8B\u5B50\u4E2D\uFF0C<code>makeObject</code> \u53C2\u6570\u4E2D\u7684\u5BF9\u8C61\u5C5E\u6027 <code>methods</code> \u5177\u6709\u5305\u542B <code>ThisType&lt;D &amp; M&gt;</code> \u7684\u4E0A\u4E0B\u6587\u7C7B\u578B\uFF0C\u56E0\u6B64\u5BF9\u8C61\u4E2D <code>methods</code> \u5C5E\u6027\u4E0B\u7684\u65B9\u6CD5\u7684 <code>this</code> \u7C7B\u578B\u4E3A <code>{ x: number, y: number } &amp; { moveBy(dx: number, dy: number): number }</code>\u3002</p><p><code>ThisType&lt;T&gt;</code> \u7684\u63A5\u53E3\uFF0C\u5728 <code>lib.d.ts</code> \u53EA\u662F\u88AB\u58F0\u660E\u4E3A\u7A7A\u7684\u63A5\u53E3\uFF0C\u9664\u4E86\u53EF\u4EE5\u5728\u5BF9\u8C61\u5B57\u9762\u91CF\u4E0A\u4E0B\u6587\u4E2D\u53EF\u4EE5\u88AB\u8BC6\u522B\u4EE5\u5916\uFF0C\u8BE5\u63A5\u53E3\u7684\u4F5C\u7528\u7B49\u540C\u4E8E\u4EFB\u610F\u7A7A\u63A5\u53E3\u3002</p><h2 id="typescript-\u7F16\u8BD1\u539F\u7406" tabindex="-1">TypeScript \u7F16\u8BD1\u539F\u7406 <a class="header-anchor" href="#typescript-\u7F16\u8BD1\u539F\u7406" aria-hidden="true">#</a></h2><h3 id="\u6982\u89C8-1" tabindex="-1">\u6982\u89C8 <a class="header-anchor" href="#\u6982\u89C8-1" aria-hidden="true">#</a></h3><p>TypeScript \u7F16\u8BD1\u5668\u6E90\u6587\u4EF6\u4F4D\u4E8E <a href="https://github.com/Microsoft/TypeScript/tree/master/src/compiler" target="_blank" rel="noreferrer"><code>src/compiler</code></a> \u76EE\u5F55\u4E0B</p><blockquote><p>\u8BD1\u6CE8\uFF1ATypescript Deep Dive \u4F7F\u7528\u7684\u6E90\u7801\u5E94\u4E3A 2016 \u5E74\u4EE5\u524D\u7684\u6E90\u7801\u3002\u5B66\u4E60\u65F6\u8BF7\u5BF9\u7167\u73B0\u6709\u7684\u6E90\u7801</p></blockquote><p>\u5B83\u5206\u4E3A\u4EE5\u4E0B\u51E0\u4E2A\u5173\u952E\u90E8\u5206\uFF1A</p><ul><li>Scanner \u626B\u63CF\u5668\uFF08<code>scanner.ts</code>\uFF09</li><li>Parser \u89E3\u6790\u5668\uFF08<code>parser.ts\uFF09</code></li><li>Binder \u7ED1\u5B9A\u5668\uFF08<code>binder.ts\uFF09</code></li><li>Checker \u68C0\u67E5\u5668\uFF08<code>checker.ts</code>\uFF09</li><li>Emitter \u53D1\u5C04\u5668\uFF08<code>emitter.ts</code>\uFF09</li></ul><p>\u6BCF\u4E2A\u90E8\u5206\u5728\u6E90\u6587\u4EF6\u4E2D\u5747\u6709\u72EC\u7ACB\u6587\u4EF6\uFF0C\u672C\u7AE0\u7A0D\u540E\u4F1A\u5BF9\u8FD9\u4E9B\u90E8\u5206\u505A\u89E3\u91CA\u3002</p><h4 id="byots" tabindex="-1">BYOTS <a class="header-anchor" href="#byots" aria-hidden="true">#</a></h4><p>\u6211\u4EEC\u6709\u4E2A\u540D\u4E3A <a href="https://github.com/basarat/byots" target="_blank" rel="noreferrer">Bring Your Own TypeScript (BYOTS)</a> \u7684\u9879\u76EE\uFF0C\u901A\u8FC7\u66B4\u9732\u5185\u90E8\u63A5\u53E3\u8BA9\u7F16\u8BD1\u5668 API \u4F7F\u7528\u8D77\u6765\u66F4\u7B80\u5355\u3002\u4F60\u53EF\u4EE5\u5728\u5168\u5C40\u8303\u56F4\u4E0A\u66B4\u9732\u4F60 TypeScript \u5E94\u7528\u7684\u672C\u5730\u53D8\u91CF\u3002</p><h4 id="\u8BED\u6CD5\u548C\u8BED\u4E49" tabindex="-1">\u8BED\u6CD5\u548C\u8BED\u4E49 <a class="header-anchor" href="#\u8BED\u6CD5\u548C\u8BED\u4E49" aria-hidden="true">#</a></h4><p><strong>\u8BED\u6CD5</strong>\u6B63\u786E\u5E76\u4E0D\u610F\u5473\u7740\u8BED\u4E49\u4E0A\u4E5F\u6B63\u786E\u3002\u4E0B\u9762\u7684 TypeScript \u4EE3\u7801\uFF0C\u8BED\u6CD5\u5408\u6CD5\uFF0C\u4F46\u662F\u8BED\u4E49\u5374\u4E0D\u6B63\u786E</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> foo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">not a number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p><code>\u8BED\u4E49</code> \u4ECE\u81EA\u7136\u8BED\u8A00\u89D2\u5EA6\u610F\u5473\u7740\u6709\u610F\u4E49\uFF0C\u7406\u89E3\u8FD9\u4E2A\u6982\u5FF5\u5BF9\u4F60\u5F88\u6709\u7528\u3002</p><h4 id="\u5904\u7406\u6982\u89C8" tabindex="-1">\u5904\u7406\u6982\u89C8 <a class="header-anchor" href="#\u5904\u7406\u6982\u89C8" aria-hidden="true">#</a></h4><p>\u4EE5\u4E0B\u6F14\u793A\u7B80\u5355\u8BF4\u660E TypeScript \u7F16\u8BD1\u5668\u5982\u4F55\u5C06\u4E0A\u8FF0\u51E0\u4E2A\u5173\u952E\u90E8\u5206\u7EC4\u5408\u5728\u4E00\u8D77\uFF1A</p><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">SourceCode\uFF08\u6E90\u7801\uFF09 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~ \u626B\u63CF\u5668 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> Token \u6D41</span></span>
<span class="line"></span></code></pre></div><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">Token \u6D41 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~ \u89E3\u6790\u5668 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> AST\uFF08\u62BD\u8C61\u8BED\u6CD5\u6811\uFF09</span></span>
<span class="line"></span></code></pre></div><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">AST </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~ \u7ED1\u5B9A\u5668 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> Symbols\uFF08\u7B26\u53F7\uFF09</span></span>
<span class="line"></span></code></pre></div><p>\u7B26\u53F7\uFF08<code>Symbol</code>\uFF09\u662F TypeScript \u8BED\u4E49\u7CFB\u7EDF\u7684\u4E3B\u8981\u6784\u9020\u5757\u3002\u5982\u4E0A\u6240\u793A\uFF0C\u7B26\u53F7\u662F\u7ED1\u5B9A\u7684\u7ED3\u679C\u3002\u7B26\u53F7\u5C06 AST \u4E2D\u7684\u58F0\u660E\u8282\u70B9\u4E0E\u76F8\u540C\u5B9E\u4F53\u7684\u5176\u4ED6\u58F0\u660E\u76F8\u8FDE\u3002</p><p>\u7B26\u53F7\u548C AST \u662F\u68C0\u67E5\u5668\u7528\u6765\u9A8C\u8BC1\u6E90\u4EE3\u7801\u8BED\u4E49\u7684</p><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">AST + \u7B26\u53F7 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~ \u68C0\u67E5\u5668 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> \u7C7B\u578B\u9A8C\u8BC1</span></span>
<span class="line"></span></code></pre></div><p>\u6700\u540E\uFF0C\u9700\u8981\u8F93\u51FA JavaScript \u65F6\uFF1A</p><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">AST + \u68C0\u67E5\u5668 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~ \u53D1\u5C04\u5668 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> JavaScript \u4EE3\u7801</span></span>
<span class="line"></span></code></pre></div><p>TypeScript \u7F16\u8BD1\u5668\u4E2D\u8FD8\u6709\u4E00\u4E9B\u5176\u4ED6\u6587\u4EF6\uFF0C\u4E3A\u6211\u4EEC\u63A5\u4E0B\u6765\u4ECB\u7ECD\u7684\u5F88\u591A\u5173\u952E\u90E8\u5206\u63D0\u4F9B\u5B9E\u7528\u5DE5\u5177\u3002</p><h4 id="\u6587\u4EF6\uFF1Autilities" tabindex="-1">\u6587\u4EF6\uFF1AUtilities <a class="header-anchor" href="#\u6587\u4EF6\uFF1Autilities" aria-hidden="true">#</a></h4><p><code>core.ts</code> \uFF1ATypeScript \u7F16\u8BD1\u5668\u4F7F\u7528\u7684\u6838\u5FC3\u5DE5\u5177\u96C6\uFF0C\u91CD\u8981\u7684\u6709\uFF1A</p><ul><li><code>let objectAllocator: ObjectAllocator</code> \u662F\u4E00\u4E2A\u5B9A\u4E49\u4E3A\u5168\u5C40\u5355\u4F8B\u7684\u53D8\u91CF\u3002\u63D0\u4F9B\u4EE5\u4E0B\u5B9A\u4E49\uFF1A <ul><li><code>getNodeConstructor</code>\uFF08\u8282\u70B9\u4F1A\u5728\u89E3\u6790\u5668 / AST \u4E2D\u4ECB\u7ECD\uFF09</li><li><code>getSymbolConstructor</code>\uFF08\u7B26\u53F7\u4F1A\u5728\u7ED1\u5B9A\u5668\u4E2D\u4ECB\u7ECD\uFF09</li><li><code>getTypeConstructor</code>\uFF08\u7C7B\u578B\u4F1A\u5728\u68C0\u67E5\u5668\u4E2D\u4ECB\u7ECD\uFF09</li><li><code>getSignatureConstructor</code>\uFF08\u7B7E\u540D\u662F\u7D22\u5F15\uFF0C\u8C03\u7528\u548C\u6784\u9020\u7B7E\u540D\uFF09</li></ul></li></ul><h4 id="\u6587\u4EF6\uFF1A\u5173\u952E\u6570\u636E\u7ED3\u6784" tabindex="-1">\u6587\u4EF6\uFF1A\u5173\u952E\u6570\u636E\u7ED3\u6784 <a class="header-anchor" href="#\u6587\u4EF6\uFF1A\u5173\u952E\u6570\u636E\u7ED3\u6784" aria-hidden="true">#</a></h4><p><code>types.ts</code> \u5305\u542B\u6574\u4E2A\u7F16\u8BD1\u5668\u4E2D\u4F7F\u7528\u7684\u5173\u952E\u6570\u636E\u7ED3\u6784\u548C\u63A5\u53E3\uFF0C\u8FD9\u91CC\u5217\u51FA\u4E00\u4E9B\u5173\u952E\u90E8\u5206\uFF1A</p><ul><li><code>SyntaxKind</code> AST \u8282\u70B9\u7C7B\u578B\u901A\u8FC7 <code>SyntaxKind</code> \u679A\u4E3E\u8FDB\u884C\u8BC6\u522B</li><li><code>TypeChecker</code> \u7C7B\u578B\u68C0\u67E5\u5668\u63D0\u4F9B\u6B64\u63A5\u53E3</li><li><code>CompilerHost</code> \u7528\u4E8E\u7A0B\u5E8F\uFF08Program\uFF09\u548C\u7CFB\u7EDF\u4E4B\u95F4\u7684\u4EA4\u4E92</li><li><code>Node</code> AST \u8282\u70B9</li></ul><h4 id="\u6587\u4EF6\uFF1A\u7CFB\u7EDF" tabindex="-1">\u6587\u4EF6\uFF1A\u7CFB\u7EDF <a class="header-anchor" href="#\u6587\u4EF6\uFF1A\u7CFB\u7EDF" aria-hidden="true">#</a></h4><p><code>system.ts</code>\uFF0CTypeScript \u7F16\u8BD1\u5668\u4E0E\u64CD\u4F5C\u7CFB\u7EDF\u7684\u6240\u6709\u4EA4\u4E92\u5747\u901A\u8FC7 <code>System</code> \u63A5\u53E3\u8FDB\u884C\u3002\u63A5\u53E3\u53CA\u5176\u5B9E\u73B0\uFF08<code>WScript</code> \u548C <code>Node</code>\uFF09 \u5747\u5B9A\u4E49\u5728 <code>system.ts</code> \u4E2D\u3002\u4F60\u53EF\u4EE5\u5C06\u5176\u89C6\u4E3A<strong>\u64CD\u4F5C\u73AF\u5883\uFF08OE, Operating Environment\uFF09</strong>\u3002</p><p>\u73B0\u5728\u5BF9\u4E3B\u8981\u6587\u4EF6\u6709\u4E00\u4E2A\u6574\u4F53\u4E86\u89E3\u4E86\uFF0C\u6211\u4EEC\u7EE7\u7EED\u4ECB\u7ECD\u7A0B\u5E8F\uFF08<code>Program</code>\uFF09\u7684\u6982\u5FF5</p><h3 id="\u7A0B\u5E8F" tabindex="-1">\u7A0B\u5E8F <a class="header-anchor" href="#\u7A0B\u5E8F" aria-hidden="true">#</a></h3><p>\u7A0B\u5E8F\u5B9A\u4E49\u5728 <code>program.ts</code> \u4E2D\u3002<a href="#%E7%BC%96%E8%AF%91%E4%B8%8A%E4%B8%8B%E6%96%87">\u7F16\u8BD1\u4E0A\u4E0B\u6587</a>\u5728 TypeScript \u7F16\u8BD1\u5668\u4E2D\u88AB\u89C6\u4E3A\u4E00\u4E2A <code>Program</code>\uFF0C\u5B83\u5305\u542B <code>SourceFile</code> \u548C\u7F16\u8BD1\u9009\u9879</p><h4 id="compilerhost-\u7684\u4F7F\u7528" tabindex="-1"><code>CompilerHost</code> \u7684\u4F7F\u7528 <a class="header-anchor" href="#compilerhost-\u7684\u4F7F\u7528" aria-hidden="true">#</a></h4><p>CompilerHost \u662F\u4E0E\u64CD\u4F5C\u73AF\u5883\uFF08OE, Operating Enviornment\uFF09\u8FDB\u884C\u4EA4\u4E92\u7684\u673A\u5236\uFF1A</p><p><code>Program</code> -\u4F7F\u7528-&gt; <code>CompilerHost</code> -\u4F7F\u7528-&gt; <code>System</code></p><p>\u7528 <code>CompilerHost</code> \u4F5C\u4E2D\u95F4\u5C42\u7684\u539F\u56E0\u662F\u53EF\u4EE5\u8BA9\u63A5\u53E3\u5BF9 <code>Program</code> \u7684\u9700\u6C42\u8FDB\u884C\u7EC6\u7C92\u5EA6\u7684\u8C03\u6574\uFF0C\u800C\u65E0\u9700\u8003\u8651\u64CD\u4F5C\u73AF\u5883\u7684\u9700\u6C42\u3002\uFF08\u4F8B\u5982\uFF1A<code>Program</code> \u65E0\u9700\u5173\u5FC3 <code>System</code> \u7684 <code>fileExists</code> \u51FD\u6570\uFF09</p><p>\u5BF9<code>System</code>\u800C\u8A00\u8FD8\u6709\u5176\u4ED6\u7684\u4F7F\u7528\u8005\uFF08\u6BD4\u5982\u6D4B\u8BD5\uFF09</p><h4 id="sourcefile" tabindex="-1">SourceFile <a class="header-anchor" href="#sourcefile" aria-hidden="true">#</a></h4><p>\u7A0B\u5E8F\u6709\u4E2A API\uFF0C\u7528\u4E8E\u83B7\u53D6 SourceFile\uFF1A<code>getSourceFiles(): SourceFile[];</code>\u3002\u5F97\u5230\u7684\u6BCF\u4E2A\u5143\u7D20\u5747\u662F\u4E00\u68F5\u62BD\u8C61\u8BED\u6CD5\u6811\u7684\u6839\u8282\u70B9\uFF08\u79F0\u505A <code>SourceFile</code>\uFF09</p><h3 id="\u62BD\u8C61\u8BED\u6CD5\u6811" tabindex="-1">\u62BD\u8C61\u8BED\u6CD5\u6811 <a class="header-anchor" href="#\u62BD\u8C61\u8BED\u6CD5\u6811" aria-hidden="true">#</a></h3><h4 id="node-\u8282\u70B9" tabindex="-1">Node \u8282\u70B9 <a class="header-anchor" href="#node-\u8282\u70B9" aria-hidden="true">#</a></h4><p>\u8282\u70B9\u662F\u62BD\u8C61\u8BED\u6CD5\u6811\uFF08AST\uFF09 \u7684\u57FA\u672C\u6784\u9020\u5757\u3002\u8BED\u6CD5\u4E0A\uFF0C\u901A\u5E38 <code>Node</code> \u8868\u793A\u975E\u672B\u7AEF\uFF08non-terminals\uFF09\u8282\u70B9\u3002\u4F46\u662F\uFF0C\u6709\u4E9B\u672B\u7AEF\u8282\u70B9\uFF0C\u5982\uFF1A\u6807\u8BC6\u7B26\u548C\u5B57\u9762\u91CF\u4E5F\u4F1A\u4FDD\u7559\u5728\u6811\u4E2D\u3002</p><p>AST \u8282\u70B9\u6587\u6863\u7531\u4E24\u4E2A\u5173\u952E\u90E8\u5206\u6784\u6210\u3002\u4E00\u662F\u8282\u70B9\u7684 <code>SyntaxKind</code> \u679A\u4E3E\uFF0C\u7528\u4E8E\u6807\u8BC6 AST \u4E2D\u7684\u7C7B\u578B\u3002\u4E8C\u662F\u5176\u63A5\u53E3\uFF0C\u5373\u5B9E\u4F8B\u5316 AST \u65F6\u8282\u70B9\u63D0\u4F9B\u7684 API\u3002</p><p>\u8FD9\u91CC\u662F <code>interface Node</code> \u7684\u4E00\u4E9B\u5173\u952E\u6210\u5458\uFF1A</p><ul><li><code>TextRange</code> \u6807\u8BC6\u8BE5\u8282\u70B9\u5728\u6E90\u6587\u4EF6\u4E2D\u7684\u8D77\u6B62\u4F4D\u7F6E\u3002</li><li><code>parent?: Node</code> \u5F53\u524D\u8282\u70B9\uFF08\u5728 AST \u4E2D\uFF09\u7684\u7236\u8282\u70B9</li></ul><p><code>Node</code> \u8FD8\u6709\u4E00\u4E9B\u5176\u4ED6\u7684\u6210\u5458\uFF0C\u6807\u5FD7\uFF08flags\uFF09\u548C\u4FEE\u9970\u7B26\uFF08modifiers\uFF09\u7B49\u3002\u4F60\u53EF\u4EE5\u5728\u6E90\u7801\u4E2D\u641C\u7D22 <code>interface Node</code> \u6765\u67E5\u770B\uFF0C\u800C\u4E0A\u9762\u63D0\u5230\u5BF9\u8282\u70B9\u7684\u904D\u5386\u662F\u975E\u5E38\u91CD\u8981\u7684\u3002</p><h5 id="sourcefile-1" tabindex="-1">SourceFile <a class="header-anchor" href="#sourcefile-1" aria-hidden="true">#</a></h5><ul><li><code>SyntaxKind.SourceFile</code></li><li><code>interface SourceFile</code></li></ul><p>\u6BCF\u4E2A <code>SourceFile</code> \u90FD\u662F\u4E00\u68F5 AST \u7684\u9876\u7EA7\u8282\u70B9\uFF0C\u5B83\u4EEC\u5305\u542B\u5728 <code>Program</code> \u4E2D\u3002</p><h4 id="ast-\u6280\u5DE7\uFF1A\u8BBF\u95EE\u5B50\u8282\u70B9" tabindex="-1">AST \u6280\u5DE7\uFF1A\u8BBF\u95EE\u5B50\u8282\u70B9 <a class="header-anchor" href="#ast-\u6280\u5DE7\uFF1A\u8BBF\u95EE\u5B50\u8282\u70B9" aria-hidden="true">#</a></h4><p>\u6709\u4E2A\u5DE5\u5177\u51FD\u6570 <code>ts.forEachChild</code>\uFF0C\u53EF\u4EE5\u7528\u6765\u8BBF\u95EE AST \u4EFB\u4E00\u8282\u70B9\u7684\u6240\u6709\u5B50\u8282\u70B9\u3002</p><p>\u4E0B\u9762\u662F\u7B80\u5316\u7684\u4EE3\u7801\u7247\u6BB5\uFF0C\u7528\u4E8E\u6F14\u793A\u5982\u4F55\u5DE5\u4F5C\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">forEachChild</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">&gt;(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">cbNode</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">cbNodeArray</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">nodes</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#A6ACCD;">[]</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">T</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">switch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">BinaryExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">visitNode</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">cbNode</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> (&lt;</span><span style="color:#FFCB6B;">BinaryExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">left</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">||</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">visitNode</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">cbNode</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> (&lt;</span><span style="color:#FFCB6B;">BinaryExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">operatorToken</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">||</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">visitNode</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">cbNode</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> (&lt;</span><span style="color:#FFCB6B;">BinaryExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">right</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">IfStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">visitNode</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">cbNode</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> (&lt;</span><span style="color:#FFCB6B;">IfStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">expression</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">||</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">visitNode</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">cbNode</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> (&lt;</span><span style="color:#FFCB6B;">IfStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">thenStatement</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">||</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">visitNode</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">cbNode</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> (&lt;</span><span style="color:#FFCB6B;">IfStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">elseStatement</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// .... \u66F4\u591A</span></span>
<span class="line"></span></code></pre></div><p>\u8BE5\u51FD\u6570\u4E3B\u8981\u68C0\u67E5 <code>node.kind</code> \u5E76\u636E\u6B64\u5224\u65AD node \u7684\u63A5\u53E3\uFF0C\u7136\u540E\u5728\u5176\u5B50\u8282\u70B9\u4E0A\u8C03\u7528 <code>cbNode</code>\u3002\u4F46\u662F\uFF0C\u8981\u6CE8\u610F\u8BE5\u51FD\u6570\u4E0D\u4F1A\u4E3A<strong>\u6240\u6709</strong>\u5B50\u8282\u70B9\u8C03\u7528 <code>visitNode</code>\uFF08\u4F8B\u5982\uFF1ASyntaxKind.SemicolonToken\uFF09\u3002\u60F3\u83B7\u5F97\u67D0 AST \u8282\u70B9\u7684<strong>\u6240\u6709</strong>\u5B50\u8282\u70B9\uFF0C\u53EA\u8981\u8C03\u7528\u8BE5\u8282\u70B9\u7684\u6210\u5458\u51FD\u6570 <code>.getChildren</code>\u3002</p><p>\u5982\u4E0B\u51FD\u6570\u4F1A\u6253\u5370 AST \u8282\u70B9\u8BE6\u7EC6\u4FE1\u606F\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">printAllChildren</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ts</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">depth</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Array</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">depth</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">----</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">syntaxKindToName</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">pos</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">end</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">depth</span><span style="color:#89DDFF;">++;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getChildren</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">c</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">printAllChildren</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">c</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">depth</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u8FDB\u4E00\u6B65\u8BA8\u8BBA\u89E3\u6790\u5668\u65F6\u4F1A\u770B\u5230\u8BE5\u51FD\u6570\u7684\u4F7F\u7528\u793A\u4F8B\u3002</p><h4 id="ast-\u6280\u5DE7\uFF1Asyntaxkind-\u679A\u4E3E" tabindex="-1">AST \u6280\u5DE7\uFF1ASyntaxKind \u679A\u4E3E <a class="header-anchor" href="#ast-\u6280\u5DE7\uFF1Asyntaxkind-\u679A\u4E3E" aria-hidden="true">#</a></h4><p><code>SyntaxKind</code> \u88AB\u5B9A\u4E49\u4E3A\u4E00\u4E2A\u5E38\u91CF\u679A\u4E3E\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SyntaxKind</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  Unknown</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  EndOfFileToken</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  SingleLineCommentTrivia</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// ... \u66F4\u591A</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u662F\u4E2A<a href="#%E5%B8%B8%E9%87%8F%E6%9E%9A%E4%B8%BE">\u5E38\u91CF\u679A\u4E3E</a>\uFF0C\u65B9\u4FBF\u5185\u8054\uFF08\u4F8B\u5982\uFF1A<code>ts.SyntaxKind.EndOfFileToken</code> \u4F1A\u53D8\u4E3A <code>1</code>\uFF09\uFF0C\u8FD9\u6837\u5728\u4F7F\u7528 AST \u65F6\u5C31\u4E0D\u4F1A\u6709\u5904\u7406\u5F15\u7528\u7684\u989D\u5916\u5F00\u9500\u3002\u4F46\u7F16\u8BD1\u65F6\u9700\u8981\u4F7F\u7528 --preserveConstEnums \u7F16\u8BD1\u6807\u5FD7\uFF0C\u4EE5\u4FBF\u679A\u4E3E<strong>\u5728\u8FD0\u884C\u65F6\u4ECD\u53EF\u7528</strong>\u3002JavaScript \u4E2D\u4F60\u4E5F\u53EF\u4EE5\u6839\u636E\u9700\u8981\u4F7F\u7528 <code>ts.SyntaxKind.EndOfFileToken</code>\u3002\u53E6\u5916\uFF0C\u53EF\u4EE5\u7528\u4EE5\u4E0B\u51FD\u6570\uFF0C\u5C06\u679A\u4E3E\u6210\u5458\u8F6C\u5316\u4E3A\u53EF\u8BFB\u7684\u5B57\u7B26\u4E32\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">syntaxKindToName</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ts</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">SyntaxKind</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> (&lt;</span><span style="color:#FFCB6B;">any</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">ts</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="ast-\u6742\u9879" tabindex="-1">AST \u6742\u9879 <a class="header-anchor" href="#ast-\u6742\u9879" aria-hidden="true">#</a></h4><p>\u6742\u9879\uFF08Trivia\uFF09\u662F\u6307\u6E90\u6587\u672C\u4E2D\u5BF9\u6B63\u5E38\u7406\u89E3\u4EE3\u7801\u4E0D\u592A\u91CD\u8981\u7684\u90E8\u5206\uFF0C\u4F8B\u5982\uFF1A\u7A7A\u767D\uFF0C\u6CE8\u91CA\uFF0C\u51B2\u7A81\u6807\u8BB0\u3002\uFF08\u4E3A\u4E86\u4FDD\u6301\u8F7B\u91CF\uFF09\u6742\u9879<strong>\u4E0D\u4F1A\u5B58\u50A8</strong>\u5728 AST \u4E2D\u3002\u4F46\u662F\u53EF\u4EE5\u89C6\u9700\u8981\u4F7F\u7528\u4E00\u4E9B <code>ts.*</code> API \u6765\u83B7\u53D6\u3002</p><p>\u5C55\u793A\u8FD9\u4E9B API \u524D\uFF0C\u4F60\u9700\u8981\u7406\u89E3\u4EE5\u4E0B\u5185\u5BB9\uFF1A</p><h5 id="\u6742\u9879\u6240\u6709\u6743" tabindex="-1">\u6742\u9879\u6240\u6709\u6743 <a class="header-anchor" href="#\u6742\u9879\u6240\u6709\u6743" aria-hidden="true">#</a></h5><p>\u901A\u5E38\uFF1A</p><ul><li>token \u62E5\u6709\u5B83\u540E\u9762 \u540C\u4E00\u884C \u5230\u4E0B\u4E00\u4E2A token \u4E4B\u524D\u7684\u6240\u6709\u6742\u9879</li><li>\u8BE5\u884C\u4E4B\u540E\u7684\u6CE8\u91CA\u90FD\u4E0E\u4E0B\u4E2A\u7684 token \u76F8\u5173</li></ul><p>\u5BF9\u4E8E\u6587\u4EF6\u4E2D\u7684\u524D\u5BFC\uFF08leading\uFF09\u548C\u7ED3\u675F\uFF08ending\uFF09\u6CE8\u91CA\uFF1A</p><ul><li>\u6E90\u6587\u4EF6\u4E2D\u7684\u7B2C\u4E00\u4E2A token \u62E5\u6709\u6240\u6709\u5F00\u59CB\u7684\u6742\u9879</li><li>\u800C\u6587\u4EF6\u6700\u540E\u7684\u4E00\u4E9B\u5217\u6742\u9879\u5219\u9644\u52A0\u5230\u6587\u4EF6\u7ED3\u675F\u7B26\u4E0A\uFF0C\u8BE5 token \u957F\u5EA6\u4E3A 0</li></ul><h5 id="\u6742\u9879-api" tabindex="-1">\u6742\u9879 API <a class="header-anchor" href="#\u6742\u9879-api" aria-hidden="true">#</a></h5><p>\u6CE8\u91CA\u5728\u591A\u6570\u57FA\u672C\u4F7F\u7528\u4E2D\uFF0C\u90FD\u662F\u8BA9\u4EBA\u5173\u6CE8\u7684\u6742\u9879\u3002\u8282\u70B9\u7684\u6CE8\u91CA\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u51FD\u6570\u83B7\u53D6\uFF1A</p><table><thead><tr><th style="text-align:center;">\u51FD\u6570</th><th style="text-align:center;">\u63CF\u8FF0</th></tr></thead><tbody><tr><td style="text-align:center;"><code>ts.getLeadingCommentRanges</code></td><td style="text-align:center;">\u7ED9\u5B9A\u6E90\u6587\u672C\u53CA\u5176\u4F4D\u7F6E\uFF0C\u8FD4\u56DE\u7ED9\u5B9A\u4F4D\u7F6E\u540E\u7B2C\u4E00\u4E2A\u6362\u884C\u7B26\u5230 token \u672C\u8EAB\u4E4B\u95F4\u7684\u6CE8\u91CA\u8303\u56F4\uFF08\u53EF\u80FD\u9700\u8981\u7ED3\u5408 <code>ts.Node.getFullStart</code> \u4F7F\u7528\uFF09\u3002</td></tr><tr><td style="text-align:center;"><code>ts.getTrailingCommentRanges</code></td><td style="text-align:center;">\u7ED9\u5B9A\u6E90\u6587\u672C\u53CA\u5176\u4F4D\u7F6E\uFF0C\u8FD4\u56DE\u7ED9\u5B9A\u4F4D\u7F6E\u540E\u7B2C\u4E00\u4E2A\u6362\u884C\u7B26\u4E4B\u524D\u7684\u6CE8\u91CA\u8303\u56F4\uFF08\u53EF\u80FD\u9700\u8981\u7ED3\u5408 <code>ts.Node.getEnd</code> \u4F7F\u7528\uFF09\u3002</td></tr></tbody></table><p>\u5047\u8BBE\u4E0B\u9762\u662F\u67D0\u4E2A\u6E90\u6587\u4EF6\u7684\u4E00\u90E8\u5206\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#F78C6C;">debugger</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;">/*hello*/</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">//bye</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">/*hi*/</span><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">function</span></span>
<span class="line"></span></code></pre></div><p>\u5BF9 <code>function</code> <code>\u800C\u8A00\uFF0CgetLeadingCommentRanges</code> \u4EC5\u8FD4\u56DE\u6700\u540E\u7684\u4E24\u4E2A\u6CE8\u91CA <code>//bye</code> \u548C <code>/*hi*/</code>\u3002 \u53E6\u5916\uFF0C\u800C\u5728 <code>debugger</code> \u8BED\u53E5\u7ED3\u675F\u4F4D\u7F6E\u8C03\u7528 <code>getTrailingCommentRanges</code> \u4F1A\u5F97\u5230\u6CE8\u91CA <code>/*hello*/</code>\u3002</p><h5 id="token-start-\u548C-full-start-\u4F4D\u7F6E" tabindex="-1">Token Start \u548C Full Start \u4F4D\u7F6E <a class="header-anchor" href="#token-start-\u548C-full-start-\u4F4D\u7F6E" aria-hidden="true">#</a></h5><p>\u8282\u70B9\u6709\u6240\u8C13\u7684 &quot;token start&quot; \u548C &quot;full start&quot; \u4F4D\u7F6E\u3002</p><ul><li>Token Start\uFF1A\u6BD4\u8F83\u81EA\u7136\u7684\u7248\u672C\uFF0C\u5373\u6587\u4EF6\u4E2D\u4E00\u4E2A token \u7684\u6587\u672C\u5F00\u59CB\u7684\u4F4D\u7F6E\u3002</li><li>Full Start\uFF1A\u662F\u6307\u626B\u63CF\u5668\u4ECE\u4E0A\u4E00\u4E2A\u91CD\u8981 token \u5F00\u59CB\u626B\u63CF\u7684\u4F4D\u7F6E\u3002</li></ul><p>AST \u8282\u70B9\u6709 <code>getStart</code> \u548C <code>getFullStart</code> API \u7528\u4E8E\u83B7\u53D6\u4EE5\u4E0A\u4E24\u79CD\u4F4D\u7F6E\uFF0C\u8FD8\u662F\u8FD9\u4E2A\u4F8B\u5B50\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#F78C6C;">debugger</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;">/*hello*/</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">//bye</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">/*hi*/</span><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">function</span></span>
<span class="line"></span></code></pre></div><p>\u5BF9 <code>function</code> \u800C\u8A00\uFF0Ctoken start \u5373 <code>function</code> \u7684\u4F4D\u7F6E\uFF0C\u800C <strong>full</strong> start \u662F <code>/*hello*/</code> \u7684\u4F4D\u7F6E\u3002\u8981\u6CE8\u610F\uFF0Cfull start \u751A\u81F3\u4F1A\u5305\u542B\u524D\u4E00\u8282\u70B9\u62E5\u6709\u7684\u6742\u9879\u3002</p><h3 id="\u626B\u63CF\u5668" tabindex="-1">\u626B\u63CF\u5668 <a class="header-anchor" href="#\u626B\u63CF\u5668" aria-hidden="true">#</a></h3><p>TypeScript \u626B\u63CF\u5668\u7684\u6E90\u7801\u5747\u4F4D\u4E8E <code>scanner.ts</code>\u3002\u5728\u5185\u90E8\uFF0C\u7531\u89E3\u6790\u5668\u63A7\u5236\u626B\u63CF\u5668\u5C06\u6E90\u7801\u8F6C\u5316\u4E3A\u62BD\u8C61\u8BED\u6CD5\u6811\uFF08AST\uFF09\u3002\u671F\u671B\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">SourceCode </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~ \u626B\u63CF\u5668 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> Token \u6D41 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~ \u89E3\u6790\u5668 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> AST</span></span>
<span class="line"></span></code></pre></div><h4 id="\u89E3\u6790\u5668\u5BF9\u626B\u63CF\u5668\u7684\u4F7F\u7528" tabindex="-1">\u89E3\u6790\u5668\u5BF9\u626B\u63CF\u5668\u7684\u4F7F\u7528 <a class="header-anchor" href="#\u89E3\u6790\u5668\u5BF9\u626B\u63CF\u5668\u7684\u4F7F\u7528" aria-hidden="true">#</a></h4><p>\u4E3A\u907F\u514D\u91CD\u590D\u521B\u5EFA\u626B\u63CF\u5668\u9020\u6210\u7684\u5F00\u9500\uFF0C<code>parser.ts</code> \u4E2D\u521B\u5EFA\u4E86\u4E00\u4E2A\u626B\u63CF\u5668\u7684<strong>\u5355\u4F8B</strong>\u3002\u89E3\u6790\u5668\u6839\u636E\u9700\u8981\u4F7F\u7528 <code>initializeState</code> \u51FD\u6570\u51C6\u5907\u8BE5\u626B\u63CF\u5668\u3002</p><p>\u4E0B\u9762\u662F\u89E3\u6790\u5668\u4E2D\u7684\u5B9E\u9645\u4EE3\u7801\u7684\u7B80\u5316\u7248\uFF0C\u4F60\u53EF\u4EE5\u8FD0\u884C\u5B83\u6F14\u793A\u4EE5\u4E0A\u6982\u5FF5</p><p><code>code/compiler/scanner/runScanner.ts</code></p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> ts </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ntypescript</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u5355\u4F8B\u626B\u63CF\u5668</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> scanner </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createScanner</span><span style="color:#A6ACCD;">(ts</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ScriptTarget</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Latest</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">/* \u5FFD\u7565\u6742\u9879 */</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u6B64\u51FD\u6570\u4E0E\u521D\u59CB\u5316\u4F7F\u7528\u7684 \`initializeState\` \u51FD\u6570\u76F8\u4F3C</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">initializeState</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">scanner</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setText</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">text</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">scanner</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setOnError</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">ts</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">DiagnosticMessage</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">message</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">scanner</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setScriptTarget</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">ts</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ScriptTarget</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ES5</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">scanner</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setLanguageVariant</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">ts</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">LanguageVariant</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Standard</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4F7F\u7528\u793A\u4F8B</span></span>
<span class="line"><span style="color:#82AAFF;">initializeState</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#C3E88D;">var foo = 123;</span></span>
<span class="line"><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">trim</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u5F00\u59CB\u626B\u63CF</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> token </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> scanner</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">scan</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">while</span><span style="color:#A6ACCD;"> (token </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> ts</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">EndOfFileToken) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">ts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">formatSyntaxKind</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">token</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">token</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">scanner</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">scan</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8BE5\u6BB5\u4EE3\u7801\u8F93\u51FA\u4EE5\u4E0B\u5185\u5BB9\uFF1A</p><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">VarKeyword</span></span>
<span class="line"><span style="color:#A6ACCD;">Identifier</span></span>
<span class="line"><span style="color:#A6ACCD;">FirstAssignment</span></span>
<span class="line"><span style="color:#A6ACCD;">FirstLiteralToken</span></span>
<span class="line"><span style="color:#A6ACCD;">SemicolonToken</span></span>
<span class="line"></span></code></pre></div><h4 id="\u626B\u63CF\u5668\u72B6\u6001" tabindex="-1">\u626B\u63CF\u5668\u72B6\u6001 <a class="header-anchor" href="#\u626B\u63CF\u5668\u72B6\u6001" aria-hidden="true">#</a></h4><p>\u8C03\u7528 <code>scan</code> \u540E\uFF0C\u626B\u63CF\u5668\u66F4\u65B0\u5176\u5C40\u90E8\u72B6\u6001\uFF08\u626B\u63CF\u4F4D\u7F6E\uFF0C\u5F53\u524D token \u8BE6\u60C5\u7B49\uFF09\u3002\u626B\u63CF\u5668\u63D0\u4F9B\u4E86\u4E00\u7EC4\u5DE5\u5177\u51FD\u6570\u83B7\u53D6\u5F53\u524D\u626B\u63CF\u5668\u72B6\u6001\u3002\u4E0B\u4F8B\u4E2D\uFF0C\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u626B\u63CF\u5668\u5E76\u7528\u5B83\u8BC6\u522B token \u4EE5\u53CA token \u5728\u4EE3\u7801\u4E2D\u7684\u4F4D\u7F6E\u3002</p><p><code>code/compiler/scanner/runScannerWithPosition.ts</code></p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u4F7F\u7528\u793A\u4F8B</span></span>
<span class="line"><span style="color:#82AAFF;">initializeState</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#C3E88D;">var foo = 123;</span></span>
<span class="line"><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">trim</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u5F00\u59CB\u626B\u63CF</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> token </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> scanner</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">scan</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">while</span><span style="color:#A6ACCD;"> (token </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> ts</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">EndOfFileToken) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">currentToken</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">formatSyntaxKind</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">token</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tokenStart</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">scanner</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getStartPos</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">token</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">scanner</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">scan</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tokenEnd</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">scanner</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getStartPos</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">currentToken</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tokenStart</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tokenEnd</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8BE5\u4EE3\u7801\u8F93\u51FA\u4EE5\u4E0B\u5185\u5BB9\uFF1A</p><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">VarKeyword 0 3</span></span>
<span class="line"><span style="color:#A6ACCD;">Identifier 3 7</span></span>
<span class="line"><span style="color:#A6ACCD;">FirstAssignment 7 9</span></span>
<span class="line"><span style="color:#A6ACCD;">FirstLiteralToken 9 13</span></span>
<span class="line"><span style="color:#A6ACCD;">SemicolonToken 13 14</span></span>
<span class="line"></span></code></pre></div><h4 id="\u72EC\u7ACB\u626B\u63CF\u5668" tabindex="-1">\u72EC\u7ACB\u626B\u63CF\u5668 <a class="header-anchor" href="#\u72EC\u7ACB\u626B\u63CF\u5668" aria-hidden="true">#</a></h4><p>\u5373\u4FBF TypeScript \u89E3\u6790\u5668\u6709\u5355\u4F8B\u626B\u63CF\u5668\uFF0C\u4F60\u4ECD\u53EF\u4EE5\u4F7F\u7528 <code>createScanner</code> \u521B\u5EFA\u72EC\u7ACB\u7684\u626B\u63CF\u5668\uFF0C\u7136\u540E\u53EF\u4EE5\u7528 <code>setText/setTextPos</code> \u968F\u610F\u626B\u63CF\u6587\u4EF6\u7684\u4E0D\u540C\u4F4D\u7F6E\u3002</p><h3 id="\u89E3\u6790\u5668" tabindex="-1">\u89E3\u6790\u5668 <a class="header-anchor" href="#\u89E3\u6790\u5668" aria-hidden="true">#</a></h3><p>TypeScript \u89E3\u6790\u5668\u4EE3\u7801\u5747\u4F4D\u4E8E parser.ts \u4E2D\u3002\u5728\u5185\u90E8\uFF0C\u7531\u89E3\u6790\u5668\u63A7\u5236\u626B\u63CF\u5668\u5C06\u6E90\u7801\u8F6C\u5316\u4E3A AST\u3002\u5176\u671F\u671B\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">\u6E90\u7801 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~ \u626B\u63CF\u5668 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> Token \u6D41 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~ \u89E3\u6790\u5668 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> AST</span></span>
<span class="line"></span></code></pre></div><p>\u89E3\u6790\u5668\u5B9E\u73B0\u539F\u7406\u662F\u5355\u4F8B\u6A21\u5F0F\uFF08\u5176\u539F\u56E0\u7C7B\u4F3C\u626B\u63CF\u5668\uFF0C\u5982\u679C\u80FD\u91CD\u65B0\u521D\u59CB\u5316\u5C31\u4E0D\u91CD\u65B0\u6784\u5EFA\uFF09\u3002\u5B9E\u9645\u5B9E\u73B0\u6210 <code>namespace Parser</code>\uFF0C\u5305\u542B\u89E3\u6790\u5668\u7684\u5404\u79CD\u72B6\u6001\u53D8\u91CF\u548C\u5355\u4F8B\u626B\u63CF\u5668\uFF08<code>const scanner</code>\uFF09\u3002\u8BE5\u626B\u63CF\u5668\u7531\u89E3\u6790\u5668\u51FD\u6570\u7BA1\u7406\u3002</p><h4 id="\u7A0B\u5E8F\u5BF9\u89E3\u6790\u5668\u7684\u4F7F\u7528" tabindex="-1">\u7A0B\u5E8F\u5BF9\u89E3\u6790\u5668\u7684\u4F7F\u7528 <a class="header-anchor" href="#\u7A0B\u5E8F\u5BF9\u89E3\u6790\u5668\u7684\u4F7F\u7528" aria-hidden="true">#</a></h4><p>\u89E3\u6790\u5668\u7531\u7A0B\u5E8F\u95F4\u63A5\u9A71\u52A8\uFF08\u901A\u8FC7\u4E4B\u524D\u63D0\u5230\u8FC7\u7684 <code>CompilerHost</code>\uFF09\u3002\u57FA\u672C\u4E0A\uFF0C\u7B80\u5316\u7684\u8C03\u7528\u6808\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">\u7A0B\u5E8F -</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  CompilerHost.getSourceFile -</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">\u5168\u5C40\u51FD\u6570 parser.ts</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">.createSourceFile -</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      Parser.parseSourceFile</span></span>
<span class="line"></span></code></pre></div><p><code>parseSourceFile</code> \u4E0D\u4EC5\u51C6\u5907\u597D\u89E3\u6790\u5668\u7684\u72B6\u6001\uFF0C\u8FD8\u8C03\u7528 <code>initializeState</code> \u51C6\u5907\u597D\u626B\u63CF\u5668\u7684\u72B6\u6001\u3002\u7136\u540E\u4F7F\u7528 <code>parseSourceFileWorker</code> \u7EE7\u7EED\u89E3\u6790\u6E90\u4EE3\u7801\u3002</p><h4 id="\u4F7F\u7528\u793A\u4F8B" tabindex="-1">\u4F7F\u7528\u793A\u4F8B <a class="header-anchor" href="#\u4F7F\u7528\u793A\u4F8B" aria-hidden="true">#</a></h4><p>\u6DF1\u5165\u89E3\u6790\u5668\u7684\u5185\u90E8\u4E4B\u524D\uFF0C\u8FD9\u91CC\u6709\u4E2A\u4F7F\u7528 TypeScript \u89E3\u6790\u5668\u7684\u793A\u4F8B\uFF0C\uFF08\u4F7F\u7528 <code>ts.createSourceFile</code>\uFF09\u83B7\u53D6\u4E00\u4E2A\u6E90\u6587\u4EF6\u7684 AST \u5E76\u6253\u5370\u5B83\u3002</p><p><code>code/compiler/parser/runParser.ts</code></p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> ts </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ntypescript</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">printAllChildren</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ts</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">depth</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Array</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">depth</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">----</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">formatSyntaxKind</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">pos</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">end</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">depth</span><span style="color:#89DDFF;">++;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getChildren</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">c</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">printAllChildren</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">c</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">depth</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> sourceCode </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#C3E88D;">var foo = 123;</span></span>
<span class="line"><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">trim</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> sourceFile </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createSourceFile</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">foo.ts</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> sourceCode</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ts</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ScriptTarget</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ES5</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">printAllChildren</span><span style="color:#A6ACCD;">(sourceFile)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u8BE5\u6BB5\u4EE3\u7801\u4F1A\u6253\u5370\u4EE5\u4E0B\u5185\u5BB9\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#A6ACCD;">SourceFile </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">14</span></span>
<span class="line"><span style="color:#89DDFF;">----</span><span style="color:#A6ACCD;"> SyntaxList </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">14</span></span>
<span class="line"><span style="color:#89DDFF;">--------</span><span style="color:#A6ACCD;"> VariableStatement </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">14</span></span>
<span class="line"><span style="color:#89DDFF;">------------</span><span style="color:#A6ACCD;"> VariableDeclarationList </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">13</span></span>
<span class="line"><span style="color:#89DDFF;">----------------</span><span style="color:#A6ACCD;"> VarKeyword </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span></span>
<span class="line"><span style="color:#89DDFF;">----------------</span><span style="color:#A6ACCD;"> SyntaxList </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">13</span></span>
<span class="line"><span style="color:#89DDFF;">--------------------</span><span style="color:#A6ACCD;"> VariableDeclaration </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">13</span></span>
<span class="line"><span style="color:#89DDFF;">------------------------</span><span style="color:#A6ACCD;"> Identifier </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7</span></span>
<span class="line"><span style="color:#89DDFF;">------------------------</span><span style="color:#A6ACCD;"> FirstAssignment </span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">9</span></span>
<span class="line"><span style="color:#89DDFF;">------------------------</span><span style="color:#A6ACCD;"> FirstLiteralToken </span><span style="color:#F78C6C;">9</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">13</span></span>
<span class="line"><span style="color:#89DDFF;">------------</span><span style="color:#A6ACCD;"> SemicolonToken </span><span style="color:#F78C6C;">13</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">14</span></span>
<span class="line"><span style="color:#89DDFF;">----</span><span style="color:#A6ACCD;"> EndOfFileToken </span><span style="color:#F78C6C;">14</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">14</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u628A\u5934\u5411\u5DE6\u503E\uFF0C\u8FD9\u4E2A\u770B\u8D77\u6765\u50CF\u68F5\uFF08\u53F3\u4FA7\uFF09\u6811</p><h4 id="\u89E3\u6790\u5668\u51FD\u6570" tabindex="-1">\u89E3\u6790\u5668\u51FD\u6570 <a class="header-anchor" href="#\u89E3\u6790\u5668\u51FD\u6570" aria-hidden="true">#</a></h4><p>\u5982\u524D\u6240\u8FF0\uFF0C<code>parseSourceFile</code> \u8BBE\u7F6E\u521D\u59CB\u72B6\u6001\u5E76\u5C06\u5DE5\u4F5C\u4EA4\u7ED9 <code>parseSourceFileWorker</code> \u51FD\u6570\u3002</p><h5 id="parsesourcefileworker" tabindex="-1"><code>parseSourceFileWorker</code> <a class="header-anchor" href="#parsesourcefileworker" aria-hidden="true">#</a></h5><p>\u8BE5\u51FD\u6570\u5148\u521B\u5EFA\u4E00\u4E2A <code>SourceFile</code> AST \u8282\u70B9\uFF0C\u7136\u540E\u4ECE <code>parseStatements</code> \u51FD\u6570\u5F00\u59CB\u89E3\u6790\u6E90\u4EE3\u7801\u3002\u4E00\u65E6\u8FD4\u56DE\u7ED3\u679C\uFF0C\u5C31\u7528\u989D\u5916\u4FE1\u606F\uFF08\u4F8B\u5982 <code>nodeCount</code>, <code>identifierCount</code>\u7B49\uFF09 \u5B8C\u5584 <code>SourceFile</code> \u8282\u70B9\u3002</p><h5 id="parsestatements" tabindex="-1"><code>parseStatements</code> <a class="header-anchor" href="#parsestatements" aria-hidden="true">#</a></h5><p>\u662F\u6700\u91CD\u8981\u7684 <code>parseXXX</code> \u7CFB\u51FD\u6570\u4E4B\u4E00\uFF08\u6982\u5FF5\u63A5\u4E0B\u6765\u4ECB\u7ECD\uFF09\u3002\u5B83\u6839\u636E\u626B\u63CF\u5668\u8FD4\u56DE\u7684\u5F53\u524D token \u6765\u5207\u6362\uFF08\u8C03\u7528\u76F8\u5E94\u7684 <code>parseXXX</code> \u51FD\u6570\uFF09\uFF0C\u4F8B\u5982\uFF1A\u5982\u679C\u5F53\u524D token \u662F\u4E00\u4E2A <code>SemicolonToken</code>\uFF08\u5206\u53F7\u6807\u8BB0\uFF09\uFF0C\u5C31\u4F1A\u8C03\u7528 <code>paserEmptyStatement</code> \u4E3A\u7A7A\u8BED\u53E5\u521B\u5EFA\u4E00\u4E2A AST \u8282\u70B9</p><h5 id="\u8282\u70B9\u521B\u5EFA" tabindex="-1">\u8282\u70B9\u521B\u5EFA <a class="header-anchor" href="#\u8282\u70B9\u521B\u5EFA" aria-hidden="true">#</a></h5><p>\u89E3\u6790\u5668\u6709\u4E00\u7CFB\u5217 <code>parseXXX</code> \u51FD\u6570\u7528\u6765\u521B\u5EFA\u76F8\u5E94\u7C7B\u578B\u4E3AXXX\u7684\u8282\u70B9\uFF0C\u901A\u5E38\u5728\u76F8\u5E94\u7C7B\u578B\u7684\u8282\u70B9\u51FA\u73B0\u65F6\u88AB\uFF08\u5176\u4ED6\u89E3\u6790\u5668\u51FD\u6570\uFF09\u8C03\u7528\u3002\u8BE5\u8FC7\u7A0B\u7684\u5178\u578B\u793A\u4F8B\u662F\u89E3\u6790\u7A7A\u8BED\u53E5\uFF08\u4F8B\u5982 <code>;;;;;;</code>\uFF09\u65F6\u8981\u7528\u7684 <code>parseEmptyStatement()</code> \u51FD\u6570\u3002\u4E0B\u9762\u662F\u5176\u5168\u90E8\u4EE3\u7801\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">parseEmptyStatement</span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Statement</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> &lt;</span><span style="color:#FFCB6B;">Statement</span><span style="color:#F07178;">&gt;</span><span style="color:#82AAFF;">createNode</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">EmptyStatement</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">parseExpected</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SemicolonToken</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">finishNode</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5B83\u5C55\u793A\u4E86 3 \u4E2A\u5173\u952E\u51FD\u6570 <code>createNode</code>, <code>parseExpected</code> \u548C <code>finishNode</code>.</p><h6 id="createnode" tabindex="-1"><code>createNode</code> <a class="header-anchor" href="#createnode" aria-hidden="true">#</a></h6><p>\u89E3\u6790\u5668\u51FD\u6570 <code>function createNode(kind: SyntaxKind, pos?: number): Node</code> \u8D1F\u8D23\u521B\u5EFA\u8282\u70B9\uFF0C\u8BBE\u7F6E\u4F20\u5165\u7684 <code>SyntaxKind</code>\uFF08\u8BED\u6CD5\u7C7B\u522B\uFF09\uFF0C\u548C\u521D\u59CB\u4F4D\u7F6E\uFF08\u9ED8\u8BA4\u4F7F\u7528\u5F53\u524D\u626B\u63CF\u5668\u72B6\u6001\u63D0\u4F9B\u7684\u4F4D\u7F6E\u4FE1\u606F\uFF09\u3002</p><h6 id="parseexpected" tabindex="-1"><code>parseExpected</code> <a class="header-anchor" href="#parseexpected" aria-hidden="true">#</a></h6><p>\u89E3\u6790\u5668\u7684 <code>parseExpected</code> \u51FD\u6570 <code>function parseExpected(kind: SyntaxKind, diagnosticMessage?: DiagnosticMessage): boolean</code> \u4F1A\u68C0\u67E5\u89E3\u6790\u5668\u72B6\u6001\u4E2D\u7684\u5F53\u524D token \u662F\u5426\u4E0E\u6307\u5B9A\u7684 <code>SyntaxKind</code> \u5339\u914D\u3002\u5982\u679C\u4E0D\u5339\u914D\uFF0C\u5219\u4F1A\u5411\u4F20\u5165\u7684 <code>diagnosticMessage</code>\uFF08\u8BCA\u65AD\u6D88\u606F\uFF09\u62A5\u544A\uFF0C\u672A\u4F20\u5165\u5219\u521B\u5EFA\u67D0\u79CD\u901A\u7528\u5F62\u5F0F <code>xxx expected</code>\u3002\u8BE5\u51FD\u6570\u5185\u90E8\u7528 <code>parseErrorAtPosition</code> \u51FD\u6570\uFF08\u4F7F\u7528\u626B\u63CF\u4F4D\u7F6E\uFF09\u63D0\u4F9B\u826F\u597D\u7684\u9519\u8BEF\u62A5\u544A\u3002</p><h6 id="finishnode" tabindex="-1"><code>finishNode</code> <a class="header-anchor" href="#finishnode" aria-hidden="true">#</a></h6><p>\u89E3\u6790\u5668\u7684 <code>finishNode</code> \u51FD\u6570 <code>function finishNode&lt;T extends Node&gt;(node: T, end?: number): T</code> \u8BBE\u7F6E\u8282\u70B9\u7684 <code>end</code> \u4F4D\u7F6E\uFF0C\u5E76\u6DFB\u52A0\u4E00\u4E9B\u6709\u7528\u7684\u4FE1\u606F\uFF0C\u4F8B\u5982\u4E0A\u4E0B\u6587\u6807\u5FD7\uFF08<code>parserContextFlags</code>\uFF09\u4EE5\u53CA\u89E3\u6790\u8BE5\u8282\u70B9\u524D\u51FA\u73B0\u7684\u9519\u8BEF\uFF08\u5982\u679C\u6709\u9519\u7684\u8BDD\uFF0C\u5C31\u4E0D\u80FD\u5728\u589E\u91CF\u89E3\u6790\u4E2D\u91CD\u7528\u6B64 AST \u8282\u70B9\uFF09\u3002</p><h3 id="\u7ED1\u5B9A\u5668" tabindex="-1">\u7ED1\u5B9A\u5668 <a class="header-anchor" href="#\u7ED1\u5B9A\u5668" aria-hidden="true">#</a></h3><p>\u5927\u591A\u6570\u7684 JavaScript \u8F6C\u8BD1\u5668\uFF08transpiler\uFF09\u90FD\u6BD4 TypeScript \u7B80\u5355\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u51E0\u4E4E\u6CA1\u63D0\u4F9B\u4EE3\u7801\u5206\u6790\u7684\u65B9\u6CD5\u3002\u5178\u578B\u7684 JavaScript \u8F6C\u6362\u5668\u53EA\u6709\u4EE5\u4E0B\u6D41\u7A0B\uFF1A</p><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">\u6E90\u7801 </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~\u626B\u63CF\u5668~~</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> Tokens </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~\u89E3\u6790\u5668~~</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> AST </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">~\u53D1\u5C04\u5668~~</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> JavaScript</span></span>
<span class="line"></span></code></pre></div><p>\u4E0A\u8FF0\u67B6\u6784\u786E\u5B9E\u5BF9\u4E8E\u7B80\u5316 TypeScript \u751F\u6210 JavaScript \u7684\u7406\u89E3\u6709\u5E2E\u52A9\uFF0C\u4F46\u7F3A\u5931\u4E86\u4E00\u4E2A\u5173\u952E\u529F\u80FD\uFF0C\u5373 TypeScript \u7684\u8BED\u4E49\u7CFB\u7EDF\u3002\u4E3A\u4E86\u534F\u52A9\uFF08\u68C0\u67E5\u5668\u6267\u884C\uFF09\u7C7B\u578B\u68C0\u67E5\uFF0C\u7ED1\u5B9A\u5668\u5C06\u6E90\u7801\u7684\u5404\u90E8\u5206\u8FDE\u63A5\u6210\u4E00\u4E2A\u76F8\u5173\u7684\u7C7B\u578B\u7CFB\u7EDF\uFF0C\u4F9B\u68C0\u67E5\u5668\u4F7F\u7528\u3002\u7ED1\u5B9A\u5668\u7684\u4E3B\u8981\u804C\u8D23\u662F\u521B\u5EFA\u7B26\u53F7\uFF08Symbols\uFF09\u3002</p><h4 id="\u7B26\u53F7" tabindex="-1">\u7B26\u53F7 <a class="header-anchor" href="#\u7B26\u53F7" aria-hidden="true">#</a></h4><p>\u7B26\u53F7\u5C06 AST \u4E2D\u7684\u58F0\u660E\u8282\u70B9\u4E0E\u5176\u5B83\u58F0\u660E\u8FDE\u63A5\u5230\u76F8\u540C\u7684\u5B9E\u4F53\u4E0A\u3002\u7B26\u53F7\u662F\u8BED\u4E49\u7CFB\u7EDF\u7684\u57FA\u672C\u6784\u9020\u5757\u3002\u7B26\u53F7\u7684\u6784\u9020\u5668\u5B9A\u4E49\u5728 <code>core.ts</code>\uFF08\u7ED1\u5B9A\u5668\u5B9E\u9645\u4E0A\u901A\u8FC7 <code>objectAllocator.getSymbolConstructor</code> \u6765\u83B7\u53D6\u6784\u9020\u5668\uFF09\u3002\u4E0B\u9762\u662F\u7B26\u53F7\u6784\u9020\u5668\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Symbol</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">flags</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SymbolFlags</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">flags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">flags</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">declarations</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><code>SymbolFlags</code> \u7B26\u53F7\u6807\u5FD7\u662F\u4E2A\u6807\u5FD7\u679A\u4E3E\uFF0C\u7528\u4E8E\u8BC6\u522B\u989D\u5916\u7684\u7B26\u53F7\u7C7B\u522B\uFF08\u4F8B\u5982\uFF1A\u53D8\u91CF\u4F5C\u7528\u57DF\u6807\u5FD7 <code>FunctionScopedVariable</code> \u6216 <code>BlockScopedVariable</code> \u7B49\uFF09</p><h4 id="\u68C0\u67E5\u5668\u5BF9\u7ED1\u5B9A\u5668\u7684\u4F7F\u7528" tabindex="-1">\u68C0\u67E5\u5668\u5BF9\u7ED1\u5B9A\u5668\u7684\u4F7F\u7528 <a class="header-anchor" href="#\u68C0\u67E5\u5668\u5BF9\u7ED1\u5B9A\u5668\u7684\u4F7F\u7528" aria-hidden="true">#</a></h4><p>\u5B9E\u9645\u4E0A\uFF0C\u7ED1\u5B9A\u5668\u88AB\u68C0\u67E5\u5668\u5728\u5185\u90E8\u8C03\u7528\uFF0C\u800C\u68C0\u67E5\u5668\u53C8\u88AB\u7A0B\u5E8F\u8C03\u7528\u3002\u7B80\u5316\u7684\u8C03\u7528\u6808\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#A6ACCD;">program</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">getTypeChecker </span><span style="color:#89DDFF;">-&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  ts</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">createTypeChecker\uFF08\u68C0\u67E5\u5668\u4E2D\uFF09</span><span style="color:#89DDFF;">-&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    initializeTypeChecker\uFF08\u68C0\u67E5\u5668\u4E2D\uFF09 </span><span style="color:#89DDFF;">-&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      for each SourceFile </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">ts.bindSourceFile</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">\uFF08\u7ED1\u5B9A\u5668\u4E2D\uFF09</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// followed by</span></span>
<span class="line"><span style="color:#A6ACCD;">      for each SourceFile </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">ts.mergeSymbolTable</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">\uFF08\u68C0\u67E5\u5668\u4E2D\uFF09</span></span>
<span class="line"></span></code></pre></div><p>SourceFile \u662F\u7ED1\u5B9A\u5668\u7684\u5DE5\u4F5C\u5355\u5143\uFF0C<code>binder.ts</code> \u7531 <code>checker.ts</code> \u9A71\u52A8\u3002</p><h4 id="\u7ED1\u5B9A\u5668\u51FD\u6570" tabindex="-1">\u7ED1\u5B9A\u5668\u51FD\u6570 <a class="header-anchor" href="#\u7ED1\u5B9A\u5668\u51FD\u6570" aria-hidden="true">#</a></h4><p><code>bindSourceFile</code> \u548C <code>mergeSymbolTable</code> \u662F\u4E24\u4E2A\u5173\u952E\u7684\u7ED1\u5B9A\u5668\u51FD\u6570\uFF0C\u6211\u4EEC\u6765\u770B\u4E0B\uFF1A</p><h5 id="bindsourcefile" tabindex="-1"><code>bindSourceFile</code> <a class="header-anchor" href="#bindsourcefile" aria-hidden="true">#</a></h5><p>\u8BE5\u51FD\u6570\u4E3B\u8981\u662F\u68C0\u67E5 <code>file.locals</code> \u662F\u5426\u5B9A\u4E49\uFF0C\u5982\u679C\u6CA1\u6709\u5219\u4EA4\u7ED9\uFF08\u672C\u5730\u51FD\u6570\uFF09 <code>bind</code> \u6765\u5904\u7406\u3002</p><p>\u6CE8\u610F\uFF1A<code>locals</code> \u5B9A\u4E49\u5728\u8282\u70B9\u4E0A\uFF0C\u5176\u7C7B\u578B\u4E3A <code>SymbolTable</code>\u3002<code>SourceFile</code> \u4E5F\u662F\u4E00\u4E2A\u8282\u70B9\uFF08\u4E8B\u5B9E\u4E0A\u662F AST \u4E2D\u7684\u6839\u8282\u70B9\uFF09\u3002</p><p>\u63D0\u793A\uFF1ATypeScript \u7F16\u8BD1\u5668\u5927\u91CF\u4F7F\u7528\u672C\u5730\u51FD\u6570\u3002\u672C\u5730\u51FD\u6570\u5F88\u53EF\u80FD\u4F7F\u7528\u6765\u81EA\u7236\u51FD\u6570\u7684\u53D8\u91CF\uFF08\u901A\u8FC7\u95ED\u5305\u6355\u83B7\uFF09\u3002\u4F8B\u5982 <code>bind</code> \u662F <code>bindSourceFile</code> \u4E2D\u7684\u4E00\u4E2A\u672C\u5730\u51FD\u6570\uFF0C\u5B83\u6216\u5B83\u8C03\u7528\u7684\u51FD\u6570\u4F1A\u8BBE\u7F6E <code>symbolCount</code> \u548C <code>classifiableNames</code> \u7B49\u72B6\u6001\uFF0C\u7136\u540E\u5C06\u5176\u5B58\u5728\u8FD4\u56DE\u7684 <code>SourceFile</code> \u4E2D</p><h5 id="bind" tabindex="-1"><code>bind</code> <a class="header-anchor" href="#bind" aria-hidden="true">#</a></h5><p>bind \u80FD\u5904\u7406\u4EFB\u4E00\u8282\u70B9\uFF08\u4E0D\u53EA\u662F <code>SourceFile</code>\uFF09\uFF0C\u5B83\u505A\u7684\u7B2C\u4E00\u4EF6\u4E8B\u662F\u5206\u914D <code>node.parent</code>\uFF08\u5982\u679C <code>parent</code> \u53D8\u91CF\u5DF2\u8BBE\u7F6E\uFF0C\u7ED1\u5B9A\u5668\u5728 <code>bindChildren</code> \u51FD\u6570\u7684\u5904\u7406\u4E2D\u4ECD\u4F1A\u518D\u6B21\u8BBE\u7F6E\uFF09\uFF0C \u7136\u540E\u4EA4\u7ED9 <code>bindWorker</code> \u505A\u5F88\u591A\u91CD\u6D3B\u3002\u6700\u540E\u8C03\u7528 <code>bindChildren</code>\uFF08\u8BE5\u51FD\u6570\u7B80\u5355\u5730\u5C06\u7ED1\u5B9A\u5668\u7684\u72B6\u6001\uFF08\u5982\uFF1A<code>parent</code>\uFF09\u5B58\u5165\u51FD\u6570\u672C\u5730\u53D8\u91CF\u4E2D\uFF0C\u63A5\u7740\u5728\u6BCF\u4E2A\u5B50\u8282\u70B9\u4E0A\u8C03\u7528 <code>bind</code>\uFF0C\u7136\u540E\u518D\u5C06\u72B6\u6001\u8F6C\u5B58\u56DE\u7ED1\u5B9A\u5668\u4E2D\uFF09\u3002\u73B0\u5728\u6211\u4EEC\u770B\u4E0B <code>bindWorker</code>\uFF0C\u4E00\u4E2A\u66F4\u6709\u8DA3\u7684\u51FD\u6570\u3002</p><h5 id="bindworker" tabindex="-1">bindWorker <a class="header-anchor" href="#bindworker" aria-hidden="true">#</a></h5><p>\u8BE5\u51FD\u6570\u4F9D\u636E <code>node.kind</code>\uFF08<code>SyntaxKind</code>\u7C7B\u578B\uFF09\u8FDB\u884C\u5207\u6362\uFF0C\u5E76\u5C06\u5DE5\u4F5C\u59D4\u6258\u7ED9\u5408\u9002\u7684 <code>bindXXX</code> \u51FD\u6570\uFF08\u4E5F\u5B9A\u4E49\u5728<code>binder.ts</code>\u4E2D\uFF09\u3002\u4F8B\u5982\uFF1A\u5982\u679C\u8BE5\u8282\u70B9\u662F <code>SourceFile</code> \u5219\uFF08\u6700\u7EC8\u4E14\u4EC5\u5F53\u8282\u70B9\u662F\u5916\u90E8\u6587\u4EF6\u6A21\u5757\u65F6\uFF09\u8C03\u7528 <code>bindAnonymousDeclaration</code></p><h5 id="bindxxx-\u51FD\u6570" tabindex="-1"><code>bindXXX</code> \u51FD\u6570 <a class="header-anchor" href="#bindxxx-\u51FD\u6570" aria-hidden="true">#</a></h5><p><code>bindXXX</code> \u7CFB\u51FD\u6570\u6709\u4E00\u4E9B\u901A\u7528\u7684\u6A21\u5F0F\u548C\u5DE5\u5177\u51FD\u6570\u3002\u5176\u4E2D\u6700\u5E38\u7528\u7684\u4E00\u4E2A\u662F <code>createSymbol</code> \u51FD\u6570\uFF0C\u5168\u90E8\u4EE3\u7801\u5C55\u793A\u5982\u4E0B\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createSymbol</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">flags</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SymbolFlags</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Symbol</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">symbolCount</span><span style="color:#89DDFF;">++;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Symbol</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">flags</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u60A8\u6240\u89C1\uFF0C\u5B83\u7B80\u5355\u5730\u66F4\u65B0 <code>symbolCount</code>\uFF08\u4E00\u4E2A <code>bindSourceFile</code> \u7684\u672C\u5730\u53D8\u91CF\uFF09\uFF0C\u5E76\u4F7F\u7528\u6307\u5B9A\u7684\u53C2\u6570\u521B\u5EFA\u7B26\u53F7\u3002</p><h4 id="\u7ED1\u5B9A\u5668\u58F0\u660E" tabindex="-1">\u7ED1\u5B9A\u5668\u58F0\u660E <a class="header-anchor" href="#\u7ED1\u5B9A\u5668\u58F0\u660E" aria-hidden="true">#</a></h4><h5 id="\u7B26\u53F7\u4E0E\u58F0\u660E" tabindex="-1">\u7B26\u53F7\u4E0E\u58F0\u660E <a class="header-anchor" href="#\u7B26\u53F7\u4E0E\u58F0\u660E" aria-hidden="true">#</a></h5><p>\u8282\u70B9\u548C\u7B26\u53F7\u95F4\u7684\u94FE\u63A5\u7531\u51E0\u4E2A\u51FD\u6570\u6267\u884C\u3002\u5176\u4E2D\u4E00\u4E2A\u7528\u4E8E\u7ED1\u5B9A <code>SourceFile</code> \u8282\u70B9\u5230\u6E90\u6587\u4EF6\u7B26\u53F7\uFF08\u5916\u90E8\u6A21\u5757\u7684\u60C5\u51B5\u4E0B\uFF09\u7684\u51FD\u6570\u662F <code>addDeclarationToSymbol</code></p><p>\u6CE8\u610F\uFF1A\u5916\u90E8\u6A21\u5757\u6E90\u6587\u4EF6\u7684\u7B26\u53F7\u8BBE\u7F6E\u65B9\u5F0F\u662F <code>flags : SymbolFlags.ValueModule</code> \u548C <code>name: &#39;&quot;&#39; + removeFileExtension(file.fileName) + &#39;&quot;&#39;</code>.</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">addDeclarationToSymbol</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Symbol</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Declaration</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">symbolFlags</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SymbolFlags</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">flags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">|=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">symbolFlags</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u521B\u5EFA AST \u8282\u70B9\u5230 symbol \u7684\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">declarations</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">declarations</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u5C06\u8BE5\u8282\u70B9\u6DFB\u52A0\u4E3A\u8BE5\u7B26\u53F7\u7684\u4E00\u4E2A\u58F0\u660E</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">declarations</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">symbolFlags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SymbolFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">HasExports</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exports</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exports</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">symbolFlags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SymbolFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">HasMembers</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">members</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">members</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">symbolFlags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SymbolFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">valueDeclaration</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">valueDeclaration</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4E0A\u8FF0\u4EE3\u7801\u4E3B\u8981\u6267\u884C\u7684\u64CD\u4F5C\u5982\u4E0B\uFF1A</p><ul><li>\u521B\u5EFA\u4E00\u4E2A\u4ECE AST \u8282\u70B9\u5230\u7B26\u53F7\u7684\u94FE\u63A5\uFF08<code>node.symbol</code>\uFF09</li><li>\u5C06\u8282\u70B9\u6DFB\u52A0\u4E3A\u8BE5\u7B26\u53F7\u7684\u4E00\u4E2A\u58F0\u660E</li></ul><h5 id="\u58F0\u660E" tabindex="-1">\u58F0\u660E <a class="header-anchor" href="#\u58F0\u660E" aria-hidden="true">#</a></h5><p>\u58F0\u660E\u5C31\u662F\u4E00\u4E2A\u6709\u53EF\u9009\u7684\u540D\u5B57\u7684\u8282\u70B9\u3002\u4E0B\u9762\u662F <code>types.ts</code> \u4E2D\u7684\u5B9A\u4E49\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Declaration</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">_declarationBrand</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DeclarationName</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u7ED1\u5B9A\u5668\u5BB9\u5668" tabindex="-1">\u7ED1\u5B9A\u5668\u5BB9\u5668 <a class="header-anchor" href="#\u7ED1\u5B9A\u5668\u5BB9\u5668" aria-hidden="true">#</a></h4><p>AST \u7684\u8282\u70B9\u53EF\u4EE5\u88AB\u5F53\u4F5C\u5BB9\u5668\u3002\u8FD9\u51B3\u5B9A\u4E86\u8282\u70B9\u53CA\u76F8\u5173\u7B26\u53F7\u7684 <code>SymbolTables</code> \u7684\u7C7B\u522B\u3002\u5BB9\u5668\u662F\u4E2A\u62BD\u8C61\u6982\u5FF5\uFF08\u6CA1\u6709\u76F8\u5173\u7684\u6570\u636E\u7ED3\u6784\uFF09\u3002\u8BE5\u6982\u5FF5\u7531\u4E00\u4E9B\u4E1C\u897F\u51B3\u5B9A\uFF0C<code>ContainerFlags</code> \u679A\u4E3E\u662F\u5176\u4E2D\u4E4B\u4E00\u3002\u51FD\u6570 <code>getContainerFlags</code>\uFF08\u4F4D\u4E8E <code>binder.ts</code>\uFF09 \u9A71\u52A8\u6B64\u6807\u5FD7\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getContainerFlags</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ContainerFlags</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">switch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ClassExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ClassDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">InterfaceDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">EnumDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">TypeLiteral</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ObjectLiteralExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ContainerFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">IsContainer</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">CallSignature</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ConstructSignature</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">IndexSignature</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">MethodDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">MethodSignature</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">FunctionDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Constructor</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">GetAccessor</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SetAccessor</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">FunctionType</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ConstructorType</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">FunctionExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ArrowFunction</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ModuleDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SourceFile</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">TypeAliasDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ContainerFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">IsContainerWithLocals</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">CatchClause</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ForStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ForInStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ForOfStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">CaseBlock</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ContainerFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">IsBlockScopedContainer</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Block</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u4E0D\u8981\u5C06\u51FD\u6570\u5185\u90E8\u7684\u5757\u76F4\u63A5\u5F53\u505A\u5757\u4F5C\u7528\u57DF\u7684\u5BB9\u5668\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u672C\u5757\u4E2D\u7684\u672C\u5730\u53D8\u91CF\u5E94\u5F53\u7F6E\u4E8E\u51FD\u6570\u4E2D\uFF0C\u5426\u5219\u4E0B\u4F8B\u4E2D\u7684 &#39;x&#39; \u4E0D\u4F1A\u91CD\u65B0\u58F0\u660E\u4E3A\u4E00\u4E2A\u5757\u4F5C\u7528\u57DF\u7684\u672C\u5730\u53D8\u91CF\uFF1A</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">//</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">//     function foo() {</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">//         var x;</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">//         let x;</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">//     }</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">//</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u5982\u679C\u5C06 &#39;var x&#39; \u7559\u5728\u51FD\u6570\u4E2D\uFF0C\u800C\u5C06 &#39;let x&#39; \u653E\u5230\u672C\u5757\u4E2D\uFF08\u51FD\u6570\u5916\uFF09\uFF0C\u5C31\u4E0D\u4F1A\u6709\u51B2\u7A81\u4E86\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">//</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u5982\u679C\u4E0D\u5728\u8FD9\u91CC\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u5757\u4F5C\u7528\u57DF\u5BB9\u5668\uFF0C&#39;var x&#39; \u548C &#39;let x&#39; \u90FD\u4F1A\u8FDB\u5165\u51FD\u6570\u5BB9\u5668\u672C\u5730\u4E2D\uFF0C\u8FD9\u6837\u5C31\u4F1A\u6709\u78B0\u649E\u51B2\u7A81\u3002</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">isFunctionLike</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">parent</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ContainerFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">None</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ContainerFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">IsBlockScopedContainer</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ContainerFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">None</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8BE5\u51FD\u6570\u53EA\u5728\u7ED1\u5B9A\u5668\u51FD\u6570 <code>bindChildren</code> \u4E2D\u8C03\u7528\uFF0C\u4F1A\u6839\u636E <code>getContainerFlags</code> \u7684\u8FD0\u884C\u7ED3\u679C\u5C06\u8282\u70B9\u8BBE\u4E3A <code>container</code> \u548C\uFF08\u6216\uFF09 <code>blockScopedContainer</code>\u3002\u51FD\u6570 <code>bindChildren</code> \u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u6240\u6709\u5BB9\u5668\u8282\u70B9\u90FD\u4EE5\u58F0\u660E\u987A\u5E8F\u4FDD\u5B58\u5728\u4E00\u4E2A\u94FE\u8868\u4E2D\u3002</span></span>
<span class="line"><span style="color:#676E95;">// \u7C7B\u578B\u68C0\u67E5\u5668\u4E2D\u7684 getLocalNameOfContainer \u51FD\u6570\u4F1A\u4F7F\u7528\u8BE5\u94FE\u8868\u5BF9\u5BB9\u5668\u4F7F\u7528\u7684\u672C\u5730\u540D\u79F0\u7684\u552F\u4E00\u6027\u505A\u9A8C\u8BC1\u3002</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">bindChildren</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u5728\u9012\u5F52\u5230\u5B50\u8282\u70B9\u4E4B\u524D\uFF0C\u6211\u4EEC\u5148\u8981\u4FDD\u5B58\u7236\u8282\u70B9\uFF0C\u5BB9\u5668\u548C\u5757\u5BB9\u5668\u3002\u5904\u7406\u5B8C\u5F39\u51FA\u7684\u5B50\u8282\u70B9\u540E\uFF0C\u518D\u5C06\u8FD9\u4E9B\u503C\u5B58\u56DE\u539F\u5904\u3002</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">saveParent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">parent</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">saveContainer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">savedBlockScopeContainer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">blockScopeContainer</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u73B0\u5728\u8981\u5C06\u8FD9\u4E2A\u8282\u70B9\u8BBE\u4E3A\u7236\u8282\u70B9\uFF0C\u6211\u4EEC\u8981\u9012\u5F52\u5B83\u7684\u5B50\u8282\u70B9\u3002</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">parent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u6839\u636E\u8282\u70B9\u7684\u7C7B\u578B\uFF0C\u9700\u8981\u5BF9\u5F53\u524D\u5BB9\u5668\u6216\u5757\u5BB9\u5668\u8FDB\u884C\u8C03\u6574\u3002 \u5982\u679C\u5F53\u524D\u8282\u70B9\u662F\u4E2A\u5BB9\u5668\uFF0C\u5219\u81EA\u52A8\u5C06\u5176\u89C6\u4E3A\u5F53\u524D\u7684\u5757\u5BB9\u5668\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u7531\u4E8E\u6211\u4EEC\u77E5\u9053\u5BB9\u5668\u53EF\u80FD\u5305\u542B\u672C\u5730\u53D8\u91CF\uFF0C\u56E0\u6B64\u63D0\u524D\u521D\u59CB\u5316 .locals \u5B57\u6BB5\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u8FD9\u6837\u505A\u662F\u56E0\u4E3A\u5F88\u53EF\u80FD\u9700\u8981\u5C06\u4E00\u4E9B\u5B50\uFF08\u8282\u70B9\uFF09\u7F6E\u5165 .locals \u4E2D\uFF08\u4F8B\u5982\uFF1A\u51FD\u6570\u53C2\u6570\u6216\u53D8\u91CF\u58F0\u660E\uFF09\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u4F46\u662F\uFF0C\u6211\u4EEC\u4E0D\u4F1A\u4E3B\u52A8\u4E3A\u5757\u5BB9\u5668\u521B\u5EFA .locals\uFF0C\u56E0\u4E3A\u901A\u5E38\u5757\u5BB9\u5668\u4E2D\u4E0D\u4F1A\u6709\u5757\u4F5C\u7528\u57DF\u53D8\u91CF\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u6211\u4EEC\u4E0D\u60F3\u4E3A\u9047\u5230\u7684\u6BCF\u4E2A\u5757\u90FD\u5206\u914D\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5927\u591A\u6570\u60C5\u51B5\u6CA1\u6709\u5FC5\u8981\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u6700\u540E\uFF0C\u5982\u679C\u662F\u4E2A\u5757\u5BB9\u5668\uFF0C\u6211\u4EEC\u5C31\u6E05\u7406\u8BE5\u5BB9\u5668\u4E2D\u53EF\u80FD\u5B58\u5728\u7684 .locals \u5BF9\u8C61\u3002\u8FD9\u79CD\u60C5\u51B5\u5E38\u5728\u589E\u91CF\u7F16\u8BD1\u573A\u666F\u4E2D\u53D1\u751F\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u7531\u4E8E\u6211\u4EEC\u53EF\u4EE5\u91CD\u7528\u4E0A\u6B21\u7F16\u8BD1\u7684\u8282\u70B9\uFF0C\u800C\u8BE5\u8282\u70B9\u53EF\u80FD\u5DF2\u7ECF\u521B\u5EFA\u4E86 locals \u5BF9\u8C61\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u56E0\u6B64\u5FC5\u987B\u6E05\u7406\uFF0C\u4EE5\u514D\u610F\u5916\u5730\u4ECE\u4E0A\u6B21\u7684\u7F16\u8BD1\u4E2D\u79FB\u52A8\u4E86\u8FC7\u65F6\u7684\u6570\u636E\u3002</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">containerFlags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getContainerFlags</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">containerFlags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ContainerFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">IsContainer</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">container</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">blockScopeContainer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">containerFlags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ContainerFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">HasLocals</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">locals</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">addToContainerChain</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">container</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">containerFlags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ContainerFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">IsBlockScopedContainer</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">blockScopeContainer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">blockScopeContainer</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">locals</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">forEachChild</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">bind</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">container</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">saveContainer</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">parent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">saveParent</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">blockScopeContainer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">savedBlockScopeContainer</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u60A8\u53EF\u80FD\u8FD8\u8BB0\u5F97\u7ED1\u5B9A\u5668\u51FD\u6570\u4E2D\u7684\u8FD9\u90E8\u5206\uFF1A<code>bindChildren</code> \u7531 <code>bind</code> \u51FD\u6570\u8C03\u7528\u3002\u6211\u4EEC\u5F97\u5230\u8FD9\u6837\u7684\u9012\u5F52\u7ED1\u5B9A\uFF1A<code>bind</code> \u8C03\u7528 <code>bindChildren</code>\uFF0C\u800C bindChildren \u53C8\u4E3A\u5176\u6BCF\u4E2A\u5B50\u8282\u70B9\u8C03\u7528 <code>bind</code></p><h4 id="\u7ED1\u5B9A\u5668\u7B26\u53F7\u8868" tabindex="-1">\u7ED1\u5B9A\u5668\u7B26\u53F7\u8868 <a class="header-anchor" href="#\u7ED1\u5B9A\u5668\u7B26\u53F7\u8868" aria-hidden="true">#</a></h4><p>\u7B26\u53F7\u8868\uFF08SymbolTable\uFF09\u662F\u4EE5\u4E00\u4E2A\u7B80\u5355\u7684 HashMap \u5B9E\u73B0\u7684\uFF0C\u4E0B\u9762\u662F\u5176\u63A5\u53E3\uFF08<code>types.ts</code>\uFF09\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SymbolTable</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  [</span><span style="color:#A6ACCD;">index</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Symbol</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u7B26\u53F7\u8868\u901A\u8FC7\u7ED1\u5B9A\u8FDB\u884C\u521D\u59CB\u5316\uFF0C\u8FD9\u91CC\u662F\u7F16\u8BD1\u5668\u4F7F\u7528\u7684\u4E00\u4E9B\u7B26\u53F7\u8868\uFF1A</p><p>\u8282\u70B9\u4E0A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#A6ACCD;">locals</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> SymbolTable</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">                   </span><span style="color:#676E95;">// \u8282\u70B9\u76F8\u5173\u7684\u672C\u5730\u53D8\u91CF</span></span>
<span class="line"></span></code></pre></div><p>\u7B26\u53F7\u4E0A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#A6ACCD;">members</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> SymbolTable</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">                  </span><span style="color:#676E95;">// \u7C7B\uFF0C\u63A5\u53E3\u6216\u5B57\u9762\u91CF\u5B9E\u4F8B\u6210\u5458</span></span>
<span class="line"><span style="color:#89DDFF;">exports?:</span><span style="color:#A6ACCD;"> SymbolTable</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">                  </span><span style="color:#676E95;">// \u6A21\u5757\u5BFC\u51FA</span></span>
<span class="line"></span></code></pre></div><p>\u8BF7\u6CE8\u610F\uFF1A<code>bindChildren</code> \u57FA\u4E8E <code>ContainerFlags</code> \u521D\u59CB\u5316 <code>locals</code>\uFF08\u4E3A <code>{}</code>\uFF09</p><h5 id="\u7B26\u53F7\u8868\u586B\u5145" tabindex="-1">\u7B26\u53F7\u8868\u586B\u5145 <a class="header-anchor" href="#\u7B26\u53F7\u8868\u586B\u5145" aria-hidden="true">#</a></h5><p>\u7B26\u53F7\u8868\u4F7F\u7528\u7B26\u53F7\u6765\u586B\u5145\uFF0C\u4E3B\u8981\u662F\u901A\u8FC7\u8C03\u7528 declareSymbol \u6765\u8FDB\u884C\uFF0C\u5982\u4E0B\u6240\u793A\u7684\u662F\u8BE5\u51FD\u6570\u7684\u5168\u90E8\u4EE3\u7801\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;"> * \u4E3A\u6307\u5B9A\u7684\u8282\u70B9\u58F0\u660E\u4E00\u4E2A\u7B26\u53F7\u5E76\u52A0\u5165 symbols\u3002\u6807\u8BC6\u540D\u51B2\u7A81\u65F6\u62A5\u544A\u9519\u8BEF\u3002</span></span>
<span class="line"><span style="color:#676E95;"> * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">symbolTable</span><span style="color:#676E95;"> - \u8981\u5C06\u8282\u70B9\u52A0\u5165\u8FDB\u7684\u7B26\u53F7\u8868</span></span>
<span class="line"><span style="color:#676E95;"> * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">parent</span><span style="color:#676E95;"> - \u6307\u5B9A\u8282\u70B9\u7684\u7236\u8282\u70B9\u7684\u58F0\u660E</span></span>
<span class="line"><span style="color:#676E95;"> * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#676E95;"> - \u8981\u6DFB\u52A0\u5230\u7B26\u53F7\u8868\u7684\uFF08\u8282\u70B9\uFF09\u58F0\u660E</span></span>
<span class="line"><span style="color:#676E95;"> * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">includes</span><span style="color:#676E95;"> - SymbolFlags\uFF0C\u6307\u5B9A\u8282\u70B9\u989D\u5916\u7684\u58F0\u660E\u7C7B\u578B\uFF08\u4F8B\u5982\uFF1Aexport, ambient \u7B49\uFF09</span></span>
<span class="line"><span style="color:#676E95;"> * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">excludes</span><span style="color:#676E95;"> - \u4E0D\u80FD\u5728\u7B26\u53F7\u8868\u4E2D\u58F0\u660E\u7684\u6807\u5FD7\uFF0C\u7528\u4E8E\u62A5\u544A\u7981\u6B62\u7684\u58F0\u660E</span></span>
<span class="line"><span style="color:#676E95;"> */</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">declareSymbol</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;">symbolTable</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SymbolTable</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;">parent</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Symbol</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Declaration</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;">includes</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SymbolFlags</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;">excludes</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SymbolFlags</span></span>
<span class="line"><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Symbol</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">Debug</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">assert</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">!</span><span style="color:#82AAFF;">hasDynamicName</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u9ED8\u8BA4\u5BFC\u51FA\u7684\u51FD\u6570\u8282\u70B9\u6216\u7C7B\u8282\u70B9\u7684\u7B26\u53F7\u603B\u662F&quot;default&quot;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">flags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">NodeFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Default</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">parent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">default</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getDeclarationName</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Symbol</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u68C0\u67E5\u7B26\u53F7\u8868\u4E2D\u662F\u5426\u5DF2\u6709\u540C\u540D\u7684\u7B26\u53F7\u3002\u82E5\u6CA1\u6709\uFF0C\u521B\u5EFA\u6B64\u540D\u79F0\u7684\u65B0\u7B26\u53F7\u5E76\u52A0\u5165\u8868\u4E2D\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u6CE8\u610F\uFF0C\u6211\u4EEC\u5C1A\u672A\u7ED9\u65B0\u7B26\u53F7\u6307\u5B9A\u4EFB\u4F55\u6807\u5FD7\u3002\u8FD9\u53EF\u4EE5\u786E\u4FDD\u4E0D\u4F1A\u548C\u4F20\u5165\u7684 excludes \u6807\u5FD7\u8D77\u51B2\u7A81\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">//</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u5982\u679C\u5DF2\u5B58\u5728\u7684\u4E00\u4E2A\u7B26\u53F7\uFF0C\u67E5\u770B\u662F\u5426\u4E0E\u8981\u521B\u5EFA\u7684\u65B0\u7B26\u53F7\u51B2\u7A81\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u4F8B\u5982\uFF1A\u540C\u4E00\u7B26\u53F7\u8868\u4E2D\uFF0C&#39;var&#39; \u7B26\u53F7\u548C &#39;class&#39; \u7B26\u53F7\u4F1A\u51B2\u7A81\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u5982\u679C\u6709\u51B2\u7A81\uFF0C\u62A5\u544A\u8BE5\u95EE\u9898\u7ED9\u8BE5\u7B26\u53F7\u7684\u6BCF\u4E2A\u58F0\u660E\uFF0C\u7136\u540E\u4E3A\u8BE5\u58F0\u660E\u521B\u5EFA\u4E00\u4E2A\u65B0\u7B26\u53F7</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">//</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u5982\u679C\u6211\u4EEC\u521B\u5EFA\u7684\u65B0\u7B26\u53F7\u65E2\u6CA1\u5728\u7B26\u53F7\u8868\u4E2D\u91CD\u540D\u4E5F\u6CA1\u548C\u73B0\u6709\u7B26\u53F7\u51B2\u7A81\uFF0C\u5C31\u5C06\u8BE5\u8282\u70B9\u6DFB\u52A0\u4E3A\u65B0\u7B26\u53F7\u7684\u552F\u4E00\u58F0\u660E\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">//</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u5426\u5219\uFF0C\u5C31\u8981\uFF08\u5C06\u65B0\u7B26\u53F7\uFF09\u5408\u5E76\u8FDB\u517C\u5BB9\u7684\u73B0\u6709\u7B26\u53F7\u4E2D\uFF08\u4F8B\u5982\u540C\u4E00\u5BB9\u5668\u4E2D\u6709\u591A\u4E2A\u540C\u540D\u7684 &#39;var&#39; \u65F6\uFF09\u3002\u8FD9\u79CD\u60C5\u51B5\u4E0B\u8981\u628A\u8BE5\u8282\u70B9\u6DFB\u52A0\u5230\u7B26\u53F7\u7684\u58F0\u660E\u5217\u8868\u4E2D\u3002</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">symbol</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">hasProperty</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">symbolTable</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">symbolTable</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">symbolTable</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">createSymbol</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">SymbolFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">None</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">includes</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SymbolFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Classifiable</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">classifiableNames</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">flags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">excludes</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">parent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u62A5\u544A\u6BCF\u4E2A\u91CD\u590D\u58F0\u660E\u7684\u9519\u8BEF\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u62A5\u544A\u4E4B\u524D\u9047\u5230\u7684\u58F0\u660E\u9519\u8BEF</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">message</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">flags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SymbolFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">BlockScopedVariable</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Diagnostics</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Cannot_redeclare_block_scoped_variable_0</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Diagnostics</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Duplicate_identifier_0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">declarations</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">declaration</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bindDiagnostics</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#82AAFF;">createDiagnosticForNode</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">declaration</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">declaration</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getDisplayName</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">declaration</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">        )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bindDiagnostics</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">createDiagnosticForNode</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getDisplayName</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">symbol</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">createSymbol</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">SymbolFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">None</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">symbol</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">createSymbol</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">SymbolFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">None</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__missing</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">addDeclarationToSymbol</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">includes</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">parent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">parent</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u586B\u5145\u54EA\u4E2A\u7B26\u53F7\u8868\uFF0C\u7531\u6B64\u51FD\u6570\u7684\u7B2C\u4E00\u4E2A\u53C2\u6570\u51B3\u5B9A\u3002\u4F8B\u5982\uFF1A\u6DFB\u52A0\u58F0\u660E\u5230\u7C7B\u578B\u4E3A <code>SyntaxKind.ClassDeclaration</code> \u6216 <code>SyntaxKind.ClassExpression</code> \u7684\u5BB9\u5668\u65F6\uFF0C\u5C06\u4F1A\u8C03\u7528\u4E0B\u9762\u7684\u51FD\u6570 <code>declareClassMember</code>:</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">declareClassMember</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Declaration</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">symbolFlags</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SymbolFlags</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">symbolExcludes</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SymbolFlags</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">flags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">NodeFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Static</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">declareSymbol</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exports</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">symbolFlags</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">symbolExcludes</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">declareSymbol</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">members</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">symbol</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">symbolFlags</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">symbolExcludes</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u7ED1\u5B9A\u5668\u9519\u8BEF\u62A5\u544A" tabindex="-1">\u7ED1\u5B9A\u5668\u9519\u8BEF\u62A5\u544A <a class="header-anchor" href="#\u7ED1\u5B9A\u5668\u9519\u8BEF\u62A5\u544A" aria-hidden="true">#</a></h4><p>\u7ED1\u5B9A\u9519\u8BEF\u88AB\u6DFB\u52A0\u5230\u6E90\u6587\u4EF6\u7684 <code>bindDiagnostics</code> \u5217\u8868\u4E2D</p><p>\u4E00\u4E2A\u7ED1\u5B9A\u65F6\u9519\u8BEF\u68C0\u6D4B\u7684\u4F8B\u5B50\u662F\u5728\u4E25\u683C\u6A21\u5F0F\u4E0B\u4F7F\u7528 <code>eval</code> \u6216 <code>arguments</code> \u4F5C\u4E3A\u53D8\u91CF\u540D\u3002\u4E0B\u9762\u5C55\u793A\u4E86\u76F8\u5173\u7684\u5168\u90E8\u4EE3\u7801\uFF08\u591A\u4E2A\u4F4D\u7F6E\u90FD\u4F1A\u8C03\u7528<code>checkStrictModeEvalOrArguments</code>\uFF0C\u8C03\u7528\u6808\u53D1\u81EA <code>bindWorker</code>\uFF0C\u8BE5\u51FD\u6570\u5BF9\u4E0D\u540C\u8282\u70B9\u7684 <code>SyntaxKind</code> \u8C03\u7528\u4E0D\u540C\u7684\u68C0\u67E5\u51FD\u6570\uFF09\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">checkStrictModeEvalOrArguments</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">contextNode</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Identifier</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">identifier</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> &lt;</span><span style="color:#FFCB6B;">Identifier</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">isEvalOrArgumentsIdentifier</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">identifier</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u9996\u5148\u68C0\u67E5\u540D\u5B57\u662F\u5426\u5728\u7C7B\u58F0\u660E\u6216\u8005\u7C7B\u8868\u8FBE\u5F0F\u4E2D\uFF0C\u5982\u679C\u662F\u5219\u7ED9\u51FA\u660E\u786E\u6D88\u606F\uFF0C\u5426\u5219\u62A5\u544A\u4E00\u822C\u6027\u9519\u8BEF</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">span</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getErrorSpanForNode</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bindDiagnostics</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">createFileDiagnostic</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">span</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">start</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">span</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#82AAFF;">getStrictModeEvalOrArgumentsMessage</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">contextNode</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">identifier</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">text</span></span>
<span class="line"><span style="color:#F07178;">        )</span></span>
<span class="line"><span style="color:#F07178;">      )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">isEvalOrArgumentsIdentifier</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Identifier</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span></span>
<span class="line"><span style="color:#F07178;">    ((&lt;</span><span style="color:#FFCB6B;">Identifier</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">text</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">eval</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> (&lt;</span><span style="color:#FFCB6B;">Identifier</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">text</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">arguments</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getStrictModeEvalOrArgumentsMessage</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u5411\u7528\u6237\u63D0\u4F9B\u7279\u5B9A\u6D88\u606F\uFF0C\u6709\u52A9\u4ED6\u4EEC\u7406\u89E3\u4E3A\u4F55\u4F1A\u5904\u4E8E\u4E25\u683C\u6A21\u5F0F\u3002</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">getContainingClass</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Diagnostics</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Invalid_use_of_0_Class_definitions_are_automatically_in_strict_mode</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">externalModuleIndicator</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Diagnostics</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Invalid_use_of_0_Modules_are_automatically_in_strict_mode</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Diagnostics</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Invalid_use_of_0_in_strict_mode</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="\u68C0\u67E5\u5668" tabindex="-1">\u68C0\u67E5\u5668 <a class="header-anchor" href="#\u68C0\u67E5\u5668" aria-hidden="true">#</a></h3><p>\u5982\u524D\u6240\u8FF0\uFF0C<strong>\u68C0\u67E5\u5668</strong>\u4F7F\u5F97 TypeScript \u66F4\u72EC\u7279\uFF0C\u6BD4<strong>\u5176\u5B83 JavaScript \u8F6C\u8BD1\u5668</strong>\u66F4\u5F3A\u5927\u3002\u68C0\u67E5\u5668\u4F4D\u4E8E <code>checker.ts</code> \u4E2D\uFF0C\u5F53\u524D\u6709 23k \u884C\u4EE5\u4E0A\u7684\u4EE3\u7801\uFF08\u7F16\u8BD1\u5668\u4E2D\u6700\u5927\u7684\u90E8\u5206\uFF09</p><h4 id="\u7A0B\u5E8F\u5BF9\u68C0\u67E5\u5668\u7684\u4F7F\u7528" tabindex="-1">\u7A0B\u5E8F\u5BF9\u68C0\u67E5\u5668\u7684\u4F7F\u7528 <a class="header-anchor" href="#\u7A0B\u5E8F\u5BF9\u68C0\u67E5\u5668\u7684\u4F7F\u7528" aria-hidden="true">#</a></h4><p>\u68C0\u67E5\u5668\u662F\u7531\u7A0B\u5E8F\u521D\u59CB\u5316\uFF0C\u4E0B\u9762\u662F\u8C03\u7528\u6808\u793A\u610F\uFF08\u7ED1\u5B9A\u5668\u4E00\u8282\u4E5F\u5C55\u793A\u8FC7\uFF09\uFF1A</p><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">program.getTypeChecker -</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  ts.createTypeChecker\uFF08\u68C0\u67E5\u5668\u4E2D\uFF09-</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    initializeTypeChecker\uFF08\u68C0\u67E5\u5668\u4E2D\uFF09 -</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> each SourceFile </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">ts.bindSourceFile</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">\uFF08\u7ED1\u5B9A\u5668\u4E2D\uFF09</span></span>
<span class="line"><span style="color:#A6ACCD;">      // \u63A5\u7740</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> each SourceFile </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">ts.mergeSymbolTable</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">\uFF08\u68C0\u67E5\u5668\u4E2D\uFF09</span></span>
<span class="line"></span></code></pre></div><h4 id="\u4E0E\u53D1\u5C04\u5668\u7684\u8054\u7CFB" tabindex="-1">\u4E0E\u53D1\u5C04\u5668\u7684\u8054\u7CFB <a class="header-anchor" href="#\u4E0E\u53D1\u5C04\u5668\u7684\u8054\u7CFB" aria-hidden="true">#</a></h4><p>\u771F\u6B63\u7684\u7C7B\u578B\u68C0\u67E5\u4F1A\u5728\u8C03\u7528 getDiagnostics \u65F6\u624D\u53D1\u751F\u3002\u8BE5\u51FD\u6570\u88AB\u8C03\u7528\u65F6\uFF08\u6BD4\u5982\u7531 Program.emit \u8BF7\u6C42\uFF09\uFF0C\u68C0\u67E5\u5668\u8FD4\u56DE\u4E00\u4E2A EmitResolver\uFF08\u7531\u7A0B\u5E8F\u8C03\u7528\u68C0\u67E5\u5668\u7684 getEmitResolver \u51FD\u6570\u5F97\u5230\uFF09\uFF0CEmitResolver \u662F createTypeChecker \u7684\u4E00\u4E2A\u672C\u5730\u51FD\u6570\u7684\u96C6\u5408\u3002\u4ECB\u7ECD\u53D1\u5C04\u5668\u65F6\u8FD8\u4F1A\u518D\u6B21\u63D0\u5230\u3002</p><p>\u4E0B\u9762\u662F\u8BE5\u8FC7\u7A0B\u76F4\u5230 checkSourceFile \u7684\u8C03\u7528\u6808\uFF08checkSourceFile \u662F createTypeChecker \u7684\u4E00\u4E2A\u672C\u5730\u51FD\u6570\uFF09\uFF1A</p><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">program.emit -</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  emitWorker </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">program local</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> -</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    createTypeChecker.getEmitResolver -</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      // \u7B2C\u4E00\u6B21\u8C03\u7528\u4E0B\u9762\u7684\u51E0\u4E2A createTypeChecker \u7684\u672C\u5730\u51FD\u6570</span></span>
<span class="line"><span style="color:#A6ACCD;">      call getDiagnostics -</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">          getDiagnosticsWorker -</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">              checkSourceFile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">      // \u63A5\u7740</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> resolver</span></span>
<span class="line"><span style="color:#A6ACCD;">      // \u901A\u8FC7\u5BF9\u672C\u5730\u51FD\u6570 </span><span style="color:#82AAFF;">createResolver</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> \u7684\u8C03\u7528\uFF0Cresolver \u5DF2\u5728 createTypeChecker \u4E2D\u521D\u59CB\u5316\u3002</span></span>
<span class="line"></span></code></pre></div><h4 id="\u5168\u5C40\u547D\u540D\u7A7A\u95F4\u5408\u5E76" tabindex="-1">\u5168\u5C40\u547D\u540D\u7A7A\u95F4\u5408\u5E76 <a class="header-anchor" href="#\u5168\u5C40\u547D\u540D\u7A7A\u95F4\u5408\u5E76" aria-hidden="true">#</a></h4><p><code>initializeTypeChecker</code> \u4E2D\u5B58\u5728\u4EE5\u4E0B\u4EE3\u7801\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \u521D\u59CB\u5316\u5168\u5C40\u7B26\u53F7\u8868\uFF08SymbolTable\uFF09\u3002</span></span>
<span class="line"><span style="color:#82AAFF;">forEach</span><span style="color:#A6ACCD;">(host</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getSourceFiles</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">file</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#82AAFF;">isExternalModule</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">file</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">mergeSymbolTable</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">globals</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">locals</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u57FA\u672C\u4E0A\u662F\u5C06\u6240\u6709\u7684 <code>global</code> \u7B26\u53F7\u5408\u5E76\u5230 <code>let globals: SymbolTable = {}</code> \u7B26\u53F7\u8868\u4E2D\uFF08\u4F4D\u4E8E <code>createTypeChecker</code> \u4E2D\uFF09\u3002 <code>mergeSymbolTable</code> \u4E3B\u8981\u8C03\u7528 <code>mergeSymbol</code> \u51FD\u6570\u3002</p><h4 id="\u68C0\u67E5\u5668\u9519\u8BEF\u62A5\u544A" tabindex="-1">\u68C0\u67E5\u5668\u9519\u8BEF\u62A5\u544A <a class="header-anchor" href="#\u68C0\u67E5\u5668\u9519\u8BEF\u62A5\u544A" aria-hidden="true">#</a></h4><p>\u68C0\u67E5\u5668\u4F7F\u7528\u672C\u5730\u7684 <code>error</code> \u51FD\u6570\u62A5\u544A\u9519\u8BEF\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">error</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">location</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DiagnosticMessage</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">arg0</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">arg1</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">arg2</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">diagnostic</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">location</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">createDiagnosticForNode</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">location</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arg0</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arg1</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arg2</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">createCompilerDiagnostic</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arg0</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arg1</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arg2</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">diagnostics</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">diagnostic</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="\u53D1\u5C04\u5668" tabindex="-1">\u53D1\u5C04\u5668 <a class="header-anchor" href="#\u53D1\u5C04\u5668" aria-hidden="true">#</a></h3><p>TypeScript \u7F16\u8BD1\u5668\u63D0\u4F9B\u4E86\u4E24\u4E2A\u53D1\u5C04\u5668\uFF1A</p><ul><li><code>emitter.ts</code>\uFF1A\u53EF\u80FD\u662F\u4F60\u6700\u611F\u5174\u8DA3\u7684\u53D1\u5C04\u5668\uFF0C\u5B83\u662F TS -&gt; JavaScript \u7684\u53D1\u5C04\u5668</li><li><code>declarationEmitter.ts</code>\uFF1A\u8FD9\u4E2A\u53D1\u5C04\u5668\u7528\u4E8E\u4E3A <strong>TypeScript \u6E90\u6587\u4EF6\uFF08<code>.ts</code>\uFF09</strong> \u521B\u5EFA<strong>\u58F0\u660E\u6587\u4EF6\uFF08<code>.d.ts</code>\uFF09</strong></li></ul><p>\u672C\u8282\u6211\u4EEC\u4ECB\u7ECD <code>emitter.ts</code></p><h4 id="promgram-\u5BF9\u53D1\u5C04\u5668\u7684\u4F5C\u7528" tabindex="-1">Promgram \u5BF9\u53D1\u5C04\u5668\u7684\u4F5C\u7528 <a class="header-anchor" href="#promgram-\u5BF9\u53D1\u5C04\u5668\u7684\u4F5C\u7528" aria-hidden="true">#</a></h4><p>Program \u63D0\u4F9B\u4E86\u4E00\u4E2A <code>emit</code> \u51FD\u6570\u3002\u8BE5\u51FD\u6570\u4E3B\u8981\u5C06\u529F\u80FD\u59D4\u6258\u7ED9 <code>emitter.ts</code> \u4E2D\u7684 <code>emitFiles</code> \u51FD\u6570\u3002\u4E0B\u9762\u662F\u8C03\u7528\u6808\uFF1A</p><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">Program.emit -</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">emitWorker</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> \uFF08\u5728 program.ts \u4E2D\u7684 createProgram\uFF09 -</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">emitFiles</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> \uFF08emitter.ts \u4E2D\u7684\u51FD\u6570\uFF09</span></span>
<span class="line"></span></code></pre></div><p><code>emitWorker</code>\uFF08\u901A\u8FC7 <code>emitFiles</code> \u53C2\u6570\uFF09\u7ED9\u53D1\u5C04\u5668\u63D0\u4F9B\u4E00\u4E2A <code>EmitResolver</code>\u3002 <code>EmitResolver</code> \u7531\u7A0B\u5E8F\u7684 <code>TypeChecker</code> \u63D0\u4F9B\uFF0C\u57FA\u672C\u4E0A\u5B83\u662F\u4E00\u4E2A\u6765\u81EA createChecker \u7684\u672C\u5730\u51FD\u6570\u7684\u5B50\u96C6\u3002</p><h4 id="\u53D1\u5C04\u5668\u51FD\u6570" tabindex="-1">\u53D1\u5C04\u5668\u51FD\u6570 <a class="header-anchor" href="#\u53D1\u5C04\u5668\u51FD\u6570" aria-hidden="true">#</a></h4><h5 id="emitfiles" tabindex="-1"><code>emitFiles</code> <a class="header-anchor" href="#emitfiles" aria-hidden="true">#</a></h5><p>\u5B9A\u4E49\u5728 <code>emitter.ts</code> \u4E2D\uFF0C\u4E0B\u9762\u662F\u8BE5\u51FD\u6570\u7684\u7B7E\u540D\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// targetSourceFile \u5F53\u7528\u6237\u60F3\u53D1\u5C04\u9879\u76EE\u4E2D\u7684\u67D0\u4E2A\u6587\u4EF6\u65F6\u6307\u5B9A\uFF0C\u4FDD\u5B58\u65F6\u7F16\u8BD1\uFF08compileOnSave\uFF09\u529F\u80FD\u4F7F\u7528\u6B64\u53C2\u6570</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">emitFiles</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resolver</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EmitResolver</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EmitHost</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">targetSourceFile</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SourceFile</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EmitResult</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span></code></pre></div><p><code>EmitHost</code> \u662F <code>CompilerHost</code> \u7684\u7B80\u5316\u7248\uFF08\u8FD0\u884C\u65F6\uFF0C\u5F88\u591A\u7528\u4F8B\u5B9E\u9645\u4E0A\u90FD\u662F <code>CompilerHost</code>\uFF09</p><p><code>emitFiles</code> \u4E2D\u7684\u6700\u6709\u8DA3\u7684\u8C03\u7528\u6808\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">emitFiles -</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  emitFile</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">jsFilePath, targetSourceFile</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> -</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    emitJavaScript</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">jsFilePath, targetSourceFile</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div><h5 id="emitjavascript" tabindex="-1"><code>emitJavaScript</code> <a class="header-anchor" href="#emitjavascript" aria-hidden="true">#</a></h5><p>\u8BE5\u51FD\u6570\u6709\u826F\u597D\u7684\u6CE8\u91CA\uFF0C\u6211\u4EEC\u4E0B\u9762\u7ED9\u51FA\u5B83\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">emitJavaScript</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">jsFilePath</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">root</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SourceFile</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">createTextWriter</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">newLine</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">write</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writer</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">write</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writeTextOfNode</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writer</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">writeTextOfNode</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writeLine</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writer</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">writeLine</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">increaseIndent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writer</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">increaseIndent</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">decreaseIndent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writer</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">decreaseIndent</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">currentSourceFile</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">SourceFile</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u5BFC\u51FA\u5668\u51FD\u6570\u7684\u540D\u79F0\uFF0C\u5982\u679C\u6587\u4EF6\u662F\u4E2A\u7CFB\u7EDF\u5916\u90E8\u6A21\u5757\u7684\u8BDD</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// System.register([...], function (&lt;exporter&gt;) {...})</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// System \u6A21\u5757\u4E2D\u7684\u5BFC\u51FA\u50CF\u8FD9\u6837\uFF1A</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// export var x; ... x = 1</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// =&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// var x;... exporter(&quot;x&quot;, x = 1)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">exportFunctionForFile</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">generatedNameSet</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Map</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">nodeToGeneratedName</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#F07178;">[] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">computedPropertyNamesToGeneratedNames</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#F07178;">[]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">extendsEmitted</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">decorateEmitted</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">paramEmitted</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">awaiterEmitted</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tempFlags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tempVariables</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Identifier</span><span style="color:#F07178;">[]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tempParameters</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Identifier</span><span style="color:#F07178;">[]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">externalImports</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> (</span><span style="color:#FFCB6B;">ImportDeclaration</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">|</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">ImportEqualsDeclaration</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">|</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">ExportDeclaration</span><span style="color:#F07178;">)[]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">exportSpecifiers</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Map</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">ExportSpecifier</span><span style="color:#F07178;">[]</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">exportEquals</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">ExportAssignment</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hasExportStars</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;">/** \u5C06\u53D1\u5C04\u8F93\u51FA\u5199\u5165\u78C1\u76D8 */</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writeEmittedFiles</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writeJavaScriptFile</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">detachedCommentsInfo</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> nodePos</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> detachedCommentEndPos</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">[]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writeComment</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writeCommentRange</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;">/** \u53D1\u5C04\u4E00\u4E2A\u8282\u70B9 */</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">emit</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">emitNodeWithoutSourceMap</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;">/** \u5728\u53D1\u5C04\u8282\u70B9\u524D\u8C03\u7528 */</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">emitStart</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;">/** \u53D1\u5C04\u7ED3\u70B9\u5B8C\u6210\u540E\u8C03\u7528 */</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">emitEnd</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;">/** \u4ECE startPos \u4F4D\u7F6E\u5F00\u59CB\uFF0C\u4E3A\u6307\u5B9A\u7684 token \u53D1\u5C04\u6587\u672C\u3002\u9ED8\u8BA4\u5199\u5165\u7684\u6587\u672C\u7531 tokenKind \u63D0\u4F9B\uFF0C</span></span>
<span class="line"><span style="color:#676E95;">   * \u4F46\u662F\u5982\u679C\u63D0\u4F9B\u4E86\u53EF\u9009\u7684 emitFn \u56DE\u8C03\uFF0C\u5C06\u4F7F\u7528\u8BE5\u56DE\u8C03\u6765\u4EE3\u66FF\u9ED8\u8BA4\u65B9\u5F0F\u53D1\u5C04\u6587\u672C\u3002</span></span>
<span class="line"><span style="color:#676E95;">   * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">tokenKind</span><span style="color:#676E95;"> \u8981\u641C\u7D22\u5E76\u53D1\u5C04\u7684 token \u7684\u7C7B\u522B</span></span>
<span class="line"><span style="color:#676E95;">   * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">startPos</span><span style="color:#676E95;"> \u6E90\u7801\u4E2D\u641C\u7D22 token \u7684\u8D77\u59CB\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#676E95;">   * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">emitFn</span><span style="color:#676E95;"> \u5982\u679C\u7ED9\u51FA\uFF0C\u4F1A\u88AB\u8C03\u7528\u6765\u8FDB\u884C\u6587\u672C\u7684\u53D1\u5C04\u3002</span></span>
<span class="line"><span style="color:#676E95;">   */</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">emitToken</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">emitTokenText</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;">/** \u8BE5\u51FD\u6570\u7531\u4E8E\u8282\u70B9\u7684\u7F18\u6545\uFF0C\u5728\u88AB\u53D1\u5C04\u7684\u4EE3\u7801\u4E2D\u7684\u51FD\u6570\u6216\u7C7B\u4E2D\uFF0C\u4F1A\u5728\u542F\u7528\u8BCD\u6CD5\u4F5C\u7528\u57DF\u524D\u88AB\u8C03\u7528</span></span>
<span class="line"><span style="color:#676E95;">   * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">scopeDeclaration</span><span style="color:#676E95;"> \u542F\u52A8\u8BCD\u6CD5\u4F5C\u7528\u57DF\u7684\u8282\u70B9</span></span>
<span class="line"><span style="color:#676E95;">   * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">scopeName</span><span style="color:#676E95;"> \u53EF\u9009\u7684\u4F5C\u7528\u57DF\u7684\u540D\u79F0\uFF0C\u9ED8\u8BA4\u4ECE\u8282\u70B9\u58F0\u660E\u4E2D\u63A8\u5BFC</span></span>
<span class="line"><span style="color:#676E95;">   */</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">scopeEmitStart</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">scopeDeclaration</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">scopeName</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;">/** \u51FA\u4E86\u4F5C\u7528\u57DF\u540E\u8C03\u7528 */</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">scopeEmitEnd</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;">/** \u4F1A\u88AB\u7F16\u7801\u7684 Sourcemap \u6570\u636E */</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sourceMapData</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">SourceMapData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">compilerOptions</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sourceMap</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">compilerOptions</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">inlineSourceMap</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">initializeEmitterWithSourceMaps</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">root</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u4E0D\u8981\u76F4\u63A5\u8C03\u7528 emit\uFF0C\u90A3\u6837\u4E0D\u4F1A\u8BBE\u7F6E currentSourceFile</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">emitSourceFile</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">root</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getSourceFiles</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sourceFile</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#82AAFF;">isExternalModuleOrDeclarationFile</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">sourceFile</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">emitSourceFile</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">sourceFile</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">writeLine</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">writeEmittedFiles</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">writer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getText</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;">/*writeByteOrderMark*/</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">compilerOptions</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">emitBOM</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">/// \u4E00\u6279\u672C\u5730\u51FD\u6570</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5B83\u4E3B\u8981\u8BBE\u7F6E\u4E86\u4E00\u6279\u672C\u5730\u53D8\u91CF\u548C\u51FD\u6570\uFF08\u8FD9\u4E9B\u51FD\u6570\u6784\u6210 <code>emitter.ts</code> \u7684\u5927\u90E8\u5206\u5185\u5BB9\uFF09\uFF0C\u63A5\u7740\u4EA4\u7ED9\u672C\u5730\u51FD\u6570 <code>emitSourceFile</code> \u53D1\u5C04\u6587\u672C\u3002<code>emitSourceFile</code> \u51FD\u6570\u8BBE\u7F6E <code>currentSourceFile</code> \u7136\u540E\u4EA4\u7ED9\u672C\u5730\u51FD\u6570 <code>emit</code> \u53BB\u5904\u7406\u3002</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">emitSourceFile</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">sourceFile</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SourceFile</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">currentSourceFile</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sourceFile</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">exportFunctionForFile</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">emit</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">sourceFile</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><code>emit</code> \u51FD\u6570\u5904\u7406 <strong>\u6CE8\u91CA</strong> \u548C <strong>\u5B9E\u9645 JavaScript</strong> \u7684\u53D1\u5C04\u3002<strong>\u5B9E\u9645 JavaScript</strong> \u7684\u53D1\u5C04\u662F emitJavaScriptWorker \u51FD\u6570\u7684\u5DE5\u4F5C\u3002</p><h5 id="emitjavascriptworker" tabindex="-1"><code>emitJavaScriptWorker</code> <a class="header-anchor" href="#emitjavascriptworker" aria-hidden="true">#</a></h5><p>\u5B8C\u6574\u7684\u51FD\u6570\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">emitJavaScriptWorker</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u68C0\u67E5\u8282\u70B9\u662F\u5426\u53EF\u4EE5\u5FFD\u7565 ScriptTarget \u53D1\u5C04</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">switch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Identifier</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitIdentifier</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">Identifier</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Parameter</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitParameter</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ParameterDeclaration</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">MethodDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">MethodSignature</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitMethod</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">MethodDeclaration</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">GetAccessor</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SetAccessor</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitAccessor</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">AccessorDeclaration</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ThisKeyword</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitThis</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SuperKeyword</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitSuper</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">NullKeyword</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">write</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">null</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">TrueKeyword</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">write</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">true</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">FalseKeyword</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">write</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">false</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">NumericLiteral</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">StringLiteral</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">RegularExpressionLiteral</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">NoSubstitutionTemplateLiteral</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">TemplateHead</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">TemplateMiddle</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">TemplateTail</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitLiteral</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">LiteralExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">TemplateExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitTemplateExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">TemplateExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">TemplateSpan</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitTemplateSpan</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">TemplateSpan</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">JsxElement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">JsxSelfClosingElement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitJsxElement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">JsxElement</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">|</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">JsxSelfClosingElement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">JsxText</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitJsxText</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">JsxText</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">JsxExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitJsxExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">JsxExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">QualifiedName</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitQualifiedName</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">QualifiedName</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ObjectBindingPattern</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitObjectBindingPattern</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">BindingPattern</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ArrayBindingPattern</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitArrayBindingPattern</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">BindingPattern</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">BindingElement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitBindingElement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">BindingElement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ArrayLiteralExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitArrayLiteral</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ArrayLiteralExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ObjectLiteralExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitObjectLiteral</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ObjectLiteralExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PropertyAssignment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitPropertyAssignment</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">PropertyDeclaration</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ShorthandPropertyAssignment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitShorthandPropertyAssignment</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ShorthandPropertyAssignment</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ComputedPropertyName</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitComputedPropertyName</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ComputedPropertyName</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PropertyAccessExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitPropertyAccess</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">PropertyAccessExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ElementAccessExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitIndexedAccess</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ElementAccessExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">CallExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitCallExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">CallExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">NewExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitNewExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">NewExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">TaggedTemplateExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitTaggedTemplateExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">TaggedTemplateExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">TypeAssertionExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emit</span><span style="color:#F07178;">((&lt;</span><span style="color:#FFCB6B;">TypeAssertion</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">expression</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">AsExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emit</span><span style="color:#F07178;">((&lt;</span><span style="color:#FFCB6B;">AsExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">expression</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ParenthesizedExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitParenExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ParenthesizedExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">FunctionDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">FunctionExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ArrowFunction</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitFunctionDeclaration</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">FunctionLikeDeclaration</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DeleteExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitDeleteExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">DeleteExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">TypeOfExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitTypeOfExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">TypeOfExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">VoidExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitVoidExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">VoidExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">AwaitExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitAwaitExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">AwaitExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PrefixUnaryExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitPrefixUnaryExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">PrefixUnaryExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PostfixUnaryExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitPostfixUnaryExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">PostfixUnaryExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">BinaryExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitBinaryExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">BinaryExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ConditionalExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitConditionalExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ConditionalExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SpreadElementExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitSpreadElementExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">SpreadElementExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">YieldExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitYieldExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">YieldExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">OmittedExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Block</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ModuleBlock</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitBlock</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">Block</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">VariableStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitVariableStatement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">VariableStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">EmptyStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">write</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ExpressionStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitExpressionStatement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ExpressionStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">IfStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitIfStatement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">IfStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DoStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitDoStatement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">DoStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">WhileStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitWhileStatement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">WhileStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ForStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitForStatement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ForStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ForOfStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ForInStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitForInOrForOfStatement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ForInStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ContinueStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">BreakStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitBreakOrContinueStatement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">BreakOrContinueStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ReturnStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitReturnStatement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ReturnStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">WithStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitWithStatement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">WithStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SwitchStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitSwitchStatement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">SwitchStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">CaseClause</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DefaultClause</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitCaseOrDefaultClause</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">CaseOrDefaultClause</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">LabeledStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitLabelledStatement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">LabeledStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ThrowStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitThrowStatement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ThrowStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">TryStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitTryStatement</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">TryStatement</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">CatchClause</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitCatchClause</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">CatchClause</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DebuggerStatement</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitDebuggerStatement</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">VariableDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitVariableDeclaration</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">VariableDeclaration</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ClassExpression</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitClassExpression</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ClassExpression</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ClassDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitClassDeclaration</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ClassDeclaration</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">InterfaceDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitInterfaceDeclaration</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">InterfaceDeclaration</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">EnumDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitEnumDeclaration</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">EnumDeclaration</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">EnumMember</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitEnumMember</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">EnumMember</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ModuleDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitModuleDeclaration</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ModuleDeclaration</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ImportDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitImportDeclaration</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ImportDeclaration</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ImportEqualsDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitImportEqualsDeclaration</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ImportEqualsDeclaration</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ExportDeclaration</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitExportDeclaration</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ExportDeclaration</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ExportAssignment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitExportAssignment</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">ExportAssignment</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SourceFile</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitSourceFileNode</span><span style="color:#F07178;">(&lt;</span><span style="color:#FFCB6B;">SourceFile</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u901A\u8FC7\u7B80\u5355\u5730\u8C03\u7528\u76F8\u5E94\u7684 <code>emitXXX</code> \u51FD\u6570\u6765\u5B8C\u6210\u9012\u5F52\uFF0C\u4F8B\u5982 <code>emitFunctionDeclaration</code></p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">emitFunctionDeclaration</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FunctionLikeDeclaration</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">nodeIsMissing</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emitOnlyPinnedOrTripleSlashComments</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">MethodDeclaration</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">MethodSignature</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u4F1A\u628A\u6CE8\u91CA\u5F53\u505A\u65B9\u6CD5\u58F0\u660E\u7684\u4E00\u90E8\u5206\u53BB\u53D1\u5C04\u3002</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">emitLeadingComments</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u76EE\u6807\u4E3A es6 \u4E4B\u524D\u65F6\uFF0C\u4F7F\u7528 function \u5173\u952E\u5B57\u6765\u53D1\u5C04\u7C7B\u51FD\u6570\uFF08functions-like\uFF09\u58F0\u660E\uFF0C\u5305\u62EC\u7BAD\u5934\u51FD\u6570</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u76EE\u6807\u4E3A es6 \u65F6\uFF0C\u53EF\u4EE5\u53D1\u5C04\u539F\u751F\u7684 ES6 \u7BAD\u5934\u51FD\u6570\uFF0C\u5E76\u4F7F\u7528\u5BBD\u7BAD\u5934\u4EE3\u66FF function \u5173\u952E\u5B57.</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#82AAFF;">shouldEmitAsArrowFunction</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">isES6ExportedDeclaration</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">write</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">export </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">flags</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">NodeFlags</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Default</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">write</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">default </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">write</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">function</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">languageVersion</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ScriptTarget</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ES6</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">asteriskToken</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">write</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">write</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">shouldEmitFunctionName</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">emitDeclarationName</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">emitSignatureAndBody</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">languageVersion</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ScriptTarget</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ES6</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">FunctionDeclaration</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">parent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">currentSourceFile</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span></span>
<span class="line"><span style="color:#F07178;">  ) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">emitExportMemberAssignments</span><span style="color:#F07178;">((&lt;</span><span style="color:#FFCB6B;">FunctionDeclaration</span><span style="color:#F07178;">&gt;</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">MethodDeclaration</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">kind</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SyntaxKind</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">MethodSignature</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">emitTrailingComments</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u53D1\u5C04\u5668\u6E90\u6620\u5C04\uFF08sourcemaps\uFF09" tabindex="-1">\u53D1\u5C04\u5668\u6E90\u6620\u5C04\uFF08SourceMaps\uFF09 <a class="header-anchor" href="#\u53D1\u5C04\u5668\u6E90\u6620\u5C04\uFF08sourcemaps\uFF09" aria-hidden="true">#</a></h4><p>\u5982\u524D\u6240\u8FF0 <code>emitter.ts</code> \u4E2D\u7684\u5927\u90E8\u5206\u4EE3\u7801\u662F\u51FD\u6570 <code>emitJavaScript</code>\uFF08\u6211\u4EEC\u4E4B\u524D\u5C55\u793A\u8FC7\u8BE5\u51FD\u6570\u7684\u521D\u59CB\u5316\u4F8B\u7A0B\uFF09\u3002 \u5B83\u4E3B\u8981\u662F\u8BBE\u7F6E\u4E00\u6279\u672C\u5730\u53D8\u91CF\u5E76\u4EA4\u7ED9 <code>emitSourceFile</code> \u5904\u7406\u3002\u4E0B\u9762\u6211\u4EEC\u518D\u770B\u4E00\u904D\u8FD9\u4E2A\u51FD\u6570\uFF0C\u8FD9\u6B21\u6211\u4EEC\u91CD\u70B9\u5173\u6CE8 <code>SourceMap</code> \u7684\u90E8\u5206\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">emitJavaScript</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">jsFilePath</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">root</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SourceFile</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u65E0\u5173\u4EE3\u7801 ........... \u5DF2\u79FB\u9664</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writeComment</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writeCommentRange</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#676E95;">/** \u5C06\u53D1\u5C04\u7684\u8F93\u51FA\u5199\u5230\u78C1\u76D8\u4E0A */</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writeEmittedFiles</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">writeJavaScriptFile</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#676E95;">/** \u53D1\u5C04\u4E00\u4E2A\u8282\u70B9 */</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">emit</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">emitNodeWithoutSourceMap</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#676E95;">/** \u8282\u70B9\u53D1\u5C04\u524D\u8C03\u7528 */</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">emitStart</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#676E95;">/** \u8282\u70B9\u53D1\u5C04\u5B8C\u6210\u540E\u8C03\u7528 */</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">emitEnd</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#676E95;">/** \u4ECE startPos \u4F4D\u7F6E\u5F00\u59CB\uFF0C\u4E3A\u6307\u5B9A\u7684 token \u53D1\u5C04\u6587\u672C\u3002\u9ED8\u8BA4\u5199\u5165\u7684\u6587\u672C\u7531 tokenKind \u63D0\u4F9B\uFF0C</span></span>
<span class="line"><span style="color:#676E95;">      * \u4F46\u662F\u5982\u679C\u63D0\u4F9B\u4E86\u53EF\u9009\u7684 emitFn \u56DE\u8C03\uFF0C\u5C06\u4F7F\u7528\u8BE5\u56DE\u8C03\u6765\u4EE3\u66FF\u9ED8\u8BA4\u65B9\u5F0F\u53D1\u5C04\u6587\u672C\u3002</span></span>
<span class="line"><span style="color:#676E95;">      * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">tokenKind</span><span style="color:#676E95;"> \u8981\u641C\u7D22\u5E76\u53D1\u5C04\u7684 token \u7684\u7C7B\u522B</span></span>
<span class="line"><span style="color:#676E95;">      * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">startPos</span><span style="color:#676E95;"> \u6E90\u7801\u4E2D\u641C\u7D22 token \u7684\u8D77\u59CB\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#676E95;">      * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">emitFn</span><span style="color:#676E95;"> \u5982\u679C\u7ED9\u51FA\uFF0C\u4F1A\u88AB\u8C03\u7528\u6765\u8FDB\u884C\u6587\u672C\u7684\u53D1\u5C04\u3002*/</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">emitToken</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">emitTokenText</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#676E95;">/** \u8BE5\u51FD\u6570\u56E0\u4E3A\u8282\u70B9\uFF0C\u4F1A\u5728\u53D1\u5C04\u7684\u4EE3\u7801\u4E2D\u4E8E\u51FD\u6570\u6216\u7C7B\u4E2D\u542F\u7528\u8BCD\u6CD5\u4F5C\u7528\u57DF\u524D\u8C03\u7528</span></span>
<span class="line"><span style="color:#676E95;">      * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">scopeDeclaration</span><span style="color:#676E95;"> \u542F\u52A8\u8BCD\u6CD5\u4F5C\u7528\u57DF\u7684\u8282\u70B9</span></span>
<span class="line"><span style="color:#676E95;">      * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">scopeName</span><span style="color:#676E95;"> \u53EF\u9009\u7684\u4F5C\u7528\u57DF\u7684\u540D\u79F0\uFF0C\u800C\u4E0D\u662F\u4ECE\u8282\u70B9\u58F0\u660E\u4E2D\u63A8\u5BFC</span></span>
<span class="line"><span style="color:#676E95;">      */</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">scopeEmitStart</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">scopeDeclaration</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Node</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">scopeName</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#676E95;">/** \u51FA\u4E86\u4F5C\u7528\u57DF\u540E\u8C03\u7528 */</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">scopeEmitEnd</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#676E95;">/** \u4F1A\u88AB\u7F16\u7801\u7684 Sourcemap \u6570\u636E */</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sourceMapData</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">SourceMapData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">compilerOptions</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sourceMap</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">compilerOptions</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">inlineSourceMap</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">initializeEmitterWithSourceMaps</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">root</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// \u4E0D\u8981\u76F4\u63A5\u8C03\u7528 emit\uFF0C\u90A3\u6837\u4E0D\u4F1A\u8BBE\u7F6E currentSourceFile</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">emitSourceFile</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">root</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getSourceFiles</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sourceFile</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#82AAFF;">isExternalModuleOrDeclarationFile</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">sourceFile</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#82AAFF;">emitSourceFile</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">sourceFile</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">writeLine</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">writeEmittedFiles</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">writer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getText</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;">/*writeByteOrderMark*/</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">compilerOptions</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">emitBOM</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u91CD\u8981\u7684\u51FD\u6570\u8C03\u7528\uFF1A <code>initializeEmitterWithSourceMaps</code>\uFF0C\u8BE5\u51FD\u6570\u662F <code>emitJavaScript</code> \u7684\u672C\u5730\u51FD\u6570\uFF0C\u5B83\u8986\u76D6\u4E86\u90E8\u5206\u5DF2\u5B9A\u4E49\u7684\u672C\u5730\u51FD\u6570\u3002 \u8986\u76D6\u7684\u51FD\u6570\u53EF\u4EE5\u5728 <code>initalizeEmitterWithSourceMap</code> \u7684\u5E95\u90E8\u627E\u5230\uFF1A</p><div class="language-ts"><button class="copy"></button><span class="lang">ts</span><pre><code><span class="line"><span style="color:#676E95;">// \`initializeEmitterWithSourceMaps\` \u51FD\u6570\u7684\u6700\u540E\u90E8\u5206</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">writeEmittedFiles </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> writeJavaScriptAndSourceMapFile</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">emit </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> emitNodeWithSourceMap</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">emitStart </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> recordEmitNodeStartSpan</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">emitEnd </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> recordEmitNodeEndSpan</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">emitToken </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> writeTextWithSpanRecord</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">scopeEmitStart </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> recordScopeNameOfNode</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">scopeEmitEnd </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> recordScopeNameEnd</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">writeComment </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> writeCommentRangeWithMap</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u5C31\u662F\u8BF4\u5927\u90E8\u5206\u7684\u53D1\u5C04\u5668\u4EE3\u7801\u4E0D\u5173\u5FC3 <code>SourceMap</code>\uFF0C\u5B83\u4EEC\u4EE5\u76F8\u540C\u7684\u65B9\u5F0F\u4F7F\u7528\u8FD9\u4E9B\uFF08\u5E26\u6216\u4E0D\u5E26 SourceMap \u7684\uFF09\u672C\u5730\u51FD\u6570\u3002</p><p><cite><a href="https://jkchao.github.io/typescript-book-chinese/project/compilationContext.html#tsconfig-json" target="_blank" rel="noreferrer">-- \u300A\u6DF1\u5165\u7406\u89E3 TypeScript\u300B</a></cite></p>`,1246),e=[o];function c(t,r,y,F,D,C){return n(),a("div",null,e)}const d=s(p,[["render",c]]);export{i as __pageData,d as default};
