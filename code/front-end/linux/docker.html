<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker配置详解 | 青山</title>
    <meta name="description" content="Docker配置详解">
    <link rel="stylesheet" href="/assets/style.d6d4067a.css">
    <link rel="modulepreload" href="/assets/app.836e6241.js">
    <link rel="modulepreload" href="/assets/code_front-end_linux_docker.md.17149735.lean.js">
    
    <meta name="theme-color" content="#646cff">
  <link rel="image/x-icon" href="/favicon.ico">
  <meta property="og:type" content="website">
  <link rel="icon" type="image/svg+xml" href="/logo.svg">
  <link rel="manifest" href="/manifest.json">
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="keywords" content="青山, vitepress, 顾青山, blog, 博客, 狗窝, 青山">
  <meta name="baidu-site-verification" content="code-5BMDhSDgSq">
  <meta name="baidu_union_verify" content="acd0eb90461e19817cabd1140c8ffd54">
  <script>var _hmt=_hmt||[];(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?1801e4a45f1eecdfe603fc0637120c56";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t);var a=document.createElement("script");a.src="https://www.googletagmanager.com/gtag/js?id=G-SBNLNM3Q41";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(a,r)})(),window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-SBNLNM3Q41");</script>
  <script type="async" src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
  <script>(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  <meta name="keywords" content="Linux Ubuntu CentOS Docker Docker配置">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-6210ecdc><!--[--><!--]--><!--[--><span tabindex="-1" data-v-5faaea39></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-5faaea39> Skip to content </a><!--]--><!----><header class="VPNav" data-v-6210ecdc data-v-fe219196><div class="VPNavBar has-sidebar" data-v-fe219196 data-v-52b400e0><div class="container" data-v-52b400e0><div class="VPNavBarTitle has-sidebar" data-v-52b400e0 data-v-91382688><a class="title" href="/" data-v-91382688><!--[--><img class="VPImage logo" src="/logo.svg" data-v-c77f8002><!--]--><!--[-->青山<!--]--></a></div><div class="content" data-v-52b400e0><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-52b400e0 data-v-773e0340><span id="main-nav-aria-label" class="visually-hidden" data-v-773e0340>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-773e0340 data-v-44e08873><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-44e08873><span class="text" data-v-44e08873><!----> 编程 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-44e08873><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-44e08873><div class="VPMenu" data-v-44e08873 data-v-78c115d8><div class="items" data-v-78c115d8><!--[--><!--[--><div class="VPMenuLink" data-v-78c115d8 data-v-0a1ba92c><a class="VPLink link" href="/code/front-end/blog-build/" data-v-0a1ba92c data-v-3f64d2a0><!--[-->前端<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-78c115d8 data-v-0a1ba92c><a class="VPLink link" href="/code/algorithm/leetcode.html" data-v-0a1ba92c data-v-3f64d2a0><!--[-->算法<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-78c115d8 data-v-0a1ba92c><a class="VPLink link" href="/code/cesium/clb.html" data-v-0a1ba92c data-v-3f64d2a0><!--[-->Cesium<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-78c115d8 data-v-0a1ba92c><a class="VPLink link" href="/code/devops/jira.html" data-v-0a1ba92c data-v-3f64d2a0><!--[-->DevOps<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-78c115d8 data-v-0a1ba92c><a class="VPLink link" href="/code/other/30-seconds-of-code.html" data-v-0a1ba92c data-v-3f64d2a0><!--[-->其他<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/book/front-end/you-dont-know-js.html" data-v-773e0340 data-v-18aba856 data-v-3f64d2a0><!--[-->书籍<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/money/" data-v-773e0340 data-v-18aba856 data-v-3f64d2a0><!--[-->理财<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/video/" data-v-773e0340 data-v-18aba856 data-v-3f64d2a0><!--[-->短视频<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-52b400e0 data-v-38769704><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-38769704 data-v-8f4b5ff8 data-v-85bb08da><span class="check" data-v-85bb08da><span class="icon" data-v-85bb08da><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-8f4b5ff8><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-8f4b5ff8><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-52b400e0 data-v-78c1942e data-v-d83752e8><!--[--><a class="VPSocialLink" href="https://github.com/QiYoe/c-blog" title="github" target="_blank" rel="noopener noreferrer" data-v-d83752e8 data-v-7fd106c2><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-7fd106c2><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden" data-v-7fd106c2>github</span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-52b400e0 data-v-620f3a69 data-v-44e08873><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-44e08873><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-44e08873><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-44e08873><div class="VPMenu" data-v-44e08873 data-v-78c115d8><!----><!--[--><!--[--><!----><div class="group" data-v-620f3a69><div class="item appearance" data-v-620f3a69><p class="label" data-v-620f3a69>Appearance</p><div class="appearance-action" data-v-620f3a69><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-620f3a69 data-v-8f4b5ff8 data-v-85bb08da><span class="check" data-v-85bb08da><span class="icon" data-v-85bb08da><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-8f4b5ff8><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-8f4b5ff8><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-620f3a69><div class="item social-links" data-v-620f3a69><div class="VPSocialLinks social-links-list" data-v-620f3a69 data-v-d83752e8><!--[--><a class="VPSocialLink" href="https://github.com/QiYoe/c-blog" title="github" target="_blank" rel="noopener noreferrer" data-v-d83752e8 data-v-7fd106c2><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-7fd106c2><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden" data-v-7fd106c2>github</span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-52b400e0 data-v-13ca634c><span class="container" data-v-13ca634c><span class="top" data-v-13ca634c></span><span class="middle" data-v-13ca634c></span><span class="bottom" data-v-13ca634c></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-6210ecdc data-v-e1a8c278><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-e1a8c278><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-e1a8c278><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-e1a8c278>Menu</span></button><a class="top-link" href="#" data-v-e1a8c278> Return to top </a></div><aside class="VPSidebar" data-v-6210ecdc data-v-310c3af8><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-310c3af8><span class="visually-hidden" id="sidebar-aria-label" data-v-310c3af8> Sidebar Navigation </span><!--[--><div class="group" data-v-310c3af8><section class="VPSidebarGroup collapsible" data-v-310c3af8 data-v-0711f616><div class="title" role="button" data-v-0711f616><h2 class="title-text" data-v-0711f616>博客相关</h2><div class="action" data-v-0711f616><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-0711f616><!--[--><a class="VPLink link" href="/code/front-end/blog-build/" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>博客搭建</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/blog-build/baidu-include.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>百度收录</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/blog-build/seo-optimize.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>SEO优化</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/blog-build/aliyun-domin.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>阿里云域名</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-310c3af8><section class="VPSidebarGroup collapsible collapsed" data-v-310c3af8 data-v-0711f616><div class="title" role="button" data-v-0711f616><h2 class="title-text" data-v-0711f616>前端代码风格规范</h2><div class="action" data-v-0711f616><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-0711f616><!--[--><a class="VPLink link" href="/code/front-end/lint/" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>介绍</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/lint/husky.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Husky</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/lint/commitlint.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Commitlint</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/lint/commitizen.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Commitizen</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/lint/lint-staged.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Lint-staged</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-310c3af8><section class="VPSidebarGroup collapsible collapsed" data-v-310c3af8 data-v-0711f616><div class="title" role="button" data-v-0711f616><h2 class="title-text" data-v-0711f616>SwaggerHub</h2><div class="action" data-v-0711f616><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-0711f616><!--[--><a class="VPLink link" href="/code/front-end/swagger-hub/" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>SwaggerHub使用教程</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/swagger-hub/curl.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Curl</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-310c3af8><section class="VPSidebarGroup collapsible collapsed" data-v-310c3af8 data-v-0711f616><div class="title" role="button" data-v-0711f616><h2 class="title-text" data-v-0711f616>Linux相关</h2><div class="action" data-v-0711f616><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-0711f616><!--[--><a class="VPLink link" href="/code/front-end/linux/" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Linux启动Nginx服务</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/linux/nginx.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Nginx</span><!--]--><!----></a><a class="VPLink link active" href="/code/front-end/linux/docker.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Docker</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/linux/jenkins.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Jenkins</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/linux/kubernetes.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Kubernetes</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-310c3af8><section class="VPSidebarGroup collapsible collapsed" data-v-310c3af8 data-v-0711f616><div class="title" role="button" data-v-0711f616><h2 class="title-text" data-v-0711f616>Vue</h2><div class="action" data-v-0711f616><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-0711f616><!--[--><a class="VPLink link" href="/code/front-end/vue/" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Vue3学习笔记</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/vue/axios.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Axios学习笔记</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/vue/vue-router.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>VueRouter学习笔记</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/vue/typescript.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>TS学习笔记</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/vue/vite.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Vite学习笔记</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/vue/nuxt.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Nuxt学习笔记</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-310c3af8><section class="VPSidebarGroup collapsible collapsed" data-v-310c3af8 data-v-0711f616><div class="title" role="button" data-v-0711f616><h2 class="title-text" data-v-0711f616>AST</h2><div class="action" data-v-0711f616><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-0711f616><!--[--><a class="VPLink link" href="/code/front-end/ast/" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>AST详解</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/ast/the-super-tiny-compiler.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>The-Super-Tiny-Compiler</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-310c3af8><section class="VPSidebarGroup collapsible collapsed" data-v-310c3af8 data-v-0711f616><div class="title" role="button" data-v-0711f616><h2 class="title-text" data-v-0711f616>CSS</h2><div class="action" data-v-0711f616><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-0711f616><!--[--><a class="VPLink link" href="/code/front-end/css/" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>PostCSS</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/css/tailwind.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>TailWind</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/css/sass.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Sass</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-310c3af8><section class="VPSidebarGroup collapsible collapsed" data-v-310c3af8 data-v-0711f616><div class="title" role="button" data-v-0711f616><h2 class="title-text" data-v-0711f616>Git</h2><div class="action" data-v-0711f616><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-0711f616><!--[--><a class="VPLink link" href="/code/front-end/git/" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>git入门指南</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/git/advance.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>git进阶</span><!--]--><!----></a><a class="VPLink link" href="/code/front-end/git/flight-rules.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>git飞行规则</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-310c3af8><section class="VPSidebarGroup collapsible collapsed" data-v-310c3af8 data-v-0711f616><div class="title" role="button" data-v-0711f616><h2 class="title-text" data-v-0711f616>WebSocket</h2><div class="action" data-v-0711f616><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-0711f616><!--[--><a class="VPLink link" href="/code/front-end/websocket/" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>WebSocket</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-310c3af8><section class="VPSidebarGroup collapsible collapsed" data-v-310c3af8 data-v-0711f616><div class="title" role="button" data-v-0711f616><h2 class="title-text" data-v-0711f616>WebContainer</h2><div class="action" data-v-0711f616><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-0711f616><!--[--><a class="VPLink link" href="/code/front-end/web-container/" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>webContainer详解</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-310c3af8><section class="VPSidebarGroup collapsible" data-v-310c3af8 data-v-0711f616><div class="title" role="button" data-v-0711f616><h2 class="title-text" data-v-0711f616>算法</h2><div class="action" data-v-0711f616><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-0711f616><!--[--><a class="VPLink link" href="/code/algorithm/leetcode.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>LeetCode</span><!--]--><!----></a><a class="VPLink link" href="/code/algorithm/lodash.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Lodash</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-310c3af8><section class="VPSidebarGroup collapsible" data-v-310c3af8 data-v-0711f616><div class="title" role="button" data-v-0711f616><h2 class="title-text" data-v-0711f616>Cesium</h2><div class="action" data-v-0711f616><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-0711f616><!--[--><a class="VPLink link" href="/code/cesium/clb.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Cesium 离线加载</span><!--]--><!----></a><a class="VPLink link" href="/code/cesium/examples/tutorials.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>Cesium 用例</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-310c3af8><section class="VPSidebarGroup collapsible" data-v-310c3af8 data-v-0711f616><div class="title" role="button" data-v-0711f616><h2 class="title-text" data-v-0711f616>算法</h2><div class="action" data-v-0711f616><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-0711f616><!--[--><a class="VPLink link" href="/code/devops/jira.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>DevOps</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-310c3af8><section class="VPSidebarGroup collapsible" data-v-310c3af8 data-v-0711f616><div class="title" role="button" data-v-0711f616><h2 class="title-text" data-v-0711f616>其他</h2><div class="action" data-v-0711f616><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-0711f616><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-0711f616><!--[--><a class="VPLink link" href="/code/other/smart-tools.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>markdown</span><!--]--><!----></a><a class="VPLink link" href="/code/other/computer-tech.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>计算机基础知识</span><!--]--><!----></a><a class="VPLink link" href="/code/other/30-seconds-of-code.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>30 seconds of code</span><!--]--><!----></a><a class="VPLink link" href="/code/other/vanillawebprojects.html" data-v-0711f616 data-v-55e78cba data-v-3f64d2a0><!--[--><span class="link-text" data-v-55e78cba>vanillawebprojects</span><!--]--><!----></a><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-6210ecdc data-v-7847b7a6><div class="VPDoc has-sidebar" data-v-7847b7a6 data-v-58381ed2><div class="container" data-v-58381ed2><div class="aside" data-v-58381ed2><div class="aside-curtain" data-v-58381ed2></div><div class="aside-container" data-v-58381ed2><div class="aside-content" data-v-58381ed2><div class="VPDocAside" data-v-58381ed2 data-v-e5360bf8><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-e5360bf8 data-v-d4c903f6><div class="content" data-v-d4c903f6><div class="outline-marker" data-v-d4c903f6></div><div class="outline-title" data-v-d4c903f6>大纲</div><nav aria-labelledby="doc-outline-aria-label" data-v-d4c903f6><span class="visually-hidden" id="doc-outline-aria-label" data-v-d4c903f6> Table of Contents for current page </span><ul class="root" data-v-d4c903f6><!--[--><li style="" data-v-d4c903f6><a class="outline-link" href="#为什么docker？" data-v-d4c903f6>为什么Docker？</a><!----></li><li style="" data-v-d4c903f6><a class="outline-link" href="#getting-started" data-v-d4c903f6>Getting Started</a><!----></li><li style="" data-v-d4c903f6><a class="outline-link" href="#language-specific-guides-new" data-v-d4c903f6>Language-specific guides (New)</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-e5360bf8></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-58381ed2><div class="content-container" data-v-58381ed2><!--[--><!--]--><main class="main" data-v-58381ed2><div style="position:relative;" class="vp-doc _code_front-end_linux_docker" data-v-58381ed2><div><h1 id="docker配置详解" tabindex="-1">Docker配置详解 <a class="header-anchor" href="#docker配置详解" aria-hidden="true">#</a></h1><h2 id="为什么docker？" tabindex="-1">为什么Docker？ <a class="header-anchor" href="#为什么docker？" aria-hidden="true">#</a></h2><p><a href="https://docs.docker.com/get-started/overview/" target="_blank" rel="noopener noreferrer">docker官网</a></p><p>Docker 是一个用于开发、发布和运行应用程序的开放平台。通过利用 Docker 的快速发布、测试和部署代码的方法，可以显著减少编写代码和在生产环境中运行代码之间的延迟。</p><h2 id="getting-started" tabindex="-1">Getting Started <a class="header-anchor" href="#getting-started" aria-hidden="true">#</a></h2><p>官网下载<a href="https://docs.docker.com/docker-for-windows/install/" target="_blank" rel="noopener noreferrer">docker客户端</a></p><p>容器：简单地说，容器就是机器上与主机上的所有其他进程隔离的另一个进程。这种隔离利用了内核namespaces 和 cgroups(control Group 控制组)，这些特性在 Linux 中已经存在很长时间了。</p><p>镜像：在运行容器时，它使用一个独立的文件系统。这个自定义文件系统是由容器镜像提供的。由于镜像包含容器的文件系统，因此它必须包含运行应用程序所需的所有内容——所有的依赖项、配置、脚本、二进制文件等。镜像还包含容器的其他配置，如环境变量、要运行的默认命令和其他元数据。</p><h3 id="getting-started-1" tabindex="-1">Getting started <a class="header-anchor" href="#getting-started-1" aria-hidden="true">#</a></h3><p>命令行运行：</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -d -p 80:80 docker/getting-started</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -d  以分离模式(在后台)运行容器</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -p 80:80  将主机的80端口映射到容器的80端口</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># docker/getting-started  使用镜像</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 缩写： docker run -dp 80:80 docker/getting-started</span></span>
<span class="line"></span></code></pre></div><h3 id="sample-application" tabindex="-1">Sample application <a class="header-anchor" href="#sample-application" aria-hidden="true">#</a></h3><p>下载<a href="https://github.com/docker/getting-started/tree/master/app" target="_blank" rel="noopener noreferrer">官网示例项目</a>。在项目根目录中添加Dockerfile(创建镜像)文件：</p><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> node:12-alpine</span></span>
<span class="line"><span style="color:#F78C6C;">RUN</span><span style="color:#A6ACCD;"> apk add --no-cache python g++ make</span></span>
<span class="line"><span style="color:#F78C6C;">WORKDIR</span><span style="color:#A6ACCD;"> /app</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> . .</span></span>
<span class="line"><span style="color:#F78C6C;">RUN</span><span style="color:#A6ACCD;"> yarn install --production</span></span>
<span class="line"><span style="color:#F78C6C;">CMD</span><span style="color:#A6ACCD;"> [</span><span style="color:#C3E88D;">&quot;node&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#C3E88D;">&quot;src/index.js&quot;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"></span></code></pre></div><p>命令行运行：</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker build -t getting-started </span><span style="color:#82AAFF;">.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 该命令使用 Dockerfile 构建一个新的容器镜像，从node: 12-alpine 开始下载镜像。下载镜像之后，我们在应用程序中复制镜像，并使用yarn安装应用程序的依赖项。CMD 指令指定从此镜像启动容器时运行的默认命令。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 最后,-t 标志标记我们的镜像。可以将其简单地看作是最终镜像的可读名称。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 在 Docker build 命令的末尾告诉 Docker 应该在工作目录文件中寻找 Dockerfile。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 使用 docker run 命令启动容器，并指定我们刚刚创建的镜像的名称:</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -dp 3000:3000 getting-started</span></span>
<span class="line"></span></code></pre></div><h3 id="update-the-application" tabindex="-1">Update the application <a class="header-anchor" href="#update-the-application" aria-hidden="true">#</a></h3><p>在 src/static/js/app.js 文件中，更新第56行以使用新的空白文本：</p><div class="language-html"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">-  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">className</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">text-center</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">No items yet! Add one above!</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">+  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">className</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">text-center</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">You have no todo items yet! Add one above!</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 让我们使用之前使用的相同命令构建镜像的更新版本。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker build -t getting-started </span><span style="color:#82AAFF;">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 让我们使用更新的代码启动一个新容器。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -dp 3000:3000 getting-started</span></span>
<span class="line"></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">报错</p><p>我们无法启动新容器，因为旧容器还在运转。这是一个问题，因为容器使用主机的端口3000，并且机器上只有一个进程(包括容器)可以侦听特定的端口。为了解决这个问题，我们需要移除旧的容器。</p></div><p>移除旧容器：</p><ul><li>Remove a container using the CLI</li></ul><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 使用 docker ps 命令获取容器的 ID。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker ps</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 使用 docker stop 命令停止容器。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker stop </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">the-container-id</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 一旦容器停止，您可以使用 dockerrm 命令删除它。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker rm </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">the-container-id</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><ul><li>Remove a container using the Docker Dashboard</li></ul><ol><li>打开仪表板，鼠标悬停在应用程序容器上，你会看到一组动作按钮出现在右边。</li><li>单击垃圾桶图标删除容器。</li><li>确认移除，你就完成了！</li></ol><p>现在，开始更新你的应用程序。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -dp 3000:3000 getting-started</span></span>
<span class="line"></span></code></pre></div><p>在你的浏览器上刷新http://localhost:3000，你就会看到更新的帮助文本！</p><h3 id="share-the-application" tabindex="-1">Share the application <a class="header-anchor" href="#share-the-application" aria-hidden="true">#</a></h3><p>现在我们已经建立了一个镜像，让我们分享它！要共享 Docker 镜像，必须使用 Docker 注册表。默认的注册表是 dockerhub，我们使用的所有镜像都来自这个注册表。</p><p>创建名为<code>getting-started</code>的仓库。。。</p><p>推送镜像：</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 使用命令登录到 Docker Hub。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker login -u YOUR-USER-NAME</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 使用 `docker tag` 命令为刚开始使用的`getting-started`镜像命名。一定要用你的 Docker ID 替换掉 `YOUR-USER-NAME`。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker tag getting-started YOUR-USER-NAME/getting-started</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># push。如果要从 dockerhub 复制值，可以删除 tagname 部分，因为我们没有向镜像名称添加标记。如果不指定标记，Docker 将使用名为 latest 的标记。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker push YOUR-USER-NAME/getting-started</span></span>
<span class="line"></span></code></pre></div><p>在<a href="https://labs.play-with-docker.com/" target="_blank" rel="noopener noreferrer">Play with Docker</a>点击<code>ADD NEW INSTANCE</code>选项，在终端中，启动刚刚推出的应用程序。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -dp 3000:3000 YOUR-USER-NAME/getting-started</span></span>
<span class="line"></span></code></pre></div><h3 id="persist-the-db-持久化数据库" tabindex="-1">Persist the DB(持久化数据库) <a class="header-anchor" href="#persist-the-db-持久化数据库" aria-hidden="true">#</a></h3><p>当容器运行时，它使用镜像中的各个层作为其文件系统。每个容器还有自己的“scratch space”来创建/更新/删除文件。在另一个容器中不会看到任何更改，即使它们使用的是相同的镜像。</p><p>为了实际看到这一点，我们将启动两个容器，并在每个容器中创建一个文件。您将看到，在一个容器中创建的文件在另一个容器中不可用。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 启动一个 ubuntu 容器，它将创建一个名为/data.txt 的文件，该文件的随机数在1到10000之间。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -d ubuntu sh -c </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">shuf -i 1-10000 -n 1 -o /data.txt &amp;&amp; tail -f /dev/null</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 第一部分选择一个随机数并将其写入/data.txt--&amp;&amp;--第二个命令只是监视一个文件，以保持容器运行。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 验证我们可以通过执行到容器中来查看输出。为此，打开 Dashboard 并单击运行 ubuntu 镜像的容器的第一个操作。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 你会看到一个终端正在 ubuntu 容器中运行一个 shell。运行以下命令查看/data.txt 文件的内容。然后再次关闭这个终端。</span></span>
<span class="line"><span style="color:#A6ACCD;">cat /data.txt</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 或者直接命令行运行</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ps</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># docker exec &lt;container-id&gt; cat /data.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 现在，让我们启动另一个 ubuntu 容器(相同的镜像) ，我们将看到我们没有相同的文件。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -it ubuntu ls /</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 看！那里没有 data.txt 文件！这是因为它被写入到只有第一个容器的scratch space。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 移除第一个容器</span></span>
<span class="line"><span style="color:#A6ACCD;">docker rm -f </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">container-id</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>在前面的实验中，我们看到每个容器在每次启动时都从镜像定义开始。虽然容器可以创建、更新和删除文件，但当容器被移除并且所有更改都隔离到该容器时，这些更改将丢失。通过volumes，我们可以改变这一切。</p><p>volumes提供了将容器的特定文件系统路径连接回主机的能力。如果挂载了容器中的目录，那么在主机上也可以看到该目录中的更改。如果我们在容器重新启动时挂载相同的目录，我们会看到相同的文件。</p><p>volumes主要有两种类型，我们最终将同时使用这两种类型，但是我们将从命名卷(named volumes)开始。</p><p>默认情况下，todo 应用程序在/etc/todos/todo.db 的 SQLite 数据库中存储数据。如果你不熟悉 SQLite，不用担心！它只是一个关系数据库文件夹，其中所有的数据存储在一个单一的文件中。虽然这对于大规模应用程序来说不是最好的，但是对于小型演示程序来说是可行的。稍后我们将讨论将其切换到不同的数据库引擎。</p><p>由于数据库是一个单独的文件，如果我们能够将该文件持久化到主机上，并使其可用于下一个容器，那么它应该能够从上一个文件中断的地方继续下去。通过创建一个卷并将其附加到存储数据的目录(通常称为“挂载”) ，我们可以保存数据。当我们的容器写入 todo.db 文件时，它将在卷中被持久化到主机。</p><p>如前所述，我们将使用一个命名的卷(named volume)。可以将指定的卷(volume)看作是一个数据桶。Docker 维护磁盘上的物理位置，您只需记住卷的名称。每次使用卷(volume)时，Docker 都会确保提供了正确的数据。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 使用 docker volume Create 命令创建卷</span></span>
<span class="line"><span style="color:#A6ACCD;">docker volume create todo-db</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 在 Dashboard 中再次停止并删除 todo app 容器(或使用 docker rm-f &lt; id &gt;) ，因为它仍然在运行，而不使用持久卷。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker rm-f </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> id </span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 启动 todo 应用程序容器，但添加-v 标志来指定卷挂载。我们将使用指定的卷并将其挂载到/etc/todos，它将捕获在路径中创建的所有文件。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -dp 3000:3000 -v todo-db:/etc/todos getting-started</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 一旦容器启动，打开应用程序并添加一些项目到你的待办事项列表。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 停止并移除 todo 应用程序的容器。使用 Dashboard 或 docker ps 获取 ID，然后 docker rm-f &lt; ID &gt; 删除它。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker rm -f </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 使用上面的相同命令启动一个新容器。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 打开应用程序。你应该看到你的项目仍然在你的清单！</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 继续前进，并删除容器当您完成检查您的列表。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 当使用命名卷时，可以使用 docker volume inspect 命令查看Docker 实际上在哪里存储数据</span></span>
<span class="line"><span style="color:#A6ACCD;">docker volume inspect todo-db</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 挂载点是数据存储在磁盘上的实际位置。请注意，在大多数机器上，您需要具有从主机访问此目录的根访问权限。但是，它就在那里！</span></span>
<span class="line"></span></code></pre></div><h3 id="use-bind-mounts-挂载" tabindex="-1">Use bind mounts(挂载) <a class="header-anchor" href="#use-bind-mounts-挂载" aria-hidden="true">#</a></h3><p>在前一章中，我们讨论并使用了一个命名卷来保存数据库中的数据。如果我们只是想存储数据，命名卷是很好的，因为我们不必担心数据存储在哪里。</p><p>使用绑定装载，我们可以控制主机上的精确装载点。我们可以使用它来持久化数据，但是它通常用于向容器中提供额外的数据。在处理应用程序时，我们可以使用 bind mount 将源代码挂载到容器中，让容器查看代码更改、响应，并让我们立即查看更改。</p><p>对于基于 node 的应用程序，nodemon 是一个很好的工具，可以监视文件更改，然后重新启动应用程序。在大多数其他语言和框架中也有类似的工具。</p><p>绑定挂载和命名卷是 Docker 引擎附带的两种主要卷类型。但是，额外的卷驱动程序可用于支持其他用例(SFTP、 Ceph、 NetApp、 S3等)。</p><table><thead><tr><th></th><th>Named Volumes</th><th>Bind Mounts</th></tr></thead><tbody><tr><td>Host Location</td><td>Docker chooses</td><td>You control</td></tr><tr><td>Mount Example (using -v)</td><td>my-volume:/usr/local/data</td><td>/path/to/ data:/usr/local/data</td></tr><tr><td>Populates(填充) new volume with container contents</td><td>Yes</td><td>No</td></tr><tr><td>Supports Volume Drivers</td><td>Yes</td><td>No</td></tr></tbody></table><p>为了运行容器以支持开发工作流，我们将执行以下操作:</p><ul><li>将源代码挂载到容器中</li><li>安装所有依赖项，包括“ dev”依赖项</li><li>启动 nodemon 监视文件系统的更改</li></ul><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 确保没有运行任何之前的getting-started启动容器。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 运行以下命令，之后我们将解释发生了什么:</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -dp 3000:3000 \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -w /app -v </span><span style="color:#89DDFF;">&quot;$(</span><span style="color:#C3E88D;">pwd</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:/app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \</span></span>
<span class="line"><span style="color:#A6ACCD;">  node:12-alpine \</span></span>
<span class="line"><span style="color:#A6ACCD;">  sh -c </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yarn install &amp;&amp; yarn run dev</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 如果你正在使用 PowerShell，那么使用下面的命令:</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -dp 3000:3000 </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  -w /app -v </span><span style="color:#89DDFF;">&quot;$(</span><span style="color:#C3E88D;">pwd</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:/app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#A6ACCD;">  node:12-alpine </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  sh -c </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yarn install &amp;&amp; yarn run dev</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -dp 3000:3000 -和以前一样。在分离(背景)模式下运行并创建一个端口映射</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -w /app -设定「工作目录」或指令运行的工作目录</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -v &quot;$(pwd):/app&quot; -将工作目录从容器中的主机挂载到/app目录</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># node:12-alpine -要使用的镜像。注意，这是来自 Dockerfile 的为我们的app的基本镜像</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># sh -c &quot;yarn install &amp;&amp; yarn run dev&quot; -启动一个 shell 使用sh (alpine doesn’t have bash),开始了nodemon</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看日志</span></span>
<span class="line"><span style="color:#C3E88D;">docker logs -f </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">container-id</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看完日志后，按 Ctrl + c 退出</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 现在，让我们改变一下这个应用程序。在 src/static/js/app.js 文件中，让我们将“ Add Item”按钮更改为只说“ Add”。这个更改将在第109行:</span></span>
<span class="line"><span style="color:#C3E88D;">- {submitting </span><span style="color:#89DDFF;">?</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Adding...</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> </span><span style="color:#82AAFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Add Item</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">}</span></span>
<span class="line"><span style="color:#C3E88D;">+ {submitting </span><span style="color:#89DDFF;">?</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Adding...</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> </span><span style="color:#82AAFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Add</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 只需刷新页面(或打开页面) ，你就会立即看到浏览器中反映的变化。Node 服务器重新启动可能需要几秒钟，因此如果出现错误，只需尝试几秒钟后刷新。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 你可以自由地做任何其他你想做的改变。完成后，停止容器并使用 docker build-t getting-started .构建新镜像。</span></span>
<span class="line"><span style="color:#C3E88D;">docker build -t getting-started </span><span style="color:#82AAFF;">.</span></span>
<span class="line"></span></code></pre></div><p>对于本地开发设置，使用绑定挂载是非常常见的。优点是开发机器不需要安装所有的构建工具和环境。使用一个 docker 运行命令，就可以拉动开发环境并准备运行。我们将在以后的步骤中讨论 Docker Compose，因为这将有助于简化命令(我们已经获得了很多标志)。</p><h3 id="multi-container-apps" tabindex="-1">Multi container apps <a class="header-anchor" href="#multi-container-apps" aria-hidden="true">#</a></h3><p>到目前为止，我们一直在使用单容器应用程序。但是，我们现在想要将 MySQL 添加到应用程序堆栈中。经常会出现这样的问题: “ MySQL 将在哪里运行？把它安装在同一个容器里，还是分开运行?”一般来说，每个容器都应该做好一件事。原因如下:</p><ul><li>您有可能必须以不同于数据库的方式扩展 api 和前端</li><li>单独的容器使您可以独立地对版本进行版本和更新</li><li>虽然您可以在本地对数据库使用容器，但是您可能希望在生产环境中对数据库使用托管服务。那么，你不会希望将数据库引擎与应用程序一起发布</li><li>运行多个进程将需要一个进程管理器(容器只启动一个进程) ，这增加了容器启动/关闭的复杂性</li></ul><p>请记住，默认情况下，容器是独立运行的，不知道同一台机器上的其他进程或容器的任何信息。那么，我们如何允许一个容器与另一个容器通话呢？答案是建立network。现在，你不必是一个网络工程师(万岁!).记住这条规则... ..。</p><div class="warning custom-block"><p class="custom-block-title">注意</p><p>如果两个容器在同一个网络上，它们可以互相通信，如果不是，它们就不能通信。</p></div><p>在网络上放置容器有两种方法: 1)在开始时分配它; 2)连接现有的容器。现在，我们将首先创建网络并在启动时附加 MySQL 容器。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 创建网络。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker network create todo-app</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 启动一个 MySQL 容器并将其附加到网络上。我们还将定义一些环境变量，数据库将使用这些环境变量来初始化数据库</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -d \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --network todo-app --network-alias mysql \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -v todo-mysql-data:/var/lib/mysql \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_ROOT_PASSWORD=secret \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_DATABASE=todos \</span></span>
<span class="line"><span style="color:#A6ACCD;">  mysql:5.7</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 如果您正在使用 PowerShell，那么使用这个命令。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -d </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  --network todo-app --network-alias mysql </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#A6ACCD;">  -v todo-mysql-data:/var/lib/mysql </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  -e MYSQL_ROOT_PASSWORD=secret </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_DATABASE=todos </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  mysql:5.7</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 您会注意到，我们在这里使用了一个名为 todo-MySQL-data 的卷，并将其挂载到/var/lib/MySQL，这是 MySQL 存储数据的地方。但是，我们从未运行过 docker volume create 命令。Docker 意识到我们想要使用一个命名卷，并自动为我们创建一个。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 要确认数据库已经建立并运行，请连接到数据库并验证其连接。</span></span>
<span class="line"><span style="color:#C3E88D;">docker </span><span style="color:#82AAFF;">exec</span><span style="color:#C3E88D;"> -it </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">mysql-container-id</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;"> mysql -u root -p</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 当密码提示出现时，键入 secret。在 MySQL shell 中，列出数据库并验证是否看到 todos 数据库。</span></span>
<span class="line"><span style="color:#C3E88D;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;"> SHOW DATABASES</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>现在我们知道 MySQL 已经启动并运行了，让我们使用它吧！但问题是... 怎么做？如果我们在同一个网络上运行另一个容器，我们如何找到容器(记住每个容器都有自己的 IP 地址) ？</p><p>为了解决这个问题，我们将使用 <a href="https://github.com/nicolaka/netshoot" target="_blank" rel="noopener noreferrer">nicolaka/netshoot</a> 容器，它提供了许多工具，这些工具对于故障排除或调试网络问题非常有用。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 使用 nicolaka/netshoot 镜像启动一个新容器，确保它连接到同一个网络。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">docker run -it --network todo-app nicolaka/netshoot</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 在容器内部，我们将使用 dig 命令，这是一个有用的 DNS 工具。我们将查找主机名 mysql 的 IP 地址。</span></span>
<span class="line"><span style="color:#A6ACCD;">dig mysql</span></span>
<span class="line"></span></code></pre></div><p>在“ ANSWER SECTION”中，您将看到 mysql 的 a 记录解析为172.23.0.2(您的 IP 地址很可能具有不同的值)。虽然 mysql 通常不是一个有效的主机名，但 Docker 可以将其解析为具有该网络别名的容器的 IP 地址(还记得我们前面使用的 -- network-alias 标志吗?).</p><p>这意味着... 我们的应用程序只需要连接到一个名为 mysql 的主机，它就会与数据库通话！没有比这更简单的了！</p><p>这个 todo 应用程序支持设置一些环境变量来指定 MySQL 连接设置，它们是:</p><ul><li><code>MYSQL_HOST</code> -运行的 MySQL 服务器的主机名</li><li><code>MYSQL_USER</code> -用于连接的用户名</li><li><code>MYSQL_PASSWORD</code> -连接所需的密码</li><li><code>MYSQL_DB</code> -连接后要使用的数据库</li></ul><p>解释了所有这些之后，让我们开始我们的开发准备容器！</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 我们将指定上面的每个环境变量，并将容器连接到我们的应用程序网络。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -dp 3000:3000 \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -w /app -v </span><span style="color:#89DDFF;">&quot;$(</span><span style="color:#C3E88D;">pwd</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:/app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --network todo-app \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_HOST=mysql \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_USER=root \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_PASSWORD=secret \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_DB=todos \</span></span>
<span class="line"><span style="color:#A6ACCD;">  node:12-alpine \</span></span>
<span class="line"><span style="color:#A6ACCD;">  sh -c </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yarn install &amp;&amp; yarn run dev</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 如果您正在使用 PowerShell，那么使用这个命令。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -dp 3000:3000 </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  -w /app -v </span><span style="color:#89DDFF;">&quot;$(</span><span style="color:#C3E88D;">pwd</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:/app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#A6ACCD;">  --network todo-app </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  -e MYSQL_HOST=mysql </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_USER=root </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  -e MYSQL_PASSWORD=secret </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_DB=todos </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  node:12-alpine </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#A6ACCD;">  sh -c </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yarn install &amp;&amp; yarn run dev</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看容器的日志</span></span>
<span class="line"><span style="color:#A6ACCD;">docker logs </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> container-id </span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 在你的浏览器中打开应用程序，在你的待办事项列表中添加一些项目。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 连接到 mysql 数据库，并证明这些项目正被写入数据库。记住，密码是保密的。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker </span><span style="color:#82AAFF;">exec</span><span style="color:#A6ACCD;"> -it </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">mysql-container-id</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> mysql -p todos</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 在 mysql shell 中，运行以下命令:</span></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">select</span><span style="color:#A6ACCD;"> * from todo_items</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>如果你快速浏览一下 Docker Dashboard，你会发现我们有两个正在运行的应用程序容器。但是，并没有真正的迹象表明他们被集中在一个单一的应用程序中。我们很快就会知道如何让它变得更好！</p><h3 id="use-docker-compose" tabindex="-1">Use Docker Compose <a class="header-anchor" href="#use-docker-compose" aria-hidden="true">#</a></h3><p>Dockercompose 是一个开发用于帮助定义和共享多容器应用程序的工具。通过 Compose，我们可以创建一个 YAML 文件来定义服务，并且只需一个命令，就可以将所有东西旋转或拆卸。</p><p>使用 Compose 的最大优点是，您可以在文件中定义应用程序堆栈，将其保存在项目仓库的根目录(现在是版本控制)中，并且很容易让其他人为您的项目贡献内容。有人只需要克隆你的回购和启动撰写应用程序。事实上，您可能会在 GitHub/GitLab 上看到相当多的项目正在这样做。</p><p>如果您为 Windows 或 Mac 安装了 Docker 桌面/工具箱，那么您已经有了 Docker Compose！Play-with-Docker 实例也已经安装了 dockercompose。如果您使用的是 Linux 机器，则需要安装 dockercompose。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 安装后，您应该能够运行以下命令并查看版本信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose version</span></span>
<span class="line"></span></code></pre></div><ul><li>Create the Compose file:</li></ul><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 在 app 项目的根目录下，创建一个名为 docker-compose.yml 的文件。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 在撰写文件中，我们将从定义模式版本开始。在大多数情况下，最好使用最新支持的版本。您可以查看当前模式版本的 Compose 文件引用和兼容性矩阵。</span></span>
<span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.7</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 接下来，我们将定义要作为应用程序的一部分运行的服务(或容器)列表。</span></span>
<span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.7</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span></code></pre></div><p>现在，我们开始每次将一个服务迁移到compose文件中。</p><ul><li>Define the app service</li></ul><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 记住，这是我们用来定义应用程序容器的命令。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -dp 3000:3000 \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -w /app -v </span><span style="color:#89DDFF;">&quot;$(</span><span style="color:#C3E88D;">pwd</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:/app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --network todo-app \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_HOST=mysql \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_USER=root \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_PASSWORD=secret \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_DB=todos \</span></span>
<span class="line"><span style="color:#A6ACCD;">  node:12-alpine \</span></span>
<span class="line"><span style="color:#A6ACCD;">  sh -c </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yarn install &amp;&amp; yarn run dev</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 如果您正在使用 PowerShell，那么使用这个命令。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -dp 3000:3000 </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  -w /app -v </span><span style="color:#89DDFF;">&quot;$(</span><span style="color:#C3E88D;">pwd</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:/app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#A6ACCD;">  --network todo-app </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  -e MYSQL_HOST=mysql </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_USER=root </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  -e MYSQL_PASSWORD=secret </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_DB=todos </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  node:12-alpine </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#A6ACCD;">  sh -c </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yarn install &amp;&amp; yarn run dev</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 首先，让我们为容器定义服务条目和镜像。我们可以为这项服务选择任何名称。该名称将自动成为网络别名，这在定义 MySQL 服务时非常有用。</span></span>
<span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.7</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">app</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node:12-alpine</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 通常，您将在镜像定义附近看到该命令，尽管不要求排序。所以，让我们继续前进，并把它移到我们的文件。</span></span>
<span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.7</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">app</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node:12-alpine</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">command</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 让我们通过定义服务的端口来迁移命令的-p 3000:3000部分。这里我们将使用简短的语法，但是还有一个更加冗长的长语法可用。</span></span>
<span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.7</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">app</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node:12-alpine</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">command</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">3000:3000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 接下来，我们将使用 working_dir 和 volumes 定义来迁移工作目录文件(-w/app)和卷映射(-v“ $(pwd):/app”)。卷也有短语法和长语法。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Docker Compose volume definitions的一个优点是我们可以使用工作目录的相对路径。</span></span>
<span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.7</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">app</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node:12-alpine</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">command</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">3000:3000</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">working_dir</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/app</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./:/app</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 最后，我们需要使用环境键来迁移环境变量定义。</span></span>
<span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.7</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">app</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node:12-alpine</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">command</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">3000:3000</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">working_dir</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/app</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./:/app</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MYSQL_HOST</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MYSQL_USER</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MYSQL_PASSWORD</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">secret</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MYSQL_DB</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">todos</span></span>
<span class="line"></span></code></pre></div><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 现在，是时候定义 MySQL 服务了:</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -d \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --network todo-app --network-alias mysql \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -v todo-mysql-data:/var/lib/mysql \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_ROOT_PASSWORD=secret \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_DATABASE=todos \</span></span>
<span class="line"><span style="color:#A6ACCD;">  mysql:5.7</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 如果您正在使用 PowerShell，那么使用这个命令。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -d </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  --network todo-app --network-alias mysql </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#A6ACCD;">  -v todo-mysql-data:/var/lib/mysql </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  -e MYSQL_ROOT_PASSWORD=secret </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e MYSQL_DATABASE=todos </span><span style="color:#89DDFF;">`</span></span>
<span class="line"><span style="color:#C3E88D;">  mysql:5.7</span></span>
<span class="line"></span></code></pre></div><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 我们将首先定义新的服务并将其命名为 mysql，这样它就会自动获得网络别名。我们将继续并指定要使用的镜像。</span></span>
<span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.7</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">app</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># The app service definition</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mysql</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql:5.7</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 接下来，我们将定义卷映射。当用 docker 运行容器时，将自动创建指定的卷。但是，在使用 Compose 运行的时候就不会发生这种情况。我们需要在顶级卷: 节中定义卷，然后在服务配置中指定挂载点。通过只提供卷名，就可以使用默认选项。不过还有更多的选择。</span></span>
<span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.7</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">app</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># The app service definition</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mysql</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql:5.7</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">todo-mysql-data:/var/lib/mysql</span></span>
<span class="line"><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">todo-mysql-data</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 最后，我们只需要指定环境变量。</span></span>
<span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.7</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">app</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># The app service definition</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mysql</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql:5.7</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">todo-mysql-data:/var/lib/mysql</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MYSQL_ROOT_PASSWORD</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">secret</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MYSQL_DATABASE</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">todos</span></span>
<span class="line"><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">todo-mysql-data</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span></code></pre></div><p>此时，我们的完整 docker-compose. yml 应该是这样的:</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.7</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">app</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node:12-alpine</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">command</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">3000:3000</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">working_dir</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/app</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./:/app</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MYSQL_HOST</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MYSQL_USER</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MYSQL_PASSWORD</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">secret</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MYSQL_DB</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">todos</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mysql</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql:5.7</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">todo-mysql-data:/var/lib/mysql</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MYSQL_ROOT_PASSWORD</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">secret</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MYSQL_DATABASE</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">todos</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">todo-mysql-data</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span></code></pre></div><p>现在我们有了 <code>docker-compose.yml</code> 文件，就可以启动它了！</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 确保没有其他的 app/db 副本首先运行(docker ps 和 docker rm-f &lt; ids &gt;)。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 使用 docker-compose up 命令启动应用程序堆栈。我们将添加-d 标志来运行后台的所有内容。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose up -d</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 您会注意到，卷是创建以及网络！默认情况下，Docker Compose 会自动为应用程序堆栈创建一个网络(这就是为什么我们没有在 Compose 文件中定义一个网络)。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看日志 -f follows</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose logs -f</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 您将看到来自每个服务的日志交叉存储到单个流中。当您想要观察与时间相关的问题时，这是非常有用的。-f 标志“follows”日志，因此将在生成时给出实时输出。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看特定服务的日志</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose logs -f app</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 服务名显示在行首(通常是彩色的) ，以帮助区分消息。如果要查看特定服务的日志，可以将服务名添加到 logs 命令的末尾(例如，docker-compose logs-f app)。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 在这一点上，你应该能够打开你的应用程序，看到它运行。嘿！我们只剩下一个命令了！</span></span>
<span class="line"></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">注意</p><p>当应用程序启动时，它实际上是坐着等待 MySQL 启动并准备好，然后再尝试连接到它。在启动另一个容器之前，Docker 没有任何内置支持来等待另一个容器完全启动、运行和准备就绪。对于基于节点的项目，可以使用等待端口依赖项。其他语言/框架也有类似的项目。</p></div><p>当你准备撕毁它所有，只需运行 <code>docker-compose down</code> 或击中 Docker Dashboard 的垃圾桶为整个应用程序。容器将停止，网络将被删除。</p><div class="warning custom-block"><p class="custom-block-title">注意</p><p>Removing Volumes 默认情况下，在运行 docker-compose 时，撰写文件中的已命名卷不会被删除。如果要删除卷，则需要添加 -- volume 标志。 当你删除应用程序堆栈时，Docker Dashboard 不会删除卷。</p></div><p>一旦被拆除，您可以切换到另一个项目，运行 docker-compose up 并准备为该项目做出贡献！没有比这更简单的了！</p><h3 id="image-building-best-practices" tabindex="-1">Image-building best practices <a class="header-anchor" href="#image-building-best-practices" aria-hidden="true">#</a></h3><p>当您已经构建了一个镜像时，最好使用 docker scan 命令对其进行扫描以发现安全漏洞。与 snyder 合作提供漏洞扫描服务。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 例如，要扫描本教程前面创建的 getting-started 镜像，只需键入</span></span>
<span class="line"><span style="color:#A6ACCD;">docker scan getting-started</span></span>
<span class="line"></span></code></pre></div><p>你知道你可以看到是什么构成了一个镜像吗？使用 docker image history 命令，您可以看到用于在镜像中创建每个图层的命令。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># 使用 docker image history 命令查看教程前面创建的 getting-started 镜像中的图层。</span></span>
<span class="line"><span style="color:#A6ACCD;">docker image </span><span style="color:#82AAFF;">history</span><span style="color:#A6ACCD;"> getting-started</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 每行代表镜像中的一个图层。使用这个，您还可以快速查看每个图层的大小，帮助诊断大镜像。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 您将注意到有几行被截断了。如果添加 --no-trunk 标志，就会得到完整的输出</span></span>
<span class="line"><span style="color:#A6ACCD;">docker image </span><span style="color:#82AAFF;">history</span><span style="color:#A6ACCD;"> --no-trunc getting-started</span></span>
<span class="line"></span></code></pre></div><p>让我们看看我们再次使用的 Dockerfile..。</p><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># syntax=docker/dockerfile:1</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> node:12-alpine</span></span>
<span class="line"><span style="color:#F78C6C;">WORKDIR</span><span style="color:#A6ACCD;"> /app</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> . .</span></span>
<span class="line"><span style="color:#F78C6C;">RUN</span><span style="color:#A6ACCD;"> yarn install --production</span></span>
<span class="line"><span style="color:#F78C6C;">CMD</span><span style="color:#A6ACCD;"> [</span><span style="color:#C3E88D;">&quot;node&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#C3E88D;">&quot;src/index.js&quot;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"></span></code></pre></div><p>回到镜像历史输出，我们可以看到 Dockerfile 中的每个命令都成为镜像中的一个新层。您可能还记得，当我们对镜像进行更改时，必须重新安装纱线依赖项。有办法解决这个问题吗？每次构建时都围绕着相同的依赖关系发布并没有多大意义，对吧？</p><p>为了解决这个问题，我们需要重新构造 Dockerfile 来帮助支持依赖项的缓存。对于基于 node 的应用程序，这些依赖项在 package.json 文件中定义。那么，如果我们首先只复制这个文件，安装依赖项，然后复制到其他所有文件中，又会怎样呢？然后，只有在 package.json 发生更改时，我们才重新创建对纱线的依赖关系。有意义吗？</p><ol><li>首先将 Dockerfile 更新到 <code>package.json</code> 中，安装依赖项，然后将其他所有内容复制到 <code>package.json</code> 中。</li></ol><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># syntax=docker/dockerfile:1</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> node:12-alpine</span></span>
<span class="line"><span style="color:#F78C6C;">WORKDIR</span><span style="color:#A6ACCD;"> /app</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> package.json yarn.lock ./</span></span>
<span class="line"><span style="color:#F78C6C;">RUN</span><span style="color:#A6ACCD;"> yarn install --production</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> . .</span></span>
<span class="line"><span style="color:#F78C6C;">CMD</span><span style="color:#A6ACCD;"> [</span><span style="color:#C3E88D;">&quot;node&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#C3E88D;">&quot;src/index.js&quot;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"></span></code></pre></div><ol start="2"><li>在与 Dockerfile 相同的文件夹中创建一个名为 <code>.dockerignore</code> 的文件，其内容如下。</li></ol><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">node_modules</span></span>
<span class="line"></span></code></pre></div><ol start="3"><li>使用 <code>docker Build</code> 构建一个新的镜像。</li></ol><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker build -t getting-started </span><span style="color:#82AAFF;">.</span></span>
<span class="line"></span></code></pre></div><ol start="4"><li>现在，对 <code>src/static/index.html</code> 文件进行修改(比如将 &lt; title &gt; 改为“ The Awesome Todo App”)。</li><li>现在使用 <code>docker build -t getting-started .</code> 构建镜像。再一次。这一次，您的输出应该看起来有些不同。</li></ol><p>在构建 React 应用程序时，我们需要一个 Node 环境来编译 JS 代码(通常是 JSX)、 SASS 样式表，以及更多的静态 HTML、 JS 和 CSS。如果我们不进行服务器端渲染，我们甚至不需要生产构建所需的 Node 环境。为什么不将静态资源装运到静态 nginx 容器中呢？</p><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># syntax=docker/dockerfile:1</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> node:12 </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> build</span></span>
<span class="line"><span style="color:#F78C6C;">WORKDIR</span><span style="color:#A6ACCD;"> /app</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> package* yarn.lock ./</span></span>
<span class="line"><span style="color:#F78C6C;">RUN</span><span style="color:#A6ACCD;"> yarn install</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> public ./public</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> src ./src</span></span>
<span class="line"><span style="color:#F78C6C;">RUN</span><span style="color:#A6ACCD;"> yarn run build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> nginx:alpine</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> --from=build /app/build /usr/share/nginx/html</span></span>
<span class="line"></span></code></pre></div><p>这里，我们使用一个 node: 12 image 来执行构建(最大化层缓存) ，然后将输出复制到 nginx 容器中</p><h2 id="language-specific-guides-new" tabindex="-1">Language-specific guides (New) <a class="header-anchor" href="#language-specific-guides-new" aria-hidden="true">#</a></h2><h3 id="node-js" tabindex="-1">Node.js <a class="header-anchor" href="#node-js" aria-hidden="true">#</a></h3><p>让我们创建一个简单的 Node.js 应用程序作为示例。在本地计算机中创建一个名为 node-docker 的目录，并按照下面的步骤创建一个简单的 REST API。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">path to your node-docker directory</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">npm init -y</span></span>
<span class="line"><span style="color:#A6ACCD;">npm add ronin-server ronin-mocks</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># touch server.js</span></span>
<span class="line"><span style="color:#82AAFF;">type</span><span style="color:#A6ACCD;"> nul</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">server.js</span></span>
<span class="line"></span></code></pre></div><p>现在，让我们添加一些代码来处理 REST 请求。我们将使用一个模拟服务器，这样我们就可以专注于对应用程序进行 Dockerizing。</p><p>在 IDE 中打开这个工作目录文件，并将下面的代码添加到 server.js 文件中。</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> ronin </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">( </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ronin-server</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> )</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> mocks </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">( </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ronin-mocks</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> server </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ronin</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">server</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">server</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">use</span><span style="color:#A6ACCD;">( </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> mocks</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">server</span><span style="color:#A6ACCD;">( server</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Router</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> ) )</span></span>
<span class="line"><span style="color:#A6ACCD;">server</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">start</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span></code></pre></div><p>这个模拟服务器名为 Ronin.js，默认情况下会在端口8000上监听。您可以向根(/)端点发出 POST 请求，发送到服务器的任何 JSON 结构都将保存在内存中。您还可以向相同的端点发送 GET 请求，并接收您以前张贴的 JSON 对象数组。</p><p>让我们启动应用程序，并确保它正常运行。打开你的终端，导航到你创建的工作目录。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">node server.js</span></span>
<span class="line"></span></code></pre></div><p>为了测试应用程序是否正常工作，我们首先将一些 JSON 发布到 API，然后发出 GET 请求，查看数据是否已经保存。打开一个新的终端并运行以下 curl 命令:</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">curl --request POST --url http://localhost:8000/test --header </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">content-type: application/json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> --data </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">{&quot;msg&quot;: &quot;testing&quot; }</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">curl http://localhost:8000/test</span></span>
<span class="line"></span></code></pre></div><p>切换回运行服务器的终端。现在您应该可以在服务器日志中看到以下请求。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">2020-XX-31T16:35:08:4260  INFO: POST /test</span></span>
<span class="line"><span style="color:#A6ACCD;">2020-XX-31T16:35:21:3560  INFO: GET /test</span></span>
<span class="line"></span></code></pre></div><p>Dockerfile 是一个文本文档，其中包含用户可以在命令行上调用的所有命令来组装镜像。当我们告诉 Docker 通过执行 Docker build 命令来构建我们的镜像时，Docker 读取这些指令并逐个执行它们，最后创建一个 Docker 镜像。</p><p>让我们逐步了解为应用程序创建 Dockerfile 的过程。在你的工作目录文件夹的根目录下，创建一个名为 Dockerfile 的文件，并在文本编辑器中打开这个文件。</p><p>要添加到 Dockerfile 的第一行是 # syntax parser 指令。虽然这个指令是可选的，但它指示 Docker 构建器在解析 Dockerfile 时使用什么语法，并允许使用 BuildKit 的旧版本在开始构建之前升级解析器。解析器指令必须出现在 Dockerfile 中的任何其他注释、空格或 Dockerfile 指令之前，应该是 Dockerfiles 的第一行。</p><p>要添加到 Dockerfile 的第一行是 # syntax parser 指令。虽然这个指令是可选的，但它指示 Docker 构建器在解析 Dockerfile 时使用什么语法，并允许使用 BuildKit 的旧版本在开始构建之前升级解析器。解析器指令必须出现在 Dockerfile 中的任何其他注释、空格或 Dockerfile 指令之前，应该是 Dockerfiles 的第一行。</p><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># syntax=docker/dockerfile:1</span></span>
<span class="line"></span></code></pre></div><p>我们建议使用 docker/dockerfile: 1，它总是指向版本1语法的最新版本。BuildKit 会在构建之前自动检查语法更新，确保您使用的是最新版本。</p><p>接下来，我们需要在 Dockerfile 中添加一行，告诉 Docker 我们希望为应用程序使用什么基本镜像。</p><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># syntax=docker/dockerfile:1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> node:12.18.1</span></span>
<span class="line"></span></code></pre></div><p>当我们使用 FROM 命令时，我们告诉 Docker 在我们的镜像中包含来自节点的所有功能: 12.18.1 image</p><p><code>NODE _ env</code> 环境变量指定了应用程序运行的环境(通常是开发或生产环境)。要提高性能，最简单的方法之一就是将 <code>node_env</code> 设置为 <code>production</code> 。</p><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#F78C6C;">ENV</span><span style="color:#A6ACCD;"> NODE_ENV=production</span></span>
<span class="line"></span></code></pre></div><p>为了在运行剩下的命令时让事情变得更简单，让我们创建一个工作目录。这指示 Docker 使用此路径作为所有后续命令的默认位置。这样我们就不必输入完整的文件路径，而是可以使用基于工作目录的相对路径。</p><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#F78C6C;">WORKDIR</span><span style="color:#A6ACCD;"> /app</span></span>
<span class="line"></span></code></pre></div><p>在运行 <code>npm install</code> 之前，我们需要获得 <code>package.json</code> 和 <code>package-lock</code>。把 json 文件放进我们的镜像里。我们使用 COPY 命令来实现这一点。<code>COPY</code> 命令有两个参数。第一个参数告诉 Docker 希望将哪些文件复制到镜像中。第二个参数告诉 Docker 您希望将该文件复制到何处。我们会复制 <code>package.json</code> 和 <code>package-lock</code> 。将 json 文件输入我们的工作目录 <code>/app</code>。</p><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> [</span><span style="color:#C3E88D;">&quot;package.json&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#C3E88D;">&quot;package-lock.json*&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#C3E88D;">&quot;./&quot;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"></span></code></pre></div><p>一旦我们在镜像中有了<code> package.json</code> 文件，我们就可以使用 <code>RUN</code> 命令执行命令 npm install。这与我们在机器上本地运行 npm install 的工作方式完全相同，但是这次这些 Node 模块将被安装到镜像中的 <code>node_modules</code> 目录中。</p><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#F78C6C;">RUN</span><span style="color:#A6ACCD;"> npm install --production</span></span>
<span class="line"></span></code></pre></div><p>现在，我们有了一个基于节点版本12.18.1的镜像，并且我们已经安装了依赖项。接下来我们需要做的是将源代码添加到镜像中。我们将使用 COPY 命令，就像我们对上面的 <code>package.json</code> 文件所做的那样。</p><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> . .</span></span>
<span class="line"></span></code></pre></div><p>复制命令获取工作目录中的所有文件并将它们复制到镜像中。现在，我们所要做的就是告诉 Docker 当镜像在容器中运行时，我们要运行什么命令。我们使用 CMD 命令完成此操作。</p><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#F78C6C;">CMD</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">&quot;node&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#C3E88D;">&quot;server.js&quot;</span><span style="color:#A6ACCD;"> ]</span></span>
<span class="line"></span></code></pre></div><p>下面是完整的 Dockerfile。</p><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># syntax=docker/dockerfile:1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> node:12.18.1</span></span>
<span class="line"><span style="color:#F78C6C;">ENV</span><span style="color:#A6ACCD;"> NODE_ENV=production</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">WORKDIR</span><span style="color:#A6ACCD;"> /app</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> [</span><span style="color:#C3E88D;">&quot;package.json&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#C3E88D;">&quot;package-lock.json*&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#C3E88D;">&quot;./&quot;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">RUN</span><span style="color:#A6ACCD;"> npm install --production</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> . .</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">CMD</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">&quot;node&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#C3E88D;">&quot;server.js&quot;</span><span style="color:#A6ACCD;"> ]</span></span>
<span class="line"></span></code></pre></div><p>Create a .dockerignore file:</p><p>要在构建上下文中使用文件，Dockerfile 引用指令中指定的文件，例如 COPY 指令。若要提高生成的性能，请通过添加 <code>.dockerignore</code> 文件移到上下文目录。若要改进上下文加载时间，请创建。文件中添加 <code>node_modules</code> 目录。</p><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">node_modules</span></span>
<span class="line"></span></code></pre></div><p>现在我们已经创建了 Dockerfile，让我们来构建我们的镜像。为此，我们使用 <code>docker build</code> 命令。Build 命令可以选择使用 <code>--tag</code> 标志。标记用于设置镜像的名称和格式为<code>“name: tag”</code>的可选标记。为了简化问题，我们暂时不使用可选的“标记”。如果没有传递标记，Docker 将使用“latest”作为其默认标记。您将在构建输出的最后一行中看到这一点。</p><p>让我们构建第一个 Docker 镜像。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker build --tag node-docker </span><span style="color:#82AAFF;">.</span></span>
<span class="line"></span></code></pre></div><p>查看本地图片:</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker images</span></span>
<span class="line"></span></code></pre></div><p>镜像由清单和层列表组成。简单地说，“标签”指向这些工件的组合。您可以为一个镜像设置多个标记。让我们为构建的镜像创建第二个标记，并查看其图层。</p><p>要为上面构建的镜像创建新标记，请运行以下命令。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker tag node-docker:latest node-docker:v1.0.0</span></span>
<span class="line"></span></code></pre></div><p>Docker 标记命令为镜像创建一个新标记。它不会创建一个新的镜像。标记指向相同的镜像，只是引用镜像的另一种方式。</p><p>移除刚才创建的标记。为此，我们将使用 <code>rmi</code> 命令。rmi 命令代表“remove image”。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker rmi node-docker:v1.0.0</span></span>
<span class="line"></span></code></pre></div><p>请注意，Docker 的回复告诉我们，镜像没有被删除，只是“未标记”。通过运行 images 命令来验证这一点。</p><p>容器是一个正常的操作系统进程，除了这个进程是独立的，并且有自己的文件系统、自己的网络和独立于主机的独立进程树。</p><p>要在容器中运行映像，我们使用 docker run 命令。Docker run 命令需要一个参数，即图像名称。让我们开始我们的图像，并确保它正确运行。在终端中执行以下命令。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run node-docker</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 为了发布容器的端口，我们将在 docker run 命令上使用 -- publish 标志(简称-p)。--publish 命令的格式是[ host port ] : [ container port ]。因此，如果我们希望将容器内的 port 8000暴露到容器外的 port 3000，我们将传递3000:8000到 --publish 标志。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># docker run --publish 8000:8000 node-docker</span></span>
<span class="line"></span></code></pre></div><p>运行此命令时，您将注意到没有返回到命令提示符。这是因为我们的应用程序是一个 REST 服务器，它将在循环中运行，等待传入的请求，而不将控制返回到操作系统，直到容器停止。</p><p>让我们打开一个新的终端，然后使用 curl 命令向服务器发出 GET 请求。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">curl --request POST \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --url http://localhost:8000/test \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --header </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">content-type: application/json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --data </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">{</span></span>
<span class="line"><span style="color:#C3E88D;">	&quot;msg&quot;: &quot;testing&quot;</span></span>
<span class="line"><span style="color:#C3E88D;">}</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>到目前为止，这是很好的，但是我们的示例应用程序是一个 web 服务器，我们不应该让我们的终端连接到容器。Docker 可以在分离模式或后台运行容器。为此，我们可以使用 --detach 或简称-d。docker尔将启动您的容器与以前相同，但这一次将“分离”从容器和返回到终端提示符。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -d -p 8000:8000 node-docker</span></span>
<span class="line"></span></code></pre></div><p>docker在背景中启动我们的容器，并在码头上打印容器 ID。</p><p>同样，让我们确保容器正常运行。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">curl --request POST \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --url http://localhost:8000/test \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --header </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">content-type: application/json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --data </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">{</span></span>
<span class="line"><span style="color:#C3E88D;">	&quot;msg&quot;: &quot;testing&quot;</span></span>
<span class="line"><span style="color:#C3E88D;">}</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>您可能想知道我们集装箱的名字是从哪里来的。由于在启动容器时没有为它提供名称，因此 Docker 生成了一个随机名称。我们马上就能解决这个问题，但首先我们需要停下集装箱。要停止容器，运行 docker stop 命令，这样做可以停止容器。您将需要传递容器的名称，或者您可以使用容器 id。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker stop </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">container name </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> container id</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><p>可以启动、停止和重新启动 Docker 容器。当我们停止一个容器时，它不会被删除，但是状态会被更改为停止，并且容器内的进程会被停止。当我们运行 <code>docker ps</code> 命令时，默认输出是只显示正在运行的容器。如果我们传递 <code>--all</code> 或简称 <code>-a</code>，我们将看到系统上的所有容器，无论它们是停止还是启动。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker ps -a</span></span>
<span class="line"></span></code></pre></div><p>让我们重新启动刚刚停止的容器。找到我们刚刚停止的容器的名称，并在 restart 命令中替换下面的容器名称。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker restart wonderful_kalam</span></span>
<span class="line"></span></code></pre></div><p>要删除容器，只需运行传递容器名称的 <code>docker rm</code> 命令。可以在一个命令中将多个容器名传递给该命令。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker rm wonderful_kalam agitated_moser goofy_khayyam</span></span>
<span class="line"></span></code></pre></div><p>要命名一个容器，我们只需要将 -- name 标志传递给 run 命令。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -d -p 8000:8000 --name rest-server node-docker</span></span>
<span class="line"></span></code></pre></div><p>在容器中运行 MongoDB 之前，我们希望创建几个卷，Docker 可以管理这些卷来存储持久化数据和配置。让我们使用 docker 提供的托管卷特性，而不是使用绑定挂载。</p><p>现在让我们创建卷，一个用于数据，一个用于 MongoDB 的配置。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker volume create mongodb</span></span>
<span class="line"><span style="color:#A6ACCD;">docker volume create mongodb_config</span></span>
<span class="line"></span></code></pre></div><p>现在，我们将创建一个网络，我们的应用程序和数据库将使用这个网络相互通信。这个网络被称为用户定义的网桥网络，它提供了一个很好的 DNS 查找服务，我们可以在创建连接字符串时使用它。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker network create mongodb</span></span>
<span class="line"></span></code></pre></div><p>现在我们可以在容器中运行 MongoDB，并附加到我们上面创建的卷和网络。Docker 将从 Hub 中提取映像并在本地运行它。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -it --rm -d -v mongodb:/data/db \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -v mongodb_config:/data/configdb -p 27017:27017 \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --network mongodb \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --name mongodb \</span></span>
<span class="line"><span style="color:#A6ACCD;">  mongo</span></span>
<span class="line"><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">好了，现在我们有了一个正在运行的 MongoDB，让我们更新 server.js 来使用 MongoDB 而不是内存中的数据存储。</span></span>
<span class="line"><span style="color:#89DDFF;">```</span><span style="color:#C3E88D;">js</span></span>
<span class="line"><span style="color:#C3E88D;">const ronin     = require</span><span style="color:#89DDFF;">(</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ronin-server</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C3E88D;">const mocks     = require</span><span style="color:#89DDFF;">(</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ronin-mocks</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C3E88D;">const database  = require</span><span style="color:#89DDFF;">(</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ronin-database</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C3E88D;">const server = </span><span style="color:#82AAFF;">ronin.server</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C3E88D;">database.connect</span><span style="color:#89DDFF;">(</span><span style="color:#C3E88D;"> process.<wbr>env.CONNECTIONSTRING </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C3E88D;">server.use</span><span style="color:#89DDFF;">(</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">, mocks.server</span><span style="color:#89DDFF;">(</span><span style="color:#C3E88D;"> </span><span style="color:#82AAFF;">server.Router</span><span style="color:#89DDFF;">()</span><span style="color:#C3E88D;">, false, </span><span style="color:#82AAFF;">false</span><span style="color:#C3E88D;"> ) )</span></span>
<span class="line"><span style="color:#82AAFF;">server.start</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><p>我们添加了 ronin-database 模块，并更新了连接到数据库的代码，并将内存中的标志设置为 false。我们现在需要重建我们的形象，以便它包含我们的变化。</p><p>首先，让我们使用 npm 将 ronin-database 模块添加到应用程序中。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">npm install ronin-database</span></span>
<span class="line"></span></code></pre></div><p>现在我们可以建立我们的形象了。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker build --tag node-docker </span><span style="color:#82AAFF;">.</span></span>
<span class="line"></span></code></pre></div><p>现在，我们来检查一下我们的集装箱。但是这次我们需要设置 CONNECTIONSTRING 环境变量，这样我们的应用程序就知道使用什么连接字符串来访问数据库。我们将在 docker run 命令中执行此操作。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -it --rm -d \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --network mongodb \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --name rest-server \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -p 8000:8000 \</span></span>
<span class="line"><span style="color:#A6ACCD;">  -e CONNECTIONSTRING=mongodb://mongodb:27017/yoda_notes \</span></span>
<span class="line"><span style="color:#A6ACCD;">  node-docker</span></span>
<span class="line"></span></code></pre></div><p>让我们测试一下我们的应用程序是否已连接到数据库，并且能够添加注释。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">curl --request POST \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --url http://localhost:8000/notes \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --header </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">content-type: application/json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --data </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">{</span></span>
<span class="line"><span style="color:#C3E88D;">    &quot;name&quot;: &quot;this is a note&quot;,</span></span>
<span class="line"><span style="color:#C3E88D;">    &quot;text&quot;: &quot;this is a note that I wanted to take while I was working on writing a blog post.&quot;,</span></span>
<span class="line"><span style="color:#C3E88D;">    &quot;owner&quot;: &quot;peter&quot;</span></span>
<span class="line"><span style="color:#C3E88D;">  }</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>在本节中，我们将创建一个 Compose 文件，用一个命令启动 node-docker 和 MongoDB。我们还将设置 Compose 文件以调试模式启动节点 docker，以便将调试器连接到正在运行的节点进程。</p><p>在 IDE 或文本编辑器中打开 notes-service 并创建一个名为 <code>docker-compose.dev.yml</code>.将下面的命令复制并粘贴到文件中。</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3.8</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">notes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">context</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">8000:8000</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">9229:9229</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">SERVER_PORT=8000</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">CONNECTIONSTRING=mongodb://mongo:27017/notes</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./:/app</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">command</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm run debug</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mongo</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mongo:4.2.8</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">27017:27017</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mongodb:/data/db</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mongodb_config:/data/configdb</span></span>
<span class="line"><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mongodb</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mongodb_config</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span></code></pre></div><p>这个撰写文件非常方便，因为我们不必键入所有参数传递给 dockerrun 命令。我们可以在 Compose 文件中以声明方式完成此操作。</p><p>我们公开 <code>port 9229</code>，以便附加调试器。我们还将本地源代码映射到正在运行的容器中，这样我们就可以在文本编辑器中进行更改，并将这些更改提取到容器中</p><p>使用 Compose 文件的另一个非常酷的特性是，我们设置了服务解析来使用服务名称。所以我们现在可以在连接字符串中使用<code>“mongo”</code>。我们使用 mongo 的原因是，我们在 Compose 文件中将 MongoDB 服务命名为“mongo”。</p><p>要在调试模式下启动应用程序，我们需要在 <code>package.json</code> 文件中添加一行代码来告诉 npm 如何在调试模式下启动应用程序。</p><p>打开 package.json 文件，在 scripts 部分添加以下行:</p><div class="language-json"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">debug</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">nodemon --inspect=0.0.0.0:9229 server.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>如你所见，我们将使用 nodemon。Nodemon 以调试模式启动服务器，并监视已更改的文件，然后重新启动服务器。让我们在终端中运行以下命令，将 nodemon 安装到我们的项目目录中。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">npm install nodemon</span></span>
<span class="line"></span></code></pre></div><p>让我们启动应用程序并确认它正常运行。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker-compose -f docker-compose.dev.yml up --build</span></span>
<span class="line"></span></code></pre></div><p>我们传递 <code>--build</code> 标志，这样 Docker 将编译我们的映像，然后启动它。</p><p>现在让我们测试一下 API 端点，运行下面的 curl 命令:</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">curl --request GET --url http://localhost:8000/notes</span></span>
<span class="line"></span></code></pre></div><p>我们将使用 Chrome 浏览器附带的调试器。在你的电脑上打开 Chrome，然后在地址栏输入以下内容。</p><div class="language-json"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">about:inspect</span></span>
<span class="line"></span></code></pre></div><p>单击 <code>Open devilded DevTools for Node</code> 链接。这将打开连接到容器中正在运行的 Node.js 进程的 DevTools。</p><p>让我们更改源代码，然后设置一个断点。在现有 <code>server.use()</code> 语句之上添加以下代码，并保存文件。</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">server</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">use</span><span style="color:#A6ACCD;">( </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> res</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">json</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">foo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bar</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>如果您查看运行 Compose 应用程序的终端，您将看到 nodemon 注意到了这些更改并重新加载了应用程序。</p><p>返回到 chromedevtools 并在包含 <code>return res.json ({“ foo”: “ bar”})</code> 语句的行上设置断点，然后运行以下 curl 命令触发断点。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">curl --request GET --url http://localhost:8000/foo</span></span>
<span class="line"></span></code></pre></div><p>您应该已经看到代码在断点处停止，现在可以像通常一样使用调试器了。您可以检查和监视变量、设置条件断点、视图堆栈跟踪等。</p><p>让我们在应用程序中的./test 目录中定义一个 Mocha 测试。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">mkdir -p </span><span style="color:#82AAFF;">test</span></span>
<span class="line"></span></code></pre></div><p>将下面的代码保存到 <code>./test/test.js</code> 中。</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> assert </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">assert</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">describe</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Array</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">describe</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#indexOf()</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">it</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">should return -1 when the value is not present</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#F07178;">([</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">3</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">indexOf</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">4</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>让我们构建我们的 Docker 映像，并确认一切正常运行。运行以下命令在容器中生成并运行 Docker 映像。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker-compose -f docker-compose.dev.yml up --build</span></span>
<span class="line"></span></code></pre></div><p>现在，让我们通过 post 一个 JSON 有效负载来测试我们的应用程序，然后发出一个 http get 请求，以确保正确地保存了 JSON。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">curl --request POST \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --url http://localhost:8000/test \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --header </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">content-type: application/json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> \</span></span>
<span class="line"><span style="color:#A6ACCD;">  --data </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">{</span></span>
<span class="line"><span style="color:#C3E88D;">    &quot;msg&quot;: &quot;testing&quot;</span></span>
<span class="line"><span style="color:#C3E88D;">  }</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>现在，对同一端点执行 GET 请求，以确保正确保存和检索 JSON 有效负载。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">curl http://localhost:8000/test</span></span>
<span class="line"></span></code></pre></div><p>运行以下命令安装 Mocha 并将其添加到开发者依赖项中:</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">npm install --save-dev mocha</span></span>
<span class="line"></span></code></pre></div><p>好了，现在我们知道应用程序运行正常，让我们尝试在容器中运行测试。我们将使用与上面使用的同一个 docker run 命令，但是这一次，我们将使用 npm run 测试覆盖容器中的 CMD。这将调用 package.json 文件中“ script”部分下的命令。见下文。</p><div class="language-json"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">test</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mocha ./**/*.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">start</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">nodemon --inspect=0.0.0.0:9229 server.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>下面是启动容器和运行测试的 Docker 命令:</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker-compose -f docker-compose.dev.yml run notes npm run </span><span style="color:#82AAFF;">test</span></span>
<span class="line"></span></code></pre></div><p>除了在命令上运行测试外，我们还可以使用多阶段 Dockerfile 在构建映像时运行测试。下面的 Dockerfile 将运行我们的测试并构建我们的生产映像。</p><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># syntax=docker/dockerfile:1</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> node:14.15.4 </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> base</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">WORKDIR</span><span style="color:#A6ACCD;"> /code</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> package.json package.json</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> package-lock.json package-lock.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> base </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> test</span></span>
<span class="line"><span style="color:#F78C6C;">RUN</span><span style="color:#A6ACCD;"> npm ci</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> . .</span></span>
<span class="line"><span style="color:#F78C6C;">CMD</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">&quot;npm&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#C3E88D;">&quot;run&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#C3E88D;">&quot;test&quot;</span><span style="color:#A6ACCD;"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> base </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> prod</span></span>
<span class="line"><span style="color:#F78C6C;">RUN</span><span style="color:#A6ACCD;"> npm ci --production</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> . .</span></span>
<span class="line"><span style="color:#F78C6C;">CMD</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">&quot;node&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#C3E88D;">&quot;server.js&quot;</span><span style="color:#A6ACCD;"> ]</span></span>
<span class="line"></span></code></pre></div><p>我们首先添加一个标签 <code>as base</code> 到 <code>FROM node: 14.15.4</code> 语句。这允许我们在其他构建阶段中引用这个构建阶段。接下来我们添加一个新的构建阶段，标记为 test。我们将使用这个阶段来运行测试。</p><p>现在让我们重新构建映像并运行测试。我们将运行与上面相同的 docker build 命令，但是这次我们将添加 <code>--target test</code> 标志，以便我们专门运行测试构建阶段。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker build -t node-docker --target </span><span style="color:#82AAFF;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">.</span></span>
<span class="line"></span></code></pre></div><p>现在已经构建了测试映像，我们可以在容器中运行它，看看我们的测试是否通过。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -it --rm -p 8000:8000 node-docker</span></span>
<span class="line"></span></code></pre></div><p>这很好，但是目前我们必须运行两个 docker 命令来构建和运行我们的测试。我们可以通过在测试阶段使用 RUN 语句代替 CMD 语句来稍微改进这一点。CMD 语句不会在构建映像期间执行，而是在容器中运行映像时执行。使用 RUN 语句时，我们的测试将在构建映像期间运行，并在构建失败时停止构建。</p><div class="language-docker"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># syntax=docker/dockerfile:1</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> node:14.15.4 </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> base</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">WORKDIR</span><span style="color:#A6ACCD;"> /code</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> package.json package.json</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> package-lock.json package-lock.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> base </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> test</span></span>
<span class="line"><span style="color:#F78C6C;">RUN</span><span style="color:#A6ACCD;"> npm ci</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> . .</span></span>
<span class="line"><span style="color:#F78C6C;">RUN</span><span style="color:#A6ACCD;"> npm run test</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> base </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> prod</span></span>
<span class="line"><span style="color:#F78C6C;">RUN</span><span style="color:#A6ACCD;"> npm ci --production</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#A6ACCD;"> . .</span></span>
<span class="line"><span style="color:#F78C6C;">CMD</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">&quot;node&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#C3E88D;">&quot;server.js&quot;</span><span style="color:#A6ACCD;"> ]</span></span>
<span class="line"></span></code></pre></div><p>现在要运行我们的测试，我们只需要像上面那样运行 docker build 命令。</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docker build -t node-docker --target </span><span style="color:#82AAFF;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">.</span></span>
<span class="line"></span></code></pre></div><h3 id="python" tabindex="-1">Python <a class="header-anchor" href="#python" aria-hidden="true">#</a></h3></div></div></main><footer class="VPDocFooter" data-v-58381ed2 data-v-e3f8b5f2><div class="edit-info" data-v-e3f8b5f2><div class="edit-link" data-v-e3f8b5f2><a class="VPLink link edit-link-button" href="https://github.com/QiYoe/c-blog/edit/master/code/front-end/linux/docker.md" target="_blank" rel="noopener noreferrer" data-v-e3f8b5f2 data-v-3f64d2a0><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-e3f8b5f2><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> 在 GitHub 上编辑此页<!--]--><!----></a></div><div class="last-updated" data-v-e3f8b5f2><p class="VPLastUpdated" data-v-e3f8b5f2 data-v-d64e34d2>最新更新时间: <time datatime="2022-08-24T10:35:05.000Z" data-v-d64e34d2></time></p></div></div><div class="prev-next" data-v-e3f8b5f2><div class="pager" data-v-e3f8b5f2><a class="pager-link prev" href="/code/front-end/linux/nginx.html" data-v-e3f8b5f2><span class="desc" data-v-e3f8b5f2>Previous page</span><span class="title" data-v-e3f8b5f2>Nginx</span></a></div><div class="has-prev pager" data-v-e3f8b5f2><a class="pager-link next" href="/code/front-end/linux/jenkins.html" data-v-e3f8b5f2><span class="desc" data-v-e3f8b5f2>Next page</span><span class="title" data-v-e3f8b5f2>Jenkins</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-6210ecdc data-v-5b5ba6ea><div class="container" data-v-5b5ba6ea><p class="message" data-v-5b5ba6ea>根据 MIT 许可证发布。</p><p class="copyright" data-v-5b5ba6ea>Copyright © 2021-present QiYoe</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"readme.md\":\"b3345323\",\"book_front-end_css-tricks.md\":\"425d1e41\",\"book_front-end_docker-practice.md\":\"0a2b96cf\",\"book_front-end_everything-curl.md\":\"a5f58e44\",\"book_front-end_grokking-algorithms.md\":\"2e59a84c\",\"book_front-end_js-advice.md\":\"e9e34918\",\"book_front-end_pro-git.md\":\"1ee0a4b7\",\"book_front-end_typescript-deep-dive.md\":\"7e437449\",\"book_front-end_typescript-tutorial.md\":\"2e005b4e\",\"book_front-end_you-dont-know-js.md\":\"fc05ad0f\",\"book_quotations.md\":\"134996c2\",\"code_algorithm_leetcode.md\":\"eb7fe2ca\",\"code_algorithm_lodash.md\":\"756d5d52\",\"code_cesium_clb.md\":\"c9e3679f\",\"code_cesium_examples_3dtiles.md\":\"68fd9dcc\",\"code_cesium_examples_3dtilesnext.md\":\"72fb64ed\",\"code_cesium_examples_beginner.md\":\"8e70866e\",\"code_cesium_examples_czml.md\":\"2c300c78\",\"code_cesium_examples_datasources.md\":\"c20060b9\",\"code_cesium_examples_geometries.md\":\"538a6a69\",\"code_cesium_examples_imageryprovider.md\":\"4ae0049a\",\"code_cesium_examples_ionassets.md\":\"07cf88d9\",\"code_cesium_examples_newin1.91.md\":\"05a098ad\",\"code_cesium_examples_postprocessing.md\":\"017fa7a2\",\"code_cesium_examples_tutorials.md\":\"3726f764\",\"code_devops_jira.md\":\"6bb86b8b\",\"code_front-end_ast_index.md\":\"6a3312b6\",\"code_front-end_ast_the-super-tiny-compiler.md\":\"888f36a2\",\"code_front-end_blog-build_aliyun-domin.md\":\"489f7a0d\",\"code_front-end_blog-build_baidu-include.md\":\"7b07d35a\",\"code_front-end_blog-build_index.md\":\"7428248c\",\"code_front-end_blog-build_seo-optimize.md\":\"4cf1e1dd\",\"code_front-end_css_index.md\":\"60f31cd7\",\"code_front-end_css_sass.md\":\"814831b0\",\"code_front-end_css_tailwind.md\":\"95457077\",\"code_front-end_git_advance.md\":\"4bddaaf7\",\"code_front-end_git_flight-rules.md\":\"2a8d2c51\",\"code_front-end_git_index.md\":\"eec6f91c\",\"code_front-end_lint_commitizen.md\":\"c2b149d9\",\"code_front-end_lint_commitlint.md\":\"5a0708cb\",\"code_front-end_lint_husky.md\":\"ae743fed\",\"code_front-end_lint_index.md\":\"4fc06fb7\",\"code_front-end_lint_lint-staged.md\":\"cc91e296\",\"code_front-end_linux_docker.md\":\"17149735\",\"code_front-end_linux_index.md\":\"7e712e64\",\"code_front-end_linux_jenkins.md\":\"8997c05a\",\"code_front-end_linux_kubernetes.md\":\"bbd36cd9\",\"code_front-end_linux_nginx.md\":\"cb5dc49d\",\"code_front-end_swagger-hub_curl.md\":\"c7ad1b5f\",\"code_front-end_swagger-hub_index.md\":\"d2f4ad98\",\"code_front-end_vue_axios.md\":\"ff5813f3\",\"code_front-end_vue_index.md\":\"82c45971\",\"code_front-end_vue_nuxt.md\":\"a5f71b1d\",\"code_front-end_vue_typescript.md\":\"55a1e9ee\",\"code_front-end_vue_vite.md\":\"edcf6bf6\",\"code_front-end_vue_vue-router.md\":\"215d8221\",\"code_front-end_web-container_index.md\":\"1f45df33\",\"code_front-end_websocket_index.md\":\"817f6499\",\"code_other_30-seconds-of-code.md\":\"7ab9c084\",\"code_other_computer-tech.md\":\"a647de4f\",\"code_other_smart-tools.md\":\"4e506145\",\"code_other_vanillawebprojects.md\":\"fb8fb9ad\",\"index.md\":\"762afe16\",\"money_index.md\":\"48b1fb5e\",\"video_index.md\":\"47785d92\"}")</script>
    <script type="module" async src="/assets/app.836e6241.js"></script>
    
  </body>
</html>