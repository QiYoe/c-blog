---
title: æ·±å…¥ç†è§£ TypeScript
head:
  - - meta
    - name: description
      content: TypeScript æ·±å…¥ç†è§£ TS
  - - meta
    - name: keywords
      content: TypeScript æ·±å…¥ç†è§£ TS
---

## TypeScript é¡¹ç›®

### ç¼–è¯‘ä¸Šä¸‹æ–‡

ç¼–è¯‘ä¸Šä¸‹æ–‡ç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒèŠ±å“¨çš„æœ¯è¯­ï¼Œå¯ä»¥ç”¨å®ƒæ¥ç»™æ–‡ä»¶åˆ†ç»„ï¼Œå‘Šè¯‰ TypeScript å“ªäº›æ–‡ä»¶æ˜¯æœ‰æ•ˆçš„ï¼Œå“ªäº›æ˜¯æ— æ•ˆçš„ã€‚é™¤äº†æœ‰æ•ˆæ–‡ä»¶æ‰€æºå¸¦ä¿¡æ¯å¤–ï¼Œç¼–è¯‘ä¸Šä¸‹æ–‡è¿˜åŒ…å«æœ‰æ­£åœ¨è¢«ä½¿ç”¨çš„ç¼–è¯‘é€‰é¡¹çš„ä¿¡æ¯ã€‚å®šä¹‰è¿™ç§é€»è¾‘åˆ†ç»„ï¼Œä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨ `tsconfig.json` æ–‡ä»¶ã€‚

#### tsconfig.json

##### åŸºç¡€

å¼€å§‹ä½¿ç”¨ `tsconfig.json` æ˜¯ä¸€ä»¶æ¯”è¾ƒå®¹æ˜“çš„äº‹ï¼Œä½ ä»…ä»…éœ€è¦å†™ä¸‹ï¼š
```json
{}
```

ä¾‹å¦‚ï¼Œåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç©º JSON æ–‡ä»¶ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒTypeScript å°† ä¼šæŠŠæ­¤ç›®å½•å’Œå­ç›®å½•ä¸‹çš„æ‰€æœ‰ .ts æ–‡ä»¶ä½œä¸ºç¼–è¯‘ä¸Šä¸‹æ–‡çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒè¿˜ä¼šåŒ…å«ä¸€éƒ¨åˆ†é»˜è®¤çš„ç¼–è¯‘é€‰é¡¹ã€‚

##### ç¼–è¯‘é€‰é¡¹

ä½ å¯ä»¥é€šè¿‡ `compilerOptions` æ¥å®šåˆ¶ä½ çš„ç¼–è¯‘é€‰é¡¹ï¼š
```json
{
  "compilerOptions": {

    /* åŸºæœ¬é€‰é¡¹ */
    "target": "es5",                       // æŒ‡å®š ECMAScript ç›®æ ‡ç‰ˆæœ¬: 'ES3' (default), 'ES5', 'ES6'/'ES2015', 'ES2016', 'ES2017', or 'ESNEXT'
    "module": "commonjs",                  // æŒ‡å®šä½¿ç”¨æ¨¡å—: 'commonjs', 'amd', 'system', 'umd' or 'es2015'
    "lib": [],                             // æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶
    "allowJs": true,                       // å…è®¸ç¼–è¯‘ javascript æ–‡ä»¶
    "checkJs": true,                       // æŠ¥å‘Š javascript æ–‡ä»¶ä¸­çš„é”™è¯¯
    "jsx": "preserve",                     // æŒ‡å®š jsx ä»£ç çš„ç”Ÿæˆ: 'preserve', 'react-native', or 'react'
    "declaration": true,                   // ç”Ÿæˆç›¸åº”çš„ '.d.ts' æ–‡ä»¶
    "sourceMap": true,                     // ç”Ÿæˆç›¸åº”çš„ '.map' æ–‡ä»¶
    "outFile": "./",                       // å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶
    "outDir": "./",                        // æŒ‡å®šè¾“å‡ºç›®å½•
    "rootDir": "./",                       // ç”¨æ¥æ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„ --outDir.
    "removeComments": true,                // åˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š
    "noEmit": true,                        // ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶
    "importHelpers": true,                 // ä» tslib å¯¼å…¥è¾…åŠ©å·¥å…·å‡½æ•°
    "isolatedModules": true,               // å°†æ¯ä¸ªæ–‡ä»¶ä½œä¸ºå•ç‹¬çš„æ¨¡å— ï¼ˆä¸ 'ts.transpileModule' ç±»ä¼¼ï¼‰.

    /* ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹ */
    "strict": true,                        // å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹
    "noImplicitAny": true,                 // åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„ anyç±»å‹æ—¶æŠ¥é”™
    "strictNullChecks": true,              // å¯ç”¨ä¸¥æ ¼çš„ null æ£€æŸ¥
    "noImplicitThis": true,                // å½“ this è¡¨è¾¾å¼å€¼ä¸º any ç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯
    "alwaysStrict": true,                  // ä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é‡ŒåŠ å…¥ 'use strict'

    /* é¢å¤–çš„æ£€æŸ¥ */
    "noUnusedLocals": true,                // æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯
    "noUnusedParameters": true,            // æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯
    "noImplicitReturns": true,             // å¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°é‡Œçš„ä»£ç éƒ½æœ‰è¿”å›å€¼æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯
    "noFallthroughCasesInSwitch": true,    // æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰

    /* æ¨¡å—è§£æé€‰é¡¹ */
    "moduleResolution": "node",            // é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼š 'node' (Node.js) or 'classic' (TypeScript pre-1.6)
    "baseUrl": "./",                       // ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•
    "paths": {},                           // æ¨¡å—ååˆ°åŸºäº baseUrl çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨
    "rootDirs": [],                        // æ ¹æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œå…¶ç»„åˆå†…å®¹è¡¨ç¤ºé¡¹ç›®è¿è¡Œæ—¶çš„ç»“æ„å†…å®¹
    "typeRoots": [],                       // åŒ…å«ç±»å‹å£°æ˜çš„æ–‡ä»¶åˆ—è¡¨
    "types": [],                           // éœ€è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨
    "allowSyntheticDefaultImports": true,  // å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚

    /* Source Map Options */
    "sourceRoot": "./",                    // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ° TypeScript æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶çš„ä½ç½®
    "mapRoot": "./",                       // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®
    "inlineSourceMap": true,               // ç”Ÿæˆå•ä¸ª soucemaps æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°† sourcemaps ç”Ÿæˆä¸åŒçš„æ–‡ä»¶
    "inlineSources": true,                 // å°†ä»£ç ä¸ sourcemaps ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚åŒæ—¶è®¾ç½®äº† --inlineSourceMap æˆ– --sourceMap å±æ€§

    /* å…¶ä»–é€‰é¡¹ */
    "experimentalDecorators": true,        // å¯ç”¨è£…é¥°å™¨
    "emitDecoratorMetadata": true          // ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®çš„æ”¯æŒ
  }
}
```

å…³äºè¿™äº›ï¼ˆæˆ–è€…æ›´å¤šï¼‰ç¼–è¯‘é€‰é¡¹ï¼Œç¨åå°†ä¼šè®¨è®ºã€‚

##### TypeScript ç¼–è¯‘

å¥½çš„ IDE æ”¯æŒå¯¹ TypeScript çš„å³æ—¶ç¼–è¯‘ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³åœ¨ä½¿ç”¨ `tsconfig.json` æ—¶ä»å‘½ä»¤è¡Œæ‰‹åŠ¨è¿è¡Œ TypeScript ç¼–è¯‘å™¨ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼š

è¿è¡Œ tscï¼Œå®ƒä¼šåœ¨å½“å‰ç›®å½•æˆ–è€…æ˜¯çˆ¶çº§ç›®å½•å¯»æ‰¾ `tsconfig.json` æ–‡ä»¶ã€‚
è¿è¡Œ `tsc -p ./path-to-project-directory` ã€‚å½“ç„¶ï¼Œè¿™ä¸ªè·¯å¾„å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹äºå½“å‰ç›®å½•çš„ç›¸å¯¹è·¯å¾„ã€‚
ä½ ç”šè‡³å¯ä»¥ä½¿ç”¨ `tsc -w` æ¥å¯ç”¨ TypeScript ç¼–è¯‘å™¨çš„è§‚æµ‹æ¨¡å¼ï¼Œåœ¨æ£€æµ‹åˆ°æ–‡ä»¶æ”¹åŠ¨ä¹‹åï¼Œå®ƒå°†é‡æ–°ç¼–è¯‘ã€‚

#### åˆ¶å®šæ–‡ä»¶

ä½ ä¹Ÿå¯ä»¥æ˜¾å¼æŒ‡å®šéœ€è¦ç¼–è¯‘çš„æ–‡ä»¶ï¼š
```json
{
  "files": [
    "./some/file.ts"
  ]
}
```

ä½ è¿˜å¯ä»¥ä½¿ç”¨ `include` å’Œ `exclude` é€‰é¡¹æ¥æŒ‡å®šéœ€è¦åŒ…å«çš„æ–‡ä»¶å’Œæ’é™¤çš„æ–‡ä»¶ï¼š
```json
{
  "include": [
    "./folder"
  ],
  "exclude": [
    "./folder/**/*.spec.ts",
    "./folder/someSubFolder"
  ]
}
```

:::tip
ä½¿ç”¨ `globs`ï¼š`**/*` ï¼ˆä¸€ä¸ªç¤ºä¾‹ç”¨æ³•ï¼š`some/folder/**/*`ï¼‰æ„å‘³ç€åŒ¹é…æ‰€æœ‰çš„æ–‡ä»¶å¤¹å’Œæ‰€æœ‰æ–‡ä»¶ï¼ˆæ‰©å±•åä¸º `.ts/.tsx`ï¼Œå½“å¼€å¯äº† `allowJs: true` é€‰é¡¹æ—¶ï¼Œæ‰©å±•åå¯ä»¥æ˜¯ `.js/.jsx`ï¼‰ã€‚
:::

### å£°æ˜ç©ºé—´

åœ¨ TypeScript é‡Œå­˜åœ¨ä¸¤ç§å£°æ˜ç©ºé—´ï¼šç±»å‹å£°æ˜ç©ºé—´ä¸å˜é‡å£°æ˜ç©ºé—´ã€‚ä¸‹æ–‡å°†åˆ†åˆ«è®¨è®ºè¿™ä¸¤ä¸ªæ¦‚å¿µã€‚

#### ç±»å‹å£°æ˜ç©ºé—´

ç±»å‹å£°æ˜ç©ºé—´åŒ…å«ç”¨æ¥å½“åšç±»å‹æ³¨è§£çš„å†…å®¹ï¼Œä¾‹å¦‚ä¸‹é¢çš„ç±»å‹å£°æ˜ï¼š
```ts
class Foo {}
interface Bar {}
type Bas = {};
```

ä½ å¯ä»¥å°† `Foo`, `Bar`, `Bas` ä½œä¸ºç±»å‹æ³¨è§£ä½¿ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š
```ts
class Foo {}
interface Bar {}
type Bas = {};
```

æ³¨æ„ï¼Œå°½ç®¡ä½ å®šä¹‰äº† interface Barï¼Œå´å¹¶ä¸èƒ½å¤ŸæŠŠå®ƒä½œä¸ºä¸€ä¸ªå˜é‡æ¥ä½¿ç”¨ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å®šä¹‰åœ¨å˜é‡å£°æ˜ç©ºé—´ä¸­ã€‚
```ts
interface Bar {}
const bar = Bar; // Error: "cannot find name 'Bar'"
```

å‡ºç°é”™è¯¯æç¤ºï¼š `cannot find name 'Bar'` çš„åŸå› æ˜¯åç§° `Bar` å¹¶æœªå®šä¹‰åœ¨å˜é‡å£°æ˜ç©ºé—´ã€‚è¿™å°†å¸¦é¢†æˆ‘ä»¬è¿›å…¥ä¸‹ä¸€ä¸ªä¸»é¢˜ -- å˜é‡å£°æ˜ç©ºé—´ã€‚

#### å˜é‡å£°æ˜ç©ºé—´

å˜é‡å£°æ˜ç©ºé—´åŒ…å«å¯ç”¨ä½œå˜é‡çš„å†…å®¹ï¼Œåœ¨ä¸Šæ–‡ä¸­ `Class Foo` æä¾›äº†ä¸€ä¸ªç±»å‹ `Foo` åˆ°ç±»å‹å£°æ˜ç©ºé—´ï¼Œæ­¤å¤–å®ƒåŒæ ·æä¾›äº†ä¸€ä¸ªå˜é‡ Foo åˆ°å˜é‡å£°æ˜ç©ºé—´ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
```ts
class Foo {}
const someVar = Foo;
const someOtherVar = 123;
```

è¿™å¾ˆæ£’ï¼Œå°¤å…¶æ˜¯å½“ä½ æƒ³æŠŠä¸€ä¸ªç±»æ¥å½“åšå˜é‡ä¼ é€’æ—¶ã€‚

:::warning
æˆ‘ä»¬å¹¶ä¸èƒ½æŠŠä¸€äº›å¦‚ `interface` å®šä¹‰çš„å†…å®¹å½“ä½œå˜é‡ä½¿ç”¨ã€‚
:::

ä¸æ­¤ç›¸ä¼¼ï¼Œä¸€äº›ç”¨ `var` å£°æ˜çš„å˜é‡ï¼Œä¹Ÿåªèƒ½åœ¨å˜é‡å£°æ˜ç©ºé—´ä½¿ç”¨ï¼Œä¸èƒ½ç”¨ä½œç±»å‹æ³¨è§£ã€‚
```ts
const foo = 123;
let bar: foo; // ERROR: "cannot find name 'foo'"
```

æç¤º `ERROR: "cannot find name 'foo'"` åŸå› æ˜¯ï¼Œåç§° foo æ²¡æœ‰å®šä¹‰åœ¨ç±»å‹å£°æ˜ç©ºé—´é‡Œã€‚

### æ¨¡å—

#### å…¨å±€æ¨¡å—

åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ å¼€å§‹åœ¨ä¸€ä¸ªæ–°çš„ TypeScript æ–‡ä»¶ä¸­å†™ä¸‹ä»£ç æ—¶ï¼Œå®ƒå¤„äºå…¨å±€å‘½åç©ºé—´ä¸­ã€‚å¦‚åœ¨ foo.ts é‡Œçš„ä»¥ä¸‹ä»£ç ã€‚
```ts
const foo = 123;
```

å¦‚æœä½ åœ¨ç›¸åŒçš„é¡¹ç›®é‡Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æ–‡ä»¶ bar.tsï¼ŒTypeScript ç±»å‹ç³»ç»Ÿå°†ä¼šå…è®¸ä½ ä½¿ç”¨å˜é‡ fooï¼Œå°±å¥½åƒå®ƒåœ¨å…¨å±€å¯ç”¨ä¸€æ ·ï¼š
```ts
const bar = foo; // allowed
```

æ¯‹åº¸ç½®ç–‘ï¼Œä½¿ç”¨å…¨å±€å˜é‡ç©ºé—´æ˜¯å±é™©çš„ï¼Œå› ä¸ºå®ƒä¼šä¸æ–‡ä»¶å†…çš„ä»£ç å‘½åå†²çªã€‚æˆ‘ä»¬æ¨èä½¿ç”¨ä¸‹æ–‡ä¸­å°†è¦æåˆ°çš„æ–‡ä»¶æ¨¡å—ã€‚

#### æ–‡ä»¶æ¨¡å—

æ–‡ä»¶æ¨¡å—ä¹Ÿè¢«ç§°ä¸ºå¤–éƒ¨æ¨¡å—ã€‚å¦‚æœåœ¨ä½ çš„ TypeScript æ–‡ä»¶çš„æ ¹çº§åˆ«ä½ç½®å«æœ‰ `import` æˆ–è€… `export`ï¼Œé‚£ä¹ˆå®ƒä¼šåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„ä½œç”¨åŸŸã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¸Šæ–‡ `foo.ts` æ”¹æˆå¦‚ä¸‹æ–¹å¼ï¼ˆæ³¨æ„ `export` ç”¨æ³•ï¼‰ï¼š
```ts
export const foo = 123;
```

åœ¨å…¨å±€å‘½åç©ºé—´é‡Œï¼Œæˆ‘ä»¬ä¸å†æœ‰ `foo`ï¼Œè¿™å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ `bar.ts` æ¥è¯æ˜ï¼š
```ts
const bar = foo; // ERROR: "cannot find name 'foo'"
```

å¦‚æœä½ æƒ³åœ¨ `bar.ts` é‡Œä½¿ç”¨æ¥è‡ª `foo.ts` çš„å†…å®¹ï¼Œä½ å¿…é¡»æ˜¾å¼åœ°å¯¼å…¥å®ƒï¼Œæ›´æ–°åçš„ `bar.ts` å¦‚ä¸‹æ‰€ç¤ºã€‚
```ts
import { foo } from './foo';
const bar = foo; // allow
```

åœ¨ `bar.ts` æ–‡ä»¶é‡Œä½¿ç”¨ `import` æ—¶ï¼Œå®ƒä¸ä»…å…è®¸ä½ ä½¿ç”¨ä»å…¶ä»–æ–‡ä»¶å¯¼å…¥çš„å†…å®¹ï¼Œè¿˜ä¼šå°†æ­¤æ–‡ä»¶ `bar.ts` æ ‡è®°ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œæ–‡ä»¶å†…å®šä¹‰çš„å£°æ˜ä¹Ÿä¸ä¼šâ€œæ±¡æŸ“â€å…¨å±€å‘½åç©ºé—´

#### æ–‡ä»¶æ¨¡å—è¯¦æƒ…

æ–‡ä»¶æ¨¡å—æ‹¥æœ‰å¼ºå¤§çš„åŠŸèƒ½å’Œè¾ƒå¼ºçš„å¯ç”¨æ€§ã€‚ä¸‹é¢æˆ‘ä»¬æ¥è®¨è®ºå®ƒçš„åŠŸèƒ½åŠä¸€äº›ç”¨æ³•ã€‚

##### æ¾„æ¸…: commonjs, amd, esmodules, others

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ¾„æ¸…è¿™äº›æ¨¡å—ç³»ç»Ÿçš„ä¸ä¸€è‡´æ€§ã€‚æˆ‘å°†ä¼šæä¾›ç»™ä½ æˆ‘å½“å‰çš„å»ºè®®ï¼Œä»¥åŠæ¶ˆé™¤ä¸€äº›ä½ çš„é¡¾è™‘ã€‚

ä½ å¯ä»¥æ ¹æ®ä¸åŒçš„ `module` é€‰é¡¹æ¥æŠŠ TypeScript ç¼–è¯‘æˆä¸åŒçš„ JavaScript æ¨¡å—ç±»å‹ï¼Œè¿™æœ‰ä¸€äº›ä½ å¯ä»¥å¿½ç•¥çš„ä¸œè¥¿ï¼š
- AMDï¼šä¸è¦ä½¿ç”¨å®ƒï¼Œå®ƒä»…èƒ½åœ¨æµè§ˆå™¨å·¥ä½œï¼›
- SystemJSï¼šè¿™æ˜¯ä¸€ä¸ªå¥½çš„å®éªŒï¼Œå·²ç»è¢« ES æ¨¡å—æ›¿ä»£ï¼›
- ES æ¨¡å—ï¼šå®ƒå¹¶æ²¡æœ‰å‡†å¤‡å¥½ã€‚

ä½¿ç”¨ `module: commonjs` é€‰é¡¹æ¥æ›¿ä»£è¿™äº›æ¨¡å¼ï¼Œå°†ä¼šæ˜¯ä¸€ä¸ªå¥½çš„ä¸»æ„ã€‚

æ€ä¹ˆä¹¦å†™ TypeScript æ¨¡å—å‘¢ï¼Ÿï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä»¶è®©äººå›°æƒ‘çš„äº‹ã€‚åœ¨ä»Šå¤©æˆ‘ä»¬åº”è¯¥è¿™ä¹ˆåšï¼š

- æ”¾å¼ƒä½¿ç”¨ `import/require` è¯­æ³•å³ `import foo = require('foo')` å†™æ³•
- æ¨èä½¿ç”¨ ES æ¨¡å—è¯­æ³•

è¿™å¾ˆé…·ï¼Œæ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ ES æ¨¡å—è¯­æ³•ã€‚

:::tip
ä½¿ç”¨ `module: commonjs` é€‰é¡¹ä»¥åŠä½¿ç”¨ ES æ¨¡å—è¯­æ³•å¯¼å…¥ã€å¯¼å‡ºã€ç¼–å†™æ¨¡å—ã€‚
:::

##### ES æ¨¡å—è¯­æ³•

- ä½¿ç”¨ `export` å…³é”®å­—å¯¼å‡ºä¸€ä¸ªå˜é‡æˆ–ç±»å‹
```ts
// foo.ts
export const someVar = 123;
export type someType = {
  foo: string;
};
```

- `export` çš„å†™æ³•é™¤äº†ä¸Šé¢è¿™ç§ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§ï¼š
```ts
// foo.ts
const someVar = 123;
type someType = {
  type: string;
};

export { someVar, someType };
```

- ä½ ä¹Ÿå¯ä»¥ç”¨é‡å‘½åå˜é‡çš„æ–¹å¼å¯¼å‡ºï¼š
```ts
// foo.ts
const someVar = 123;
export { someVar as aDifferentName };
```

- ä½¿ç”¨ `import` å…³é”®å­—å¯¼å…¥ä¸€ä¸ªå˜é‡æˆ–è€…æ˜¯ä¸€ä¸ªç±»å‹ï¼š
```ts
// bar.ts
import { someVar, someType } from './foo';
```

- é€šè¿‡é‡å‘½åçš„æ–¹å¼å¯¼å…¥å˜é‡æˆ–è€…ç±»å‹ï¼š
```ts
// bar.ts
import { someVar as aDifferentName } from './foo';
```

- é™¤äº†æŒ‡å®šåŠ è½½æŸä¸ªè¾“å‡ºå€¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ•´ä½“åŠ è½½ï¼Œå³ç”¨æ˜Ÿå·ï¼ˆ*ï¼‰æŒ‡å®šä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰è¾“å‡ºå€¼éƒ½åŠ è½½åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šé¢ï¼š
```ts
// bar.ts
import * as foo from './foo';
// ä½ å¯ä»¥ä½¿ç”¨ `foo.someVar` å’Œ `foo.someType` ä»¥åŠå…¶ä»–ä»»ä½•ä» `foo` å¯¼å‡ºçš„å˜é‡æˆ–è€…ç±»å‹
```

- åªå¯¼å…¥æ¨¡å—ï¼š
```ts
import 'core-js'; // ä¸€ä¸ªæ™®é€šçš„ polyfill åº“
```

- ä»å…¶ä»–æ¨¡å—å¯¼å…¥åæ•´ä½“å¯¼å‡ºï¼š
```ts
export * from './foo';
```

- ä»å…¶ä»–æ¨¡å—å¯¼å…¥åï¼Œéƒ¨åˆ†å¯¼å‡ºï¼š
```ts
export { someVar } from './foo';
```

- é€šè¿‡é‡å‘½åï¼Œéƒ¨åˆ†å¯¼å‡ºä»å¦ä¸€ä¸ªæ¨¡å—å¯¼å…¥çš„é¡¹ç›®ï¼š
```ts
export { someVar as aDifferentName } from './foo';
```

###### é»˜è®¤å¯¼å…¥ï¼å¯¼å‡º

æˆ‘å¹¶ä¸å–œæ¬¢ç”¨é»˜è®¤å¯¼å‡ºï¼Œè™½ç„¶æœ‰é»˜è®¤å¯¼å‡ºçš„è¯­æ³•ï¼š
- ä½¿ç”¨ export default
  - åœ¨ä¸€ä¸ªå˜é‡ä¹‹å‰ï¼ˆä¸éœ€è¦ä½¿ç”¨ let/const/varï¼‰ï¼›
  - åœ¨ä¸€ä¸ªå‡½æ•°ä¹‹å‰ï¼›
  - åœ¨ä¸€ä¸ªç±»ä¹‹å‰ã€‚
```ts
// some var
export default (someVar = 123);

// some function
export default function someFunction() {}

// some class
export default class someClass {}
```

- å¯¼å…¥ä½¿ç”¨ `import someName from 'someModule'` è¯­æ³•ï¼ˆä½ å¯ä»¥æ ¹æ®éœ€è¦ä¸ºå¯¼å…¥å‘½åï¼‰ï¼š
```ts
import someLocalNameForThisFile from './foo';
```

##### æ¨¡å—è·¯å¾„

:::tip
å¦‚æœä½ éœ€è¦ä½¿ç”¨ `moduleResolution: node` é€‰é¡¹ï¼Œä½ åº”è¯¥å°†æ­¤é€‰é¡¹æ”¾å…¥ä½ çš„é…ç½®æ–‡ä»¶ä¸­ã€‚å¦‚æœä½ ä½¿ç”¨äº† `module: commonjs` é€‰é¡¹ï¼Œ `moduleResolution: node` å°†ä¼šé»˜è®¤å¼€å¯ã€‚
:::

è¿™é‡Œå­˜åœ¨ä¸¤ç§æˆªç„¶ä¸åŒçš„æ¨¡å—ï¼š
- ç›¸å¯¹æ¨¡å—è·¯å¾„ï¼ˆè·¯å¾„ä»¥ `.` å¼€å¤´ï¼Œä¾‹å¦‚ï¼š`./someFile` æˆ–è€… `../../someFolder/someFile` ç­‰ï¼‰ï¼›
- å…¶ä»–åŠ¨æ€æŸ¥æ‰¾æ¨¡å—ï¼ˆå¦‚ï¼š`core-js`ï¼Œ`typestyle`ï¼Œ`react` æˆ–è€…ç”šè‡³æ˜¯ `react/core` ç­‰ï¼‰ã€‚

å®ƒä»¬çš„ä¸»è¦åŒºåˆ«åœ¨äºç³»ç»Ÿå¦‚ä½•è§£ææ¨¡å—ã€‚

:::tip
æˆ‘å°†ä¼šä½¿ç”¨ä¸€ä¸ªæ¦‚å¿µæ€§æœ¯è¯­ï¼Œ`place` -- å°†åœ¨æåŠæŸ¥æ‰¾æ¨¡å¼åè§£é‡Šå®ƒã€‚
:::

###### ç›¸å¯¹æ¨¡å—è·¯å¾„

è¿™å¾ˆç®€å•ï¼Œä»…ä»…æ˜¯æŒ‰ç…§ç›¸å¯¹è·¯å¾„æ¥å°±å¯ä»¥äº†ï¼š
- å¦‚æœæ–‡ä»¶ `bar.ts` ä¸­å«æœ‰ `import * as foo from './foo'`ï¼Œé‚£ä¹ˆ `foo` æ–‡ä»¶å¿…é¡»ä¸ `bar.ts` æ–‡ä»¶å­˜åœ¨äºç›¸åŒçš„æ–‡ä»¶å¤¹ä¸‹
- å¦‚æœæ–‡ä»¶ `bar.ts` ä¸­å«æœ‰ `import * as foo from '../foo'`ï¼Œé‚£ä¹ˆ `foo` æ–‡ä»¶æ‰€å­˜åœ¨çš„åœ°æ–¹å¿…é¡»æ˜¯ `bar.ts` çš„ä¸Šä¸€çº§ç›®å½•ï¼›
- å¦‚æœæ–‡ä»¶ `bar.ts` ä¸­å«æœ‰ `import * as foo from '../someFolder/foo'`ï¼Œé‚£ä¹ˆ `foo` æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ someFolder å¿…é¡»ä¸ `bar.ts` æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹åœ¨ç›¸åŒçš„ç›®å½•ä¸‹ã€‚

ä½ è¿˜å¯ä»¥æ€è€ƒä¸€ä¸‹å…¶ä»–ç›¸å¯¹è·¯å¾„å¯¼å…¥çš„åœºæ™¯ã€‚ğŸ˜ƒ

###### åŠ¨æ€æŸ¥æ‰¾

å½“å¯¼å…¥è·¯å¾„ä¸æ˜¯ç›¸å¯¹è·¯å¾„æ—¶ï¼Œæ¨¡å—è§£æå°†ä¼šæ¨¡ä»¿ [Node æ¨¡å—è§£æç­–ç•¥](https://nodejs.org/api/modules.html#modules_all_together)ï¼Œä¸‹é¢æˆ‘å°†ç»™å‡ºä¸€ä¸ªç®€å•ä¾‹å­ï¼š
- å½“ä½ ä½¿ç”¨ `import * as foo from 'foo'`ï¼Œå°†ä¼šæŒ‰å¦‚ä¸‹é¡ºåºæŸ¥æ‰¾æ¨¡å—ï¼š
  - `./node_modules/foo`
  - `../node_modules/foo`
  - `../../node_modules/foo`
  - ç›´åˆ°ç³»ç»Ÿçš„æ ¹ç›®å½•
- å½“ä½ ä½¿ç”¨ `import * as foo from 'something/foo'`ï¼Œå°†ä¼šæŒ‰ç…§å¦‚ä¸‹é¡ºåºæŸ¥æ‰¾å†…å®¹
  - `./node_modules/something/foo`
  - `../node_modules/something/foo`
  - `../../node_modules/something/foo`
  - ç›´åˆ°ç³»ç»Ÿçš„æ ¹ç›®å½•

##### ä»€ä¹ˆæ˜¯ `place`

å½“æˆ‘æåŠè¢«æ£€æŸ¥çš„ `place` æ—¶ï¼Œæˆ‘æƒ³è¡¨è¾¾çš„æ˜¯åœ¨è¿™ä¸ª `place` ä¸Šï¼ŒTypeScript å°†ä¼šæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼ˆä¾‹å¦‚ä¸€ä¸ª `foo` çš„ `place`ï¼‰ï¼š
- å¦‚æœè¿™ä¸ª `place` è¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚ï¼š`foo.ts`ï¼Œæ¬¢å‘¼ï¼
- å¦åˆ™ï¼Œå¦‚æœè¿™ä¸ª `place` æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ `foo/index.ts`ï¼Œæ¬¢å‘¼ï¼
- å¦åˆ™ï¼Œå¦‚æœè¿™ä¸ª `place` æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”å­˜åœ¨ä¸€ä¸ª `foo/package.json` æ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­æŒ‡å®š `types` çš„æ–‡ä»¶å­˜åœ¨ï¼Œé‚£ä¹ˆå°±æ¬¢å‘¼ï¼
- å¦åˆ™ï¼Œå¦‚æœè¿™ä¸ª `place` æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”å­˜åœ¨ä¸€ä¸ª `package.json` æ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­æŒ‡å®š `main` çš„æ–‡ä»¶å­˜åœ¨ï¼Œé‚£ä¹ˆå°±æ¬¢å‘¼ï¼

ä»æ–‡ä»¶ç±»å‹ä¸Šæ¥è¯´ï¼Œæˆ‘å®é™…ä¸Šæ˜¯æŒ‡ `.ts`ï¼Œ `.d.ts` æˆ–è€… `.js`

å°±æ˜¯è¿™æ ·ï¼Œç°åœ¨ä½ å·²ç»æ˜¯ä¸€ä¸ªæ¨¡å—æŸ¥æ‰¾ä¸“å®¶ï¼ˆè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå°å°çš„æˆåŠŸï¼‰ã€‚

##### é‡å†™ç±»å‹çš„åŠ¨æ€æŸ¥æ‰¾

åœ¨ä½ çš„é¡¹ç›®é‡Œï¼Œä½ å¯ä»¥é€šè¿‡ `declare module 'somePath'` å£°æ˜ä¸€ä¸ªå…¨å±€æ¨¡å—çš„æ–¹å¼ï¼Œæ¥è§£å†³æŸ¥æ‰¾æ¨¡å—è·¯å¾„çš„é—®é¢˜ã€‚
```ts
// global.d.ts
declare module 'foo' {
  // some variable declarations
  export var bar: number;
}
```

æ¥ç€ ï¼š
```ts
// anyOtherTsFileInYourProject.ts
import * as foo from 'foo';
// TypeScript å°†å‡è®¾ï¼ˆåœ¨æ²¡æœ‰åšå…¶ä»–æŸ¥æ‰¾çš„æƒ…å†µä¸‹ï¼‰
// foo æ˜¯ { bar: number }
```

##### import/require ä»…ä»…æ˜¯å¯¼å…¥ç±»å‹

ä»¥ä¸‹å¯¼å…¥è¯­æ³•ï¼š
```ts
import foo = require('foo');
```

å®ƒå®é™…ä¸Šåªåšäº†ä¸¤ä»¶äº‹ï¼š
- å¯¼å…¥ foo æ¨¡å—çš„æ‰€æœ‰ç±»å‹ä¿¡æ¯ï¼›
- ç¡®å®š foo æ¨¡å—è¿è¡Œæ—¶çš„ä¾èµ–å…³ç³»ã€‚

ä½ å¯ä»¥é€‰æ‹©ä»…åŠ è½½ç±»å‹ä¿¡æ¯ï¼Œè€Œæ²¡æœ‰è¿è¡Œæ—¶çš„ä¾èµ–å…³ç³»ã€‚åœ¨ç»§ç»­ä¹‹å‰ï¼Œä½ å¯èƒ½éœ€è¦é‡æ–°é˜…è¯»æœ¬ä¹¦ [å£°æ˜ç©ºé—´éƒ¨åˆ†](#å£°æ˜ç©ºé—´)ã€‚

å¦‚æœä½ æ²¡æœ‰æŠŠå¯¼å…¥çš„åç§°å½“åšå˜é‡å£°æ˜ç©ºé—´æ¥ç”¨ï¼Œåœ¨ç¼–è¯‘æˆ JavaScript æ—¶ï¼Œå¯¼å…¥çš„æ¨¡å—å°†ä¼šè¢«å®Œå…¨ç§»é™¤ã€‚è¿™æœ€å¥½ç”¨ä¾‹å­æ¥è§£é‡Šï¼Œä¸‹é¢æˆ‘ä»¬å°†ä¼šç»™å‡ºä¸€äº›ç¤ºä¾‹ã€‚

###### ä¾‹å­ 1
```ts
import foo = require('foo');
```

å°†ä¼šç¼–è¯‘æˆ JavaScriptï¼š
```js
```

è¿™æ˜¯æ­£ç¡®çš„ï¼Œä¸€ä¸ªæ²¡æœ‰è¢«ä½¿ç”¨çš„ç©ºæ–‡ä»¶ã€‚

###### ä¾‹å­ 2
```ts
import foo = require('foo');
var bar: foo;
```

å°†ä¼šè¢«ç¼–è¯‘æˆï¼š
```js
let bar;
```

è¿™æ˜¯å› ä¸º foo ï¼ˆæˆ–è€…å…¶ä»–ä»»ä½•å±æ€§å¦‚ï¼š`foo.bas`ï¼‰æ²¡æœ‰è¢«å½“åšä¸€ä¸ªå˜é‡ä½¿ç”¨ã€‚

###### ä¾‹å­ 3
```ts
import foo = require('foo');
const bar = foo;
```

å°†ä¼šè¢«ç¼–è¯‘æˆï¼ˆå‡è®¾æ˜¯ commonjsï¼‰ï¼š
```js
const foo = require('foo');
const bar = foo;
```

è¿™æ˜¯å› ä¸º `foo` è¢«å½“åšå˜é‡ä½¿ç”¨äº†ã€‚

###### ä½¿ç”¨ä¾‹å­ï¼šæ‡’åŠ è½½

ç±»å‹æ¨æ–­éœ€è¦æå‰å®Œæˆï¼Œè¿™æ„å‘³ç€ï¼Œå¦‚æœä½ æƒ³åœ¨ `bar` æ–‡ä»¶é‡Œï¼Œä½¿ç”¨ä»å…¶ä»–æ–‡ä»¶ `foo` å¯¼å‡ºçš„ç±»å‹ï¼Œä½ å°†ä¸å¾—ä¸è¿™ä¹ˆåšï¼š
```ts
import foo = require('foo');
let bar: foo.SomeType;
```

ç„¶è€Œï¼Œåœ¨æŸäº›æƒ…æ™¯ä¸‹ï¼Œä½ åªæƒ³åœ¨éœ€è¦æ—¶åŠ è½½æ¨¡å— `foo`ï¼Œæ­¤æ—¶ä½ éœ€è¦ä»…åœ¨ç±»å‹æ³¨è§£ä¸­ä½¿ç”¨å¯¼å…¥çš„æ¨¡å—åç§°ï¼Œè€Œ**ä¸**æ˜¯åœ¨å˜é‡ä¸­ä½¿ç”¨ã€‚åœ¨ç¼–è¯‘æˆ JavaScript æ—¶ï¼Œè¿™äº›å°†ä¼šè¢«ç§»é™¤ã€‚æ¥ç€ï¼Œä½ å¯ä»¥æ‰‹åŠ¨å¯¼å…¥ä½ éœ€è¦çš„æ¨¡å—ã€‚

ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œè€ƒè™‘ä»¥ä¸‹åŸºäº `commonjs` çš„ä»£ç ï¼Œæˆ‘ä»¬ä»…åœ¨ä¸€ä¸ªå‡½æ•°å†…å¯¼å…¥ `foo` æ¨¡å—ï¼š
```ts
import foo = require('foo');

export function loadFoo() {
  // è¿™æ˜¯æ‡’åŠ è½½ fooï¼ŒåŸå§‹çš„åŠ è½½ä»…ä»…ç”¨æ¥åšç±»å‹æ³¨è§£
  const _foo: typeof foo = require('foo');
  // ç°åœ¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ `_foo` æ›¿ä»£ `foo` æ¥ä½œä¸ºä¸€ä¸ªå˜é‡ä½¿ç”¨
}
```

ä¸€ä¸ªåŒæ ·ç®€å•çš„ `amd` æ¨¡å—ï¼ˆä½¿ç”¨ requirejsï¼‰ï¼š
```ts
import foo = require('foo');

export function loadFoo() {
  // è¿™æ˜¯æ‡’åŠ è½½ fooï¼ŒåŸå§‹çš„åŠ è½½ä»…ä»…ç”¨æ¥åšç±»å‹æ³¨è§£
  require(['foo'], (_foo: typeof foo) => {
    // ç°åœ¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ `_foo` æ›¿ä»£ `foo` æ¥ä½œä¸ºä¸€ä¸ªå˜é‡ä½¿ç”¨
  });
}
```

è¿™äº›é€šå¸¸åœ¨ä»¥ä¸‹æƒ…æ™¯ä½¿ç”¨ï¼š
- åœ¨ web app é‡Œï¼Œ å½“ä½ åœ¨ç‰¹å®šè·¯ç”±ä¸ŠåŠ è½½ JavaScript æ—¶ï¼›
- åœ¨ node åº”ç”¨é‡Œï¼Œå½“ä½ åªæƒ³åŠ è½½ç‰¹å®šæ¨¡å—ï¼Œç”¨æ¥åŠ å¿«å¯åŠ¨é€Ÿåº¦æ—¶ã€‚

###### ä½¿ç”¨ä¾‹å­ï¼šæ‰“ç ´å¾ªç¯ä¾èµ–

ç±»ä¼¼äºæ‡’åŠ è½½çš„ä½¿ç”¨ç”¨ä¾‹ï¼ŒæŸäº›æ¨¡å—åŠ è½½å™¨ï¼ˆcommonjs/node å’Œ amd/requirejsï¼‰ä¸èƒ½å¾ˆå¥½çš„å¤„ç†å¾ªç¯ä¾èµ–ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€æ–¹é¢æˆ‘ä»¬ä½¿ç”¨å»¶è¿ŸåŠ è½½ä»£ç ï¼Œå¹¶åœ¨å¦ä¸€æ–¹é¢é¢„å…ˆåŠ è½½æ¨¡å—æ˜¯å¾ˆå®ç”¨çš„ã€‚

###### ä½¿ç”¨ä¾‹å­ï¼šç¡®ä¿å¯¼å…¥

å½“ä½ åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼Œåªæ˜¯æƒ³å¼•å…¥å…¶é™„åŠ çš„ä½œç”¨ï¼ˆå¦‚ï¼šæ¨¡å—å¯èƒ½ä¼šæ³¨å†Œä¸€äº›åƒ [CodeMirror addons](https://codemirror.net/doc/manual.html#addons)ï¼‰æ—¶ï¼Œç„¶è€Œï¼Œå¦‚æœä½ ä»…ä»…æ˜¯ `import/require` ï¼ˆå¯¼å…¥ï¼‰ä¸€äº›å¹¶æ²¡æœ‰ä¸ä½ çš„æ¨¡å—æˆ–è€…æ¨¡å—åŠ è½½å™¨æœ‰ä»»ä½•ä¾èµ–çš„ JavaScript ä»£ç ï¼Œï¼ˆå¦‚ï¼šwebpackï¼‰ï¼Œç»è¿‡ TypeScript ç¼–è¯‘åï¼Œè¿™äº›å°†ä¼šè¢«å®Œå…¨å¿½è§†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª `ensureImport` å˜é‡ï¼Œæ¥ç¡®ä¿ç¼–è¯‘çš„ JavaScript ä¾èµ–ä¸æ¨¡å—ã€‚å¦‚ï¼š
```ts
import foo = require('./foo');
import bar = require('./bar');
import bas = require('./bas');

const ensureImport: any = foo || bar || bas;
```

#### global.d.ts

åœ¨ä¸Šæ–‡ä¸­ï¼Œå½“æˆ‘ä»¬è®¨è®ºæ–‡ä»¶æ¨¡å—æ—¶ï¼Œæ¯”è¾ƒäº†å…¨å±€å˜é‡ä¸æ–‡ä»¶æ¨¡å—ï¼Œå¹¶ä¸”æˆ‘ä»¬æ¨èä½¿ç”¨åŸºäºæ–‡ä»¶çš„æ¨¡å—ï¼Œè€Œä¸æ˜¯é€‰æ‹©æ±¡æŸ“å…¨å±€å‘½åç©ºé—´ã€‚

ç„¶è€Œï¼Œå¦‚æœä½ çš„å›¢é˜Ÿé‡Œæœ‰ TypeScript åˆå­¦è€…ï¼Œä½ å¯ä»¥æä¾›ä»–ä»¬ä¸€ä¸ª `global.d.ts` æ–‡ä»¶ï¼Œç”¨æ¥å°†ä¸€äº›æ¥å£æˆ–è€…ç±»å‹æ”¾å…¥å…¨å±€å‘½åç©ºé—´é‡Œï¼Œè¿™äº›å®šä¹‰çš„æ¥å£å’Œç±»å‹èƒ½åœ¨ä½ çš„æ‰€æœ‰ TypeScript ä»£ç é‡Œä½¿ç”¨ã€‚

:::tip
å¯¹äºä»»ä½•éœ€è¦ç¼–è¯‘æˆ `JavaScript` çš„ä»£ç ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ æ”¾å…¥æ–‡ä»¶æ¨¡å—é‡Œã€‚
:::

- `global.d.ts` æ˜¯ä¸€ç§æ‰©å…… `lib.d.ts` å¾ˆå¥½çš„æ–¹å¼ï¼Œå¦‚æœä½ éœ€è¦çš„è¯ã€‚
- å½“ä½ ä» `JS` è¿ç§»åˆ° `TS` æ—¶ï¼Œå®šä¹‰ `declare module "some-library-you-dont-care-to-get-defs-for"` èƒ½è®©ä½ å¿«é€Ÿå¼€å§‹ã€‚

### å‘½åç©ºé—´

åœ¨ JavaScript ä½¿ç”¨å‘½åç©ºé—´æ—¶ï¼Œ è¿™æœ‰ä¸€ä¸ªå¸¸ç”¨çš„ã€æ–¹ä¾¿çš„è¯­æ³•ï¼š
```js
(function(something) {
  something.foo = 123;
})(something || (something = {}));
```

`something || (something = {})` å…è®¸åŒ¿åå‡½æ•° `function (something) {}` å‘ç°æœ‰å¯¹è±¡æ·»åŠ å†…å®¹ï¼Œæˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œç„¶åå‘è¯¥å¯¹è±¡æ·»åŠ å†…å®¹ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥æ‹¥æœ‰ä¸¤ä¸ªç”±æŸäº›è¾¹ç•Œæ‹†æˆçš„å—ã€‚
```js
(function(something) {
  something.foo = 123;
})(something || (something = {}));

console.log(something);
// { foo: 123 }

(function(something) {
  something.bar = 456;
})(something || (something = {}));

console.log(something); // { foo: 123, bar: 456 }
```

åœ¨ç¡®ä¿åˆ›å»ºçš„å˜é‡ä¸ä¼šæ³„æ¼è‡³å…¨å±€å‘½åç©ºé—´æ—¶ï¼Œè¿™ç§æ–¹å¼åœ¨ JavaScript ä¸­å¾ˆå¸¸è§ã€‚å½“åŸºäºæ–‡ä»¶æ¨¡å—ä½¿ç”¨æ—¶ï¼Œä½ æ— é¡»æ‹…å¿ƒè¿™ç‚¹ï¼Œä½†æ˜¯è¯¥æ¨¡å¼ä»ç„¶é€‚ç”¨äºä¸€ç»„å‡½æ•°çš„é€»è¾‘åˆ†ç»„ã€‚å› æ­¤ TypeScript æä¾›äº† `namespace` å…³é”®å­—æ¥æè¿°è¿™ç§åˆ†ç»„ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚
```ts
namespace Utility {
  export function log(msg) {
    console.log(msg);
  }
  export function error(msg) {
    console.log(msg);
  }
}

// usage
Utility.log('Call me');
Utility.error('maybe');
```

`namespace` å…³é”®å­—ç¼–è¯‘åçš„ JavaScript ä»£ç ï¼Œä¸æˆ‘ä»¬æ—©äº›æ—¶å€™çœ‹åˆ°çš„ JavaScript ä»£ç ä¸€æ ·ã€‚
```js
var Utility;
(function (Utility) {
  // æ·»åŠ å±æ€§è‡³ Utility
})(Utility || Utility = {});
```

å€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå‘½åç©ºé—´æ˜¯æ”¯æŒåµŒå¥—çš„ã€‚å› æ­¤ï¼Œä½ å¯ä»¥åšä¸€äº›ç±»ä¼¼äºåœ¨ `Utility` å‘½åç©ºé—´ä¸‹åµŒå¥—ä¸€ä¸ªå‘½åç©ºé—´ `Messaging` çš„äº‹æƒ…ã€‚

å¯¹äºå¤§å¤šæ•°é¡¹ç›®ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨å¤–éƒ¨æ¨¡å—å’Œå‘½åç©ºé—´ï¼Œæ¥å¿«é€Ÿæ¼”ç¤ºå’Œç§»æ¤æ—§çš„ JavaScript ä»£ç ã€‚

### åŠ¨æ€å¯¼å…¥è¡¨è¾¾å¼

åŠ¨æ€å¯¼å…¥è¡¨è¾¾å¼æ˜¯ ECMAScript çš„ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œå®ƒå…è®¸ä½ åœ¨ç¨‹åºçš„ä»»æ„ä½ç½®å¼‚æ­¥åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼ŒTC39 JavaScript å§”å‘˜ä¼šæœ‰ä¸€ä¸ªææ¡ˆï¼Œç›®å‰å¤„äºç¬¬å››é˜¶æ®µï¼Œå®ƒè¢«ç§°ä¸º [import() proposal for JavaScript](https://github.com/tc39/proposal-dynamic-import)ã€‚

æ­¤å¤–ï¼Œ**webpack** bundler æœ‰ä¸€ä¸ª `Code Splitting` åŠŸèƒ½ï¼Œå®ƒèƒ½å…è®¸ä½ å°†ä»£ç æ‹†åˆ†ä¸ºè®¸å¤šå—ï¼Œè¿™äº›å—åœ¨å°†æ¥å¯è¢«å¼‚æ­¥ä¸‹è½½ã€‚å› æ­¤ï¼Œä½ å¯ä»¥åœ¨ç¨‹åºä¸­é¦–å…ˆæä¾›ä¸€ä¸ªæœ€å°çš„ç¨‹åºå¯åŠ¨åŒ…ï¼Œå¹¶åœ¨å°†æ¥å¼‚æ­¥åŠ è½½å…¶ä»–æ¨¡å—ã€‚

è¿™å¾ˆè‡ªç„¶å°±ä¼šè®©äººæƒ³åˆ°ï¼ˆå¦‚æœæˆ‘ä»¬å·¥ä½œåœ¨ webpack dev çš„å·¥ä½œæµç¨‹ä¸­ï¼‰[TypeScript 2.4 dynamic import expressions](https://github.com/Microsoft/TypeScript/wiki/What%27s-new-in-TypeScript#dynamic-import-expressions) å°†ä¼šæŠŠä½ æœ€ç»ˆç”Ÿæˆçš„ JavaScript ä»£ç è‡ªåŠ¨åˆ†å‰²æˆå¾ˆå¤šå—ã€‚ä½†æ˜¯è¿™ä¼¼ä¹å¹¶ä¸å®¹æ˜“å®ç°ï¼Œå› ä¸ºå®ƒä¾èµ–äºæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨çš„ `tsconfig.json` é…ç½®æ–‡ä»¶ã€‚

webpack å®ç°ä»£ç åˆ†å‰²çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šä½¿ç”¨ `import()` ï¼ˆé¦–é€‰ï¼ŒECMAScript çš„ææ¡ˆï¼‰å’Œ `require.ensure()` ï¼ˆæœ€åè€ƒè™‘ï¼Œwebpack å…·ä½“å®ç°ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æœŸæœ› TypeScript çš„è¾“å‡ºæ˜¯ä¿ç•™ `import()` è¯­å¥ï¼Œè€Œä¸æ˜¯å°†å…¶è½¬åŒ–ä¸ºå…¶ä»–ä»»ä½•ä»£ç ã€‚

è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ¼”ç¤ºäº†å¦‚ä½•é…ç½® webpack å’Œ TypeScript 2.4 +ã€‚

åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘å¸Œæœ›æ‡’åŠ è½½ `moment` åº“ï¼ŒåŒæ—¶æˆ‘ä¹Ÿå¸Œæœ›ä½¿ç”¨ä»£ç åˆ†å‰²çš„åŠŸèƒ½ï¼Œè¿™æ„å‘³ `moment` ä¼šè¢«åˆ†å‰²åˆ°ä¸€ä¸ªå•ç‹¬çš„ JavaScript æ–‡ä»¶ï¼Œå½“å®ƒè¢«ä½¿ç”¨æ—¶ï¼Œä¼šè¢«å¼‚æ­¥åŠ è½½ã€‚
```ts
import(/* webpackChunkName: "momentjs" */ 'moment')
  .then(moment => {
    // æ‡’åŠ è½½çš„æ¨¡å—æ‹¥æœ‰æ‰€æœ‰çš„ç±»å‹ï¼Œå¹¶ä¸”èƒ½å¤ŸæŒ‰æœŸå·¥ä½œ
    // ç±»å‹æ£€æŸ¥ä¼šå·¥ä½œï¼Œä»£ç å¼•ç”¨ä¹Ÿä¼šå·¥ä½œ  :100:
    const time = moment().format();
    console.log('TypeScript >= 2.4.0 Dynamic Import Expression:');
    console.log(time);
  })
  .catch(err => {
    console.log('Failed to load moment', err);
  });
```

è¿™æ˜¯ `tsconfig.json` çš„é…ç½®æ–‡ä»¶ï¼š
```json
{
  "compilerOptions": {
    "target": "es5",
    "module": "esnext",
    "lib": [
      "dom",
      "es5",
      "scripthost",
      "es2015.promise"
    ],
    "jsx": "react",
    "declaration": false,
    "sourceMap": true,
    "outDir": "./dist/js",
    "strict": true,
    "moduleResolution": "node",
    "typeRoots": [
      "./node_modules/@types"
    ],
    "types": [
      "node",
      "react",
      "react-dom"
    ]
  }
}
```

:::danger
- ä½¿ç”¨ `"module": "esnext"` é€‰é¡¹ï¼šTypeScript ä¿ç•™ `import()` è¯­å¥ï¼Œè¯¥è¯­å¥ç”¨äº Webpack Code Splittingã€‚
- è¿›ä¸€æ­¥äº†è§£æœ‰å…³ä¿¡æ¯ï¼Œæ¨èé˜…è¯»è¿™ç¯‡æ–‡ç« ï¼š[Dynamic Import Expressions and webpack 2 Code Splitting integration with TypeScript 2.4](https://blog.josequinto.com/2017/06/29/dynamic-import-expressions-and-webpack-code-splitting-integration-with-typescript-2-4/).
:::

## TypeScript ç±»å‹ç³»ç»Ÿ

### æ¦‚è§ˆ

#### TypeScript ç±»å‹ç³»ç»Ÿ

TypeScript ç±»å‹ç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®ç‚¹ï¼š
- TypeScript çš„ç±»å‹ç³»ç»Ÿè¢«è®¾è®¡ä¸ºå¯é€‰çš„ï¼Œå› æ­¤ï¼Œä½ çš„ JavaScript å°±æ˜¯ TypeScript;
- TypeScript ä¸ä¼šé˜»æ­¢ JavaScript çš„è¿è¡Œï¼Œå³ä½¿å­˜åœ¨ç±»å‹é”™è¯¯ä¹Ÿä¸ä¾‹å¤–ï¼Œè¿™èƒ½è®©ä½ çš„ JavaScript é€æ­¥è¿ç§»è‡³ TypeScriptã€‚

ç°åœ¨è®©æˆ‘ä»¬å¼€å§‹å­¦ä¹  TypeScript ç±»å‹ç³»ç»Ÿçš„è¯­æ³•å§ï¼Œåœ¨è¿™ä¸€ç« èŠ‚ä¸­ï¼Œä½ å°†èƒ½ç»™ä½ çš„ä»£ç åŠ ä¸Šç±»å‹æ³¨è§£ï¼Œå¹¶ä¸”èƒ½çœ‹åˆ°å®ƒçš„ç›Šå¤„ã€‚è¿™å°†ä¸ºæˆ‘ä»¬è¿›ä¸€æ­¥äº†è§£ç±»å‹ç³»ç»Ÿåšé“ºå«ã€‚

#### åŸºæœ¬æ³¨è§£

å¦‚å‰æ–‡æ‰€æåŠï¼Œç±»å‹æ³¨è§£ä½¿ç”¨ `:TypeAnnotation` è¯­æ³•ã€‚åœ¨ç±»å‹å£°æ˜ç©ºé—´ä¸­å¯ç”¨çš„ä»»ä½•å†…å®¹éƒ½å¯ä»¥ç”¨ä½œç±»å‹æ³¨è§£ã€‚

åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½¿ç”¨äº†å˜é‡ã€å‡½æ•°å‚æ•°ä»¥åŠå‡½æ•°è¿”å›å€¼çš„ç±»å‹æ³¨è§£ï¼š
```ts
const num: number = 123;
function identity(num: number): number {
  return num;
}
```

#### åŸå§‹ç±»å‹

JavaScript åŸå§‹ç±»å‹ä¹ŸåŒæ ·é€‚åº”äº TypeScript çš„ç±»å‹ç³»ç»Ÿï¼Œå› æ­¤ `string`ã€`number`ã€`boolean` ä¹Ÿå¯ä»¥è¢«ç”¨ä½œç±»å‹æ³¨è§£ï¼š
```ts
let num: number;
let str: string;
let bool: boolean;

num = 123;
num = 123.456;
num = '123'; // Error

str = '123';
str = 123; // Error

bool = true;
bool = false;
bool = 'false'; // Error
```

#### æ•°ç»„

TypeScript ä¸ºæ•°ç»„æä¾›äº†ä¸“ç”¨çš„ç±»å‹è¯­æ³•ï¼Œå› æ­¤ä½ å¯ä»¥å¾ˆè½»æ˜“çš„æ³¨è§£æ•°ç»„ã€‚å®ƒä½¿ç”¨åç¼€ `[]`ï¼Œ æ¥ç€ä½ å¯ä»¥æ ¹æ®éœ€è¦è¡¥å……ä»»ä½•æœ‰æ•ˆçš„ç±»å‹æ³¨è§£ï¼ˆå¦‚ï¼š`:boolean[]`ï¼‰ã€‚å®ƒèƒ½è®©ä½ å®‰å…¨çš„ä½¿ç”¨ä»»ä½•æœ‰å…³æ•°ç»„çš„æ“ä½œï¼Œè€Œä¸”å®ƒä¹Ÿèƒ½é˜²æ­¢ä¸€äº›ç±»ä¼¼äºèµ‹å€¼é”™è¯¯ç±»å‹ç»™æˆå‘˜çš„è¡Œä¸ºã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š
```ts
let boolArray: boolean[];

boolArray = [true, false];
console.log(boolArray[0]); // true
console.log(boolArray.length); // 2

boolArray[1] = true;
boolArray = [false, false];

boolArray[0] = 'false'; // Error
boolArray = 'false'; // Error
boolArray = [true, 'false']; // Error
```

#### æ¥å£

æ¥å£æ˜¯ TypeScript çš„ä¸€ä¸ªæ ¸å¿ƒçŸ¥è¯†ï¼Œå®ƒèƒ½åˆå¹¶ä¼—å¤šç±»å‹å£°æ˜è‡³ä¸€ä¸ªç±»å‹å£°æ˜ï¼š
```ts
interface Name {
  first: string;
  second: string;
}

let name: Name;
name = {
  first: 'John',
  second: 'Doe'
};

name = {
  // Error: 'Second is missing'
  first: 'John'
};

name = {
  // Error: 'Second is the wrong type'
  first: 'John',
  second: 1337
};
```

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æŠŠç±»å‹æ³¨è§£ï¼š`first: string` + `second: string` åˆå¹¶åˆ°äº†ä¸€ä¸ªæ–°çš„ç±»å‹æ³¨è§£ `Name` é‡Œï¼Œè¿™æ ·èƒ½å¼ºåˆ¶å¯¹æ¯ä¸ªæˆå‘˜è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚æ¥å£åœ¨ TypeScript æ‹¥æœ‰å¼ºå¤§çš„åŠ›é‡ï¼Œç¨åï¼Œæˆ‘ä»¬å°†ä¼šç”¨ä¸€ä¸ªå†…å®¹ä¸“é—¨é˜è¿°å¦‚ä½•æ›´å¥½çš„ä½¿ç”¨å®ƒã€‚

#### å†…è”ç±»å‹æ³¨è§£

ä¸åˆ›å»ºä¸€ä¸ªæ¥å£ä¸åŒï¼Œä½ å¯ä»¥ä½¿ç”¨å†…è”æ³¨è§£è¯­æ³•æ³¨è§£ä»»ä½•å†…å®¹ï¼š`:{ /*Structure*/ }`ï¼š
```ts
let name: {
  first: string;
  second: string;
};

name = {
  first: 'John',
  second: 'Doe'
};

name = {
  // Error: 'Second is missing'
  first: 'John'
};

name = {
  // Error: 'Second is the wrong type'
  first: 'John',
  second: 1337
};
```

å†…è”ç±»å‹èƒ½ä¸ºä½ å¿«é€Ÿçš„æä¾›ä¸€ä¸ªç±»å‹æ³¨è§£ã€‚å®ƒå¯ä»¥å¸®åŠ©ä½ çœå»ä¸ºç±»å‹èµ·åçš„éº»çƒ¦ï¼ˆä½ å¯èƒ½ä¼šä½¿ç”¨ä¸€ä¸ªå¾ˆç³Ÿç³•çš„åç§°ï¼‰ã€‚ç„¶è€Œï¼Œå¦‚æœä½ å‘ç°éœ€è¦å¤šæ¬¡ä½¿ç”¨ç›¸åŒçš„å†…è”æ³¨è§£æ—¶ï¼Œé‚£ä¹ˆè€ƒè™‘æŠŠå®ƒé‡æ„ä¸ºä¸€ä¸ªæ¥å£ï¼ˆæˆ–è€…æ˜¯ `type alias`ï¼Œå®ƒä¼šåœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†æåˆ°ï¼‰æ˜¯ä¸€ä¸ªä¸é”™çš„ä¸»æ„ã€‚

#### ç‰¹æ®Šç±»å‹

é™¤äº†è¢«æåˆ°çš„ä¸€äº›åŸå§‹ç±»å‹ï¼Œåœ¨ TypeScript ä¸­ï¼Œè¿˜å­˜åœ¨ä¸€äº›ç‰¹æ®Šçš„ç±»å‹ï¼Œå®ƒä»¬æ˜¯ `any`ã€ `null`ã€ `undefined` ä»¥åŠ `void`ã€‚

##### any

`any` ç±»å‹åœ¨ TypeScript ç±»å‹ç³»ç»Ÿä¸­å æœ‰ç‰¹æ®Šçš„åœ°ä½ã€‚å®ƒæä¾›ç»™ä½ ä¸€ä¸ªç±»å‹ç³»ç»Ÿçš„ã€Œåé—¨ã€,TypeScript å°†ä¼šæŠŠç±»å‹æ£€æŸ¥å…³é—­ã€‚åœ¨ç±»å‹ç³»ç»Ÿé‡Œ `any` èƒ½å¤Ÿå…¼å®¹æ‰€æœ‰çš„ç±»å‹ï¼ˆåŒ…æ‹¬å®ƒè‡ªå·±ï¼‰ã€‚å› æ­¤ï¼Œæ‰€æœ‰ç±»å‹éƒ½èƒ½è¢«èµ‹å€¼ç»™å®ƒï¼Œå®ƒä¹Ÿèƒ½è¢«èµ‹å€¼ç»™å…¶ä»–ä»»ä½•ç±»å‹ã€‚ä»¥ä¸‹æœ‰ä¸€ä¸ªè¯æ˜ä¾‹å­ï¼š
```ts
let power: any;

// èµ‹å€¼ä»»æ„ç±»å‹
power = '123';
power = 123;

// å®ƒä¹Ÿå…¼å®¹ä»»ä½•ç±»å‹
let num: number;
power = num;
num = power;
```

å½“ä½ æŠŠ JavaScript è¿ç§»è‡³ TypeScript æ—¶ï¼Œä½ å°†ä¼šç»å¸¸æ€§ä½¿ç”¨ `any`ã€‚ä½†ä½ å¿…é¡»å‡å°‘å¯¹å®ƒçš„ä¾èµ–ï¼Œå› ä¸ºä½ éœ€è¦ç¡®ä¿ç±»å‹å®‰å…¨ã€‚å½“ä½¿ç”¨ `any` æ—¶ï¼Œä½ åŸºæœ¬ä¸Šæ˜¯åœ¨å‘Šè¯‰ TypeScript ç¼–è¯‘å™¨ä¸è¦è¿›è¡Œä»»ä½•çš„ç±»å‹æ£€æŸ¥ã€‚

##### null å’Œ undefined

åœ¨ç±»å‹ç³»ç»Ÿä¸­ï¼ŒJavaScript ä¸­çš„ null å’Œ undefined å­—é¢é‡å’Œå…¶ä»–è¢«æ ‡æ³¨äº† `any` ç±»å‹çš„å˜é‡ä¸€æ ·ï¼Œéƒ½èƒ½è¢«èµ‹å€¼ç»™ä»»æ„ç±»å‹çš„å˜é‡ï¼Œå¦‚ä¸‹ä¾‹å­æ‰€ç¤ºï¼š
```ts
// strictNullChecks: false

let num: number;
let str: string;

// è¿™äº›ç±»å‹èƒ½è¢«èµ‹äºˆ
num = null;
str = undefined;
```

##### void

ä½¿ç”¨ `:void` æ¥è¡¨ç¤ºä¸€ä¸ªå‡½æ•°æ²¡æœ‰ä¸€ä¸ªè¿”å›å€¼
```ts
function log(message: string): void {
  console.log(message);
}
```

#### èŒƒå‹

åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œè®¸å¤šç®—æ³•å’Œæ•°æ®ç»“æ„å¹¶ä¸ä¼šä¾èµ–äºå¯¹è±¡çš„å®é™…ç±»å‹ã€‚ä½†æ˜¯ï¼Œä½ ä»ç„¶ä¼šæƒ³åœ¨æ¯ä¸ªå˜é‡é‡Œå¼ºåˆ¶æä¾›çº¦æŸã€‚ä¾‹å¦‚ï¼šåœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå®ƒæ¥å—ä¸€ä¸ªåˆ—è¡¨ï¼Œå¹¶ä¸”è¿”å›è¿™ä¸ªåˆ—è¡¨çš„åå‘æ’åºï¼Œè¿™é‡Œçš„çº¦æŸæ˜¯æŒ‡ä¼ å…¥è‡³å‡½æ•°çš„å‚æ•°ä¸å‡½æ•°çš„è¿”å›å€¼ï¼š
```ts
function reverse<T>(items: T[]): T[] {
  const toreturn = [];
  for (let i = items.length - 1; i >= 0; i--) {
    toreturn.push(items[i]);
  }
  return toreturn;
}

const sample = [1, 2, 3];
let reversed = reverse(sample);

console.log(reversed); // 3, 2, 1

// Safety
reversed[0] = '1'; // Error
reversed = ['1', '2']; // Error

reversed[0] = 1; // ok
reversed = [1, 2]; // ok
```

åœ¨ä¸Šä¸ªä¾‹å­ä¸­ï¼Œå‡½æ•° `reverse` æ¥å—ä¸€ä¸ªç±»å‹ä¸º `T`ï¼ˆæ³¨æ„åœ¨ `reverse<T>` ä¸­çš„ç±»å‹å‚æ•°ï¼‰ çš„æ•°ç»„ï¼ˆ`items: T[]`ï¼‰ï¼Œè¿”å›å€¼ä¸ºç±»å‹ `T` çš„ä¸€ä¸ªæ•°ç»„ï¼ˆæ³¨æ„ï¼š`T[]`ï¼‰ï¼Œå‡½æ•° `reverse` çš„è¿”å›å€¼ç±»å‹ä¸å®ƒæ¥å—çš„å‚æ•°çš„ç±»å‹ä¸€æ ·ã€‚å½“ä½ ä¼ å…¥ `const sample = [1, 2, 3]` æ—¶ï¼ŒTypeScript èƒ½æ¨æ–­å‡º `reverse` ä¸º `number[]` ç±»å‹ï¼Œä»è€Œèƒ½ç»™ä½ ç±»å‹å®‰å…¨ã€‚ä¸æ­¤ç›¸ä¼¼ï¼Œå½“ä½ ä¼ å…¥ä¸€ä¸ªç±»å‹ä¸º `string[]` ç±»å‹çš„æ•°ç»„æ—¶ï¼ŒTypeScript èƒ½æ¨æ–­ `reverse` ä¸º `string[]` ç±»å‹ï¼Œå¦‚ä¸‹ä¾‹å­æ‰€ç¤ºï¼š
```ts
const strArr = ['1', '2'];
let reversedStrs = reverse(strArr);

reversedStrs = [1, 2]; // Error
```

äº‹å®ä¸Šï¼ŒJavaScript æ•°ç»„å·²ç»æ‹¥æœ‰äº† reverse çš„æ–¹æ³•ï¼ŒTypeScript ä¹Ÿç¡®å®ä½¿ç”¨äº†æ³›å‹æ¥å®šä¹‰å…¶ç»“æ„ï¼š
```ts
interface Array<T> {
  reverse(): T[];
}
```

æ„å‘³ç€ï¼Œå½“ä½ åœ¨æ•°ç»„ä¸Šè°ƒç”¨ `.reverse` æ–¹æ³•æ—¶ï¼Œå°†ä¼šè·å¾—ç±»å‹å®‰å…¨ï¼š
```ts
let numArr = [1, 2];
let reversedNums = numArr.reverse();

reversedNums = ['1', '2']; // Error
```

å½“ç¨ååœ¨ [ç¯å¢ƒå£°æ˜](#ç¯å¢ƒå£°æ˜) ç« èŠ‚ä¸­æåŠ `lib.d.ts` æ—¶ï¼Œæˆ‘ä»¬ä¼šè®¨è®ºæ›´å¤šå…³äº `Array<T>` çš„ä¿¡æ¯ã€‚

#### è”åˆç±»å‹

åœ¨ JavaScript ä¸­ï¼Œä½ å¯èƒ½å¸Œæœ›å±æ€§ä¸ºå¤šç§ç±»å‹ä¹‹ä¸€ï¼Œå¦‚å­—ç¬¦ä¸²æˆ–è€…æ•°ç»„ã€‚è¿™æ­£æ˜¯ TypeScript ä¸­è”åˆç±»å‹èƒ½æ´¾ä¸Šç”¨åœºçš„åœ°æ–¹ï¼ˆå®ƒä½¿ç”¨ `|` ä½œä¸ºæ ‡è®°ï¼Œå¦‚ `string | number`ï¼‰ã€‚å…³äºè”åˆç±»å‹ï¼Œä¸€ä¸ªå¸¸è§çš„ç”¨ä¾‹æ˜¯ä¸€ä¸ªå¯ä»¥æ¥å—å­—ç¬¦ä¸²æ•°ç»„æˆ–å•ä¸ªå­—ç¬¦ä¸²çš„å‡½æ•°ï¼š
```ts
function formatCommandline(command: string[] | string) {
  let line = '';
  if (typeof command === 'string') {
    line = command.trim();
  } else {
    line = command.join(' ').trim();
  }

  // Do stuff with line: string
}
```

#### äº¤å‰ç±»å‹

åœ¨ JavaScript ä¸­ï¼Œ `extend` æ˜¯ä¸€ç§éå¸¸å¸¸è§çš„æ¨¡å¼ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œä½ å¯ä»¥ä»ä¸¤ä¸ªå¯¹è±¡ä¸­åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ–°å¯¹è±¡æ‹¥æœ‰ç€ä¸¤ä¸ªå¯¹è±¡æ‰€æœ‰çš„åŠŸèƒ½ã€‚äº¤å‰ç±»å‹å¯ä»¥è®©ä½ å®‰å…¨çš„ä½¿ç”¨æ­¤ç§æ¨¡å¼ï¼š
```ts
function extend<T extends object, U extends object>(first: T, second: U): T & U {
  const result = <T & U>{};
  for (let id in first) {
    (<T>result)[id] = first[id];
  }
  for (let id in second) {
    if (!result.hasOwnProperty(id)) {
      (<U>result)[id] = second[id];
    }
  }

  return result;
}

const x = extend({ a: 'hello' }, { b: 42 });

// ç°åœ¨ x æ‹¥æœ‰äº† a å±æ€§ä¸ b å±æ€§
const a = x.a;
const b = x.b;
```

#### å…ƒç»„ç±»å‹

JavaScript å¹¶ä¸æ”¯æŒå…ƒç»„ï¼Œå¼€å‘è€…ä»¬é€šå¸¸åªèƒ½ä½¿ç”¨æ•°ç»„æ¥è¡¨ç¤ºå…ƒç»„ã€‚è€Œ TypeScript æ”¯æŒå®ƒï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ `:[typeofmember1, typeofmember2]` çš„å½¢å¼ï¼Œä¸ºå…ƒç»„æ·»åŠ ç±»å‹æ³¨è§£ï¼Œå…ƒç»„å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„æˆå‘˜ï¼Œç¤ºä¾‹ï¼š
```ts
let nameNumber: [string, number];

// Ok
nameNumber = ['Jenny', 221345];

// Error
nameNumber = ['Jenny', '221345'];
```

å°†å…¶ä¸ TypeScript ä¸­çš„è§£æ„ä¸€èµ·ä½¿ç”¨ï¼š
```ts
let nameNumber: [string, number];
nameNumber = ['Jenny', 322134];

const [name, num] = nameNumber;
```

#### ç±»å‹åˆ«å

TypeScript æä¾›äº†ä¸ºç±»å‹æ³¨è§£è®¾ç½®åˆ«åçš„ä¾¿æ·è¯­æ³•ï¼Œä½ å¯ä»¥ä½¿ç”¨ `type SomeName = someValidTypeAnnotation` æ¥åˆ›å»ºåˆ«åï¼š
```ts
type StrOrNum = string | number;

// ä½¿ç”¨
let sample: StrOrNum;
sample = 123;
sample = '123';

// ä¼šæ£€æŸ¥ç±»å‹
sample = true; // Error
```

ä¸æ¥å£ä¸åŒï¼Œä½ å¯ä»¥ä¸ºä»»æ„çš„ç±»å‹æ³¨è§£æä¾›ç±»å‹åˆ«åï¼ˆåœ¨è”åˆç±»å‹å’Œäº¤å‰ç±»å‹ä¸­æ¯”è¾ƒå®ç”¨ï¼‰ï¼Œä¸‹é¢æ˜¯ä¸€äº›èƒ½è®©ä½ ç†Ÿæ‚‰ç±»å‹åˆ«åè¯­æ³•çš„ç¤ºä¾‹ã€‚
```ts
type Text = string | { text: string };
type Coordinates = [number, number];
type Callback = (data: string) => void;
```

:::tip
- å¦‚æœä½ éœ€è¦ä½¿ç”¨ç±»å‹æ³¨è§£çš„å±‚æ¬¡ç»“æ„ï¼Œè¯·ä½¿ç”¨æ¥å£ã€‚å®ƒèƒ½ä½¿ç”¨ `implements` å’Œ `extends`
- ä¸ºä¸€ä¸ªç®€å•çš„å¯¹è±¡ç±»å‹ï¼ˆå¦‚ä¸Šé¢ä¾‹å­ä¸­çš„ Coordinatesï¼‰ä½¿ç”¨ç±»å‹åˆ«åï¼Œåªéœ€è¦ç»™å®ƒä¸€ä¸ªè¯­ä¹‰åŒ–çš„åå­—å³å¯ã€‚å¦å¤–ï¼Œå½“ä½ æƒ³ç»™è”åˆç±»å‹å’Œäº¤å‰ç±»å‹æä¾›ä¸€ä¸ªè¯­ä¹‰åŒ–çš„åç§°æ—¶ï¼Œä¸€ä¸ªç±»å‹åˆ«åå°†ä¼šæ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚
:::

#### æœ€å

ç°åœ¨ä½ å·²ç»èƒ½å¤Ÿä¸ºä½ çš„å¤§éƒ¨åˆ† JavaScript ä»£ç æ·»åŠ ç±»å‹æ³¨è§£ï¼Œæ¥ç€ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ TypeScript çš„ç±»å‹ç³»ç»Ÿå§ã€‚

### ä»JavaScript è¿ç§»

é¦–å…ˆï¼Œå‡è®¾å¦‚ä¸‹ï¼š
- ä½ äº†è§£ JavaScriptï¼›
- ä½ äº†è§£åœ¨é¡¹ç›®ä¸­å¸¸ç”¨çš„æ–¹å¼å’Œæ„å»ºå·¥å…·ï¼ˆå¦‚ï¼šwebpackï¼‰ã€‚

æœ‰äº†ä»¥ä¸Šå‡è®¾ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå°† JavaScript ä»£ç è¿ç§»è‡³ TypeScript åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š
- æ·»åŠ ä¸€ä¸ª `tsconfig.json` æ–‡ä»¶ï¼›
- æŠŠæ–‡ä»¶æ‰©å±•åä» `.js` æ”¹æˆ `.ts`ï¼Œå¼€å§‹ä½¿ç”¨ `any` æ¥å‡å°‘é”™è¯¯ï¼›
- å¼€å§‹åœ¨ TypeScript ä¸­å†™ä»£ç ï¼Œå°½å¯èƒ½çš„å‡å°‘ `any` çš„ä½¿ç”¨ï¼›
- å›åˆ°æ—§ä»£ç ï¼Œå¼€å§‹æ·»åŠ ç±»å‹æ³¨è§£ï¼Œå¹¶ä¿®å¤å·²è¯†åˆ«çš„é”™è¯¯ï¼›
- ä¸ºç¬¬ä¸‰æ–¹ JavaScript ä»£ç å®šä¹‰ç¯å¢ƒå£°æ˜ã€‚

è®©æˆ‘ä»¬è¿›ä¸€æ­¥è®¨è®ºå…¶ä¸­çš„å‡ ä¸ªå…³é”®ç‚¹ã€‚

è®°ä½ï¼šæ‰€æœ‰çš„ JavaScript ä»£ç éƒ½æ˜¯æœ‰æ•ˆçš„ TypeScript ä»£ç ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœè®© TypeScript ç¼–è¯‘å™¨ç¼–è¯‘ TypeScript é‡Œçš„ JavaScript ä»£ç ï¼Œç¼–è¯‘åçš„ç»“æœå°†ä¼šä¸åŸå§‹çš„ JavaScript ä»£ç ä¸€æ¨¡ä¸€æ ·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠŠæ–‡ä»¶æ‰©å±•åä» `.js` æ”¹æˆ `.ts` å°†ä¸ä¼šé€ æˆä»»ä½•è´Ÿé¢çš„å½±å“ã€‚

#### å‡å°‘é”™è¯¯

#### ç¬¬ä¸‰æ–¹ä»£ç 

#### ç¬¬ä¸‰æ–¹çš„ NPM æ¨¡å—

#### é¢å¤–çš„é JavaScript èµ„æº

### @types

### ç¯å¢ƒå£°æ˜

### æ¥å£

### æšä¸¾

### lib.d.ts

### å‡½æ•°

### å¯è°ƒç”¨çš„

### ç±»å‹æ–­è¨€

### Freshness

### ç±»å‹ä¿æŠ¤

### å­—é¢é‡ç±»å‹

### readonly

### èŒƒå‹

### ç±»å‹æ¨æ–­

### ç±»å‹å…¼å®¹æ€§

### Never

### è¾¨æè”åˆç±»å‹

### ç´¢å¼•ç­¾å

### æµåŠ¨çš„ç±»å‹

### å¼‚å¸¸å¤„ç†

### æ··åˆ

### ThisType

## JSX

### æ”¯æŒ JSX

### React JSX

### é React JSX

## TypeScript é”™è¯¯æç¤º

### è§£è¯» Errors

### å¸¸è§çš„ Error

## TIPs

### åŸºäºå­—ç¬¦ä¸²çš„æšä¸¾

### åä¹‰åŒ–ç±»å‹

### çŠ¶æ€å‡½æ•°

### Bind æ˜¯æœ‰å®³çš„

### æŸ¯é‡ŒåŒ–

### èŒƒå‹çš„å®ä¾‹åŒ–ç±»å‹

### å¯¹è±¡å­—é¢é‡çš„æƒ°æ€§åˆå§‹åŒ–

### ç±»æ˜¯æœ‰ç”¨çš„

### export default è¢«è®¤ä¸ºæ˜¯æœ‰å®³çš„

### å‡å°‘ setter å±æ€§çš„ä½¿ç”¨

### åˆ›å»ºæ•°ç»„

### è°¨æ…ä½¿ç”¨ --outFile

### TypeScript ä¸­çš„é™æ€æ„é€ å‡½æ•°

### å•ä¾‹æ¨¡å¼

### å‡½æ•°å‚æ•°

### Truthy

### æ„å»ºåˆ‡æ¢

### ç±»å‹å®‰å…¨çš„ Event Emitter

### Reflect Metadata

### åå˜ä¸é€†å˜

### infer

## TypeScript ç¼–è¯‘åŸç†

### æ¦‚è§ˆ

### ç¨‹åº

### æŠ½è±¡è¯­æ³•æ ‘

### æ‰«æå™¨

### è§£æå™¨

### ç»‘å®šå™¨

### æ£€æŸ¥å™¨

### å‘å°„å™¨

## TypeScript FAQs

### ä¸€äº›å¸¸è§çš„ã€Œbugã€å¹¶ä¸æ˜¯ bug

### ä¸€äº›å¸¸è§çš„ Feature éœ€æ±‚

### ç±»å‹ç³»ç»Ÿçš„è¡Œä¸º

### å‡½æ•°

### ç±»

### èŒƒå‹

### æ¨¡å—

### æšä¸¾

### ç±»å‹å®ˆå«

### JSX å’Œ React

### ä¸€äº›ä¸èƒ½æŒ‰é¢„æœŸå·¥ä½œçš„ä»£ç 

### å‘½ä»¤è¡Œçš„è¡Œä¸º

### tsconfig.json çš„è¡Œä¸º




























<cite>[-- ã€Šæ·±å…¥ç†è§£ TypeScriptã€‹](https://jkchao.github.io/typescript-book-chinese/project/compilationContext.html#tsconfig-json)</cite>
